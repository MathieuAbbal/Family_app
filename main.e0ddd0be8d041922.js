(self.webpackChunkfamilyapp=self.webpackChunkfamilyapp||[]).push([[792],{197(Wy){Wy.exports=function(){"use strict";var $h,Sd,Xi;function Id(v,jo){if($h)if(Sd){var Ve="var sharedChunk = {}; ("+$h+")(sharedChunk); ("+Sd+")(sharedChunk);",vt={};$h(vt),Xi=jo(vt),typeof window<"u"&&(Xi.workerUrl=window.URL.createObjectURL(new Blob([Ve],{type:"text/javascript"})))}else Sd=jo;else $h=jo}return Id(0,function(v){function jo(s,l){return s(l={exports:{}},l.exports),l.exports}var Ve=vt;function vt(s,l,u,m){this.cx=3*s,this.bx=3*(u-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=m,this.p2x=u,this.p2y=m}vt.prototype.sampleCurveX=function(s){return((this.ax*s+this.bx)*s+this.cx)*s},vt.prototype.sampleCurveY=function(s){return((this.ay*s+this.by)*s+this.cy)*s},vt.prototype.sampleCurveDerivativeX=function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},vt.prototype.solveCurveX=function(s,l){var u,m,y,b,E;for(void 0===l&&(l=1e-6),y=s,E=0;E<8;E++){if(b=this.sampleCurveX(y)-s,Math.abs(b)<l)return y;var S=this.sampleCurveDerivativeX(y);if(Math.abs(S)<1e-6)break;y-=b/S}if((y=s)<(u=0))return u;if(y>(m=1))return m;for(;u<m;){if(b=this.sampleCurveX(y),Math.abs(b-s)<l)return y;s>b?u=y:m=y,y=.5*(m-u)+u}return y},vt.prototype.solve=function(s,l){return this.sampleCurveY(this.solveCurveX(s,l))};var Ut=el;function el(s,l){this.x=s,this.y=l}el.prototype={clone:function(){return new el(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,l){return this.clone()._rotateAround(s,l)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var l=s.x-this.x,u=s.y-this.y;return l*l+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,l){return Math.atan2(this.x*l-this.y*s,this.x*s+this.y*l)},_matMult:function(s){var l=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=l,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var l=Math.cos(s),u=Math.sin(s),m=u*this.x+l*this.y;return this.x=l*this.x-u*this.y,this.y=m,this},_rotateAround:function(s,l){var u=Math.cos(s),m=Math.sin(s),y=l.y+m*(this.x-l.x)+u*(this.y-l.y);return this.x=l.x+u*(this.x-l.x)-m*(this.y-l.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},el.convert=function(s){return s instanceof el?s:Array.isArray(s)?new el(s[0],s[1]):s};var pt=typeof self<"u"?self:{},Ol=Math.pow(2,53)-1;function Co(s,l,u,m){var y=new Ve(s,l,u,m);return function(b){return y.solve(b)}}var kc=Co(.25,.1,.25,1);function Qi(s,l,u){return Math.min(u,Math.max(l,s))}function wu(s,l,u){var m=u-l,y=((s-l)%m+m)%m+l;return y===l?u:y}function Oi(s){for(var l=[],u=arguments.length-1;u-- >0;)l[u]=arguments[u+1];for(var m=0,y=l;m<y.length;m+=1){var b=y[m];for(var E in b)s[E]=b[E]}return s}var qh=1;function tl(){return qh++}function Xo(){return function s(l){return l?(l^16*Math.random()>>l/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,s)}()}function xu(s){return!!s&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s)}function va(s,l){s.forEach(function(u){l[u]&&(l[u]=l[u].bind(l))})}function Ac(s,l){return-1!==s.indexOf(l,s.length-l.length)}function Ni(s,l,u){var m={};for(var y in s)m[y]=l.call(u||this,s[y],y,s);return m}function bs(s,l,u){var m={};for(var y in s)l.call(u||this,s[y],y,s)&&(m[y]=s[y]);return m}function Fs(s){return Array.isArray(s)?s.map(Fs):"object"==typeof s&&s?Ni(s,Fs):s}var Nl={};function ur(s){Nl[s]||(typeof console<"u"&&console.warn(s),Nl[s]=!0)}function Do(s,l,u){return(u.y-s.y)*(l.x-s.x)>(l.y-s.y)*(u.x-s.x)}function Tp(s){for(var l=0,u=0,m=s.length,y=m-1,b=void 0,E=void 0;u<m;y=u++)l+=((E=s[y]).x-(b=s[u]).x)*(b.y+E.y);return l}function ws(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ll(s){var l={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(m,y,b,E){var S=b||E;return l[y]=!S||S.toLowerCase(),""}),l["max-age"]){var u=parseInt(l["max-age"],10);isNaN(u)?delete l["max-age"]:l["max-age"]=u}return l}var Eu=null;function ba(s){if(null==Eu){var l=s.navigator?s.navigator.userAgent:null;Eu=!!s.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return Eu}function xs(s){try{var l=pt[s];return l.setItem("_mapbox_test_",1),l.removeItem("_mapbox_test_"),!0}catch{return!1}}var Ji,wa,Rc,Fl,nl=pt.performance&&pt.performance.now?pt.performance.now.bind(pt.performance):Date.now.bind(Date),Sp=pt.requestAnimationFrame||pt.mozRequestAnimationFrame||pt.webkitRequestAnimationFrame||pt.msRequestAnimationFrame,Li=pt.cancelAnimationFrame||pt.mozCancelAnimationFrame||pt.webkitCancelAnimationFrame||pt.msCancelAnimationFrame,rl={now:nl,frame:function(s){var l=Sp(s);return{cancel:function(){return Li(l)}}},getImageData:function(s,l){void 0===l&&(l=0);var u=pt.document.createElement("canvas"),m=u.getContext("2d");if(!m)throw new Error("failed to create canvas 2d context");return u.width=s.width,u.height=s.height,m.drawImage(s,0,0,s.width,s.height),m.getImageData(-l,-l,s.width+2*l,s.height+2*l)},resolveURL:function(s){return Ji||(Ji=pt.document.createElement("a")),Ji.href=s,Ji.href},hardwareConcurrency:pt.navigator&&pt.navigator.hardwareConcurrency||4,get devicePixelRatio(){return pt.devicePixelRatio},get prefersReducedMotion(){return!!pt.matchMedia&&(null==wa&&(wa=pt.matchMedia("(prefers-reduced-motion: reduce)")),wa.matches)}},Jn={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},xa={supported:!1,testSupport:function(s){!il&&Fl&&(Bs?En(s):Rc=s)}},il=!1,Bs=!1;function En(s){var l=s.createTexture();s.bindTexture(s.TEXTURE_2D,l);try{if(s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,Fl),s.isContextLost())return;xa.supported=!0}catch{}s.deleteTexture(l),il=!0}pt.document&&((Fl=pt.document.createElement("img")).onload=function(){Rc&&En(Rc),Rc=null,Bs=!0},Fl.onerror=function(){il=!0,Rc=null},Fl.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Ea="01",To=function(s,l){this._transformRequestFn=s,this._customAccessToken=l,this._createSkuToken()};function Vs(s){return 0===s.indexOf("mapbox:")}To.prototype._createSkuToken=function(){var s=function(){for(var l="",u=0;u<10;u++)l+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ea,l].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=s.token,this._skuTokenExpiresAt=s.tokenExpiresAt},To.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},To.prototype.transformRequest=function(s,l){return this._transformRequestFn&&this._transformRequestFn(s,l)||{url:s}},To.prototype.normalizeStyleURL=function(s,l){if(!Vs(s))return s;var u=Qo(s);return u.path="/styles/v1"+u.path,this._makeAPIURL(u,this._customAccessToken||l)},To.prototype.normalizeGlyphsURL=function(s,l){if(!Vs(s))return s;var u=Qo(s);return u.path="/fonts/v1"+u.path,this._makeAPIURL(u,this._customAccessToken||l)},To.prototype.normalizeSourceURL=function(s,l){if(!Vs(s))return s;var u=Qo(s);return u.path="/v4/"+u.authority+".json",u.params.push("secure"),this._makeAPIURL(u,this._customAccessToken||l)},To.prototype.normalizeSpriteURL=function(s,l,u,m){var y=Qo(s);return Vs(s)?(y.path="/styles/v1"+y.path+"/sprite"+l+u,this._makeAPIURL(y,this._customAccessToken||m)):(y.path+=""+l+u,ol(y))},To.prototype.normalizeTileURL=function(s,l){if(this._isSkuTokenExpired()&&this._createSkuToken(),s&&!Vs(s))return s;var u=Qo(s);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,(rl.devicePixelRatio>=2||512===l?"@2x":"")+(xa.supported?".webp":"$1")),u.path=u.path.replace(/^.+\/v4\//,"/"),u.path="/v4"+u.path;var m=this._customAccessToken||function(y){for(var b=0,E=y;b<E.length;b+=1){var S=E[b].match(/^access_token=(.*)$/);if(S)return S[1]}return null}(u.params)||Jn.ACCESS_TOKEN;return Jn.REQUIRE_ACCESS_TOKEN&&m&&this._skuToken&&u.params.push("sku="+this._skuToken),this._makeAPIURL(u,m)},To.prototype.canonicalizeTileURL=function(s,l){var u=Qo(s);if(!u.path.match(/(^\/v4\/)/)||!u.path.match(/\.[\w]+$/))return s;var m="mapbox://tiles/";m+=u.path.replace("/v4/","");var y=u.params;return l&&(y=y.filter(function(b){return!b.match(/^access_token=/)})),y.length&&(m+="?"+y.join("&")),m},To.prototype.canonicalizeTileset=function(s,l){for(var u=!!l&&Vs(l),m=[],y=0,b=s.tiles||[];y<b.length;y+=1){var E=b[y];Qs(E)?m.push(this.canonicalizeTileURL(E,u)):m.push(E)}return m},To.prototype._makeAPIURL=function(s,l){var u="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",m=Qo(Jn.API_URL);if(s.protocol=m.protocol,s.authority=m.authority,"http"===s.protocol){var y=s.params.indexOf("secure");y>=0&&s.params.splice(y,1)}if("/"!==m.path&&(s.path=""+m.path+s.path),!Jn.REQUIRE_ACCESS_TOKEN)return ol(s);if(!(l=l||Jn.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+u);if("s"===l[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+u);return s.params=s.params.filter(function(b){return-1===b.indexOf("access_token")}),s.params.push("access_token="+l),ol(s)},To.prototype.setTransformRequest=function(s){this._transformRequestFn=s};var Ip=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Qs(s){return Ip.test(s)}var dr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Qo(s){var l=s.match(dr);if(!l)throw new Error("Unable to parse URL object");return{protocol:l[1],authority:l[2],path:l[3]||"/",params:l[4]?l[4].split("&"):[]}}function ol(s){var l=s.params.length?"?"+s.params.join("&"):"";return s.protocol+"://"+s.authority+s.path+l}function sl(s){if(!s)return null;var l=s.split(".");if(!l||3!==l.length)return null;try{return JSON.parse(decodeURIComponent(pt.atob(l[1]).split("").map(function(u){return"%"+("00"+u.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Gn=function(s){this.type=s,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Gn.prototype.getStorageKey=function(s){var l,u=sl(Jn.ACCESS_TOKEN);return l=u&&u.u?pt.btoa(encodeURIComponent(u.u).replace(/%([0-9A-F]{2})/g,function(m,y){return String.fromCharCode(+("0x"+y))})):Jn.ACCESS_TOKEN||"",s?"mapbox.eventData."+s+":"+l:"mapbox.eventData:"+l},Gn.prototype.fetchEventData=function(){var s=xs("localStorage"),l=this.getStorageKey(),u=this.getStorageKey("uuid");if(s)try{var m=pt.localStorage.getItem(l);m&&(this.eventData=JSON.parse(m));var y=pt.localStorage.getItem(u);y&&(this.anonId=y)}catch{ur("Unable to read from LocalStorage")}},Gn.prototype.saveEventData=function(){var s=xs("localStorage"),l=this.getStorageKey(),u=this.getStorageKey("uuid");if(s)try{pt.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&pt.localStorage.setItem(l,JSON.stringify(this.eventData))}catch{ur("Unable to write to LocalStorage")}},Gn.prototype.processRequests=function(s){},Gn.prototype.postEvent=function(s,l,u,m){var y=this;if(Jn.EVENTS_URL){var b=Qo(Jn.EVENTS_URL);b.params.push("access_token="+(m||Jn.ACCESS_TOKEN||""));var E={event:this.type,created:new Date(s).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.15.3",skuId:Ea,userId:this.anonId},S=l?Oi(E,l):E,k={url:ol(b),headers:{"Content-Type":"text/plain"},body:JSON.stringify([S])};this.pendingRequest=F(k,function(R){y.pendingRequest=null,u(R),y.saveEventData(),y.processRequests(m)})}},Gn.prototype.queueRequest=function(s,l){this.queue.push(s),this.processRequests(l)};var Es,Bl,zs=function(s){function l(){s.call(this,"map.load"),this.success={},this.skuToken=""}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.postMapLoadEvent=function(u,m,y,b){this.skuToken=y,(Jn.EVENTS_URL&&b||Jn.ACCESS_TOKEN&&Array.isArray(u)&&u.some(function(E){return Vs(E)||Qs(E)}))&&this.queueRequest({id:m,timestamp:Date.now()},b)},l.prototype.processRequests=function(u){var m=this;if(!this.pendingRequest&&0!==this.queue.length){var y=this.queue.shift(),b=y.id,E=y.timestamp;b&&this.success[b]||(this.anonId||this.fetchEventData(),xu(this.anonId)||(this.anonId=Xo()),this.postEvent(E,{skuToken:this.skuToken},function(S){S||b&&(m.success[b]=!0)},u))}},l}(Gn),Ca=new(function(s){function l(u){s.call(this,"appUserTurnstile"),this._customAccessToken=u}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.postTurnstileEvent=function(u,m){Jn.EVENTS_URL&&Jn.ACCESS_TOKEN&&Array.isArray(u)&&u.some(function(y){return Vs(y)||Qs(y)})&&this.queueRequest(Date.now(),m)},l.prototype.processRequests=function(u){var m=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var y=sl(Jn.ACCESS_TOKEN),b=y?y.u:Jn.ACCESS_TOKEN,E=b!==this.eventData.tokenU;xu(this.anonId)||(this.anonId=Xo(),E=!0);var S=this.queue.shift();if(this.eventData.lastSuccess){var k=new Date(this.eventData.lastSuccess),R=new Date(S),P=(S-this.eventData.lastSuccess)/864e5;E=E||P>=1||P<-1||k.getDate()!==R.getDate()}else E=!0;if(!E)return this.processRequests();this.postEvent(S,{"enabled.telemetry":!1},function(N){N||(m.eventData.lastSuccess=S,m.eventData.tokenU=b)},u)}},l}(Gn)),Mc=Ca.postTurnstileEvent.bind(Ca),Cu=new zs,Da=Cu.postMapLoadEvent.bind(Cu),Du=500,Gh=50;function Tu(){pt.caches&&!Es&&(Es=pt.caches.open("mapbox-tiles"))}function Pc(s){var l=s.indexOf("?");return l<0?s:s.slice(0,l)}var Cs,Vl=1/0;function kd(){return null==Cs&&(Cs=pt.OffscreenCanvas&&new pt.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof pt.createImageBitmap),Cs}var Su={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Su);var Ad=function(s){function l(u,m,y){401===m&&Qs(y)&&(u+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),s.call(this,u),this.status=m,this.url=y,this.name=this.constructor.name,this.message=u}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},l}(Error),al=ws()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===pt.location.protocol?pt.parent:pt).location.href};function zl(s,l){var u,m=new pt.AbortController,y=new pt.Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,referrer:al(),signal:m.signal}),b=!1,E=!1,S=(u=y.url).indexOf("sku=")>0&&Qs(u);"json"===s.type&&y.headers.set("Accept","application/json");var k=function(P,N,V){if(!E){if(P&&"SecurityError"!==P.message&&ur(P),N&&V)return R(N);var H=Date.now();pt.fetch(y).then(function(X){if(X.ok){var Y=S?X.clone():null;return R(X,Y,H)}return l(new Ad(X.statusText,X.status,s.url))}).catch(function(X){20!==X.code&&l(new Error(X.message))})}},R=function(P,N,V){("arrayBuffer"===s.type?P.arrayBuffer():"json"===s.type?P.json():P.text()).then(function(H){E||(N&&V&&function(X,Y,ue){if(Tu(),Es){var le={status:Y.status,statusText:Y.statusText,headers:new pt.Headers};Y.headers.forEach(function(ge,Se){return le.headers.set(Se,ge)});var ye=Ll(Y.headers.get("Cache-Control")||"");ye["no-store"]||(ye["max-age"]&&le.headers.set("Expires",new Date(ue+1e3*ye["max-age"]).toUTCString()),new Date(le.headers.get("Expires")).getTime()-ue<42e4||function(ge,Se){if(void 0===Bl)try{new Response(new ReadableStream),Bl=!0}catch{Bl=!1}Bl?Se(ge.body):ge.blob().then(Se)}(Y,function(ge){var Se=new pt.Response(ge,le);Tu(),Es&&Es.then(function(Ie){return Ie.put(Pc(X.url),Se)}).catch(function(Ie){return ur(Ie.message)})}))}}(y,N,V),b=!0,l(null,H,P.headers.get("Cache-Control"),P.headers.get("Expires")))}).catch(function(H){E||l(new Error(H.message))})};return S?function(P,N){if(Tu(),!Es)return N(null);var V=Pc(P.url);Es.then(function(H){H.match(V).then(function(X){var Y=function(ue){if(!ue)return!1;var le=new Date(ue.headers.get("Expires")||0),ye=Ll(ue.headers.get("Cache-Control")||"");return le>Date.now()&&!ye["no-cache"]}(X);H.delete(V),Y&&H.put(V,X.clone()),N(null,X,Y)}).catch(N)}).catch(N)}(y,k):k(null,null),{cancel:function(){E=!0,b||m.abort()}}}var Ta,Oc,Ul=function(s,l){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){if(ws()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,l);if(!ws()){var u=s.url.substring(0,s.url.indexOf("://"));return(Jn.REGISTERED_PROTOCOLS[u]||zl)(s,l)}}if(!(/^file:/.test(m=s.url)||/^file:/.test(al())&&!/^\w+:/.test(m))){if(pt.fetch&&pt.Request&&pt.AbortController&&pt.Request.prototype.hasOwnProperty("signal"))return zl(s,l);if(ws()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,l,void 0,!0)}var m;return function(y,b){var E=new pt.XMLHttpRequest;for(var S in E.open(y.method||"GET",y.url,!0),"arrayBuffer"===y.type&&(E.responseType="arraybuffer"),y.headers)E.setRequestHeader(S,y.headers[S]);return"json"===y.type&&(E.responseType="text",E.setRequestHeader("Accept","application/json")),E.withCredentials="include"===y.credentials,E.onerror=function(){b(new Error(E.statusText))},E.onload=function(){if((E.status>=200&&E.status<300||0===E.status)&&null!==E.response){var k=E.response;if("json"===y.type)try{k=JSON.parse(E.response)}catch(R){return b(R)}b(null,k,E.getResponseHeader("Cache-Control"),E.getResponseHeader("Expires"))}else b(new Ad(E.statusText,E.status,y.url))},E.send(y.body),{cancel:function(){return E.abort()}}}(s,l)},er=function(s,l){return Ul(Oi(s,{type:"arrayBuffer"}),l)},F=function(s,l){return Ul(Oi(s,{method:"POST"}),l)},z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Ta=[],Oc=0;var U=function(s,l){if(xa.supported&&(s.headers||(s.headers={}),s.headers.accept="image/webp,*/*"),Oc>=Jn.MAX_PARALLEL_IMAGE_REQUESTS){var u={requestParameters:s,callback:l,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ta.push(u),u}Oc++;var m=!1,y=function(){if(!m)for(m=!0,Oc--;Ta.length&&Oc<Jn.MAX_PARALLEL_IMAGE_REQUESTS;){var E=Ta.shift();E.cancelled||(E.cancel=U(E.requestParameters,E.callback).cancel)}},b=er(s,function(E,S,k,R){var N,V;y(),E?l(E):S&&(kd()?(N=l,V=new pt.Blob([new Uint8Array(S)],{type:"image/png"}),pt.createImageBitmap(V).then(function(H){N(null,H)}).catch(function(H){N(new Error("Could not load image because of "+H.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(P,N,V,H){var X=new pt.Image,Y=pt.URL;X.onload=function(){N(null,X),Y.revokeObjectURL(X.src),X.onload=null,pt.requestAnimationFrame(function(){X.src=z})},X.onerror=function(){return N(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ue=new pt.Blob([new Uint8Array(P)],{type:"image/png"});X.cacheControl=V,X.expires=H,X.src=P.byteLength?Y.createObjectURL(ue):z}(S,l,k,R))});return{cancel:function(){b.cancel(),y()}}};function G(s,l,u){u[s]&&-1!==u[s].indexOf(l)||(u[s]=u[s]||[],u[s].push(l))}function te(s,l,u){if(u&&u[s]){var m=u[s].indexOf(l);-1!==m&&u[s].splice(m,1)}}var de=function(s,l){void 0===l&&(l={}),Oi(this,l),this.type=s},me=function(s){function l(u,m){void 0===m&&(m={}),s.call(this,"error",Oi({error:u},m))}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l}(de),K=function(){};K.prototype.on=function(s,l){return this._listeners=this._listeners||{},G(s,l,this._listeners),this},K.prototype.off=function(s,l){return te(s,l,this._listeners),te(s,l,this._oneTimeListeners),this},K.prototype.once=function(s,l){return this._oneTimeListeners=this._oneTimeListeners||{},G(s,l,this._oneTimeListeners),this},K.prototype.fire=function(s,l){"string"==typeof s&&(s=new de(s,l||{}));var u=s.type;if(this.listens(u)){s.target=this;for(var m=0,y=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];m<y.length;m+=1)y[m].call(this,s);for(var b=0,E=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];b<E.length;b+=1){var S=E[b];te(u,S,this._oneTimeListeners),S.call(this,s)}var k=this._eventedParent;k&&(Oi(s,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),k.fire(s))}else s instanceof me&&console.error(s.error);return this},K.prototype.listens=function(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)},K.prototype.setEventedParent=function(s,l){return this._eventedParent=s,this._eventedParentData=l,this};var W={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},re=function(s,l,u,m){this.message=(s?s+": ":"")+u,m&&(this.identifier=m),null!=l&&l.__line__&&(this.line=l.__line__)};function ze(s){var l=s.value;return l?[new re(s.key,l,"constants have been deprecated as of v8")]:[]}function Ke(s){for(var l=[],u=arguments.length-1;u-- >0;)l[u]=arguments[u+1];for(var m=0,y=l;m<y.length;m+=1){var b=y[m];for(var E in b)s[E]=b[E]}return s}function Ce(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function je(s){if(Array.isArray(s))return s.map(je);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){var l={};for(var u in s)l[u]=je(s[u]);return l}return Ce(s)}var st=function(s){function l(u,m){s.call(this,m),this.message=m,this.key=u}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l}(Error),lt=function(s,l){void 0===l&&(l=[]),this.parent=s,this.bindings={};for(var u=0,m=l;u<m.length;u+=1){var y=m[u];this.bindings[y[0]]=y[1]}};lt.prototype.concat=function(s){return new lt(this,s)},lt.prototype.get=function(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(s+" not found in scope.")},lt.prototype.has=function(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)};var gt={kind:"null"},Pe={kind:"number"},et={kind:"string"},Be={kind:"boolean"},Zt={kind:"color"},Kt={kind:"object"},se={kind:"value"},ar={kind:"collator"},Lt={kind:"formatted"},tn={kind:"resolvedImage"};function wr(s,l){return{kind:"array",itemType:s,N:l}}function Pn(s){if("array"===s.kind){var l=Pn(s.itemType);return"number"==typeof s.N?"array<"+l+", "+s.N+">":"value"===s.itemType.kind?"array":"array<"+l+">"}return s.kind}var dt=[gt,Pe,et,Be,Zt,Lt,Kt,wr(se),tn];function Rr(s,l){if("error"===l.kind)return null;if("array"===s.kind){if("array"===l.kind&&(0===l.N&&"value"===l.itemType.kind||!Rr(s.itemType,l.itemType))&&("number"!=typeof s.N||s.N===l.N))return null}else{if(s.kind===l.kind)return null;if("value"===s.kind)for(var u=0,m=dt;u<m.length;u+=1)if(!Rr(m[u],l))return null}return"Expected "+Pn(s)+" but found "+Pn(l)+" instead."}function bn(s,l){return l.some(function(u){return u.kind===s.kind})}function dn(s,l){return l.some(function(u){return"null"===u?null===s:"array"===u?Array.isArray(s):"object"===u?s&&!Array.isArray(s)&&"object"==typeof s:u===typeof s})}var Rd=jo(function(s,l){var u={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function m(S){return(S=Math.round(S))<0?0:S>255?255:S}function y(S){return m("%"===S[S.length-1]?parseFloat(S)/100*255:parseInt(S))}function b(S){return(k="%"===S[S.length-1]?parseFloat(S)/100:parseFloat(S))<0?0:k>1?1:k;var k}function E(S,k,R){return R<0?R+=1:R>1&&(R-=1),6*R<1?S+(k-S)*R*6:2*R<1?k:3*R<2?S+(k-S)*(2/3-R)*6:S}try{l.parseCSSColor=function(S){var k,R=S.replace(/ /g,"").toLowerCase();if(R in u)return u[R].slice();if("#"===R[0])return 4===R.length?(k=parseInt(R.substr(1),16))>=0&&k<=4095?[(3840&k)>>4|(3840&k)>>8,240&k|(240&k)>>4,15&k|(15&k)<<4,1]:null:7===R.length&&(k=parseInt(R.substr(1),16))>=0&&k<=16777215?[(16711680&k)>>16,(65280&k)>>8,255&k,1]:null;var P=R.indexOf("("),N=R.indexOf(")");if(-1!==P&&N+1===R.length){var V=R.substr(0,P),H=R.substr(P+1,N-(P+1)).split(","),X=1;switch(V){case"rgba":if(4!==H.length)return null;X=b(H.pop());case"rgb":return 3!==H.length?null:[y(H[0]),y(H[1]),y(H[2]),X];case"hsla":if(4!==H.length)return null;X=b(H.pop());case"hsl":if(3!==H.length)return null;var Y=(parseFloat(H[0])%360+360)%360/360,ue=b(H[1]),le=b(H[2]),ye=le<=.5?le*(ue+1):le+ue-le*ue,ge=2*le-ye;return[m(255*E(ge,ye,Y+1/3)),m(255*E(ge,ye,Y)),m(255*E(ge,ye,Y-1/3)),X];default:return null}}return null}}catch{}}).parseCSSColor,vn=function(s,l,u,m){void 0===m&&(m=1),this.r=s,this.g=l,this.b=u,this.a=m};vn.parse=function(s){if(s){if(s instanceof vn)return s;if("string"==typeof s){var l=Rd(s);if(l)return new vn(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3])}}},vn.prototype.toString=function(){var s=this.toArray(),l=s[1],u=s[2],m=s[3];return"rgba("+Math.round(s[0])+","+Math.round(l)+","+Math.round(u)+","+m+")"},vn.prototype.toArray=function(){var s=this.a;return 0===s?[0,0,0,0]:[255*this.r/s,255*this.g/s,255*this.b/s,s]},vn.black=new vn(0,0,0,1),vn.white=new vn(1,1,1,1),vn.transparent=new vn(0,0,0,0),vn.red=new vn(1,0,0,1);var Wn=function(s,l,u){this.sensitivity=s?l?"variant":"case":l?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Wn.prototype.compare=function(s,l){return this.collator.compare(s,l)},Wn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var fn=function(s,l,u,m,y){this.text=s,this.image=l,this.scale=u,this.fontStack=m,this.textColor=y},ei=function(s){this.sections=s};ei.fromString=function(s){return new ei([new fn(s,null,null,null,null)])},ei.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(s){return 0!==s.text.length||s.image&&0!==s.image.name.length})},ei.factory=function(s){return s instanceof ei?s:ei.fromString(s)},ei.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(s){return s.text}).join("")},ei.prototype.serialize=function(){for(var s=["format"],l=0,u=this.sections;l<u.length;l+=1){var m=u[l];if(m.image)s.push(["image",m.image.name]);else{s.push(m.text);var y={};m.fontStack&&(y["text-font"]=["literal",m.fontStack.split(",")]),m.scale&&(y["font-scale"]=m.scale),m.textColor&&(y["text-color"]=["rgba"].concat(m.textColor.toArray())),s.push(y)}}return s};var xr=function(s){this.name=s.name,this.available=s.available};function Ig(s,l,u,m){return"number"==typeof s&&s>=0&&s<=255&&"number"==typeof l&&l>=0&&l<=255&&"number"==typeof u&&u>=0&&u<=255?void 0===m||"number"==typeof m&&m>=0&&m<=1?null:"Invalid rgba value ["+[s,l,u,m].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof m?[s,l,u,m]:[s,l,u]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Nc(s){if(null===s||"string"==typeof s||"boolean"==typeof s||"number"==typeof s||s instanceof vn||s instanceof Wn||s instanceof ei||s instanceof xr)return!0;if(Array.isArray(s)){for(var l=0,u=s;l<u.length;l+=1)if(!Nc(u[l]))return!1;return!0}if("object"==typeof s){for(var m in s)if(!Nc(s[m]))return!1;return!0}return!1}function Fi(s){if(null===s)return gt;if("string"==typeof s)return et;if("boolean"==typeof s)return Be;if("number"==typeof s)return Pe;if(s instanceof vn)return Zt;if(s instanceof Wn)return ar;if(s instanceof ei)return Lt;if(s instanceof xr)return tn;if(Array.isArray(s)){for(var l,u=s.length,m=0,y=s;m<y.length;m+=1){var b=Fi(y[m]);if(l){if(l===b)continue;l=se;break}l=b}return wr(l||se,u)}return Kt}function So(s){var l=typeof s;return null===s?"":"string"===l||"number"===l||"boolean"===l?String(s):s instanceof vn||s instanceof ei||s instanceof xr?s.toString():JSON.stringify(s)}xr.prototype.toString=function(){return this.name},xr.fromString=function(s){return s?new xr({name:s,available:!1}):null},xr.prototype.serialize=function(){return["image",this.name]};var Js=function(s,l){this.type=s,this.value=l};Js.parse=function(s,l){if(2!==s.length)return l.error("'literal' expression requires exactly one argument, but found "+(s.length-1)+" instead.");if(!Nc(s[1]))return l.error("invalid value");var u=s[1],m=Fi(u),y=l.expectedType;return"array"!==m.kind||0!==m.N||!y||"array"!==y.kind||"number"==typeof y.N&&0!==y.N||(m=y),new Js(m,u)},Js.prototype.evaluate=function(){return this.value},Js.prototype.eachChild=function(){},Js.prototype.outputDefined=function(){return!0},Js.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof vn?["rgba"].concat(this.value.toArray()):this.value instanceof ei?this.value.serialize():this.value};var Dr=function(s){this.name="ExpressionEvaluationError",this.message=s};Dr.prototype.toJSON=function(){return this.message};var Jo={string:et,number:Pe,boolean:Be,object:Kt},lo=function(s,l){this.type=s,this.args=l};lo.parse=function(s,l){if(s.length<2)return l.error("Expected at least one argument.");var u,m=1,y=s[0];if("array"===y){var b,E;if(s.length>2){var S=s[1];if("string"!=typeof S||!(S in Jo)||"object"===S)return l.error('The item type argument of "array" must be one of string, number, boolean',1);b=Jo[S],m++}else b=se;if(s.length>3){if(null!==s[2]&&("number"!=typeof s[2]||s[2]<0||s[2]!==Math.floor(s[2])))return l.error('The length argument to "array" must be a positive integer literal',2);E=s[2],m++}u=wr(b,E)}else u=Jo[y];for(var k=[];m<s.length;m++){var R=l.parse(s[m],m,se);if(!R)return null;k.push(R)}return new lo(u,k)},lo.prototype.evaluate=function(s){for(var l=0;l<this.args.length;l++){var u=this.args[l].evaluate(s);if(!Rr(this.type,Fi(u)))return u;if(l===this.args.length-1)throw new Dr("Expected value to be of type "+Pn(this.type)+", but found "+Pn(Fi(u))+" instead.")}return null},lo.prototype.eachChild=function(s){this.args.forEach(s)},lo.prototype.outputDefined=function(){return this.args.every(function(s){return s.outputDefined()})},lo.prototype.serialize=function(){var s=this.type,l=[s.kind];if("array"===s.kind){var u=s.itemType;if("string"===u.kind||"number"===u.kind||"boolean"===u.kind){l.push(u.kind);var m=s.N;("number"==typeof m||this.args.length>1)&&l.push(m)}}return l.concat(this.args.map(function(y){return y.serialize()}))};var es=function(s){this.type=Lt,this.sections=s};es.parse=function(s,l){if(s.length<2)return l.error("Expected at least one argument.");var u=s[1];if(!Array.isArray(u)&&"object"==typeof u)return l.error("First argument must be an image or text section.");for(var m=[],y=!1,b=1;b<=s.length-1;++b){var E=s[b];if(y&&"object"==typeof E&&!Array.isArray(E)){y=!1;var S=null;if(E["font-scale"]&&!(S=l.parse(E["font-scale"],1,Pe)))return null;var k=null;if(E["text-font"]&&!(k=l.parse(E["text-font"],1,wr(et))))return null;var R=null;if(E["text-color"]&&!(R=l.parse(E["text-color"],1,Zt)))return null;var P=m[m.length-1];P.scale=S,P.font=k,P.textColor=R}else{var N=l.parse(s[b],1,se);if(!N)return null;var V=N.type.kind;if("string"!==V&&"value"!==V&&"null"!==V&&"resolvedImage"!==V)return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,m.push({content:N,scale:null,font:null,textColor:null})}}return new es(m)},es.prototype.evaluate=function(s){return new ei(this.sections.map(function(l){var u=l.content.evaluate(s);return Fi(u)===tn?new fn("",u,null,null,null):new fn(So(u),null,l.scale?l.scale.evaluate(s):null,l.font?l.font.evaluate(s).join(","):null,l.textColor?l.textColor.evaluate(s):null)}))},es.prototype.eachChild=function(s){for(var l=0,u=this.sections;l<u.length;l+=1){var m=u[l];s(m.content),m.scale&&s(m.scale),m.font&&s(m.font),m.textColor&&s(m.textColor)}},es.prototype.outputDefined=function(){return!1},es.prototype.serialize=function(){for(var s=["format"],l=0,u=this.sections;l<u.length;l+=1){var m=u[l];s.push(m.content.serialize());var y={};m.scale&&(y["font-scale"]=m.scale.serialize()),m.font&&(y["text-font"]=m.font.serialize()),m.textColor&&(y["text-color"]=m.textColor.serialize()),s.push(y)}return s};var jl=function(s){this.type=tn,this.input=s};jl.parse=function(s,l){if(2!==s.length)return l.error("Expected two arguments.");var u=l.parse(s[1],1,et);return u?new jl(u):l.error("No image name provided.")},jl.prototype.evaluate=function(s){var l=this.input.evaluate(s),u=xr.fromString(l);return u&&s.availableImages&&(u.available=s.availableImages.indexOf(l)>-1),u},jl.prototype.eachChild=function(s){s(this.input)},jl.prototype.outputDefined=function(){return!1},jl.prototype.serialize=function(){return["image",this.input.serialize()]};var Zy={"to-boolean":Be,"to-color":Zt,"to-number":Pe,"to-string":et},ea=function(s,l){this.type=s,this.args=l};ea.parse=function(s,l){if(s.length<2)return l.error("Expected at least one argument.");var u=s[0];if(("to-boolean"===u||"to-string"===u)&&2!==s.length)return l.error("Expected one argument.");for(var m=Zy[u],y=[],b=1;b<s.length;b++){var E=l.parse(s[b],b,se);if(!E)return null;y.push(E)}return new ea(m,y)},ea.prototype.evaluate=function(s){if("boolean"===this.type.kind)return!!this.args[0].evaluate(s);if("color"===this.type.kind){for(var l,u,m=0,y=this.args;m<y.length;m+=1){if(u=null,(l=y[m].evaluate(s))instanceof vn)return l;if("string"==typeof l){var b=s.parseColor(l);if(b)return b}else if(Array.isArray(l)&&!(u=l.length<3||l.length>4?"Invalid rbga value "+JSON.stringify(l)+": expected an array containing either three or four numeric values.":Ig(l[0],l[1],l[2],l[3])))return new vn(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Dr(u||"Could not parse color from value '"+("string"==typeof l?l:String(JSON.stringify(l)))+"'")}if("number"===this.type.kind){for(var E=null,S=0,k=this.args;S<k.length;S+=1){if(null===(E=k[S].evaluate(s)))return 0;var R=Number(E);if(!isNaN(R))return R}throw new Dr("Could not convert "+JSON.stringify(E)+" to number.")}return"formatted"===this.type.kind?ei.fromString(So(this.args[0].evaluate(s))):"resolvedImage"===this.type.kind?xr.fromString(So(this.args[0].evaluate(s))):So(this.args[0].evaluate(s))},ea.prototype.eachChild=function(s){this.args.forEach(s)},ea.prototype.outputDefined=function(){return this.args.every(function(s){return s.outputDefined()})},ea.prototype.serialize=function(){if("formatted"===this.type.kind)return new es([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new jl(this.args[0]).serialize();var s=["to-"+this.type.kind];return this.eachChild(function(l){s.push(l.serialize())}),s};var co=["Unknown","Point","LineString","Polygon"],Dt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Dt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Dt.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?co[this.feature.type]:this.feature.type:null},Dt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Dt.prototype.canonicalID=function(){return this.canonical},Dt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Dt.prototype.parseColor=function(s){var l=this._parseColorCache[s];return l||(l=this._parseColorCache[s]=vn.parse(s)),l};var eo=function(s,l,u,m){this.name=s,this.type=l,this._evaluate=u,this.args=m};eo.prototype.evaluate=function(s){return this._evaluate(s,this.args)},eo.prototype.eachChild=function(s){this.args.forEach(s)},eo.prototype.outputDefined=function(){return!1},eo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(s){return s.serialize()}))},eo.parse=function(s,l){var u,m=s[0],y=eo.definitions[m];if(!y)return l.error('Unknown expression "'+m+'". If you wanted a literal array, use ["literal", [...]].',0);for(var b=Array.isArray(y)?y[0]:y.type,E=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,S=E.filter(function(Et){var nt=Et[0];return!Array.isArray(nt)||nt.length===s.length-1}),k=null,R=0,P=S;R<P.length;R+=1){var N=P[R],V=N[0],H=N[1];k=new Ts(l.registry,l.path,null,l.scope);for(var X=[],Y=!1,ue=1;ue<s.length;ue++){var le=s[ue],ye=Array.isArray(V)?V[ue-1]:V.type,ge=k.parse(le,1+X.length,ye);if(!ge){Y=!0;break}X.push(ge)}if(!Y)if(Array.isArray(V)&&V.length!==X.length)k.error("Expected "+V.length+" arguments, but found "+X.length+" instead.");else{for(var Se=0;Se<X.length;Se++){var Ie=Array.isArray(V)?V[Se]:V.type,Oe=X[Se];k.concat(Se+1).checkSubtype(Ie,Oe.type)}if(0===k.errors.length)return new eo(m,b,H,X)}}if(1===S.length)(u=l.errors).push.apply(u,k.errors);else{for(var Ge=(S.length?S:E).map(function(Et){var nt;return nt=Et[0],Array.isArray(nt)?"("+nt.map(Pn).join(", ")+")":"("+Pn(nt.type)+"...)"}).join(" | "),Je=[],mt=1;mt<s.length;mt++){var tt=l.parse(s[mt],1+Je.length);if(!tt)return null;Je.push(Pn(tt.type))}l.error("Expected arguments of type "+Ge+", but found ("+Je.join(", ")+") instead.")}return null},eo.register=function(s,l){for(var u in eo.definitions=l,l)s[u]=eo};var wi=function(s,l,u){this.type=ar,this.locale=u,this.caseSensitive=s,this.diacriticSensitive=l};function Iu(s,l){s[0]=Math.min(s[0],l[0]),s[1]=Math.min(s[1],l[1]),s[2]=Math.max(s[2],l[0]),s[3]=Math.max(s[3],l[1])}function kp(s,l){return!(s[0]<=l[0]||s[2]>=l[2]||s[1]<=l[1]||s[3]>=l[3])}function Sw(s,l){var u=(180+s[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,y=Math.pow(2,l.z);return[Math.round(u*y*8192),Math.round(m*y*8192)]}function Ue(s,l,u){return l[1]>s[1]!=u[1]>s[1]&&s[0]<(u[0]-l[0])*(s[1]-l[1])/(u[1]-l[1])+l[0]}function Lr(s,l){for(var u,m,y,b,E,S,k,R=!1,P=0,N=l.length;P<N;P++)for(var V=l[P],H=0,X=V.length;H<X-1;H++){if((b=(u=s)[0]-(m=V[H])[0])*(k=u[1]-(y=V[H+1])[1])-(S=u[0]-y[0])*(E=u[1]-m[1])==0&&b*S<=0&&E*k<=0)return!1;Ue(s,V[H],V[H+1])&&(R=!R)}return R}function Wh(s,l){for(var u=0;u<l.length;u++)if(Lr(s,l[u]))return!0;return!1}function kg(s,l,u,m){var y=m[0]-u[0],b=m[1]-u[1],E=(s[0]-u[0])*b-y*(s[1]-u[1]),S=(l[0]-u[0])*b-y*(l[1]-u[1]);return E>0&&S<0||E<0&&S>0}function Ky(s,l,u){for(var m=0,y=u;m<y.length;m+=1)for(var b=y[m],E=0;E<b.length-1;++E)if((N=[(P=b[E+1])[0]-(R=b[E])[0],P[1]-R[1]])[0]*(V=[(k=l)[0]-(S=s)[0],k[1]-S[1]])[1]-N[1]*V[0]!=0&&kg(S,k,R,P)&&kg(R,P,S,k))return!0;var S,k,R,P,N,V;return!1}function Ap(s,l){for(var u=0;u<s.length;++u)if(!Lr(s[u],l))return!1;for(var m=0;m<s.length-1;++m)if(Ky(s[m],s[m+1],l))return!1;return!0}function Lc(s,l){for(var u=0;u<l.length;u++)if(Ap(s,l[u]))return!0;return!1}function Fc(s,l,u){for(var m=[],y=0;y<s.length;y++){for(var b=[],E=0;E<s[y].length;E++){var S=Sw(s[y][E],u);Iu(l,S),b.push(S)}m.push(b)}return m}function Bc(s,l,u){for(var m=[],y=0;y<s.length;y++){var b=Fc(s[y],l,u);m.push(b)}return m}function Le(s,l,u,m){if(s[0]<u[0]||s[0]>u[2]){var y=.5*m,b=s[0]-u[0]>y?-m:u[0]-s[0]>y?m:0;0===b&&(b=s[0]-u[2]>y?-m:u[2]-s[0]>y?m:0),s[0]+=b}Iu(l,s)}function ku(s,l,u,m){for(var y=8192*Math.pow(2,m.z),b=[8192*m.x,8192*m.y],E=[],S=0,k=s;S<k.length;S+=1)for(var R=0,P=k[S];R<P.length;R+=1){var N=P[R],V=[N.x+b[0],N.y+b[1]];Le(V,l,u,y),E.push(V)}return E}function Hl(s,l,u,m){for(var y,b=8192*Math.pow(2,m.z),E=[8192*m.x,8192*m.y],S=[],k=0,R=s;k<R.length;k+=1){for(var P=[],N=0,V=R[k];N<V.length;N+=1){var H=V[N],X=[H.x+E[0],H.y+E[1]];Iu(l,X),P.push(X)}S.push(P)}if(l[2]-l[0]<=b/2){(y=l)[0]=y[1]=1/0,y[2]=y[3]=-1/0;for(var Y=0,ue=S;Y<ue.length;Y+=1)for(var le=0,ye=ue[Y];le<ye.length;le+=1)Le(ye[le],l,u,b)}return S}wi.parse=function(s,l){if(2!==s.length)return l.error("Expected one argument.");var u=s[1];if("object"!=typeof u||Array.isArray(u))return l.error("Collator options argument must be an object.");var m=l.parse(void 0!==u["case-sensitive"]&&u["case-sensitive"],1,Be);if(!m)return null;var y=l.parse(void 0!==u["diacritic-sensitive"]&&u["diacritic-sensitive"],1,Be);if(!y)return null;var b=null;return u.locale&&!(b=l.parse(u.locale,1,et))?null:new wi(m,y,b)},wi.prototype.evaluate=function(s){return new Wn(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)},wi.prototype.eachChild=function(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)},wi.prototype.outputDefined=function(){return!1},wi.prototype.serialize=function(){var s={};return s["case-sensitive"]=this.caseSensitive.serialize(),s["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(s.locale=this.locale.serialize()),["collator",s]};var to=function(s,l){this.type=Be,this.geojson=s,this.geometries=l};function Ds(s){if(s instanceof eo&&("get"===s.name&&1===s.args.length||"feature-state"===s.name||"has"===s.name&&1===s.args.length||"properties"===s.name||"geometry-type"===s.name||"id"===s.name||/^filter-/.test(s.name))||s instanceof to)return!1;var l=!0;return s.eachChild(function(u){l&&!Ds(u)&&(l=!1)}),l}function $l(s){if(s instanceof eo&&"feature-state"===s.name)return!1;var l=!0;return s.eachChild(function(u){l&&!$l(u)&&(l=!1)}),l}function Zh(s,l){if(s instanceof eo&&l.indexOf(s.name)>=0)return!1;var u=!0;return s.eachChild(function(m){u&&!Zh(m,l)&&(u=!1)}),u}to.parse=function(s,l){if(2!==s.length)return l.error("'within' expression requires exactly one argument, but found "+(s.length-1)+" instead.");if(Nc(s[1])){var u=s[1];if("FeatureCollection"===u.type)for(var m=0;m<u.features.length;++m){var y=u.features[m].geometry.type;if("Polygon"===y||"MultiPolygon"===y)return new to(u,u.features[m].geometry)}else if("Feature"===u.type){var b=u.geometry.type;if("Polygon"===b||"MultiPolygon"===b)return new to(u,u.geometry)}else if("Polygon"===u.type||"MultiPolygon"===u.type)return new to(u,u)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")},to.prototype.evaluate=function(s){if(null!=s.geometry()&&null!=s.canonicalID()){if("Point"===s.geometryType())return function(l,u){var m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],b=l.canonicalID();if("Polygon"===u.type){var E=Fc(u.coordinates,y,b),S=ku(l.geometry(),m,y,b);if(!kp(m,y))return!1;for(var k=0,R=S;k<R.length;k+=1)if(!Lr(R[k],E))return!1}if("MultiPolygon"===u.type){var P=Bc(u.coordinates,y,b),N=ku(l.geometry(),m,y,b);if(!kp(m,y))return!1;for(var V=0,H=N;V<H.length;V+=1)if(!Wh(H[V],P))return!1}return!0}(s,this.geometries);if("LineString"===s.geometryType())return function(l,u){var m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],b=l.canonicalID();if("Polygon"===u.type){var E=Fc(u.coordinates,y,b),S=Hl(l.geometry(),m,y,b);if(!kp(m,y))return!1;for(var k=0,R=S;k<R.length;k+=1)if(!Ap(R[k],E))return!1}if("MultiPolygon"===u.type){var P=Bc(u.coordinates,y,b),N=Hl(l.geometry(),m,y,b);if(!kp(m,y))return!1;for(var V=0,H=N;V<H.length;V+=1)if(!Lc(H[V],P))return!1}return!0}(s,this.geometries)}return!1},to.prototype.eachChild=function(){},to.prototype.outputDefined=function(){return!0},to.prototype.serialize=function(){return["within",this.geojson]};var ql=function(s,l){this.type=l.type,this.name=s,this.boundExpression=l};ql.parse=function(s,l){if(2!==s.length||"string"!=typeof s[1])return l.error("'var' expression requires exactly one string literal argument.");var u=s[1];return l.scope.has(u)?new ql(u,l.scope.get(u)):l.error('Unknown variable "'+u+'". Make sure "'+u+'" has been bound in an enclosing "let" expression before using it.',1)},ql.prototype.evaluate=function(s){return this.boundExpression.evaluate(s)},ql.prototype.eachChild=function(){},ql.prototype.outputDefined=function(){return!1},ql.prototype.serialize=function(){return["var",this.name]};var Ts=function(s,l,u,m,y){void 0===l&&(l=[]),void 0===m&&(m=new lt),void 0===y&&(y=[]),this.registry=s,this.path=l,this.key=l.map(function(b){return"["+b+"]"}).join(""),this.scope=m,this.errors=y,this.expectedType=u};function Gl(s,l){for(var u,m=s.length-1,y=0,b=m,E=0;y<=b;)if((u=s[E=Math.floor((y+b)/2)])<=l){if(E===m||l<s[E+1])return E;y=E+1}else{if(!(u>l))throw new Dr("Input is not a number.");b=E-1}return 0}Ts.prototype.parse=function(s,l,u,m,y){return void 0===y&&(y={}),l?this.concat(l,u,m)._parse(s,y):this._parse(s,y)},Ts.prototype._parse=function(s,l){function u(R,P,N){return"assert"===N?new lo(P,[R]):"coerce"===N?new ea(P,[R]):R}if(null!==s&&"string"!=typeof s&&"boolean"!=typeof s&&"number"!=typeof s||(s=["literal",s]),Array.isArray(s)){if(0===s.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var m=s[0];if("string"!=typeof m)return this.error("Expression name must be a string, but found "+typeof m+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var y=this.registry[m];if(y){var b=y.parse(s,this);if(!b)return null;if(this.expectedType){var E=this.expectedType,S=b.type;if("string"!==E.kind&&"number"!==E.kind&&"boolean"!==E.kind&&"object"!==E.kind&&"array"!==E.kind||"value"!==S.kind)if("color"!==E.kind&&"formatted"!==E.kind&&"resolvedImage"!==E.kind||"value"!==S.kind&&"string"!==S.kind){if(this.checkSubtype(E,S))return null}else b=u(b,E,l.typeAnnotation||"coerce");else b=u(b,E,l.typeAnnotation||"assert")}if(!(b instanceof Js)&&"resolvedImage"!==b.type.kind&&function R(P){if(P instanceof ql)return R(P.boundExpression);if(P instanceof eo&&"error"===P.name||P instanceof wi||P instanceof to)return!1;var N=P instanceof ea||P instanceof lo,V=!0;return P.eachChild(function(H){V=N?V&&R(H):V&&H instanceof Js}),!!V&&Ds(P)&&Zh(P,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(b)){var k=new Dt;try{b=new Js(b.type,b.evaluate(k))}catch(R){return this.error(R.message),null}}return b}return this.error('Unknown expression "'+m+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===s?"'undefined' value invalid. Use null instead.":"object"==typeof s?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof s+" instead.")},Ts.prototype.concat=function(s,l,u){var m="number"==typeof s?this.path.concat(s):this.path,y=u?this.scope.concat(u):this.scope;return new Ts(this.registry,m,l||null,y,this.errors)},Ts.prototype.error=function(s){for(var l=[],u=arguments.length-1;u-- >0;)l[u]=arguments[u+1];var m=""+this.key+l.map(function(y){return"["+y+"]"}).join("");this.errors.push(new st(m,s))},Ts.prototype.checkSubtype=function(s,l){var u=Rr(s,l);return u&&this.error(u),u};var Sa=function(s,l,u){this.type=s,this.input=l,this.labels=[],this.outputs=[];for(var m=0,y=u;m<y.length;m+=1){var b=y[m],E=b[1];this.labels.push(b[0]),this.outputs.push(E)}};function ci(s,l,u){return s*(1-u)+l*u}Sa.parse=function(s,l){if(s.length-1<4)return l.error("Expected at least 4 arguments, but found only "+(s.length-1)+".");if((s.length-1)%2!=0)return l.error("Expected an even number of arguments.");var u=l.parse(s[1],1,Pe);if(!u)return null;var m=[],y=null;l.expectedType&&"value"!==l.expectedType.kind&&(y=l.expectedType);for(var b=1;b<s.length;b+=2){var E=1===b?-1/0:s[b],S=s[b+1],k=b,R=b+1;if("number"!=typeof E)return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(m.length&&m[m.length-1][0]>=E)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);var P=l.parse(S,R,y);if(!P)return null;y=y||P.type,m.push([E,P])}return new Sa(y,u,m)},Sa.prototype.evaluate=function(s){var l=this.labels,u=this.outputs;if(1===l.length)return u[0].evaluate(s);var m=this.input.evaluate(s);if(m<=l[0])return u[0].evaluate(s);var y=l.length;return m>=l[y-1]?u[y-1].evaluate(s):u[Gl(l,m)].evaluate(s)},Sa.prototype.eachChild=function(s){s(this.input);for(var l=0,u=this.outputs;l<u.length;l+=1)s(u[l])},Sa.prototype.outputDefined=function(){return this.outputs.every(function(s){return s.outputDefined()})},Sa.prototype.serialize=function(){for(var s=["step",this.input.serialize()],l=0;l<this.labels.length;l++)l>0&&s.push(this.labels[l]),s.push(this.outputs[l].serialize());return s};var Rp=Object.freeze({__proto__:null,number:ci,color:function(s,l,u){return new vn(ci(s.r,l.r,u),ci(s.g,l.g,u),ci(s.b,l.b,u),ci(s.a,l.a,u))},array:function(s,l,u){return s.map(function(m,y){return ci(m,l[y],u)})}}),Yy=6/29*3*(6/29),Xy=Math.PI/180,Iw=180/Math.PI;function Md(s){return s>.008856451679035631?Math.pow(s,1/3):s/Yy+4/29}function Kh(s){return s>6/29?s*s*s:Yy*(s-4/29)}function Mp(s){return 255*(s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055)}function Pp(s){return(s/=255)<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Op(s){var l=Pp(s.r),u=Pp(s.g),m=Pp(s.b),y=Md((.4124564*l+.3575761*u+.1804375*m)/.95047),b=Md((.2126729*l+.7151522*u+.072175*m)/1);return{l:116*b-16,a:500*(y-b),b:200*(b-Md((.0193339*l+.119192*u+.9503041*m)/1.08883)),alpha:s.a}}function Wl(s){var l=(s.l+16)/116,u=isNaN(s.a)?l:l+s.a/500,m=isNaN(s.b)?l:l-s.b/200;return l=1*Kh(l),u=.95047*Kh(u),m=1.08883*Kh(m),new vn(Mp(3.2404542*u-1.5371385*l-.4985314*m),Mp(-.969266*u+1.8760108*l+.041556*m),Mp(.0556434*u-.2040259*l+1.0572252*m),s.alpha)}function Pd(s,l,u){var m=l-s;return s+u*(m>180||m<-180?m-360*Math.round(m/360):m)}var Au={forward:Op,reverse:Wl,interpolate:function(s,l,u){return{l:ci(s.l,l.l,u),a:ci(s.a,l.a,u),b:ci(s.b,l.b,u),alpha:ci(s.alpha,l.alpha,u)}}},ts={forward:function(s){var l=Op(s),u=l.l,m=l.a,y=l.b,b=Math.atan2(y,m)*Iw;return{h:b<0?b+360:b,c:Math.sqrt(m*m+y*y),l:u,alpha:s.a}},reverse:function(s){var l=s.h*Xy,u=s.c;return Wl({l:s.l,a:Math.cos(l)*u,b:Math.sin(l)*u,alpha:s.alpha})},interpolate:function(s,l,u){return{h:Pd(s.h,l.h,u),c:ci(s.c,l.c,u),l:ci(s.l,l.l,u),alpha:ci(s.alpha,l.alpha,u)}}},Yh=Object.freeze({__proto__:null,lab:Au,hcl:ts}),nn=function(s,l,u,m,y){this.type=s,this.operator=l,this.interpolation=u,this.input=m,this.labels=[],this.outputs=[];for(var b=0,E=y;b<E.length;b+=1){var S=E[b],k=S[1];this.labels.push(S[0]),this.outputs.push(k)}};function Ag(s,l,u,m){var y=m-u,b=s-u;return 0===y?0:1===l?b/y:(Math.pow(l,b)-1)/(Math.pow(l,y)-1)}nn.interpolationFactor=function(s,l,u,m){var y=0;if("exponential"===s.name)y=Ag(l,s.base,u,m);else if("linear"===s.name)y=Ag(l,1,u,m);else if("cubic-bezier"===s.name){var b=s.controlPoints;y=new Ve(b[0],b[1],b[2],b[3]).solve(Ag(l,1,u,m))}return y},nn.parse=function(s,l){var u=s[0],m=s[1],y=s[2],b=s.slice(3);if(!Array.isArray(m)||0===m.length)return l.error("Expected an interpolation type expression.",1);if("linear"===m[0])m={name:"linear"};else if("exponential"===m[0]){var E=m[1];if("number"!=typeof E)return l.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:E}}else{if("cubic-bezier"!==m[0])return l.error("Unknown interpolation type "+String(m[0]),1,0);var S=m.slice(1);if(4!==S.length||S.some(function(ue){return"number"!=typeof ue||ue<0||ue>1}))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:S}}if(s.length-1<4)return l.error("Expected at least 4 arguments, but found only "+(s.length-1)+".");if((s.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(!(y=l.parse(y,2,Pe)))return null;var k=[],R=null;"interpolate-hcl"===u||"interpolate-lab"===u?R=Zt:l.expectedType&&"value"!==l.expectedType.kind&&(R=l.expectedType);for(var P=0;P<b.length;P+=2){var N=b[P],V=b[P+1],H=P+3,X=P+4;if("number"!=typeof N)return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(k.length&&k[k.length-1][0]>=N)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);var Y=l.parse(V,X,R);if(!Y)return null;R=R||Y.type,k.push([N,Y])}return"number"===R.kind||"color"===R.kind||"array"===R.kind&&"number"===R.itemType.kind&&"number"==typeof R.N?new nn(R,u,m,y,k):l.error("Type "+Pn(R)+" is not interpolatable.")},nn.prototype.evaluate=function(s){var l=this.labels,u=this.outputs;if(1===l.length)return u[0].evaluate(s);var m=this.input.evaluate(s);if(m<=l[0])return u[0].evaluate(s);var y=l.length;if(m>=l[y-1])return u[y-1].evaluate(s);var b=Gl(l,m),E=nn.interpolationFactor(this.interpolation,m,l[b],l[b+1]),S=u[b].evaluate(s),k=u[b+1].evaluate(s);return"interpolate"===this.operator?Rp[this.type.kind.toLowerCase()](S,k,E):"interpolate-hcl"===this.operator?ts.reverse(ts.interpolate(ts.forward(S),ts.forward(k),E)):Au.reverse(Au.interpolate(Au.forward(S),Au.forward(k),E))},nn.prototype.eachChild=function(s){s(this.input);for(var l=0,u=this.outputs;l<u.length;l+=1)s(u[l])},nn.prototype.outputDefined=function(){return this.outputs.every(function(s){return s.outputDefined()})},nn.prototype.serialize=function(){var s;s="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var l=[this.operator,s,this.input.serialize()],u=0;u<this.labels.length;u++)l.push(this.labels[u],this.outputs[u].serialize());return l};var ti=function(s,l){this.type=s,this.args=l};ti.parse=function(s,l){if(s.length<2)return l.error("Expectected at least one argument.");var u=null,m=l.expectedType;m&&"value"!==m.kind&&(u=m);for(var y=[],b=0,E=s.slice(1);b<E.length;b+=1){var S=l.parse(E[b],1+y.length,u,void 0,{typeAnnotation:"omit"});if(!S)return null;u=u||S.type,y.push(S)}var k=m&&y.some(function(R){return Rr(m,R.type)});return new ti(k?se:u,y)},ti.prototype.evaluate=function(s){for(var l,u=null,m=0,y=0,b=this.args;y<b.length&&(m++,(u=b[y].evaluate(s))&&u instanceof xr&&!u.available&&(l||(l=u.name),u=null,m===this.args.length&&(u=l)),null===u);y+=1);return u},ti.prototype.eachChild=function(s){this.args.forEach(s)},ti.prototype.outputDefined=function(){return this.args.every(function(s){return s.outputDefined()})},ti.prototype.serialize=function(){var s=["coalesce"];return this.eachChild(function(l){s.push(l.serialize())}),s};var no=function(s,l){this.type=l.type,this.bindings=[].concat(s),this.result=l};no.prototype.evaluate=function(s){return this.result.evaluate(s)},no.prototype.eachChild=function(s){for(var l=0,u=this.bindings;l<u.length;l+=1)s(u[l][1]);s(this.result)},no.parse=function(s,l){if(s.length<4)return l.error("Expected at least 3 arguments, but found "+(s.length-1)+" instead.");for(var u=[],m=1;m<s.length-1;m+=2){var y=s[m];if("string"!=typeof y)return l.error("Expected string, but found "+typeof y+" instead.",m);if(/[^a-zA-Z0-9_]/.test(y))return l.error("Variable names must contain only alphanumeric characters or '_'.",m);var b=l.parse(s[m+1],m+1);if(!b)return null;u.push([y,b])}var E=l.parse(s[s.length-1],s.length-1,l.expectedType,u);return E?new no(u,E):null},no.prototype.outputDefined=function(){return this.result.outputDefined()},no.prototype.serialize=function(){for(var s=["let"],l=0,u=this.bindings;l<u.length;l+=1){var m=u[l];s.push(m[0],m[1].serialize())}return s.push(this.result.serialize()),s};var Ia=function(s,l,u){this.type=s,this.index=l,this.input=u};Ia.parse=function(s,l){if(3!==s.length)return l.error("Expected 2 arguments, but found "+(s.length-1)+" instead.");var u=l.parse(s[1],1,Pe),m=l.parse(s[2],2,wr(l.expectedType||se));return u&&m?new Ia(m.type.itemType,u,m):null},Ia.prototype.evaluate=function(s){var l=this.index.evaluate(s),u=this.input.evaluate(s);if(l<0)throw new Dr("Array index out of bounds: "+l+" < 0.");if(l>=u.length)throw new Dr("Array index out of bounds: "+l+" > "+(u.length-1)+".");if(l!==Math.floor(l))throw new Dr("Array index must be an integer, but found "+l+" instead.");return u[l]},Ia.prototype.eachChild=function(s){s(this.index),s(this.input)},Ia.prototype.outputDefined=function(){return!1},Ia.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Us=function(s,l){this.type=Be,this.needle=s,this.haystack=l};Us.parse=function(s,l){if(3!==s.length)return l.error("Expected 2 arguments, but found "+(s.length-1)+" instead.");var u=l.parse(s[1],1,se),m=l.parse(s[2],2,se);return u&&m?bn(u.type,[Be,et,Pe,gt,se])?new Us(u,m):l.error("Expected first argument to be of type boolean, string, number or null, but found "+Pn(u.type)+" instead"):null},Us.prototype.evaluate=function(s){var l=this.needle.evaluate(s),u=this.haystack.evaluate(s);if(!u)return!1;if(!dn(l,["boolean","string","number","null"]))throw new Dr("Expected first argument to be of type boolean, string, number or null, but found "+Pn(Fi(l))+" instead.");if(!dn(u,["string","array"]))throw new Dr("Expected second argument to be of type array or string, but found "+Pn(Fi(u))+" instead.");return u.indexOf(l)>=0},Us.prototype.eachChild=function(s){s(this.needle),s(this.haystack)},Us.prototype.outputDefined=function(){return!0},Us.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Yt=function(s,l,u){this.type=Pe,this.needle=s,this.haystack=l,this.fromIndex=u};Yt.parse=function(s,l){if(s.length<=2||s.length>=5)return l.error("Expected 3 or 4 arguments, but found "+(s.length-1)+" instead.");var u=l.parse(s[1],1,se),m=l.parse(s[2],2,se);if(!u||!m)return null;if(!bn(u.type,[Be,et,Pe,gt,se]))return l.error("Expected first argument to be of type boolean, string, number or null, but found "+Pn(u.type)+" instead");if(4===s.length){var y=l.parse(s[3],3,Pe);return y?new Yt(u,m,y):null}return new Yt(u,m)},Yt.prototype.evaluate=function(s){var l=this.needle.evaluate(s),u=this.haystack.evaluate(s);if(!dn(l,["boolean","string","number","null"]))throw new Dr("Expected first argument to be of type boolean, string, number or null, but found "+Pn(Fi(l))+" instead.");if(!dn(u,["string","array"]))throw new Dr("Expected second argument to be of type array or string, but found "+Pn(Fi(u))+" instead.");if(this.fromIndex){var m=this.fromIndex.evaluate(s);return u.indexOf(l,m)}return u.indexOf(l)},Yt.prototype.eachChild=function(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)},Yt.prototype.outputDefined=function(){return!1},Yt.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var s=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),s]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Cn=function(s,l,u,m,y,b){this.inputType=s,this.type=l,this.input=u,this.cases=m,this.outputs=y,this.otherwise=b};Cn.parse=function(s,l){if(s.length<5)return l.error("Expected at least 4 arguments, but found only "+(s.length-1)+".");if(s.length%2!=1)return l.error("Expected an even number of arguments.");var u,m;l.expectedType&&"value"!==l.expectedType.kind&&(m=l.expectedType);for(var y={},b=[],E=2;E<s.length-1;E+=2){var S=s[E],k=s[E+1];Array.isArray(S)||(S=[S]);var R=l.concat(E);if(0===S.length)return R.error("Expected at least one branch label.");for(var P=0,N=S;P<N.length;P+=1){var V=N[P];if("number"!=typeof V&&"string"!=typeof V)return R.error("Branch labels must be numbers or strings.");if("number"==typeof V&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return R.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof V&&Math.floor(V)!==V)return R.error("Numeric branch labels must be integer values.");if(u){if(R.checkSubtype(u,Fi(V)))return null}else u=Fi(V);if(void 0!==y[String(V)])return R.error("Branch labels must be unique.");y[String(V)]=b.length}var H=l.parse(k,E,m);if(!H)return null;m=m||H.type,b.push(H)}var X=l.parse(s[1],1,se);if(!X)return null;var Y=l.parse(s[s.length-1],s.length-1,m);return Y?"value"!==X.type.kind&&l.concat(1).checkSubtype(u,X.type)?null:new Cn(u,m,X,y,b,Y):null},Cn.prototype.evaluate=function(s){var l=this.input.evaluate(s);return(Fi(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(s)},Cn.prototype.eachChild=function(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)},Cn.prototype.outputDefined=function(){return this.outputs.every(function(s){return s.outputDefined()})&&this.otherwise.outputDefined()},Cn.prototype.serialize=function(){for(var s=this,l=["match",this.input.serialize()],u=[],m={},y=0,b=Object.keys(this.cases).sort();y<b.length;y+=1){var E=b[y];void 0===(N=m[this.cases[E]])?(m[this.cases[E]]=u.length,u.push([this.cases[E],[E]])):u[N][1].push(E)}for(var S=function(H){return"number"===s.inputType.kind?Number(H):H},k=0,R=u;k<R.length;k+=1){var P=R[k],N=P[0],V=P[1];l.push(1===V.length?S(V[0]):V.map(S)),l.push(this.outputs[outputIndex$1].serialize())}return l.push(this.otherwise.serialize()),l};var Ru=function(s,l,u){this.type=s,this.branches=l,this.otherwise=u};Ru.parse=function(s,l){if(s.length<4)return l.error("Expected at least 3 arguments, but found only "+(s.length-1)+".");if(s.length%2!=0)return l.error("Expected an odd number of arguments.");var u;l.expectedType&&"value"!==l.expectedType.kind&&(u=l.expectedType);for(var m=[],y=1;y<s.length-1;y+=2){var b=l.parse(s[y],y,Be);if(!b)return null;var E=l.parse(s[y+1],y+1,u);if(!E)return null;m.push([b,E]),u=u||E.type}var S=l.parse(s[s.length-1],s.length-1,u);return S?new Ru(u,m,S):null},Ru.prototype.evaluate=function(s){for(var l=0,u=this.branches;l<u.length;l+=1){var m=u[l],y=m[1];if(m[0].evaluate(s))return y.evaluate(s)}return this.otherwise.evaluate(s)},Ru.prototype.eachChild=function(s){for(var l=0,u=this.branches;l<u.length;l+=1){var m=u[l],y=m[1];s(m[0]),s(y)}s(this.otherwise)},Ru.prototype.outputDefined=function(){return this.branches.every(function(s){return s[1].outputDefined()})&&this.otherwise.outputDefined()},Ru.prototype.serialize=function(){var s=["case"];return this.eachChild(function(l){s.push(l.serialize())}),s};var Zl=function(s,l,u,m){this.type=s,this.input=l,this.beginIndex=u,this.endIndex=m};function Xh(s,l){return"=="===s||"!="===s?"boolean"===l.kind||"string"===l.kind||"number"===l.kind||"null"===l.kind||"value"===l.kind:"string"===l.kind||"number"===l.kind||"value"===l.kind}function pr(s,l,u,m){return 0===m.compare(l,u)}function ka(s,l,u){var m="=="!==s&&"!="!==s;return function(){function y(b,E,S){this.type=Be,this.lhs=b,this.rhs=E,this.collator=S,this.hasUntypedArgument="value"===b.type.kind||"value"===E.type.kind}return y.parse=function(b,E){if(3!==b.length&&4!==b.length)return E.error("Expected two or three arguments.");var S=b[0],k=E.parse(b[1],1,se);if(!k)return null;if(!Xh(S,k.type))return E.concat(1).error('"'+S+"\" comparisons are not supported for type '"+Pn(k.type)+"'.");var R=E.parse(b[2],2,se);if(!R)return null;if(!Xh(S,R.type))return E.concat(2).error('"'+S+"\" comparisons are not supported for type '"+Pn(R.type)+"'.");if(k.type.kind!==R.type.kind&&"value"!==k.type.kind&&"value"!==R.type.kind)return E.error("Cannot compare types '"+Pn(k.type)+"' and '"+Pn(R.type)+"'.");m&&("value"===k.type.kind&&"value"!==R.type.kind?k=new lo(R.type,[k]):"value"!==k.type.kind&&"value"===R.type.kind&&(R=new lo(k.type,[R])));var P=null;if(4===b.length){if("string"!==k.type.kind&&"string"!==R.type.kind&&"value"!==k.type.kind&&"value"!==R.type.kind)return E.error("Cannot use collator to compare non-string types.");if(!(P=E.parse(b[3],3,ar)))return null}return new y(k,R,P)},y.prototype.evaluate=function(b){var E=this.lhs.evaluate(b),S=this.rhs.evaluate(b);if(m&&this.hasUntypedArgument){var k=Fi(E),R=Fi(S);if(k.kind!==R.kind||"string"!==k.kind&&"number"!==k.kind)throw new Dr('Expected arguments for "'+s+'" to be (string, string) or (number, number), but found ('+k.kind+", "+R.kind+") instead.")}if(this.collator&&!m&&this.hasUntypedArgument){var P=Fi(E),N=Fi(S);if("string"!==P.kind||"string"!==N.kind)return l(b,E,S)}return this.collator?u(b,E,S,this.collator.evaluate(b)):l(b,E,S)},y.prototype.eachChild=function(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)},y.prototype.outputDefined=function(){return!0},y.prototype.serialize=function(){var b=[s];return this.eachChild(function(E){b.push(E.serialize())}),b},y}()}Zl.parse=function(s,l){if(s.length<=2||s.length>=5)return l.error("Expected 3 or 4 arguments, but found "+(s.length-1)+" instead.");var u=l.parse(s[1],1,se),m=l.parse(s[2],2,Pe);if(!u||!m)return null;if(!bn(u.type,[wr(se),et,se]))return l.error("Expected first argument to be of type array or string, but found "+Pn(u.type)+" instead");if(4===s.length){var y=l.parse(s[3],3,Pe);return y?new Zl(u.type,u,m,y):null}return new Zl(u.type,u,m)},Zl.prototype.evaluate=function(s){var l=this.input.evaluate(s),u=this.beginIndex.evaluate(s);if(!dn(l,["string","array"]))throw new Dr("Expected first argument to be of type array or string, but found "+Pn(Fi(l))+" instead.");if(this.endIndex){var m=this.endIndex.evaluate(s);return l.slice(u,m)}return l.slice(u)},Zl.prototype.eachChild=function(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)},Zl.prototype.outputDefined=function(){return!1},Zl.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var s=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),s]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Mu=ka("==",function(s,l,u){return l===u},pr),Qy=ka("!=",function(s,l,u){return l!==u},function(s,l,u,m){return!pr(0,l,u,m)}),Jy=ka("<",function(s,l,u){return l<u},function(s,l,u,m){return m.compare(l,u)<0}),Rg=ka(">",function(s,l,u){return l>u},function(s,l,u,m){return m.compare(l,u)>0}),Qh=ka("<=",function(s,l,u){return l<=u},function(s,l,u,m){return m.compare(l,u)<=0}),kw=ka(">=",function(s,l,u){return l>=u},function(s,l,u,m){return m.compare(l,u)>=0}),Kl=function(s,l,u,m,y){this.type=et,this.number=s,this.locale=l,this.currency=u,this.minFractionDigits=m,this.maxFractionDigits=y};Kl.parse=function(s,l){if(3!==s.length)return l.error("Expected two arguments.");var u=l.parse(s[1],1,Pe);if(!u)return null;var m=s[2];if("object"!=typeof m||Array.isArray(m))return l.error("NumberFormat options argument must be an object.");var y=null;if(m.locale&&!(y=l.parse(m.locale,1,et)))return null;var b=null;if(m.currency&&!(b=l.parse(m.currency,1,et)))return null;var E=null;if(m["min-fraction-digits"]&&!(E=l.parse(m["min-fraction-digits"],1,Pe)))return null;var S=null;return m["max-fraction-digits"]&&!(S=l.parse(m["max-fraction-digits"],1,Pe))?null:new Kl(u,y,b,E,S)},Kl.prototype.evaluate=function(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))},Kl.prototype.eachChild=function(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)},Kl.prototype.outputDefined=function(){return!1},Kl.prototype.serialize=function(){var s={};return this.locale&&(s.locale=this.locale.serialize()),this.currency&&(s.currency=this.currency.serialize()),this.minFractionDigits&&(s["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(s["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),s]};var ll=function(s){this.type=Pe,this.input=s};ll.parse=function(s,l){if(2!==s.length)return l.error("Expected 1 argument, but found "+(s.length-1)+" instead.");var u=l.parse(s[1],1);return u?"array"!==u.type.kind&&"string"!==u.type.kind&&"value"!==u.type.kind?l.error("Expected argument of type string or array, but found "+Pn(u.type)+" instead."):new ll(u):null},ll.prototype.evaluate=function(s){var l=this.input.evaluate(s);if("string"==typeof l||Array.isArray(l))return l.length;throw new Dr("Expected value to be of type string or array, but found "+Pn(Fi(l))+" instead.")},ll.prototype.eachChild=function(s){s(this.input)},ll.prototype.outputDefined=function(){return!1},ll.prototype.serialize=function(){var s=["length"];return this.eachChild(function(l){s.push(l.serialize())}),s};var Pu={"==":Mu,"!=":Qy,">":Rg,"<":Jy,">=":kw,"<=":Qh,array:lo,at:Ia,boolean:lo,case:Ru,coalesce:ti,collator:wi,format:es,image:jl,in:Us,"index-of":Yt,interpolate:nn,"interpolate-hcl":nn,"interpolate-lab":nn,length:ll,let:no,literal:Js,match:Cn,number:lo,"number-format":Kl,object:lo,slice:Zl,step:Sa,string:lo,"to-boolean":ea,"to-color":ea,"to-number":ea,"to-string":ea,var:ql,within:to};function Mg(s,l){var u=l[0],m=l[1],y=l[2],b=l[3];u=u.evaluate(s),m=m.evaluate(s),y=y.evaluate(s);var E=b?b.evaluate(s):1,S=Ig(u,m,y,E);if(S)throw new Dr(S);return new vn(u/255*E,m/255*E,y/255*E,E)}function Jh(s,l){return s in l}function ef(s,l){var u=l[s];return void 0===u?null:u}function xi(s){return{type:s}}function tf(s){return{result:"success",value:s}}function Ou(s){return{result:"error",value:s}}function Od(s){return"data-driven"===s["property-type"]||"cross-faded-data-driven"===s["property-type"]}function Aa(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function Nd(s){return!!s.expression&&s.expression.interpolated}function hr(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":null===s?"null":typeof s}function nf(s){return"object"==typeof s&&null!==s&&!Array.isArray(s)}function wt(s){return s}function Vc(s,l,u){return void 0!==s?s:void 0!==l?l:void 0!==u?u:void 0}function Z(s,l,u,m,y){return Vc(typeof u===y?m[u]:void 0,s.default,l.default)}function Ld(s,l,u){if("number"!==hr(u))return Vc(s.default,l.default);var m=s.stops.length;if(1===m||u<=s.stops[0][0])return s.stops[0][1];if(u>=s.stops[m-1][0])return s.stops[m-1][1];var y=Gl(s.stops.map(function(b){return b[0]}),u);return s.stops[y][1]}function Fd(s,l,u){var m=void 0!==s.base?s.base:1;if("number"!==hr(u))return Vc(s.default,l.default);var y=s.stops.length;if(1===y||u<=s.stops[0][0])return s.stops[0][1];if(u>=s.stops[y-1][0])return s.stops[y-1][1];var V,H,Y,ue,b=Gl(s.stops.map(function(N){return N[0]}),u),E=(V=m,ue=u-(H=s.stops[b][0]),0===(Y=s.stops[b+1][0]-H)?0:1===V?ue/Y:(Math.pow(V,ue)-1)/(Math.pow(V,Y)-1)),S=s.stops[b][1],k=s.stops[b+1][1],R=Rp[l.type]||wt;if(s.colorSpace&&"rgb"!==s.colorSpace){var P=Yh[s.colorSpace];R=function(N,V){return P.reverse(P.interpolate(P.forward(N),P.forward(V),E))}}return"function"==typeof S.evaluate?{evaluate:function(){for(var N=[],V=arguments.length;V--;)N[V]=arguments[V];var H=S.evaluate.apply(void 0,N),X=k.evaluate.apply(void 0,N);if(void 0!==H&&void 0!==X)return R(H,X,E)}}:R(S,k,E)}function rf(s,l,u){return"color"===l.type?u=vn.parse(u):"formatted"===l.type?u=ei.fromString(u.toString()):"resolvedImage"===l.type?u=xr.fromString(u.toString()):hr(u)===l.type||"enum"===l.type&&l.values[u]||(u=void 0),Vc(u,s.default,l.default)}eo.register(Pu,{error:[{kind:"error"},[et],function(s,l){throw new Dr(l[0].evaluate(s))}],typeof:[et,[se],function(s,l){return Pn(Fi(l[0].evaluate(s)))}],"to-rgba":[wr(Pe,4),[Zt],function(s,l){return l[0].evaluate(s).toArray()}],rgb:[Zt,[Pe,Pe,Pe],Mg],rgba:[Zt,[Pe,Pe,Pe,Pe],Mg],has:{type:Be,overloads:[[[et],function(s,l){return Jh(l[0].evaluate(s),s.properties())}],[[et,Kt],function(s,l){var u=l[1];return Jh(l[0].evaluate(s),u.evaluate(s))}]]},get:{type:se,overloads:[[[et],function(s,l){return ef(l[0].evaluate(s),s.properties())}],[[et,Kt],function(s,l){var u=l[1];return ef(l[0].evaluate(s),u.evaluate(s))}]]},"feature-state":[se,[et],function(s,l){return ef(l[0].evaluate(s),s.featureState||{})}],properties:[Kt,[],function(s){return s.properties()}],"geometry-type":[et,[],function(s){return s.geometryType()}],id:[se,[],function(s){return s.id()}],zoom:[Pe,[],function(s){return s.globals.zoom}],"heatmap-density":[Pe,[],function(s){return s.globals.heatmapDensity||0}],"line-progress":[Pe,[],function(s){return s.globals.lineProgress||0}],accumulated:[se,[],function(s){return void 0===s.globals.accumulated?null:s.globals.accumulated}],"+":[Pe,xi(Pe),function(s,l){for(var u=0,m=0,y=l;m<y.length;m+=1)u+=y[m].evaluate(s);return u}],"*":[Pe,xi(Pe),function(s,l){for(var u=1,m=0,y=l;m<y.length;m+=1)u*=y[m].evaluate(s);return u}],"-":{type:Pe,overloads:[[[Pe,Pe],function(s,l){var u=l[1];return l[0].evaluate(s)-u.evaluate(s)}],[[Pe],function(s,l){return-l[0].evaluate(s)}]]},"/":[Pe,[Pe,Pe],function(s,l){var u=l[1];return l[0].evaluate(s)/u.evaluate(s)}],"%":[Pe,[Pe,Pe],function(s,l){var u=l[1];return l[0].evaluate(s)%u.evaluate(s)}],ln2:[Pe,[],function(){return Math.LN2}],pi:[Pe,[],function(){return Math.PI}],e:[Pe,[],function(){return Math.E}],"^":[Pe,[Pe,Pe],function(s,l){var u=l[1];return Math.pow(l[0].evaluate(s),u.evaluate(s))}],sqrt:[Pe,[Pe],function(s,l){return Math.sqrt(l[0].evaluate(s))}],log10:[Pe,[Pe],function(s,l){return Math.log(l[0].evaluate(s))/Math.LN10}],ln:[Pe,[Pe],function(s,l){return Math.log(l[0].evaluate(s))}],log2:[Pe,[Pe],function(s,l){return Math.log(l[0].evaluate(s))/Math.LN2}],sin:[Pe,[Pe],function(s,l){return Math.sin(l[0].evaluate(s))}],cos:[Pe,[Pe],function(s,l){return Math.cos(l[0].evaluate(s))}],tan:[Pe,[Pe],function(s,l){return Math.tan(l[0].evaluate(s))}],asin:[Pe,[Pe],function(s,l){return Math.asin(l[0].evaluate(s))}],acos:[Pe,[Pe],function(s,l){return Math.acos(l[0].evaluate(s))}],atan:[Pe,[Pe],function(s,l){return Math.atan(l[0].evaluate(s))}],min:[Pe,xi(Pe),function(s,l){return Math.min.apply(Math,l.map(function(u){return u.evaluate(s)}))}],max:[Pe,xi(Pe),function(s,l){return Math.max.apply(Math,l.map(function(u){return u.evaluate(s)}))}],abs:[Pe,[Pe],function(s,l){return Math.abs(l[0].evaluate(s))}],round:[Pe,[Pe],function(s,l){var u=l[0].evaluate(s);return u<0?-Math.round(-u):Math.round(u)}],floor:[Pe,[Pe],function(s,l){return Math.floor(l[0].evaluate(s))}],ceil:[Pe,[Pe],function(s,l){return Math.ceil(l[0].evaluate(s))}],"filter-==":[Be,[et,se],function(s,l){var u=l[0],m=l[1];return s.properties()[u.value]===m.value}],"filter-id-==":[Be,[se],function(s,l){var u=l[0];return s.id()===u.value}],"filter-type-==":[Be,[et],function(s,l){var u=l[0];return s.geometryType()===u.value}],"filter-<":[Be,[et,se],function(s,l){var u=l[0],m=l[1],y=s.properties()[u.value],b=m.value;return typeof y==typeof b&&y<b}],"filter-id-<":[Be,[se],function(s,l){var u=l[0],m=s.id(),y=u.value;return typeof m==typeof y&&m<y}],"filter->":[Be,[et,se],function(s,l){var u=l[0],m=l[1],y=s.properties()[u.value],b=m.value;return typeof y==typeof b&&y>b}],"filter-id->":[Be,[se],function(s,l){var u=l[0],m=s.id(),y=u.value;return typeof m==typeof y&&m>y}],"filter-<=":[Be,[et,se],function(s,l){var u=l[0],m=l[1],y=s.properties()[u.value],b=m.value;return typeof y==typeof b&&y<=b}],"filter-id-<=":[Be,[se],function(s,l){var u=l[0],m=s.id(),y=u.value;return typeof m==typeof y&&m<=y}],"filter->=":[Be,[et,se],function(s,l){var u=l[0],m=l[1],y=s.properties()[u.value],b=m.value;return typeof y==typeof b&&y>=b}],"filter-id->=":[Be,[se],function(s,l){var u=l[0],m=s.id(),y=u.value;return typeof m==typeof y&&m>=y}],"filter-has":[Be,[se],function(s,l){return l[0].value in s.properties()}],"filter-has-id":[Be,[],function(s){return null!==s.id()&&void 0!==s.id()}],"filter-type-in":[Be,[wr(et)],function(s,l){return l[0].value.indexOf(s.geometryType())>=0}],"filter-id-in":[Be,[wr(se)],function(s,l){return l[0].value.indexOf(s.id())>=0}],"filter-in-small":[Be,[et,wr(se)],function(s,l){var u=l[0];return l[1].value.indexOf(s.properties()[u.value])>=0}],"filter-in-large":[Be,[et,wr(se)],function(s,l){var u=l[0],m=l[1];return function(y,b,E,S){for(;E<=S;){var k=E+S>>1;if(b[k]===y)return!0;b[k]>y?S=k-1:E=k+1}return!1}(s.properties()[u.value],m.value,0,m.value.length-1)}],all:{type:Be,overloads:[[[Be,Be],function(s,l){var u=l[1];return l[0].evaluate(s)&&u.evaluate(s)}],[xi(Be),function(s,l){for(var u=0,m=l;u<m.length;u+=1)if(!m[u].evaluate(s))return!1;return!0}]]},any:{type:Be,overloads:[[[Be,Be],function(s,l){var u=l[1];return l[0].evaluate(s)||u.evaluate(s)}],[xi(Be),function(s,l){for(var u=0,m=l;u<m.length;u+=1)if(m[u].evaluate(s))return!0;return!1}]]},"!":[Be,[Be],function(s,l){return!l[0].evaluate(s)}],"is-supported-script":[Be,[et],function(s,l){var u=s.globals&&s.globals.isSupportedScript;return!u||u(l[0].evaluate(s))}],upcase:[et,[et],function(s,l){return l[0].evaluate(s).toUpperCase()}],downcase:[et,[et],function(s,l){return l[0].evaluate(s).toLowerCase()}],concat:[et,xi(se),function(s,l){return l.map(function(u){return So(u.evaluate(s))}).join("")}],"resolved-locale":[et,[ar],function(s,l){return l[0].evaluate(s).resolvedLocale()}]});var Ra=function(s,l){var u;this.expression=s,this._warningHistory={},this._evaluator=new Dt,this._defaultValue=l?"color"===(u=l).type&&nf(u.default)?new vn(0,0,0,0):"color"===u.type?vn.parse(u.default)||null:void 0===u.default?null:u.default:null,this._enumValues=l&&"enum"===l.type?l.values:null};function sf(s){return Array.isArray(s)&&s.length>0&&"string"==typeof s[0]&&s[0]in Pu}function Ma(s,l){var y,b,u=new Ts(Pu,[],l?(b={color:Zt,string:et,number:Pe,enum:et,boolean:Be,formatted:Lt,resolvedImage:tn},"array"===(y=l).type?wr(b[y.value]||se,y.length):b[y.type]):void 0),m=u.parse(s,void 0,void 0,void 0,l&&"string"===l.type?{typeAnnotation:"coerce"}:void 0);return m?tf(new Ra(m,l)):Ou(u.errors)}Ra.prototype.evaluateWithoutErrorHandling=function(s,l,u,m,y,b){return this._evaluator.globals=s,this._evaluator.feature=l,this._evaluator.featureState=u,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)},Ra.prototype.evaluate=function(s,l,u,m,y,b){this._evaluator.globals=s,this._evaluator.feature=l||null,this._evaluator.featureState=u||null,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=b||null;try{var E=this.expression.evaluate(this._evaluator);if(null==E||"number"==typeof E&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new Dr("Expected value to be one of "+Object.keys(this._enumValues).map(function(S){return JSON.stringify(S)}).join(", ")+", but found "+JSON.stringify(E)+" instead.");return E}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}};var Bd=function(s,l){this.kind=s,this._styleExpression=l,this.isStateDependent="constant"!==s&&!$l(l.expression)};Bd.prototype.evaluateWithoutErrorHandling=function(s,l,u,m,y,b){return this._styleExpression.evaluateWithoutErrorHandling(s,l,u,m,y,b)},Bd.prototype.evaluate=function(s,l,u,m,y,b){return this._styleExpression.evaluate(s,l,u,m,y,b)};var uo=function(s,l,u,m){this.kind=s,this.zoomStops=u,this._styleExpression=l,this.isStateDependent="camera"!==s&&!$l(l.expression),this.interpolationType=m};function Yl(s,l){if("error"===(s=Ma(s,l)).result)return s;var u=s.value.expression,m=Ds(u);if(!m&&!Od(l))return Ou([new st("","data expressions not supported")]);var y=Zh(u,["zoom"]);if(!y&&!Aa(l))return Ou([new st("","zoom expressions not supported")]);var b=function E(S){var k=null;if(S instanceof no)k=E(S.result);else if(S instanceof ti)for(var R=0,P=S.args;R<P.length&&!(k=E(P[R]));R+=1);else(S instanceof Sa||S instanceof nn)&&S.input instanceof eo&&"zoom"===S.input.name&&(k=S);return k instanceof st||S.eachChild(function(N){var V=E(N);V instanceof st?k=V:!k&&V?k=new st("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):k&&V&&k!==V&&(k=new st("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),k}(u);return b||y?b instanceof st?Ou([b]):b instanceof nn&&!Nd(l)?Ou([new st("",'"interpolate" expressions cannot be used with this property')]):tf(b?new uo(m?"camera":"composite",s.value,b.labels,b instanceof nn?b.interpolation:void 0):new Bd(m?"constant":"source",s.value)):Ou([new st("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}uo.prototype.evaluateWithoutErrorHandling=function(s,l,u,m,y,b){return this._styleExpression.evaluateWithoutErrorHandling(s,l,u,m,y,b)},uo.prototype.evaluate=function(s,l,u,m,y,b){return this._styleExpression.evaluate(s,l,u,m,y,b)},uo.prototype.interpolationFactor=function(s,l,u){return this.interpolationType?nn.interpolationFactor(this.interpolationType,s,l,u):0};var Nu=function(s,l){this._parameters=s,this._specification=l,Ke(this,function u(m,y){var b,E,S,k="color"===y.type,R=m.stops&&"object"==typeof m.stops[0][0],P=R||!(R||void 0!==m.property),N=m.type||(Nd(y)?"exponential":"interval");if(k&&((m=Ke({},m)).stops&&(m.stops=m.stops.map(function(tt){return[tt[0],vn.parse(tt[1])]})),m.default=vn.parse(m.default?m.default:y.default)),m.colorSpace&&"rgb"!==m.colorSpace&&!Yh[m.colorSpace])throw new Error("Unknown color space: "+m.colorSpace);if("exponential"===N)b=Fd;else if("interval"===N)b=Ld;else if("categorical"===N){b=Z,E=Object.create(null);for(var V=0,H=m.stops;V<H.length;V+=1){var X=H[V];E[X[0]]=X[1]}S=typeof m.stops[0][0]}else{if("identity"!==N)throw new Error('Unknown function type "'+N+'"');b=rf}if(R){for(var Y={},ue=[],le=0;le<m.stops.length;le++){var ye=m.stops[le],ge=ye[0].zoom;void 0===Y[ge]&&(Y[ge]={zoom:ge,type:m.type,property:m.property,default:m.default,stops:[]},ue.push(ge)),Y[ge].stops.push([ye[0].value,ye[1]])}for(var Se=[],Ie=0,Oe=ue;Ie<Oe.length;Ie+=1){var Ge=Oe[Ie];Se.push([Y[Ge].zoom,u(Y[Ge],y)])}var Je={name:"linear"};return{kind:"composite",interpolationType:Je,interpolationFactor:nn.interpolationFactor.bind(void 0,Je),zoomStops:Se.map(function(tt){return tt[0]}),evaluate:function(tt,Et){var nt=tt.zoom;return Fd({stops:Se,base:m.base},y,nt).evaluate(nt,Et)}}}if(P){var mt="exponential"===N?{name:"exponential",base:void 0!==m.base?m.base:1}:null;return{kind:"camera",interpolationType:mt,interpolationFactor:nn.interpolationFactor.bind(void 0,mt),zoomStops:m.stops.map(function(tt){return tt[0]}),evaluate:function(tt){return b(m,y,tt.zoom,E,S)}}}return{kind:"source",evaluate:function(tt,Et){var nt=Et&&Et.properties?Et.properties[m.property]:void 0;return void 0===nt?Vc(m.default,y.default):b(m,y,nt,E,S)}}}(this._parameters,this._specification))};function ns(s){var l=s.key,u=s.value,m=s.valueSpec||{},y=s.objectElementValidators||{},b=s.style,E=s.styleSpec,S=[],k=hr(u);if("object"!==k)return[new re(l,u,"object expected, "+k+" found")];for(var R in u){var P=R.split(".")[0],N=m[P]||m["*"],V=void 0;if(y[P])V=y[P];else if(m[P])V=Dn;else if(y["*"])V=y["*"];else{if(!m["*"]){S.push(new re(l,u[R],'unknown property "'+R+'"'));continue}V=Dn}S=S.concat(V({key:(l&&l+".")+R,value:u[R],valueSpec:N,style:b,styleSpec:E,object:u,objectKey:R},u))}for(var H in m)y[H]||m[H].required&&void 0===m[H].default&&void 0===u[H]&&S.push(new re(l,u,'missing required property "'+H+'"'));return S}function Vd(s){var l=s.value,u=s.valueSpec,m=s.style,y=s.styleSpec,b=s.key,E=s.arrayElementValidator||Dn;if("array"!==hr(l))return[new re(b,l,"array expected, "+hr(l)+" found")];if(u.length&&l.length!==u.length)return[new re(b,l,"array length "+u.length+" expected, length "+l.length+" found")];if(u["min-length"]&&l.length<u["min-length"])return[new re(b,l,"array length at least "+u["min-length"]+" expected, length "+l.length+" found")];var S={type:u.value,values:u.values};y.$version<7&&(S.function=u.function),"object"===hr(u.value)&&(S=u.value);for(var k=[],R=0;R<l.length;R++)k=k.concat(E({array:l,arrayIndex:R,value:l[R],valueSpec:S,style:m,styleSpec:y,key:b+"["+R+"]"}));return k}function Np(s){var l=s.key,u=s.value,m=s.valueSpec,y=hr(u);return"number"===y&&u!=u&&(y="NaN"),"number"!==y?[new re(l,u,"number expected, "+y+" found")]:"minimum"in m&&u<m.minimum?[new re(l,u,u+" is less than the minimum value "+m.minimum)]:"maximum"in m&&u>m.maximum?[new re(l,u,u+" is greater than the maximum value "+m.maximum)]:[]}function af(s){var l,u,m,y=s.valueSpec,b=Ce(s.value.type),E={},S="categorical"!==b&&void 0===s.value.property,k=!S,R="array"===hr(s.value.stops)&&"array"===hr(s.value.stops[0])&&"object"===hr(s.value.stops[0][0]),P=ns({key:s.key,value:s.value,valueSpec:s.styleSpec.function,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(H){if("identity"===b)return[new re(H.key,H.value,'identity function may not have a "stops" property')];var X=[],Y=H.value;return X=X.concat(Vd({key:H.key,value:Y,valueSpec:H.valueSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:N})),"array"===hr(Y)&&0===Y.length&&X.push(new re(H.key,Y,"array must have at least one stop")),X},default:function(H){return Dn({key:H.key,value:H.value,valueSpec:y,style:H.style,styleSpec:H.styleSpec})}}});return"identity"===b&&S&&P.push(new re(s.key,s.value,'missing required property "property"')),"identity"===b||s.value.stops||P.push(new re(s.key,s.value,'missing required property "stops"')),"exponential"===b&&s.valueSpec.expression&&!Nd(s.valueSpec)&&P.push(new re(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(k&&!Od(s.valueSpec)?P.push(new re(s.key,s.value,"property functions not supported")):S&&!Aa(s.valueSpec)&&P.push(new re(s.key,s.value,"zoom functions not supported"))),"categorical"!==b&&!R||void 0!==s.value.property||P.push(new re(s.key,s.value,'"property" property is required')),P;function N(H){var X=[],Y=H.value,ue=H.key;if("array"!==hr(Y))return[new re(ue,Y,"array expected, "+hr(Y)+" found")];if(2!==Y.length)return[new re(ue,Y,"array length 2 expected, length "+Y.length+" found")];if(R){if("object"!==hr(Y[0]))return[new re(ue,Y,"object expected, "+hr(Y[0])+" found")];if(void 0===Y[0].zoom)return[new re(ue,Y,"object stop key must have zoom")];if(void 0===Y[0].value)return[new re(ue,Y,"object stop key must have value")];if(m&&m>Ce(Y[0].zoom))return[new re(ue,Y[0].zoom,"stop zoom values must appear in ascending order")];Ce(Y[0].zoom)!==m&&(m=Ce(Y[0].zoom),u=void 0,E={}),X=X.concat(ns({key:ue+"[0]",value:Y[0],valueSpec:{zoom:{}},style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:Np,value:V}}))}else X=X.concat(V({key:ue+"[0]",value:Y[0],valueSpec:{},style:H.style,styleSpec:H.styleSpec},Y));return sf(je(Y[1]))?X.concat([new re(ue+"[1]",Y[1],"expressions are not allowed in function stops.")]):X.concat(Dn({key:ue+"[1]",value:Y[1],valueSpec:y,style:H.style,styleSpec:H.styleSpec}))}function V(H,X){var Y=hr(H.value),ue=Ce(H.value),le=null!==H.value?H.value:X;if(l){if(Y!==l)return[new re(H.key,le,Y+" stop domain type must match previous stop domain type "+l)]}else l=Y;if("number"!==Y&&"string"!==Y&&"boolean"!==Y)return[new re(H.key,le,"stop domain value must be a number, string, or boolean")];if("number"!==Y&&"categorical"!==b){var ye="number expected, "+Y+" found";return Od(y)&&void 0===b&&(ye+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new re(H.key,le,ye)]}return"categorical"!==b||"number"!==Y||isFinite(ue)&&Math.floor(ue)===ue?"categorical"!==b&&"number"===Y&&void 0!==u&&ue<u?[new re(H.key,le,"stop domain values must appear in ascending order")]:(u=ue,"categorical"===b&&ue in E?[new re(H.key,le,"stop domain values must be unique")]:(E[ue]=!0,[])):[new re(H.key,le,"integer expected, found "+ue)]}}function Pa(s){var l=("property"===s.expressionContext?Yl:Ma)(je(s.value),s.valueSpec);if("error"===l.result)return l.value.map(function(m){return new re(""+s.key+m.key,s.value,m.message)});var u=l.value.expression||l.value._styleExpression.expression;if("property"===s.expressionContext&&"text-font"===s.propertyKey&&!u.outputDefined())return[new re(s.key,s.value,'Invalid data expression for "'+s.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===s.expressionContext&&"layout"===s.propertyType&&!$l(u))return[new re(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===s.expressionContext&&!$l(u))return[new re(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&0===s.expressionContext.indexOf("cluster")){if(!Zh(u,["zoom","feature-state"]))return[new re(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===s.expressionContext&&!Ds(u))return[new re(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function zc(s){var l=s.key,u=s.value,m=s.valueSpec,y=[];return Array.isArray(m.values)?-1===m.values.indexOf(Ce(u))&&y.push(new re(l,u,"expected one of ["+m.values.join(", ")+"], "+JSON.stringify(u)+" found")):-1===Object.keys(m.values).indexOf(Ce(u))&&y.push(new re(l,u,"expected one of ["+Object.keys(m.values).join(", ")+"], "+JSON.stringify(u)+" found")),y}function cl(s){if(!0===s||!1===s)return!0;if(!Array.isArray(s)||0===s.length)return!1;switch(s[0]){case"has":return s.length>=2&&"$id"!==s[1]&&"$type"!==s[1];case"in":return s.length>=3&&("string"!=typeof s[1]||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==s.length||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(var l=0,u=s.slice(1);l<u.length;l+=1){var m=u[l];if(!cl(m)&&"boolean"!=typeof m)return!1}return!0;default:return!0}}Nu.deserialize=function(s){return new Nu(s._parameters,s._specification)},Nu.serialize=function(s){return{_parameters:s._parameters,_specification:s._specification}};var ev={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ss(s){if(null==s)return{filter:function(){return!0},needGeometry:!1};cl(s)||(s=js(s));var l=Ma(s,ev);if("error"===l.result)throw new Error(l.value.map(function(u){return u.key+": "+u.message}).join(", "));return{filter:function(u,m,y){return l.value.evaluate(u,m,{},y)},needGeometry:function u(m){if(!Array.isArray(m))return!1;if("within"===m[0])return!0;for(var y=1;y<m.length;y++)if(u(m[y]))return!0;return!1}(s)}}function Tr(s,l){return s<l?-1:s>l?1:0}function js(s){if(!s)return!0;var l,u=s[0];return s.length<=1?"any"!==u:"=="===u?lf(s[1],s[2],"=="):"!="===u?Oa(lf(s[1],s[2],"==")):"<"===u||">"===u||"<="===u||">="===u?lf(s[1],s[2],u):"any"===u?(l=s.slice(1),["any"].concat(l.map(js))):"all"===u?["all"].concat(s.slice(1).map(js)):"none"===u?["all"].concat(s.slice(1).map(js).map(Oa)):"in"===u?cf(s[1],s.slice(2)):"!in"===u?Oa(cf(s[1],s.slice(2))):"has"===u?zd(s[1]):"!has"===u?Oa(zd(s[1])):"within"!==u||s}function lf(s,l,u){switch(s){case"$type":return["filter-type-"+u,l];case"$id":return["filter-id-"+u,l];default:return["filter-"+u,s,l]}}function cf(s,l){if(0===l.length)return!1;switch(s){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(function(u){return typeof u!=typeof l[0]})?["filter-in-large",s,["literal",l.sort(Tr)]]:["filter-in-small",s,["literal",l]]}}function zd(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Oa(s){return["!",s]}function uf(s){return cl(je(s.value))?Pa(Ke({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function l(u){var m=u.value,y=u.key;if("array"!==hr(m))return[new re(y,m,"array expected, "+hr(m)+" found")];var b,E=u.styleSpec,S=[];if(m.length<1)return[new re(y,m,"filter array must have at least 1 element")];switch(S=S.concat(zc({key:y+"[0]",value:m[0],valueSpec:E.filter_operator,style:u.style,styleSpec:u.styleSpec})),Ce(m[0])){case"<":case"<=":case">":case">=":m.length>=2&&"$type"===Ce(m[1])&&S.push(new re(y,m,'"$type" cannot be use with operator "'+m[0]+'"'));case"==":case"!=":3!==m.length&&S.push(new re(y,m,'filter array for operator "'+m[0]+'" must have 3 elements'));case"in":case"!in":m.length>=2&&"string"!==(b=hr(m[1]))&&S.push(new re(y+"[1]",m[1],"string expected, "+b+" found"));for(var k=2;k<m.length;k++)b=hr(m[k]),"$type"===Ce(m[1])?S=S.concat(zc({key:y+"["+k+"]",value:m[k],valueSpec:E.geometry_type,style:u.style,styleSpec:u.styleSpec})):"string"!==b&&"number"!==b&&"boolean"!==b&&S.push(new re(y+"["+k+"]",m[k],"string, number, or boolean expected, "+b+" found"));break;case"any":case"all":case"none":for(var R=1;R<m.length;R++)S=S.concat(l({key:y+"["+R+"]",value:m[R],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":b=hr(m[1]),2!==m.length?S.push(new re(y,m,'filter array for "'+m[0]+'" operator must have 2 elements')):"string"!==b&&S.push(new re(y+"[1]",m[1],"string expected, "+b+" found"));break;case"within":b=hr(m[1]),2!==m.length?S.push(new re(y,m,'filter array for "'+m[0]+'" operator must have 2 elements')):"object"!==b&&S.push(new re(y+"[1]",m[1],"object expected, "+b+" found"))}return S}(s)}function df(s,l){var u=s.key,m=s.style,y=s.styleSpec,b=s.value,E=s.objectKey,S=y[l+"_"+s.layerType];if(!S)return[];var k=E.match(/^(.*)-transition$/);if("paint"===l&&k&&S[k[1]]&&S[k[1]].transition)return Dn({key:u,value:b,valueSpec:y.transition,style:m,styleSpec:y});var R,P=s.valueSpec||S[E];if(!P)return[new re(u,b,'unknown property "'+E+'"')];if("string"===hr(b)&&Od(P)&&!P.tokens&&(R=/^{([^}]+)}$/.exec(b)))return[new re(u,b,'"'+E+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(R[1])+" }`.")];var N=[];return"symbol"===s.layerType&&("text-field"===E&&m&&!m.glyphs&&N.push(new re(u,b,'use of "text-field" requires a style "glyphs" property')),"text-font"===E&&nf(je(b))&&"identity"===Ce(b.type)&&N.push(new re(u,b,'"text-font" does not support identity functions'))),N.concat(Dn({key:s.key,value:b,valueSpec:P,style:m,styleSpec:y,expressionContext:"property",propertyType:l,propertyKey:E}))}function Uc(s){return df(s,"paint")}function Lp(s){return df(s,"layout")}function Lu(s){var l=[],u=s.value,m=s.key,y=s.style,b=s.styleSpec;u.type||u.ref||l.push(new re(m,u,'either "type" or "ref" is required'));var E,S=Ce(u.type),k=Ce(u.ref);if(u.id)for(var R=Ce(u.id),P=0;P<s.arrayIndex;P++){var N=y.layers[P];Ce(N.id)===R&&l.push(new re(m,u.id,'duplicate layer id "'+u.id+'", previously used at line '+N.id.__line__))}if("ref"in u)["type","source","source-layer","filter","layout"].forEach(function(X){X in u&&l.push(new re(m,u[X],'"'+X+'" is prohibited for ref layers'))}),y.layers.forEach(function(X){Ce(X.id)===k&&(E=X)}),E?E.ref?l.push(new re(m,u.ref,"ref cannot reference another ref layer")):S=Ce(E.type):l.push(new re(m,u.ref,'ref layer "'+k+'" not found'));else if("background"!==S)if(u.source){var V=y.sources&&y.sources[u.source],H=V&&Ce(V.type);V?"vector"===H&&"raster"===S?l.push(new re(m,u.source,'layer "'+u.id+'" requires a raster source')):"raster"===H&&"raster"!==S?l.push(new re(m,u.source,'layer "'+u.id+'" requires a vector source')):"vector"!==H||u["source-layer"]?"raster-dem"===H&&"hillshade"!==S?l.push(new re(m,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==S||!u.paint||!u.paint["line-gradient"]||"geojson"===H&&V.lineMetrics||l.push(new re(m,u,'layer "'+u.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):l.push(new re(m,u,'layer "'+u.id+'" must specify a "source-layer"')):l.push(new re(m,u.source,'source "'+u.source+'" not found'))}else l.push(new re(m,u,'missing required property "source"'));return l=l.concat(ns({key:m,value:u,valueSpec:b.layer,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Dn({key:m+".type",value:u.type,valueSpec:b.layer.type,style:s.style,styleSpec:s.styleSpec,object:u,objectKey:"type"})},filter:uf,layout:function(X){return ns({layer:u,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{"*":function(Y){return Lp(Ke({layerType:S},Y))}}})},paint:function(X){return ns({layer:u,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{"*":function(Y){return Uc(Ke({layerType:S},Y))}}})}}}))}function lr(s){var l=s.value,u=s.key,m=hr(l);return"string"!==m?[new re(u,l,"string expected, "+m+" found")]:[]}var Fu={promoteId:function(s){var l=s.key,u=s.value;if("string"===hr(u))return lr({key:l,value:u});var m=[];for(var y in u)m.push.apply(m,lr({key:l+"."+y,value:u[y]}));return m}};function jc(s){var l=s.value,u=s.key,m=s.styleSpec,y=s.style;if(!l.type)return[new re(u,l,'"type" is required')];var b,E=Ce(l.type);switch(E){case"vector":case"raster":case"raster-dem":return ns({key:u,value:l,valueSpec:m["source_"+E.replace("-","_")],style:s.style,styleSpec:m,objectElementValidators:Fu});case"geojson":if(b=ns({key:u,value:l,valueSpec:m.source_geojson,style:y,styleSpec:m,objectElementValidators:Fu}),l.cluster)for(var S in l.clusterProperties){var k=l.clusterProperties[S],R=k[0],P="string"==typeof R?[R,["accumulated"],["get",S]]:R;b.push.apply(b,Pa({key:u+"."+S+".map",value:k[1],expressionContext:"cluster-map"})),b.push.apply(b,Pa({key:u+"."+S+".reduce",value:P,expressionContext:"cluster-reduce"}))}return b;case"video":return ns({key:u,value:l,valueSpec:m.source_video,style:y,styleSpec:m});case"image":return ns({key:u,value:l,valueSpec:m.source_image,style:y,styleSpec:m});case"canvas":return[new re(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zc({key:u+".type",value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,styleSpec:m})}}function Na(s){var l=s.value,u=s.styleSpec,m=u.light,y=s.style,b=[],E=hr(l);if(void 0===l)return b;if("object"!==E)return b.concat([new re("light",l,"object expected, "+E+" found")]);for(var S in l){var k=S.match(/^(.*)-transition$/);b=b.concat(k&&m[k[1]]&&m[k[1]].transition?Dn({key:S,value:l[S],valueSpec:u.transition,style:y,styleSpec:u}):m[S]?Dn({key:S,value:l[S],valueSpec:m[S],style:y,styleSpec:u}):[new re(S,l[S],'unknown property "'+S+'"')])}return b}var Zn={"*":function(){return[]},array:Vd,boolean:function(s){var l=s.value,u=s.key,m=hr(l);return"boolean"!==m?[new re(u,l,"boolean expected, "+m+" found")]:[]},number:Np,color:function(s){var l=s.key,u=s.value,m=hr(u);return"string"!==m?[new re(l,u,"color expected, "+m+" found")]:null===Rd(u)?[new re(l,u,'color expected, "'+u+'" found')]:[]},constants:ze,enum:zc,filter:uf,function:af,layer:Lu,object:ns,source:jc,light:Na,string:lr,formatted:function(s){return 0===lr(s).length?[]:Pa(s)},resolvedImage:function(s){return 0===lr(s).length?[]:Pa(s)}};function Dn(s){var l=s.value,u=s.valueSpec,m=s.styleSpec;return u.expression&&nf(Ce(l))?af(s):u.expression&&sf(je(l))?Pa(s):u.type&&Zn[u.type]?Zn[u.type](s):ns(Ke({},s,{valueSpec:u.type?m[u.type]:u}))}function Ho(s){var l=s.value,u=s.key,m=lr(s);return m.length||(-1===l.indexOf("{fontstack}")&&m.push(new re(u,l,'"glyphs" url must include a "{fontstack}" token')),-1===l.indexOf("{range}")&&m.push(new re(u,l,'"glyphs" url must include a "{range}" token'))),m}function ta(s,l){void 0===l&&(l=W);var u=[];return u=u.concat(Dn({key:"",value:s,valueSpec:l.$root,styleSpec:l,style:s,objectElementValidators:{glyphs:Ho,"*":function(){return[]}}})),s.constants&&(u=u.concat(ze({key:"constants",value:s.constants,style:s,styleSpec:l}))),hf(u)}function hf(s){return[].concat(s).sort(function(l,u){return l.line-u.line})}function ul(s){return function(){for(var l=[],u=arguments.length;u--;)l[u]=arguments[u];return hf(s.apply(this,l))}}ta.source=ul(jc),ta.light=ul(Na),ta.layer=ul(Lu),ta.filter=ul(uf),ta.paintProperty=ul(Uc),ta.layoutProperty=ul(Lp);var Bu=ta,Fp=Bu.light,Xl=Bu.paintProperty,Fr=Bu.layoutProperty;function na(s,l){var u=!1;if(l&&l.length)for(var m=0,y=l;m<y.length;m+=1)s.fire(new me(new Error(y[m].message))),u=!0;return u}var Bi=Is;function Is(s,l,u){var m=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;var y=new Int32Array(this.arrayBuffer);s=y[0],this.d=(l=y[1])+2*(u=y[2]);for(var b=0;b<this.d*this.d;b++){var E=y[3+b],S=y[3+b+1];m.push(E===S?null:y.subarray(E,S))}var k=y[3+m.length+1];this.keys=y.subarray(y[3+m.length],k),this.bboxes=y.subarray(k),this.insert=this._insertReadonly}else{this.d=l+2*u;for(var R=0;R<this.d*this.d;R++)m.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=s,this.padding=u,this.scale=l/s,this.uid=0;var P=u/l*s;this.min=-P,this.max=s+P}Is.prototype.insert=function(s,l,u,m,y){this._forEachCell(l,u,m,y,this._insertCell,this.uid++),this.keys.push(s),this.bboxes.push(l),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(y)},Is.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Is.prototype._insertCell=function(s,l,u,m,y,b){this.cells[y].push(b)},Is.prototype.query=function(s,l,u,m,y){var b=this.min,E=this.max;if(s<=b&&l<=b&&E<=u&&E<=m&&!y)return Array.prototype.slice.call(this.keys);var S=[];return this._forEachCell(s,l,u,m,this._queryCell,S,{},y),S},Is.prototype._queryCell=function(s,l,u,m,y,b,E,S){var k=this.cells[y];if(null!==k)for(var R=this.keys,P=this.bboxes,N=0;N<k.length;N++){var V=k[N];if(void 0===E[V]){var H=4*V;(S?S(P[H+0],P[H+1],P[H+2],P[H+3]):s<=P[H+2]&&l<=P[H+3]&&u>=P[H+0]&&m>=P[H+1])?(E[V]=!0,b.push(R[V])):E[V]=!1}}},Is.prototype._forEachCell=function(s,l,u,m,y,b,E,S){for(var k=this._convertToCellCoord(s),R=this._convertToCellCoord(l),P=this._convertToCellCoord(u),N=this._convertToCellCoord(m),V=k;V<=P;V++)for(var H=R;H<=N;H++){var X=this.d*H+V;if((!S||S(this._convertFromCellCoord(V),this._convertFromCellCoord(H),this._convertFromCellCoord(V+1),this._convertFromCellCoord(H+1)))&&y.call(this,s,l,u,m,X,b,E,S))return}},Is.prototype._convertFromCellCoord=function(s){return(s-this.padding)/this.scale},Is.prototype._convertToCellCoord=function(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))},Is.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var s=this.cells,l=3+this.cells.length+1+1,u=0,m=0;m<this.cells.length;m++)u+=this.cells[m].length;var y=new Int32Array(l+u+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;for(var b=l,E=0;E<s.length;E++){var S=s[E];y[3+E]=b,y.set(S,b),b+=S.length}return y[3+s.length]=b,y.set(this.keys,b),y[3+s.length+1]=b+=this.keys.length,y.set(this.bboxes,b),b+=this.bboxes.length,y.buffer};var Pg=pt.ImageData,Ei=pt.ImageBitmap,ro={};function rt(s,l,u){void 0===u&&(u={}),Object.defineProperty(l,"_classRegistryKey",{value:s,writeable:!1}),ro[s]={klass:l,omit:u.omit||[],shallow:u.shallow||[]}}for(var Ud in rt("Object",Object),Bi.serialize=function(s,l){var u=s.toArrayBuffer();return l&&l.push(u),{buffer:u}},Bi.deserialize=function(s){return new Bi(s.buffer)},rt("Grid",Bi),rt("Color",vn),rt("Error",Error),rt("ResolvedImage",xr),rt("StylePropertyFunction",Nu),rt("StyleExpression",Ra,{omit:["_evaluator"]}),rt("ZoomDependentExpression",uo),rt("ZoomConstantExpression",Bd),rt("CompoundExpression",eo,{omit:["_evaluate"]}),Pu)Pu[Ud]._classRegistryKey||rt("Expression_"+Ud,Pu[Ud]);function Vu(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&"ArrayBuffer"===s.constructor.name)}function Ql(s){return Ei&&s instanceof Ei}function Io(s,l){if(null==s||"boolean"==typeof s||"number"==typeof s||"string"==typeof s||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp)return s;if(Vu(s)||Ql(s))return l&&l.push(s),s;if(ArrayBuffer.isView(s)){var u=s;return l&&l.push(u.buffer),u}if(s instanceof Pg)return l&&l.push(s.data.buffer),s;if(Array.isArray(s)){for(var m=[],y=0,b=s;y<b.length;y+=1)m.push(Io(b[y],l));return m}if("object"==typeof s){var E=s.constructor,S=E._classRegistryKey;if(!S)throw new Error("can't serialize object of unregistered class");var k=E.serialize?E.serialize(s,l):{};if(!E.serialize){for(var R in s)if(s.hasOwnProperty(R)&&!(ro[S].omit.indexOf(R)>=0)){var P=s[R];k[R]=ro[S].shallow.indexOf(R)>=0?P:Io(P,l)}s instanceof Error&&(k.message=s.message)}if(k.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==S&&(k.$name=S),k}throw new Error("can't serialize object of type "+typeof s)}function Vi(s){if(null==s||"boolean"==typeof s||"number"==typeof s||"string"==typeof s||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||Vu(s)||Ql(s)||ArrayBuffer.isView(s)||s instanceof Pg)return s;if(Array.isArray(s))return s.map(Vi);if("object"==typeof s){var l=s.$name||"Object",u=ro[l].klass;if(!u)throw new Error("can't deserialize unregistered class "+l);if(u.deserialize)return u.deserialize(s);for(var m=Object.create(u.prototype),y=0,b=Object.keys(s);y<b.length;y+=1){var E=b[y];if("$name"!==E){var S=s[E];m[E]=ro[l].shallow.indexOf(E)>=0?S:Vi(S)}}return m}throw new Error("can't deserialize object of type "+typeof s)}var ho=function(){this.first=!0};ho.prototype.update=function(s,l){var u=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=l),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=u,!0))};var ct={"Latin-1 Supplement":function(s){return s>=128&&s<=255},Arabic:function(s){return s>=1536&&s<=1791},"Arabic Supplement":function(s){return s>=1872&&s<=1919},"Arabic Extended-A":function(s){return s>=2208&&s<=2303},"Hangul Jamo":function(s){return s>=4352&&s<=4607},"Unified Canadian Aboriginal Syllabics":function(s){return s>=5120&&s<=5759},Khmer:function(s){return s>=6016&&s<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(s){return s>=6320&&s<=6399},"General Punctuation":function(s){return s>=8192&&s<=8303},"Letterlike Symbols":function(s){return s>=8448&&s<=8527},"Number Forms":function(s){return s>=8528&&s<=8591},"Miscellaneous Technical":function(s){return s>=8960&&s<=9215},"Control Pictures":function(s){return s>=9216&&s<=9279},"Optical Character Recognition":function(s){return s>=9280&&s<=9311},"Enclosed Alphanumerics":function(s){return s>=9312&&s<=9471},"Geometric Shapes":function(s){return s>=9632&&s<=9727},"Miscellaneous Symbols":function(s){return s>=9728&&s<=9983},"Miscellaneous Symbols and Arrows":function(s){return s>=11008&&s<=11263},"CJK Radicals Supplement":function(s){return s>=11904&&s<=12031},"Kangxi Radicals":function(s){return s>=12032&&s<=12255},"Ideographic Description Characters":function(s){return s>=12272&&s<=12287},"CJK Symbols and Punctuation":function(s){return s>=12288&&s<=12351},Hiragana:function(s){return s>=12352&&s<=12447},Katakana:function(s){return s>=12448&&s<=12543},Bopomofo:function(s){return s>=12544&&s<=12591},"Hangul Compatibility Jamo":function(s){return s>=12592&&s<=12687},Kanbun:function(s){return s>=12688&&s<=12703},"Bopomofo Extended":function(s){return s>=12704&&s<=12735},"CJK Strokes":function(s){return s>=12736&&s<=12783},"Katakana Phonetic Extensions":function(s){return s>=12784&&s<=12799},"Enclosed CJK Letters and Months":function(s){return s>=12800&&s<=13055},"CJK Compatibility":function(s){return s>=13056&&s<=13311},"CJK Unified Ideographs Extension A":function(s){return s>=13312&&s<=19903},"Yijing Hexagram Symbols":function(s){return s>=19904&&s<=19967},"CJK Unified Ideographs":function(s){return s>=19968&&s<=40959},"Yi Syllables":function(s){return s>=40960&&s<=42127},"Yi Radicals":function(s){return s>=42128&&s<=42191},"Hangul Jamo Extended-A":function(s){return s>=43360&&s<=43391},"Hangul Syllables":function(s){return s>=44032&&s<=55215},"Hangul Jamo Extended-B":function(s){return s>=55216&&s<=55295},"Private Use Area":function(s){return s>=57344&&s<=63743},"CJK Compatibility Ideographs":function(s){return s>=63744&&s<=64255},"Arabic Presentation Forms-A":function(s){return s>=64336&&s<=65023},"Vertical Forms":function(s){return s>=65040&&s<=65055},"CJK Compatibility Forms":function(s){return s>=65072&&s<=65103},"Small Form Variants":function(s){return s>=65104&&s<=65135},"Arabic Presentation Forms-B":function(s){return s>=65136&&s<=65279},"Halfwidth and Fullwidth Forms":function(s){return s>=65280&&s<=65519}};function Wr(s){for(var l=0,u=s;l<u.length;l+=1)if(qe(u[l].charCodeAt(0)))return!0;return!1}function qe(s){return!(746!==s&&747!==s&&(s<4352||!(ct["Bopomofo Extended"](s)||ct.Bopomofo(s)||ct["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||ct["CJK Compatibility Ideographs"](s)||ct["CJK Compatibility"](s)||ct["CJK Radicals Supplement"](s)||ct["CJK Strokes"](s)||!(!ct["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||12336===s)||ct["CJK Unified Ideographs Extension A"](s)||ct["CJK Unified Ideographs"](s)||ct["Enclosed CJK Letters and Months"](s)||ct["Hangul Compatibility Jamo"](s)||ct["Hangul Jamo Extended-A"](s)||ct["Hangul Jamo Extended-B"](s)||ct["Hangul Jamo"](s)||ct["Hangul Syllables"](s)||ct.Hiragana(s)||ct["Ideographic Description Characters"](s)||ct.Kanbun(s)||ct["Kangxi Radicals"](s)||ct["Katakana Phonetic Extensions"](s)||ct.Katakana(s)&&12540!==s||!(!ct["Halfwidth and Fullwidth Forms"](s)||65288===s||65289===s||65293===s||s>=65306&&s<=65310||65339===s||65341===s||65343===s||s>=65371&&s<=65503||65507===s||s>=65512&&s<=65519)||!(!ct["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||ct["Unified Canadian Aboriginal Syllabics"](s)||ct["Unified Canadian Aboriginal Syllabics Extended"](s)||ct["Vertical Forms"](s)||ct["Yijing Hexagram Symbols"](s)||ct["Yi Syllables"](s)||ct["Yi Radicals"](s))))}function Rt(s){return!(qe(s)||(l=s,ct["Latin-1 Supplement"](l)&&(167===l||169===l||174===l||177===l||188===l||189===l||190===l||215===l||247===l)||ct["General Punctuation"](l)&&(8214===l||8224===l||8225===l||8240===l||8241===l||8251===l||8252===l||8258===l||8263===l||8264===l||8265===l||8273===l)||ct["Letterlike Symbols"](l)||ct["Number Forms"](l)||ct["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||9003===l||l>=9085&&l<=9114||l>=9150&&l<=9165||9167===l||l>=9169&&l<=9179||l>=9186&&l<=9215)||ct["Control Pictures"](l)&&9251!==l||ct["Optical Character Recognition"](l)||ct["Enclosed Alphanumerics"](l)||ct["Geometric Shapes"](l)||ct["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||ct["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||ct["CJK Symbols and Punctuation"](l)||ct.Katakana(l)||ct["Private Use Area"](l)||ct["CJK Compatibility Forms"](l)||ct["Small Form Variants"](l)||ct["Halfwidth and Fullwidth Forms"](l)||8734===l||8756===l||8757===l||l>=9984&&l<=10087||l>=10102&&l<=10131||65532===l||65533===l));var l}function Ln(s){return s>=1424&&s<=2303||ct["Arabic Presentation Forms-A"](s)||ct["Arabic Presentation Forms-B"](s)}function zi(s,l){return!(!l&&Ln(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||ct.Khmer(s))}function Ui(s){for(var l=0,u=s;l<u.length;l+=1)if(Ln(u[l].charCodeAt(0)))return!0;return!1}var dl=null,ji="unavailable",kn=null,On=function(s){s&&"string"==typeof s&&s.indexOf("NetworkError")>-1&&(ji="error"),dl&&dl(s)};function rs(){Xt.fire(new de("pluginStateChange",{pluginStatus:ji,pluginURL:kn}))}var Xt=new K,fo=function(){return ji},jd=function(){if("deferred"!==ji||!kn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ji="loading",rs(),kn&&er({url:kn},function(s){s?On(s):(ji="loaded",rs())})},tr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===ji||null!=tr.applyArabicShaping},isLoading:function(){return"loading"===ji},setState:function(s){ji=s.pluginStatus,kn=s.pluginURL},isParsed:function(){return null!=tr.applyArabicShaping&&null!=tr.processBidirectionalText&&null!=tr.processStyledBidirectionalText},getPluginURL:function(){return kn}},Ht=function(s,l){this.zoom=s,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ho,this.transition={})};Ht.prototype.isSupportedScript=function(s){return function(l,u){for(var m=0,y=l;m<y.length;m+=1)if(!zi(y[m].charCodeAt(0),u))return!1;return!0}(s,tr.isLoaded())},Ht.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Ht.prototype.getCrossfadeParameters=function(){var s=this.zoom,l=s-Math.floor(s),u=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*l}};var Hi=function(s,l){this.property=s,this.value=l,this.expression=function(u,m){if(nf(u))return new Nu(u,m);if(sf(u)){var y=Yl(u,m);if("error"===y.result)throw new Error(y.value.map(function(E){return E.key+": "+E.message}).join(", "));return y.value}var b=u;return"string"==typeof u&&"color"===m.type&&(b=vn.parse(u)),{kind:"constant",evaluate:function(){return b}}}(void 0===l?s.specification.default:l,s.specification)};Hi.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Hi.prototype.possiblyEvaluate=function(s,l,u){return this.property.possiblyEvaluate(this,s,l,u)};var $i=function(s){this.property=s,this.value=new Hi(s,void 0)};$i.prototype.transitioned=function(s,l){return new po(this.property,this.value,l,Oi({},s.transition,this.transition),s.now)},$i.prototype.untransitioned=function(){return new po(this.property,this.value,null,{},0)};var ui=function(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)};ui.prototype.getValue=function(s){return Fs(this._values[s].value.value)},ui.prototype.setValue=function(s,l){this._values.hasOwnProperty(s)||(this._values[s]=new $i(this._values[s].property)),this._values[s].value=new Hi(this._values[s].property,null===l?void 0:Fs(l))},ui.prototype.getTransition=function(s){return Fs(this._values[s].transition)},ui.prototype.setTransition=function(s,l){this._values.hasOwnProperty(s)||(this._values[s]=new $i(this._values[s].property)),this._values[s].transition=Fs(l)||void 0},ui.prototype.serialize=function(){for(var s={},l=0,u=Object.keys(this._values);l<u.length;l+=1){var m=u[l],y=this.getValue(m);void 0!==y&&(s[m]=y);var b=this.getTransition(m);void 0!==b&&(s[m+"-transition"]=b)}return s},ui.prototype.transitioned=function(s,l){for(var u=new ra(this._properties),m=0,y=Object.keys(this._values);m<y.length;m+=1){var b=y[m];u._values[b]=this._values[b].transitioned(s,l._values[b])}return u},ui.prototype.untransitioned=function(){for(var s=new ra(this._properties),l=0,u=Object.keys(this._values);l<u.length;l+=1){var m=u[l];s._values[m]=this._values[m].untransitioned()}return s};var po=function(s,l,u,m,y){this.property=s,this.value=l,this.begin=y+m.delay||0,this.end=this.begin+m.duration||0,s.specification.transition&&(m.delay||m.duration)&&(this.prior=u)};po.prototype.possiblyEvaluate=function(s,l,u){var m=s.now||0,y=this.value.possiblyEvaluate(s,l,u),b=this.prior;if(b){if(m>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(m<this.begin)return b.possiblyEvaluate(s,l,u);var E=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(s,l,u),y,function(S){if(S<=0)return 0;if(S>=1)return 1;var k=S*S,R=k*S;return 4*(S<.5?R:3*(S-k)+R-.75)}(E))}return y};var ra=function(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)};ra.prototype.possiblyEvaluate=function(s,l,u){for(var m=new ks(this._properties),y=0,b=Object.keys(this._values);y<b.length;y+=1){var E=b[y];m._values[E]=this._values[E].possiblyEvaluate(s,l,u)}return m},ra.prototype.hasTransition=function(){for(var s=0,l=Object.keys(this._values);s<l.length;s+=1)if(this._values[l[s]].prior)return!0;return!1};var $o=function(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)};$o.prototype.getValue=function(s){return Fs(this._values[s].value)},$o.prototype.setValue=function(s,l){this._values[s]=new Hi(this._values[s].property,null===l?void 0:Fs(l))},$o.prototype.serialize=function(){for(var s={},l=0,u=Object.keys(this._values);l<u.length;l+=1){var m=u[l],y=this.getValue(m);void 0!==y&&(s[m]=y)}return s},$o.prototype.possiblyEvaluate=function(s,l,u){for(var m=new ks(this._properties),y=0,b=Object.keys(this._values);y<b.length;y+=1){var E=b[y];m._values[E]=this._values[E].possiblyEvaluate(s,l,u)}return m};var qo=function(s,l,u){this.property=s,this.value=l,this.parameters=u};qo.prototype.isConstant=function(){return"constant"===this.value.kind},qo.prototype.constantOr=function(s){return"constant"===this.value.kind?this.value.value:s},qo.prototype.evaluate=function(s,l,u,m){return this.property.evaluate(this.value,this.parameters,s,l,u,m)};var ks=function(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)};ks.prototype.get=function(s){return this._values[s]};var Xe=function(s){this.specification=s};Xe.prototype.possiblyEvaluate=function(s,l){return s.expression.evaluate(l)},Xe.prototype.interpolate=function(s,l,u){var m=Rp[this.specification.type];return m?m(s,l,u):s};var It=function(s,l){this.specification=s,this.overrides=l};It.prototype.possiblyEvaluate=function(s,l,u,m){return new qo(this,"constant"===s.expression.kind||"camera"===s.expression.kind?{kind:"constant",value:s.expression.evaluate(l,null,{},u,m)}:s.expression,l)},It.prototype.interpolate=function(s,l,u){if("constant"!==s.value.kind||"constant"!==l.value.kind)return s;if(void 0===s.value.value||void 0===l.value.value)return new qo(this,{kind:"constant",value:void 0},s.parameters);var m=Rp[this.specification.type];return m?new qo(this,{kind:"constant",value:m(s.value.value,l.value.value,u)},s.parameters):s},It.prototype.evaluate=function(s,l,u,m,y,b){return"constant"===s.kind?s.value:s.evaluate(l,u,m,y,b)};var di=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.possiblyEvaluate=function(u,m,y,b){if(void 0===u.value)return new qo(this,{kind:"constant",value:void 0},m);if("constant"===u.expression.kind){var E=u.expression.evaluate(m,null,{},y,b),S="resolvedImage"===u.property.specification.type&&"string"!=typeof E?E.name:E,k=this._calculate(S,S,S,m);return new qo(this,{kind:"constant",value:k},m)}if("camera"===u.expression.kind){var R=this._calculate(u.expression.evaluate({zoom:m.zoom-1}),u.expression.evaluate({zoom:m.zoom}),u.expression.evaluate({zoom:m.zoom+1}),m);return new qo(this,{kind:"constant",value:R},m)}return new qo(this,u.expression,m)},l.prototype.evaluate=function(u,m,y,b,E,S){if("source"===u.kind){var k=u.evaluate(m,y,b,E,S);return this._calculate(k,k,k,m)}return"composite"===u.kind?this._calculate(u.evaluate({zoom:Math.floor(m.zoom)-1},y,b),u.evaluate({zoom:Math.floor(m.zoom)},y,b),u.evaluate({zoom:Math.floor(m.zoom)+1},y,b),m):u.value},l.prototype._calculate=function(u,m,y,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:u,to:m}:{from:y,to:m}},l.prototype.interpolate=function(u){return u},l}(It),kt=function(s){this.specification=s};kt.prototype.possiblyEvaluate=function(s,l,u,m){if(void 0!==s.value){if("constant"===s.expression.kind){var y=s.expression.evaluate(l,null,{},u,m);return this._calculate(y,y,y,l)}return this._calculate(s.expression.evaluate(new Ht(Math.floor(l.zoom-1),l)),s.expression.evaluate(new Ht(Math.floor(l.zoom),l)),s.expression.evaluate(new Ht(Math.floor(l.zoom+1),l)),l)}},kt.prototype._calculate=function(s,l,u,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:s,to:l}:{from:u,to:l}},kt.prototype.interpolate=function(s){return s};var ia=function(s){this.specification=s};ia.prototype.possiblyEvaluate=function(s,l,u,m){return!!s.expression.evaluate(l,null,{},u,m)},ia.prototype.interpolate=function(){return!1};var hi=function(s){for(var l in this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],s){var u=s[l];u.specification.overridable&&this.overridableProperties.push(l);var m=this.defaultPropertyValues[l]=new Hi(u,void 0),y=this.defaultTransitionablePropertyValues[l]=new $i(u);this.defaultTransitioningPropertyValues[l]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=m.possiblyEvaluate({})}};rt("DataDrivenProperty",It),rt("DataConstantProperty",Xe),rt("CrossFadedDataDrivenProperty",di),rt("CrossFadedProperty",kt),rt("ColorRampProperty",ia);var Ci=function(s){function l(u,m){if(s.call(this),this.id=u.id,this.type=u.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==u.type&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,"background"!==u.type&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),m.layout&&(this._unevaluatedLayout=new $o(m.layout)),m.paint)){for(var y in this._transitionablePaint=new ui(m.paint),u.paint)this.setPaintProperty(y,u.paint[y],{validate:!1});for(var b in u.layout)this.setLayoutProperty(b,u.layout[b],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ks(m.paint)}}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},l.prototype.getLayoutProperty=function(u){return"visibility"===u?this.visibility:this._unevaluatedLayout.getValue(u)},l.prototype.setLayoutProperty=function(u,m,y){void 0===y&&(y={}),null!=m&&this._validate(Fr,"layers."+this.id+".layout."+u,u,m,y)||("visibility"!==u?this._unevaluatedLayout.setValue(u,m):this.visibility=m)},l.prototype.getPaintProperty=function(u){return Ac(u,"-transition")?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)},l.prototype.setPaintProperty=function(u,m,y){if(void 0===y&&(y={}),null!=m&&this._validate(Xl,"layers."+this.id+".paint."+u,u,m,y))return!1;if(Ac(u,"-transition"))return this._transitionablePaint.setTransition(u.slice(0,-11),m||void 0),!1;var b=this._transitionablePaint._values[u],E="cross-faded-data-driven"===b.property.specification["property-type"],S=b.value.isDataDriven(),k=b.value;this._transitionablePaint.setValue(u,m),this._handleSpecialPaintPropertyUpdate(u);var R=this._transitionablePaint._values[u].value;return R.isDataDriven()||S||E||this._handleOverridablePaintPropertyUpdate(u,k,R)},l.prototype._handleSpecialPaintPropertyUpdate=function(u){},l.prototype._handleOverridablePaintPropertyUpdate=function(u,m,y){return!1},l.prototype.isHidden=function(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||"none"===this.visibility},l.prototype.updateTransitions=function(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)},l.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},l.prototype.recalculate=function(u,m){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,m)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,m)},l.prototype.serialize=function(){var u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),bs(u,function(m,y){return!(void 0===m||"layout"===y&&!Object.keys(m).length||"paint"===y&&!Object.keys(m).length)})},l.prototype._validate=function(u,m,y,b,E){return void 0===E&&(E={}),(!E||!1!==E.validate)&&na(this,u.call(Bu,{key:m,layerType:this.type,objectKey:y,value:b,styleSpec:W,style:{glyphs:!0,sprite:!0}}))},l.prototype.is3D=function(){return!1},l.prototype.isTileClipped=function(){return!1},l.prototype.hasOffscreenPass=function(){return!1},l.prototype.resize=function(){},l.prototype.isStateDependent=function(){for(var u in this.paint._values){var m=this.paint.get(u);if(m instanceof qo&&Od(m.property.specification)&&("source"===m.value.kind||"composite"===m.value.kind)&&m.value.isStateDependent)return!0}return!1},l}(K),ff={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},is=function(s,l){this._structArray=s,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},jt=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function wn(s,l){void 0===l&&(l=1);var u=0,m=0;return{members:s.map(function(y){var b=ff[y.type].BYTES_PER_ELEMENT,E=u=mo(u,Math.max(l,b)),S=y.components||1;return m=Math.max(m,b),u+=b*S,{name:y.name,type:y.type,components:S,offset:E}}),size:mo(u,Math.max(m,l)),alignment:l}}function mo(s,l){return Math.ceil(s/l)*l}jt.serialize=function(s,l){return s._trim(),l&&(s.isTransferred=!0,l.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}},jt.deserialize=function(s){var l=Object.create(this.prototype);return l.arrayBuffer=s.arrayBuffer,l.length=s.length,l.capacity=s.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l},jt.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},jt.prototype.clear=function(){this.length=0},jt.prototype.resize=function(s){this.reserve(s),this.length=s},jt.prototype.reserve=function(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}},jt.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var zu=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m){var y=this.length;return this.resize(y+1),this.emplace(y,u,m)},l.prototype.emplace=function(u,m,y){var b=2*u;return this.int16[b+0]=m,this.int16[b+1]=y,u},l}(jt);zu.prototype.bytesPerElement=4,rt("StructArrayLayout2i4",zu);var io=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m,y,b){var E=this.length;return this.resize(E+1),this.emplace(E,u,m,y,b)},l.prototype.emplace=function(u,m,y,b,E){var S=4*u;return this.int16[S+0]=m,this.int16[S+1]=y,this.int16[S+2]=b,this.int16[S+3]=E,u},l}(jt);io.prototype.bytesPerElement=8,rt("StructArrayLayout4i8",io);var qi=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m,y,b,E,S){var k=this.length;return this.resize(k+1),this.emplace(k,u,m,y,b,E,S)},l.prototype.emplace=function(u,m,y,b,E,S,k){var R=6*u;return this.int16[R+0]=m,this.int16[R+1]=y,this.int16[R+2]=b,this.int16[R+3]=E,this.int16[R+4]=S,this.int16[R+5]=k,u},l}(jt);qi.prototype.bytesPerElement=12,rt("StructArrayLayout2i4i12",qi);var os=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m,y,b,E,S){var k=this.length;return this.resize(k+1),this.emplace(k,u,m,y,b,E,S)},l.prototype.emplace=function(u,m,y,b,E,S,k){var R=4*u,P=8*u;return this.int16[R+0]=m,this.int16[R+1]=y,this.uint8[P+4]=b,this.uint8[P+5]=E,this.uint8[P+6]=S,this.uint8[P+7]=k,u},l}(jt);os.prototype.bytesPerElement=8,rt("StructArrayLayout2i4ub8",os);var ss=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m){var y=this.length;return this.resize(y+1),this.emplace(y,u,m)},l.prototype.emplace=function(u,m,y){var b=2*u;return this.float32[b+0]=m,this.float32[b+1]=y,u},l}(jt);ss.prototype.bytesPerElement=8,rt("StructArrayLayout2f8",ss);var Jl=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m,y,b,E,S,k,R,P,N){var V=this.length;return this.resize(V+1),this.emplace(V,u,m,y,b,E,S,k,R,P,N)},l.prototype.emplace=function(u,m,y,b,E,S,k,R,P,N,V){var H=10*u;return this.uint16[H+0]=m,this.uint16[H+1]=y,this.uint16[H+2]=b,this.uint16[H+3]=E,this.uint16[H+4]=S,this.uint16[H+5]=k,this.uint16[H+6]=R,this.uint16[H+7]=P,this.uint16[H+8]=N,this.uint16[H+9]=V,u},l}(jt);Jl.prototype.bytesPerElement=20,rt("StructArrayLayout10ui20",Jl);var Hd=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m,y,b,E,S,k,R,P,N,V,H){var X=this.length;return this.resize(X+1),this.emplace(X,u,m,y,b,E,S,k,R,P,N,V,H)},l.prototype.emplace=function(u,m,y,b,E,S,k,R,P,N,V,H,X){var Y=12*u;return this.int16[Y+0]=m,this.int16[Y+1]=y,this.int16[Y+2]=b,this.int16[Y+3]=E,this.uint16[Y+4]=S,this.uint16[Y+5]=k,this.uint16[Y+6]=R,this.uint16[Y+7]=P,this.int16[Y+8]=N,this.int16[Y+9]=V,this.int16[Y+10]=H,this.int16[Y+11]=X,u},l}(jt);Hd.prototype.bytesPerElement=24,rt("StructArrayLayout4i4ui4i24",Hd);var As=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m,y){var b=this.length;return this.resize(b+1),this.emplace(b,u,m,y)},l.prototype.emplace=function(u,m,y,b){var E=3*u;return this.float32[E+0]=m,this.float32[E+1]=y,this.float32[E+2]=b,u},l}(jt);As.prototype.bytesPerElement=12,rt("StructArrayLayout3f12",As);var pf=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u){var m=this.length;return this.resize(m+1),this.emplace(m,u)},l.prototype.emplace=function(u,m){return this.uint32[1*u+0]=m,u},l}(jt);pf.prototype.bytesPerElement=4,rt("StructArrayLayout1ul4",pf);var mf=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m,y,b,E,S,k,R,P){var N=this.length;return this.resize(N+1),this.emplace(N,u,m,y,b,E,S,k,R,P)},l.prototype.emplace=function(u,m,y,b,E,S,k,R,P,N){var V=10*u,H=5*u;return this.int16[V+0]=m,this.int16[V+1]=y,this.int16[V+2]=b,this.int16[V+3]=E,this.int16[V+4]=S,this.int16[V+5]=k,this.uint32[H+3]=R,this.uint16[V+8]=P,this.uint16[V+9]=N,u},l}(jt);mf.prototype.bytesPerElement=20,rt("StructArrayLayout6i1ul2ui20",mf);var ec=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m,y,b,E,S){var k=this.length;return this.resize(k+1),this.emplace(k,u,m,y,b,E,S)},l.prototype.emplace=function(u,m,y,b,E,S,k){var R=6*u;return this.int16[R+0]=m,this.int16[R+1]=y,this.int16[R+2]=b,this.int16[R+3]=E,this.int16[R+4]=S,this.int16[R+5]=k,u},l}(jt);ec.prototype.bytesPerElement=12,rt("StructArrayLayout2i2i2i12",ec);var Uu=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m,y,b,E){var S=this.length;return this.resize(S+1),this.emplace(S,u,m,y,b,E)},l.prototype.emplace=function(u,m,y,b,E,S){var k=4*u,R=8*u;return this.float32[k+0]=m,this.float32[k+1]=y,this.float32[k+2]=b,this.int16[R+6]=E,this.int16[R+7]=S,u},l}(jt);Uu.prototype.bytesPerElement=16,rt("StructArrayLayout2f1f2i16",Uu);var Og=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m,y,b){var E=this.length;return this.resize(E+1),this.emplace(E,u,m,y,b)},l.prototype.emplace=function(u,m,y,b,E){var S=12*u,k=3*u;return this.uint8[S+0]=m,this.uint8[S+1]=y,this.float32[k+1]=b,this.float32[k+2]=E,u},l}(jt);Og.prototype.bytesPerElement=12,rt("StructArrayLayout2ub2f12",Og);var Hs=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m,y){var b=this.length;return this.resize(b+1),this.emplace(b,u,m,y)},l.prototype.emplace=function(u,m,y,b){var E=3*u;return this.uint16[E+0]=m,this.uint16[E+1]=y,this.uint16[E+2]=b,u},l}(jt);Hs.prototype.bytesPerElement=6,rt("StructArrayLayout3ui6",Hs);var Bp=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m,y,b,E,S,k,R,P,N,V,H,X,Y,ue,le,ye){var ge=this.length;return this.resize(ge+1),this.emplace(ge,u,m,y,b,E,S,k,R,P,N,V,H,X,Y,ue,le,ye)},l.prototype.emplace=function(u,m,y,b,E,S,k,R,P,N,V,H,X,Y,ue,le,ye,ge){var Se=24*u,Ie=12*u,Oe=48*u;return this.int16[Se+0]=m,this.int16[Se+1]=y,this.uint16[Se+2]=b,this.uint16[Se+3]=E,this.uint32[Ie+2]=S,this.uint32[Ie+3]=k,this.uint32[Ie+4]=R,this.uint16[Se+10]=P,this.uint16[Se+11]=N,this.uint16[Se+12]=V,this.float32[Ie+7]=H,this.float32[Ie+8]=X,this.uint8[Oe+36]=Y,this.uint8[Oe+37]=ue,this.uint8[Oe+38]=le,this.uint32[Ie+10]=ye,this.int16[Se+22]=ge,u},l}(jt);Bp.prototype.bytesPerElement=48,rt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Bp);var ju=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m,y,b,E,S,k,R,P,N,V,H,X,Y,ue,le,ye,ge,Se,Ie,Oe,Ge,Je,mt,tt,Et,nt,un){var Mt=this.length;return this.resize(Mt+1),this.emplace(Mt,u,m,y,b,E,S,k,R,P,N,V,H,X,Y,ue,le,ye,ge,Se,Ie,Oe,Ge,Je,mt,tt,Et,nt,un)},l.prototype.emplace=function(u,m,y,b,E,S,k,R,P,N,V,H,X,Y,ue,le,ye,ge,Se,Ie,Oe,Ge,Je,mt,tt,Et,nt,un,Mt){var ft=34*u,pn=17*u;return this.int16[ft+0]=m,this.int16[ft+1]=y,this.int16[ft+2]=b,this.int16[ft+3]=E,this.int16[ft+4]=S,this.int16[ft+5]=k,this.int16[ft+6]=R,this.int16[ft+7]=P,this.uint16[ft+8]=N,this.uint16[ft+9]=V,this.uint16[ft+10]=H,this.uint16[ft+11]=X,this.uint16[ft+12]=Y,this.uint16[ft+13]=ue,this.uint16[ft+14]=le,this.uint16[ft+15]=ye,this.uint16[ft+16]=ge,this.uint16[ft+17]=Se,this.uint16[ft+18]=Ie,this.uint16[ft+19]=Oe,this.uint16[ft+20]=Ge,this.uint16[ft+21]=Je,this.uint16[ft+22]=mt,this.uint32[pn+12]=tt,this.float32[pn+13]=Et,this.float32[pn+14]=nt,this.float32[pn+15]=un,this.float32[pn+16]=Mt,u},l}(jt);ju.prototype.bytesPerElement=68,rt("StructArrayLayout8i15ui1ul4f68",ju);var $s=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u){var m=this.length;return this.resize(m+1),this.emplace(m,u)},l.prototype.emplace=function(u,m){return this.float32[1*u+0]=m,u},l}(jt);$s.prototype.bytesPerElement=4,rt("StructArrayLayout1f4",$s);var Ng=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m,y){var b=this.length;return this.resize(b+1),this.emplace(b,u,m,y)},l.prototype.emplace=function(u,m,y,b){var E=3*u;return this.int16[E+0]=m,this.int16[E+1]=y,this.int16[E+2]=b,u},l}(jt);Ng.prototype.bytesPerElement=6,rt("StructArrayLayout3i6",Ng);var Vp=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m,y){var b=this.length;return this.resize(b+1),this.emplace(b,u,m,y)},l.prototype.emplace=function(u,m,y,b){var E=4*u;return this.uint32[2*u+0]=m,this.uint16[E+2]=y,this.uint16[E+3]=b,u},l}(jt);Vp.prototype.bytesPerElement=8,rt("StructArrayLayout1ul2ui8",Vp);var gf=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m){var y=this.length;return this.resize(y+1),this.emplace(y,u,m)},l.prototype.emplace=function(u,m,y){var b=2*u;return this.uint16[b+0]=m,this.uint16[b+1]=y,u},l}(jt);gf.prototype.bytesPerElement=4,rt("StructArrayLayout2ui4",gf);var zp=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u){var m=this.length;return this.resize(m+1),this.emplace(m,u)},l.prototype.emplace=function(u,m){return this.uint16[1*u+0]=m,u},l}(jt);zp.prototype.bytesPerElement=2,rt("StructArrayLayout1ui2",zp);var d=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(u,m,y,b){var E=this.length;return this.resize(E+1),this.emplace(E,u,m,y,b)},l.prototype.emplace=function(u,m,y,b,E){var S=4*u;return this.float32[S+0]=m,this.float32[S+1]=y,this.float32[S+2]=b,this.float32[S+3]=E,u},l}(jt);d.prototype.bytesPerElement=16,rt("StructArrayLayout4f16",d);var f=function(s){function l(){s.apply(this,arguments)}s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l;var u={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return u.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},u.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},u.x1.get=function(){return this._structArray.int16[this._pos2+2]},u.y1.get=function(){return this._structArray.int16[this._pos2+3]},u.x2.get=function(){return this._structArray.int16[this._pos2+4]},u.y2.get=function(){return this._structArray.int16[this._pos2+5]},u.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},u.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},u.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},u.anchorPoint.get=function(){return new Ut(this.anchorPointX,this.anchorPointY)},Object.defineProperties(l.prototype,u),l}(is);f.prototype.size=20;var h=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.get=function(u){return new f(this,u)},l}(mf);rt("CollisionBoxArray",h);var g=function(s){function l(){s.apply(this,arguments)}s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l;var u={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return u.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},u.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},u.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},u.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},u.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},u.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},u.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},u.segment.get=function(){return this._structArray.uint16[this._pos2+10]},u.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},u.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},u.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},u.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},u.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},u.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},u.placedOrientation.set=function(m){this._structArray.uint8[this._pos1+37]=m},u.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},u.hidden.set=function(m){this._structArray.uint8[this._pos1+38]=m},u.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},u.crossTileID.set=function(m){this._structArray.uint32[this._pos4+10]=m},u.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(l.prototype,u),l}(is);g.prototype.size=48;var w=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.get=function(u){return new g(this,u)},l}(Bp);rt("PlacedSymbolArray",w);var C=function(s){function l(){s.apply(this,arguments)}s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l;var u={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return u.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},u.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},u.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},u.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},u.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},u.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},u.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},u.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},u.key.get=function(){return this._structArray.uint16[this._pos2+8]},u.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},u.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},u.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},u.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},u.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},u.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},u.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},u.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},u.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},u.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},u.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},u.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},u.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},u.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},u.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},u.crossTileID.set=function(m){this._structArray.uint32[this._pos4+12]=m},u.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},u.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},u.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},u.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(l.prototype,u),l}(is);C.prototype.size=68;var T=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.get=function(u){return new C(this,u)},l}(ju);rt("SymbolInstanceArray",T);var I=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.getoffsetX=function(u){return this.float32[1*u+0]},l}($s);rt("GlyphOffsetArray",I);var M=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.getx=function(u){return this.int16[3*u+0]},l.prototype.gety=function(u){return this.int16[3*u+1]},l.prototype.gettileUnitDistanceFromAnchor=function(u){return this.int16[3*u+2]},l}(Ng);rt("SymbolLineVertexArray",M);var L=function(s){function l(){s.apply(this,arguments)}s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l;var u={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return u.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},u.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},u.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(l.prototype,u),l}(is);L.prototype.size=8;var $=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.get=function(u){return new L(this,u)},l}(Vp);rt("FeatureIndexArray",$);var q=wn([{name:"a_pos",components:2,type:"Int16"}],4).members,j=function(s){void 0===s&&(s=[]),this.segments=s};function ne(s,l){return 256*(s=Qi(Math.floor(s),0,255))+Qi(Math.floor(l),0,255)}j.prototype.prepareSegment=function(s,l,u,m){var y=this.segments[this.segments.length-1];return s>j.MAX_VERTEX_ARRAY_LENGTH&&ur("Max vertices per segment is "+j.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+s),(!y||y.vertexLength+s>j.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==m)&&(y={vertexOffset:l.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},void 0!==m&&(y.sortKey=m),this.segments.push(y)),y},j.prototype.get=function(){return this.segments},j.prototype.destroy=function(){for(var s=0,l=this.segments;s<l.length;s+=1){var u=l[s];for(var m in u.vaos)u.vaos[m].destroy()}},j.simpleSegment=function(s,l,u,m){return new j([{vertexOffset:s,primitiveOffset:l,vertexLength:u,primitiveLength:m,vaos:{},sortKey:0}])},j.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,rt("SegmentVector",j);var J=wn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ae=jo(function(s){s.exports=function(l,u){var m,y,b,E,S,k,R,P;for(y=l.length-(m=3&l.length),b=u,S=3432918353,k=461845907,P=0;P<y;)R=255&l.charCodeAt(P)|(255&l.charCodeAt(++P))<<8|(255&l.charCodeAt(++P))<<16|(255&l.charCodeAt(++P))<<24,++P,b=27492+(65535&(E=5*(65535&(b=(b^=R=(65535&(R=(R=(65535&R)*S+(((R>>>16)*S&65535)<<16)&4294967295)<<15|R>>>17))*k+(((R>>>16)*k&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(R=0,m){case 3:R^=(255&l.charCodeAt(P+2))<<16;case 2:R^=(255&l.charCodeAt(P+1))<<8;case 1:b^=R=(65535&(R=(R=(65535&(R^=255&l.charCodeAt(P)))*S+(((R>>>16)*S&65535)<<16)&4294967295)<<15|R>>>17))*k+(((R>>>16)*k&65535)<<16)&4294967295}return b^=l.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}}),ee=jo(function(s){s.exports=function(l,u){for(var m,y=l.length,b=u^y,E=0;y>=4;)m=1540483477*(65535&(m=255&l.charCodeAt(E)|(255&l.charCodeAt(++E))<<8|(255&l.charCodeAt(++E))<<16|(255&l.charCodeAt(++E))<<24))+((1540483477*(m>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),y-=4,++E;switch(y){case 3:b^=(255&l.charCodeAt(E+2))<<16;case 2:b^=(255&l.charCodeAt(E+1))<<8;case 1:b=1540483477*(65535&(b^=255&l.charCodeAt(E)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}}),ie=ae,pe=ee;ie.murmur3=ae,ie.murmur2=pe;var ve=function(){this.ids=[],this.positions=[],this.indexed=!1};ve.prototype.add=function(s,l,u,m){this.ids.push(Ee(s)),this.positions.push(l,u,m)},ve.prototype.getPositions=function(s){for(var l=Ee(s),u=0,m=this.ids.length-1;u<m;){var y=u+m>>1;this.ids[y]>=l?m=y:u=y+1}for(var b=[];this.ids[u]===l;)b.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return b},ve.serialize=function(s,l){var u=new Float64Array(s.ids),m=new Uint32Array(s.positions);return function y(b,E,S,k){for(;S<k;){for(var R=b[S+k>>1],P=S-1,N=k+1;;){do{P++}while(b[P]<R);do{N--}while(b[N]>R);if(P>=N)break;Ae(b,P,N),Ae(E,3*P,3*N),Ae(E,3*P+1,3*N+1),Ae(E,3*P+2,3*N+2)}N-S<k-N?(y(b,E,S,N),S=N+1):(y(b,E,N+1,k),k=N)}}(u,m,0,u.length-1),l&&l.push(u.buffer,m.buffer),{ids:u,positions:m}},ve.deserialize=function(s){var l=new ve;return l.ids=s.ids,l.positions=s.positions,l.indexed=!0,l};var ke=Math.pow(2,53)-1;function Ee(s){var l=+s;return!isNaN(l)&&l<=ke?l:ie(String(s))}function Ae(s,l,u){var m=s[l];s[l]=s[u],s[u]=m}rt("FeaturePositionMap",ve);var Ne=function(s,l){this.gl=s.gl,this.location=l},Ze=function(s){function l(u,m){s.call(this,u,m),this.current=0}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.set=function(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))},l}(Ne),He=function(s){function l(u,m){s.call(this,u,m),this.current=0}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.set=function(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))},l}(Ne),it=function(s){function l(u,m){s.call(this,u,m),this.current=[0,0]}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.set=function(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))},l}(Ne),_t=function(s){function l(u,m){s.call(this,u,m),this.current=[0,0,0]}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.set=function(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))},l}(Ne),xt=function(s){function l(u,m){s.call(this,u,m),this.current=[0,0,0,0]}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.set=function(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))},l}(Ne),bt=function(s){function l(u,m){s.call(this,u,m),this.current=vn.transparent}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.set=function(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))},l}(Ne),hn=new Float32Array(16),at=function(s){function l(u,m){s.call(this,u,m),this.current=hn}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.set=function(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(var m=1;m<16;m++)if(u[m]!==this.current[m]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}},l}(Ne);function qt(s){return[ne(255*s.r,255*s.g),ne(255*s.b,255*s.a)]}var ln=function(s,l,u){this.value=s,this.uniformNames=l.map(function(m){return"u_"+m}),this.type=u};ln.prototype.setUniform=function(s,l,u){s.set(u.constantOr(this.value))},ln.prototype.getBinding=function(s,l,u){return"color"===this.type?new bt(s,l):new He(s,l)};var Ye=function(s,l){this.uniformNames=l.map(function(u){return"u_"+u}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ye.prototype.setConstantPatternPositions=function(s,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=s.tlbr},Ye.prototype.setUniform=function(s,l,u,m){var y="u_pattern_to"===m?this.patternTo:"u_pattern_from"===m?this.patternFrom:"u_pixel_ratio_to"===m?this.pixelRatioTo:"u_pixel_ratio_from"===m?this.pixelRatioFrom:null;y&&s.set(y)},Ye.prototype.getBinding=function(s,l,u){return"u_pattern"===u.substr(0,9)?new xt(s,l):new He(s,l)};var Pt=function(s,l,u,m){this.expression=s,this.type=u,this.maxValue=0,this.paintVertexAttributes=l.map(function(y){return{name:"a_"+y,type:"Float32",components:"color"===u?2:1,offset:0}}),this.paintVertexArray=new m};Pt.prototype.populatePaintArray=function(s,l,u,m,y){var b=this.paintVertexArray.length,E=this.expression.evaluate(new Ht(0),l,{},m,[],y);this.paintVertexArray.resize(s),this._setPaintValue(b,s,E)},Pt.prototype.updatePaintArray=function(s,l,u,m){var y=this.expression.evaluate({zoom:0},u,m);this._setPaintValue(s,l,y)},Pt.prototype._setPaintValue=function(s,l,u){if("color"===this.type)for(var m=qt(u),y=s;y<l;y++)this.paintVertexArray.emplace(y,m[0],m[1]);else{for(var b=s;b<l;b++)this.paintVertexArray.emplace(b,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}},Pt.prototype.upload=function(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Pt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Vt=function(s,l,u,m,y,b){this.expression=s,this.uniformNames=l.map(function(E){return"u_"+E+"_t"}),this.type=u,this.useIntegerZoom=m,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=l.map(function(E){return{name:"a_"+E,type:"Float32",components:"color"===u?4:2,offset:0}}),this.paintVertexArray=new b};Vt.prototype.populatePaintArray=function(s,l,u,m,y){var b=this.expression.evaluate(new Ht(this.zoom),l,{},m,[],y),E=this.expression.evaluate(new Ht(this.zoom+1),l,{},m,[],y),S=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(S,s,b,E)},Vt.prototype.updatePaintArray=function(s,l,u,m){var y=this.expression.evaluate({zoom:this.zoom},u,m),b=this.expression.evaluate({zoom:this.zoom+1},u,m);this._setPaintValue(s,l,y,b)},Vt.prototype._setPaintValue=function(s,l,u,m){if("color"===this.type)for(var y=qt(u),b=qt(m),E=s;E<l;E++)this.paintVertexArray.emplace(E,y[0],y[1],b[0],b[1]);else{for(var S=s;S<l;S++)this.paintVertexArray.emplace(S,u,m);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(m))}},Vt.prototype.upload=function(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Vt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Vt.prototype.setUniform=function(s,l){var u=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,m=Qi(this.expression.interpolationFactor(u,this.zoom,this.zoom+1),0,1);s.set(m)},Vt.prototype.getBinding=function(s,l,u){return new He(s,l)};var Ot=function(s,l,u,m,y,b){this.expression=s,this.type=l,this.useIntegerZoom=u,this.zoom=m,this.layerId=b,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y};Ot.prototype.populatePaintArray=function(s,l,u){var m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(m,s,l.patterns&&l.patterns[this.layerId],u)},Ot.prototype.updatePaintArray=function(s,l,u,m,y){this._setPaintValues(s,l,u.patterns&&u.patterns[this.layerId],y)},Ot.prototype._setPaintValues=function(s,l,u,m){if(m&&u){var y=m[u.min],b=m[u.mid],E=m[u.max];if(y&&b&&E)for(var S=s;S<l;S++)this.zoomInPaintVertexArray.emplace(S,b.tl[0],b.tl[1],b.br[0],b.br[1],y.tl[0],y.tl[1],y.br[0],y.br[1],b.pixelRatio,y.pixelRatio),this.zoomOutPaintVertexArray.emplace(S,b.tl[0],b.tl[1],b.br[0],b.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],b.pixelRatio,E.pixelRatio)}},Ot.prototype.upload=function(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,J.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,J.members,this.expression.isStateDependent))},Ot.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Tt=function(s,l,u){this.binders={},this._buffers=[];var m=[];for(var y in s.paint._values)if(u(y)){var b=s.paint.get(y);if(b instanceof qo&&Od(b.property.specification)){var E=Br(y,s.type),S=b.value,k=b.property.specification.type,R=b.property.useIntegerZoom,P=b.property.specification["property-type"],N="cross-faded"===P||"cross-faded-data-driven"===P;if("constant"===S.kind)this.binders[y]=N?new Ye(S.value,E):new ln(S.value,E,k),m.push("/u_"+y);else if("source"===S.kind||N){var V=oo(y,k,"source");this.binders[y]=N?new Ot(S,k,R,l,V,s.id):new Pt(S,E,k,V),m.push("/a_"+y)}else{var H=oo(y,k,"composite");this.binders[y]=new Vt(S,E,k,R,l,H),m.push("/z_"+y)}}}this.cacheKey=m.sort().join("")};Tt.prototype.getMaxValue=function(s){var l=this.binders[s];return l instanceof Pt||l instanceof Vt?l.maxValue:0},Tt.prototype.populatePaintArrays=function(s,l,u,m,y){for(var b in this.binders){var E=this.binders[b];(E instanceof Pt||E instanceof Vt||E instanceof Ot)&&E.populatePaintArray(s,l,u,m,y)}},Tt.prototype.setConstantPatternPositions=function(s,l){for(var u in this.binders){var m=this.binders[u];m instanceof Ye&&m.setConstantPatternPositions(s,l)}},Tt.prototype.updatePaintArrays=function(s,l,u,m,y){var b=!1;for(var E in s)for(var S=0,k=l.getPositions(E);S<k.length;S+=1){var R=k[S],P=u.feature(R.index);for(var N in this.binders){var V=this.binders[N];if((V instanceof Pt||V instanceof Vt||V instanceof Ot)&&!0===V.expression.isStateDependent){var H=m.paint.get(N);V.expression=H.value,V.updatePaintArray(R.start,R.end,P,s[E],y),b=!0}}}return b},Tt.prototype.defines=function(){var s=[];for(var l in this.binders){var u=this.binders[l];(u instanceof ln||u instanceof Ye)&&s.push.apply(s,u.uniformNames.map(function(m){return"#define HAS_UNIFORM_"+m}))}return s},Tt.prototype.getBinderAttributes=function(){var s=[];for(var l in this.binders){var u=this.binders[l];if(u instanceof Pt||u instanceof Vt)for(var m=0;m<u.paintVertexAttributes.length;m++)s.push(u.paintVertexAttributes[m].name);else if(u instanceof Ot)for(var y=0;y<J.members.length;y++)s.push(J.members[y].name)}return s},Tt.prototype.getBinderUniforms=function(){var s=[];for(var l in this.binders){var u=this.binders[l];if(u instanceof ln||u instanceof Ye||u instanceof Vt)for(var m=0,y=u.uniformNames;m<y.length;m+=1)s.push(y[m])}return s},Tt.prototype.getPaintVertexBuffers=function(){return this._buffers},Tt.prototype.getUniforms=function(s,l){var u=[];for(var m in this.binders){var y=this.binders[m];if(y instanceof ln||y instanceof Ye||y instanceof Vt)for(var b=0,E=y.uniformNames;b<E.length;b+=1){var S=E[b];if(l[S]){var k=y.getBinding(s,l[S],S);u.push({name:S,property:m,binding:k})}}}return u},Tt.prototype.setUniforms=function(s,l,u,m){for(var y=0,b=l;y<b.length;y+=1){var E=b[y],S=E.name,k=E.property;this.binders[k].setUniform(E.binding,m,u.get(k),S)}},Tt.prototype.updatePaintBuffers=function(s){for(var l in this._buffers=[],this.binders){var u=this.binders[l];if(s&&u instanceof Ot){var m=2===s.fromScale?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(u instanceof Pt||u instanceof Vt)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}},Tt.prototype.upload=function(s){for(var l in this.binders){var u=this.binders[l];(u instanceof Pt||u instanceof Vt||u instanceof Ot)&&u.upload(s)}this.updatePaintBuffers()},Tt.prototype.destroy=function(){for(var s in this.binders){var l=this.binders[s];(l instanceof Pt||l instanceof Vt||l instanceof Ot)&&l.destroy()}};var nr=function(s,l,u){void 0===u&&(u=function(){return!0}),this.programConfigurations={};for(var m=0,y=s;m<y.length;m+=1){var b=y[m];this.programConfigurations[b.id]=new Tt(b,l,u)}this.needsUpload=!1,this._featureMap=new ve,this._bufferOffset=0};function Br(s,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(l+"-","").replace(/-/g,"_")]}function oo(s,l,u){var y={"line-pattern":{source:Jl,composite:Jl},"fill-pattern":{source:Jl,composite:Jl},"fill-extrusion-pattern":{source:Jl,composite:Jl}}[s];return y&&y[u]||{color:{source:ss,composite:d},number:{source:$s,composite:ss}}[l][u]}nr.prototype.populatePaintArrays=function(s,l,u,m,y,b){for(var E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(s,l,m,y,b);void 0!==l.id&&this._featureMap.add(l.id,u,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0},nr.prototype.updatePaintArrays=function(s,l,u,m){for(var y=0,b=u;y<b.length;y+=1){var E=b[y];this.needsUpload=this.programConfigurations[E.id].updatePaintArrays(s,this._featureMap,l,E,m)||this.needsUpload}},nr.prototype.get=function(s){return this.programConfigurations[s]},nr.prototype.upload=function(s){if(this.needsUpload){for(var l in this.programConfigurations)this.programConfigurations[l].upload(s);this.needsUpload=!1}},nr.prototype.destroy=function(){for(var s in this.programConfigurations)this.programConfigurations[s].destroy()},rt("ConstantBinder",ln),rt("CrossFadedConstantBinder",Ye),rt("SourceExpressionBinder",Pt),rt("CrossFadedCompositeBinder",Ot),rt("CompositeExpressionBinder",Vt),rt("ProgramConfiguration",Tt,{omit:["_buffers"]}),rt("ProgramConfigurationSet",nr);var fi=Math.pow(2,14)-1,pi=-fi-1;function Zr(s){for(var l=8192/s.extent,u=s.loadGeometry(),m=0;m<u.length;m++)for(var y=u[m],b=0;b<y.length;b++){var E=y[b],S=Math.round(E.x*l),k=Math.round(E.y*l);E.x=Qi(S,pi,fi),E.y=Qi(k,pi,fi),(S<E.x||S>E.x+1||k<E.y||k>E.y+1)&&ur("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return u}function ko(s,l){return{type:s.type,id:s.id,properties:s.properties,geometry:l?Zr(s):[]}}function La(s,l,u,m,y){s.emplaceBack(2*l+(m+1)/2,2*u+(y+1)/2)}var go=function(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(function(l){return l.id}),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new zu,this.indexArray=new Hs,this.segments=new j,this.programConfigurations=new nr(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(function(l){return l.isStateDependent()}).map(function(l){return l.id})};function Me(s,l){for(var u=0;u<s.length;u++)if(sa(l,s[u]))return!0;for(var m=0;m<l.length;m++)if(sa(s,l[m]))return!0;return!!Gt(s,l)}function Ft(s,l,u){return!!sa(s,l)||!!oa(l,s,u)}function Bt(s,l){if(1===s.length)return $c(l,s[0]);for(var u=0;u<l.length;u++)for(var m=l[u],y=0;y<m.length;y++)if(sa(s,m[y]))return!0;for(var b=0;b<s.length;b++)if($c(l,s[b]))return!0;for(var E=0;E<l.length;E++)if(Gt(s,l[E]))return!0;return!1}function cn(s,l,u){if(s.length>1){if(Gt(s,l))return!0;for(var m=0;m<l.length;m++)if(oa(l[m],s,u))return!0}for(var y=0;y<s.length;y++)if(oa(s[y],l,u))return!0;return!1}function Gt(s,l){if(0===s.length||0===l.length)return!1;for(var u=0;u<s.length-1;u++)for(var m=s[u],y=s[u+1],b=0;b<l.length-1;b++)if(Hc(m,y,l[b],l[b+1]))return!0;return!1}function Hc(s,l,u,m){return Do(s,u,m)!==Do(l,u,m)&&Do(s,l,u)!==Do(s,l,m)}function oa(s,l,u){var m=u*u;if(1===l.length)return s.distSqr(l[0])<m;for(var y=1;y<l.length;y++)if(Rs(s,l[y-1],l[y])<m)return!0;return!1}function Rs(s,l,u){var m=l.distSqr(u);if(0===m)return s.distSqr(l);var y=((s.x-l.x)*(u.x-l.x)+(s.y-l.y)*(u.y-l.y))/m;return s.distSqr(y<0?l:y>1?u:u.sub(l)._mult(y)._add(l))}function $c(s,l){for(var u,m,y,b=!1,E=0;E<s.length;E++)for(var S=0,k=(u=s[E]).length-1;S<u.length;k=S++)(m=u[S]).y>l.y!=(y=u[k]).y>l.y&&l.x<(y.x-m.x)*(l.y-m.y)/(y.y-m.y)+m.x&&(b=!b);return b}function sa(s,l){for(var u=!1,m=0,y=s.length-1;m<s.length;y=m++){var b=s[m],E=s[y];b.y>l.y!=E.y>l.y&&l.x<(E.x-b.x)*(l.y-b.y)/(E.y-b.y)+b.x&&(u=!u)}return u}function qc(s,l,u){var m=u[0],y=u[2];if(s.x<m.x&&l.x<m.x||s.x>y.x&&l.x>y.x||s.y<m.y&&l.y<m.y||s.y>y.y&&l.y>y.y)return!1;var b=Do(s,l,u[0]);return b!==Do(s,l,u[1])||b!==Do(s,l,u[2])||b!==Do(s,l,u[3])}function Di(s,l,u){var m=l.paint.get(s).value;return"constant"===m.kind?m.value:u.programConfigurations.get(l.id).getMaxValue(s)}function tc(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function qs(s,l,u,m,y){if(!l[0]&&!l[1])return s;var b=Ut.convert(l)._mult(y);"viewport"===u&&b._rotate(-m);for(var E=[],S=0;S<s.length;S++)E.push(s[S].sub(b));return E}go.prototype.populate=function(s,l,u){var m=this.layers[0],y=[],b=null,E=!1;"circle"===m.type&&(E=!(b=m.layout.get("circle-sort-key")).isConstant());for(var S=0,k=s;S<k.length;S+=1){var R=k[S],P=R.feature,N=R.id,V=R.index,H=R.sourceLayerIndex,X=this.layers[0]._featureFilter.needGeometry,Y=ko(P,X);if(this.layers[0]._featureFilter.filter(new Ht(this.zoom),Y,u)){var ue=E?b.evaluate(Y,{},u):void 0,le={id:N,properties:P.properties,type:P.type,sourceLayerIndex:H,index:V,geometry:X?Y.geometry:Zr(P),patterns:{},sortKey:ue};y.push(le)}}E&&y.sort(function(mt,tt){return mt.sortKey-tt.sortKey});for(var ye=0,ge=y;ye<ge.length;ye+=1){var Se=ge[ye],Ie=Se.geometry,Oe=Se.index,Ge=Se.sourceLayerIndex,Je=s[Oe].feature;this.addFeature(Se,Ie,Oe,u),l.featureIndex.insert(Je,Ie,Oe,Ge,this.index)}},go.prototype.update=function(s,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,u)},go.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},go.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},go.prototype.upload=function(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,q),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0},go.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},go.prototype.addFeature=function(s,l,u,m){for(var y=0,b=l;y<b.length;y+=1)for(var E=0,S=b[y];E<S.length;E+=1){var k=S[E],R=k.x,P=k.y;if(!(R<0||R>=8192||P<0||P>=8192)){var N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),V=N.vertexLength;La(this.layoutVertexArray,R,P,-1,-1),La(this.layoutVertexArray,R,P,1,-1),La(this.layoutVertexArray,R,P,1,1),La(this.layoutVertexArray,R,P,-1,1),this.indexArray.emplaceBack(V,V+1,V+2),this.indexArray.emplaceBack(V,V+3,V+2),N.vertexLength+=4,N.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,u,{},m)},rt("CircleBucket",go,{omit:["layers"]});var nc=new hi({"circle-sort-key":new It(W.layout_circle["circle-sort-key"])}),Sr={paint:new hi({"circle-radius":new It(W.paint_circle["circle-radius"]),"circle-color":new It(W.paint_circle["circle-color"]),"circle-blur":new It(W.paint_circle["circle-blur"]),"circle-opacity":new It(W.paint_circle["circle-opacity"]),"circle-translate":new Xe(W.paint_circle["circle-translate"]),"circle-translate-anchor":new Xe(W.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Xe(W.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Xe(W.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new It(W.paint_circle["circle-stroke-width"]),"circle-stroke-color":new It(W.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new It(W.paint_circle["circle-stroke-opacity"])}),layout:nc},Nn=typeof Float32Array<"u"?Float32Array:Array;function Mr(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Hu(s,l,u){var m=l[0],y=l[1],b=l[2],E=l[3],S=l[4],k=l[5],R=l[6],P=l[7],N=l[8],V=l[9],H=l[10],X=l[11],Y=l[12],ue=l[13],le=l[14],ye=l[15],ge=u[0],Se=u[1],Ie=u[2],Oe=u[3];return s[0]=ge*m+Se*S+Ie*N+Oe*Y,s[1]=ge*y+Se*k+Ie*V+Oe*ue,s[2]=ge*b+Se*R+Ie*H+Oe*le,s[3]=ge*E+Se*P+Ie*X+Oe*ye,s[4]=(ge=u[4])*m+(Se=u[5])*S+(Ie=u[6])*N+(Oe=u[7])*Y,s[5]=ge*y+Se*k+Ie*V+Oe*ue,s[6]=ge*b+Se*R+Ie*H+Oe*le,s[7]=ge*E+Se*P+Ie*X+Oe*ye,s[8]=(ge=u[8])*m+(Se=u[9])*S+(Ie=u[10])*N+(Oe=u[11])*Y,s[9]=ge*y+Se*k+Ie*V+Oe*ue,s[10]=ge*b+Se*R+Ie*H+Oe*le,s[11]=ge*E+Se*P+Ie*X+Oe*ye,s[12]=(ge=u[12])*m+(Se=u[13])*S+(Ie=u[14])*N+(Oe=u[15])*Y,s[13]=ge*y+Se*k+Ie*V+Oe*ue,s[14]=ge*b+Se*R+Ie*H+Oe*le,s[15]=ge*E+Se*P+Ie*X+Oe*ye,s}Math.hypot||(Math.hypot=function(){for(var s=arguments,l=0,u=arguments.length;u--;)l+=s[u]*s[u];return Math.sqrt(l)});var Gi,s,hl=Hu;function _f(s,l,u){var m=l[0],y=l[1],b=l[2],E=l[3];return s[0]=u[0]*m+u[4]*y+u[8]*b+u[12]*E,s[1]=u[1]*m+u[5]*y+u[9]*b+u[13]*E,s[2]=u[2]*m+u[6]*y+u[10]*b+u[14]*E,s[3]=u[3]*m+u[7]*y+u[11]*b+u[15]*E,s}Gi=new Nn(3),Nn!=Float32Array&&(Gi[0]=0,Gi[1]=0,Gi[2]=0),s=new Nn(4),Nn!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0,s[3]=0);var $d=(function(){var s=new Nn(2);Nn!=Float32Array&&(s[0]=0,s[1]=0)}(),function(s){function l(u){s.call(this,u,Sr)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.createBucket=function(u){return new go(u)},l.prototype.queryRadius=function(u){var m=u;return Di("circle-radius",this,m)+Di("circle-stroke-width",this,m)+tc(this.paint.get("circle-translate"))},l.prototype.queryIntersectsFeature=function(u,m,y,b,E,S,k,R){for(var P=qs(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,k),N=this.paint.get("circle-radius").evaluate(m,y)+this.paint.get("circle-stroke-width").evaluate(m,y),V="map"===this.paint.get("circle-pitch-alignment"),H=V?P:function(Ge,Je){return Ge.map(function(mt){return Lg(mt,Je)})}(P,R),X=V?N*k:N,Y=0,ue=b;Y<ue.length;Y+=1)for(var le=0,ye=ue[Y];le<ye.length;le+=1){var ge=ye[le],Se=V?ge:Lg(ge,R),Ie=X,Oe=_f([],[ge.x,ge.y,0,1],R);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Ie*=Oe[3]/S.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Ie*=S.cameraToCenterDistance/Oe[3]),Ft(H,Se,Ie))return!0}return!1},l}(Ci));function Lg(s,l){var u=_f([],[s.x,s.y,0,1],l);return new Ut(u[0]/u[3],u[1]/u[3])}var qd=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l}(go);function Gc(s,l,u,m){var y=l.width,b=l.height;if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==y*b*u)throw new RangeError("mismatched image size")}else m=new Uint8Array(y*b*u);return s.width=y,s.height=b,s.data=m,s}function Fg(s,l,u){var m=l.width,y=l.height;if(m!==s.width||y!==s.height){var b=Gc({},{width:m,height:y},u);Up(s,b,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,m),height:Math.min(s.height,y)},u),s.width=m,s.height=y,s.data=b.data}}function Up(s,l,u,m,y,b){if(0===y.width||0===y.height)return l;if(y.width>s.width||y.height>s.height||u.x>s.width-y.width||u.y>s.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>l.width||y.height>l.height||m.x>l.width-y.width||m.y>l.height-y.height)throw new RangeError("out of range destination coordinates for image copy");for(var E=s.data,S=l.data,k=0;k<y.height;k++)for(var R=((u.y+k)*s.width+u.x)*b,P=((m.y+k)*l.width+m.x)*b,N=0;N<y.width*b;N++)S[P+N]=E[R+N];return l}rt("HeatmapBucket",qd,{omit:["layers"]});var rc=function(s,l){Gc(this,s,1,l)};rc.prototype.resize=function(s){Fg(this,s,1)},rc.prototype.clone=function(){return new rc({width:this.width,height:this.height},new Uint8Array(this.data))},rc.copy=function(s,l,u,m,y){Up(s,l,u,m,y,1)};var as=function(s,l){Gc(this,s,4,l)};as.prototype.resize=function(s){Fg(this,s,4)},as.prototype.replace=function(s,l){l?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s},as.prototype.clone=function(){return new as({width:this.width,height:this.height},new Uint8Array(this.data))},as.copy=function(s,l,u,m,y){Up(s,l,u,m,y,4)},rt("AlphaImage",rc),rt("RGBAImage",as);var Aw={paint:new hi({"heatmap-radius":new It(W.paint_heatmap["heatmap-radius"]),"heatmap-weight":new It(W.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Xe(W.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ia(W.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Xe(W.paint_heatmap["heatmap-opacity"])})};function Bg(s){var l={},u=s.resolution||256,m=s.clips?s.clips.length:1,y=s.image||new as({width:u,height:m}),b=function(X,Y,ue){l[s.evaluationKey]=ue;var le=s.expression.evaluate(l);y.data[X+Y+0]=Math.floor(255*le.r/le.a),y.data[X+Y+1]=Math.floor(255*le.g/le.a),y.data[X+Y+2]=Math.floor(255*le.b/le.a),y.data[X+Y+3]=Math.floor(255*le.a)};if(s.clips)for(var E=0,S=0;E<m;++E,S+=4*u)for(var k=0,R=0;k<u;k++,R+=4){var P=k/(u-1),N=s.clips[E];b(S,R,N.start*(1-P)+N.end*P)}else for(var V=0,H=0;V<u;V++,H+=4)b(0,H,V/(u-1));return y}var Rw=function(s){function l(u){s.call(this,u,Aw),this._updateColorRamp()}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.createBucket=function(u){return new qd(u)},l.prototype._handleSpecialPaintPropertyUpdate=function(u){"heatmap-color"===u&&this._updateColorRamp()},l.prototype._updateColorRamp=function(){this.colorRamp=Bg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},l.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},l.prototype.queryRadius=function(){return 0},l.prototype.queryIntersectsFeature=function(){return!1},l.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},l}(Ci),Mw={paint:new hi({"hillshade-illumination-direction":new Xe(W.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Xe(W.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Xe(W.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Xe(W.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Xe(W.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Xe(W.paint_hillshade["hillshade-accent-color"])})},Pw=function(s){function l(u){s.call(this,u,Mw)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},l}(Ci),Ow=wn([{name:"a_pos",components:2,type:"Int16"}],4).members,jp=so,aT=so;function so(s,l,u){u=u||2;var m,y,b,E,S,k,R,P=l&&l.length,N=P?l[0]*u:s.length,V=$u(s,0,N,u,!0),H=[];if(!V||V.next===V.prev)return H;if(P&&(V=function(Y,ue,le,ye){var ge,Se,Ie,Oe=[];for(ge=0,Se=ue.length;ge<Se;ge++)(Ie=$u(Y,ue[ge]*ye,ge<Se-1?ue[ge+1]*ye:Y.length,ye,!1))===Ie.next&&(Ie.steiner=!0),Oe.push(Lw(Ie));for(Oe.sort(Nw),ge=0;ge<Oe.length;ge++)Vg(Oe[ge],le),le=Ao(le,le.next);return le}(s,l,V,u)),s.length>80*u){m=b=s[0],y=E=s[1];for(var X=u;X<N;X+=u)(S=s[X])<m&&(m=S),(k=s[X+1])<y&&(y=k),S>b&&(b=S),k>E&&(E=k);R=0!==(R=Math.max(b-m,E-y))?1/R:0}return ls(V,H,u,m,y,R),H}function $u(s,l,u,m,y){var b,E;if(y===tv(s,l,u,m)>0)for(b=l;b<u;b+=m)E=jn(b,s[b],s[b+1],E);else for(b=u-m;b>=l;b-=m)E=jn(b,s[b],s[b+1],E);return E&&qp(E,E.next)&&(qu(E),E=E.next),E}function Ao(s,l){if(!s)return s;l||(l=s);var u,m=s;do{if(u=!1,m.steiner||!qp(m,m.next)&&0!==rr(m.prev,m,m.next))m=m.next;else{if(qu(m),(m=l=m.prev)===m.next)break;u=!0}}while(u||m!==l);return l}function ls(s,l,u,m,y,b,E){if(s){!E&&b&&function(P,N,V,H){var X=P;do{null===X.z&&(X.z=zg(X.x,X.y,N,V,H)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next}while(X!==P);X.prevZ.nextZ=null,X.prevZ=null,function(Y){var ue,le,ye,ge,Se,Ie,Oe,Ge,Je=1;do{for(le=Y,Y=null,Se=null,Ie=0;le;){for(Ie++,ye=le,Oe=0,ue=0;ue<Je&&(Oe++,ye=ye.nextZ);ue++);for(Ge=Je;Oe>0||Ge>0&&ye;)0!==Oe&&(0===Ge||!ye||le.z<=ye.z)?(ge=le,le=le.nextZ,Oe--):(ge=ye,ye=ye.nextZ,Ge--),Se?Se.nextZ=ge:Y=ge,ge.prevZ=Se,Se=ge;le=ye}Se.nextZ=null,Je*=2}while(Ie>1)}(X)}(s,m,y,b);for(var S,k,R=s;s.prev!==s.next;)if(S=s.prev,k=s.next,b?Hp(s,m,y,b):lT(s))l.push(S.i/u),l.push(s.i/u),l.push(k.i/u),qu(s),s=k.next,R=k.next;else if((s=k)===R){E?1===E?ls(s=cT(Ao(s),l,u),l,u,m,y,b,2):2===E&&uT(s,l,u,m,y,b):ls(Ao(s),l,u,m,y,b,1);break}}}function lT(s){var l=s.prev,u=s,m=s.next;if(rr(l,u,m)>=0)return!1;for(var y=s.next.next;y!==s.prev;){if(Tn(l.x,l.y,u.x,u.y,m.x,m.y,y.x,y.y)&&rr(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function Hp(s,l,u,m){var y=s.prev,b=s,E=s.next;if(rr(y,b,E)>=0)return!1;for(var S=y.x>b.x?y.x>E.x?y.x:E.x:b.x>E.x?b.x:E.x,k=y.y>b.y?y.y>E.y?y.y:E.y:b.y>E.y?b.y:E.y,R=zg(y.x<b.x?y.x<E.x?y.x:E.x:b.x<E.x?b.x:E.x,y.y<b.y?y.y<E.y?y.y:E.y:b.y<E.y?b.y:E.y,l,u,m),P=zg(S,k,l,u,m),N=s.prevZ,V=s.nextZ;N&&N.z>=R&&V&&V.z<=P;){if(N!==s.prev&&N!==s.next&&Tn(y.x,y.y,b.x,b.y,E.x,E.y,N.x,N.y)&&rr(N.prev,N,N.next)>=0||(N=N.prevZ,V!==s.prev&&V!==s.next&&Tn(y.x,y.y,b.x,b.y,E.x,E.y,V.x,V.y)&&rr(V.prev,V,V.next)>=0))return!1;V=V.nextZ}for(;N&&N.z>=R;){if(N!==s.prev&&N!==s.next&&Tn(y.x,y.y,b.x,b.y,E.x,E.y,N.x,N.y)&&rr(N.prev,N,N.next)>=0)return!1;N=N.prevZ}for(;V&&V.z<=P;){if(V!==s.prev&&V!==s.next&&Tn(y.x,y.y,b.x,b.y,E.x,E.y,V.x,V.y)&&rr(V.prev,V,V.next)>=0)return!1;V=V.nextZ}return!0}function cT(s,l,u){var m=s;do{var y=m.prev,b=m.next.next;!qp(y,b)&&Fw(y,m,m.next,b)&&Fa(y,b)&&Fa(b,y)&&(l.push(y.i/u),l.push(m.i/u),l.push(b.i/u),qu(m),qu(m.next),m=s=b),m=m.next}while(m!==s);return Ao(m)}function uT(s,l,u,m,y,b){var E=s;do{for(var S=E.next.next;S!==E.prev;){if(E.i!==S.i&&Un(E,S)){var k=Bw(E,S);return E=Ao(E,E.next),k=Ao(k,k.next),ls(E,l,u,m,y,b),void ls(k,l,u,m,y,b)}S=S.next}E=E.next}while(E!==s)}function Nw(s,l){return s.x-l.x}function Vg(s,l){if(l=function(m,y){var b,E=y,S=m.x,k=m.y,R=-1/0;do{if(k<=E.y&&k>=E.next.y&&E.next.y!==E.y){var P=E.x+(k-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(P<=S&&P>R){if(R=P,P===S){if(k===E.y)return E;if(k===E.next.y)return E.next}b=E.x<E.next.x?E:E.next}}E=E.next}while(E!==y);if(!b)return null;if(S===R)return b;var N,V=b,H=b.x,X=b.y,Y=1/0;E=b;do{S>=E.x&&E.x>=H&&S!==E.x&&Tn(k<X?S:R,k,H,X,k<X?R:S,k,E.x,E.y)&&(N=Math.abs(k-E.y)/(S-E.x),Fa(E,m)&&(N<Y||N===Y&&(E.x>b.x||E.x===b.x&&$p(b,E)))&&(b=E,Y=N)),E=E.next}while(E!==V);return b}(s,l)){var u=Bw(l,s);Ao(l,l.next),Ao(u,u.next)}}function $p(s,l){return rr(s.prev,s,l.prev)<0&&rr(l.next,s,s.next)<0}function zg(s,l,u,m,y){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=32767*(s-u)*y)|s<<8))|s<<4))|s<<2))|s<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=32767*(l-m)*y)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function Lw(s){var l=s,u=s;do{(l.x<u.x||l.x===u.x&&l.y<u.y)&&(u=l),l=l.next}while(l!==s);return u}function Tn(s,l,u,m,y,b,E,S){return(y-E)*(l-S)-(s-E)*(b-S)>=0&&(s-E)*(m-S)-(u-E)*(l-S)>=0&&(u-E)*(b-S)-(y-E)*(m-S)>=0}function Un(s,l){return s.next.i!==l.i&&s.prev.i!==l.i&&!function(u,m){var y=u;do{if(y.i!==u.i&&y.next.i!==u.i&&y.i!==m.i&&y.next.i!==m.i&&Fw(y,y.next,u,m))return!0;y=y.next}while(y!==u);return!1}(s,l)&&(Fa(s,l)&&Fa(l,s)&&function(u,m){var y=u,b=!1,E=(u.x+m.x)/2,S=(u.y+m.y)/2;do{y.y>S!=y.next.y>S&&y.next.y!==y.y&&E<(y.next.x-y.x)*(S-y.y)/(y.next.y-y.y)+y.x&&(b=!b),y=y.next}while(y!==u);return b}(s,l)&&(rr(s.prev,s,l.prev)||rr(s,l.prev,l))||qp(s,l)&&rr(s.prev,s,s.next)>0&&rr(l.prev,l,l.next)>0)}function rr(s,l,u){return(l.y-s.y)*(u.x-l.x)-(l.x-s.x)*(u.y-l.y)}function qp(s,l){return s.x===l.x&&s.y===l.y}function Fw(s,l,u,m){var y=Ug(rr(s,l,u)),b=Ug(rr(s,l,m)),E=Ug(rr(u,m,s)),S=Ug(rr(u,m,l));return y!==b&&E!==S||!(0!==y||!Gp(s,u,l))||!(0!==b||!Gp(s,m,l))||!(0!==E||!Gp(u,s,m))||!(0!==S||!Gp(u,l,m))}function Gp(s,l,u){return l.x<=Math.max(s.x,u.x)&&l.x>=Math.min(s.x,u.x)&&l.y<=Math.max(s.y,u.y)&&l.y>=Math.min(s.y,u.y)}function Ug(s){return s>0?1:s<0?-1:0}function Fa(s,l){return rr(s.prev,s,s.next)<0?rr(s,l,s.next)>=0&&rr(s,s.prev,l)>=0:rr(s,l,s.prev)<0||rr(s,s.next,l)<0}function Bw(s,l){var u=new jg(s.i,s.x,s.y),m=new jg(l.i,l.x,l.y),y=s.next,b=l.prev;return s.next=l,l.prev=s,u.next=y,y.prev=u,m.next=u,u.prev=m,b.next=m,m.prev=b,m}function jn(s,l,u,m){var y=new jg(s,l,u);return m?(y.next=m.next,y.prev=m,m.next.prev=y,m.next=y):(y.prev=y,y.next=y),y}function qu(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function jg(s,l,u){this.i=s,this.x=l,this.y=u,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function tv(s,l,u,m){for(var y=0,b=l,E=u-m;b<u;b+=m)y+=(s[E]-s[b])*(s[b+1]+s[E+1]),E=b;return y}function c2(s,l,u,m,y){!function b(E,S,k,R,P){for(;R>k;){if(R-k>600){var N=R-k+1,V=S-k+1,H=Math.log(N),X=.5*Math.exp(2*H/3),Y=.5*Math.sqrt(H*X*(N-X)/N)*(V-N/2<0?-1:1);b(E,S,Math.max(k,Math.floor(S-V*X/N+Y)),Math.min(R,Math.floor(S+(N-V)*X/N+Y)),P)}var ue=E[S],le=k,ye=R;for(Gd(E,k,S),P(E[R],ue)>0&&Gd(E,k,R);le<ye;){for(Gd(E,le,ye),le++,ye--;P(E[le],ue)<0;)le++;for(;P(E[ye],ue)>0;)ye--}0===P(E[k],ue)?Gd(E,k,ye):Gd(E,++ye,R),ye<=S&&(k=ye+1),S<=ye&&(R=ye-1)}}(s,l,u||0,m||s.length-1,y||Hg)}function Gd(s,l,u){var m=s[l];s[l]=s[u],s[u]=m}function Hg(s,l){return s<l?-1:s>l?1:0}function nv(s,l){var u=s.length;if(u<=1)return[s];for(var m,y,b=[],E=0;E<u;E++){var S=Tp(s[E]);0!==S&&(s[E].area=Math.abs(S),void 0===y&&(y=S<0),y===S<0?(m&&b.push(m),m=[s[E]]):m.push(s[E]))}if(m&&b.push(m),l>1)for(var k=0;k<b.length;k++)b[k].length<=l||(c2(b[k],l,1,b[k].length-1,Jt),b[k]=b[k].slice(0,l));return b}function Jt(s,l){return l.area-s.area}function rv(s,l,u){for(var m=u.patternDependencies,y=!1,b=0,E=l;b<E.length;b+=1){var S=E[b].paint.get(s+"-pattern");S.isConstant()||(y=!0);var k=S.constantOr(null);k&&(y=!0,m[k.to]=!0,m[k.from]=!0)}return y}function Wp(s,l,u,m,y){for(var b=y.patternDependencies,E=0,S=l;E<S.length;E+=1){var k=S[E],R=k.paint.get(s+"-pattern").value;if("constant"!==R.kind){var P=R.evaluate({zoom:m-1},u,{},y.availableImages),N=R.evaluate({zoom:m},u,{},y.availableImages),V=R.evaluate({zoom:m+1},u,{},y.availableImages);N=N&&N.name?N.name:N,V=V&&V.name?V.name:V,b[P=P&&P.name?P.name:P]=!0,b[N]=!0,b[V]=!0,u.patterns[k.id]={min:P,mid:N,max:V}}}return u}so.deviation=function(s,l,u,m){var y=l&&l.length,b=Math.abs(tv(s,0,y?l[0]*u:s.length,u));if(y)for(var E=0,S=l.length;E<S;E++)b-=Math.abs(tv(s,l[E]*u,E<S-1?l[E+1]*u:s.length,u));var k=0;for(E=0;E<m.length;E+=3){var R=m[E]*u,P=m[E+1]*u,N=m[E+2]*u;k+=Math.abs((s[R]-s[N])*(s[P+1]-s[R+1])-(s[R]-s[P])*(s[N+1]-s[R+1]))}return 0===b&&0===k?0:Math.abs((k-b)/b)},so.flatten=function(s){for(var l=s[0][0].length,u={vertices:[],holes:[],dimensions:l},m=0,y=0;y<s.length;y++){for(var b=0;b<s[y].length;b++)for(var E=0;E<l;E++)u.vertices.push(s[y][b][E]);y>0&&u.holes.push(m+=s[y-1].length)}return u},jp.default=aT;var fl=function(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(function(l){return l.id}),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new zu,this.indexArray=new Hs,this.indexArray2=new gf,this.programConfigurations=new nr(s.layers,s.zoom),this.segments=new j,this.segments2=new j,this.stateDependentLayerIds=this.layers.filter(function(l){return l.isStateDependent()}).map(function(l){return l.id})};fl.prototype.populate=function(s,l,u){this.hasPattern=rv("fill",this.layers,l);for(var m=this.layers[0].layout.get("fill-sort-key"),y=!m.isConstant(),b=[],E=0,S=s;E<S.length;E+=1){var k=S[E],R=k.feature,P=k.id,N=k.index,V=k.sourceLayerIndex,H=this.layers[0]._featureFilter.needGeometry,X=ko(R,H);if(this.layers[0]._featureFilter.filter(new Ht(this.zoom),X,u)){var Y=y?m.evaluate(X,{},u,l.availableImages):void 0,ue={id:P,properties:R.properties,type:R.type,sourceLayerIndex:V,index:N,geometry:H?X.geometry:Zr(R),patterns:{},sortKey:Y};b.push(ue)}}y&&b.sort(function(Je,mt){return Je.sortKey-mt.sortKey});for(var le=0,ye=b;le<ye.length;le+=1){var ge=ye[le],Se=ge.geometry,Ie=ge.index,Oe=ge.sourceLayerIndex;if(this.hasPattern){var Ge=Wp("fill",this.layers,ge,this.zoom,l);this.patternFeatures.push(Ge)}else this.addFeature(ge,Se,Ie,u,{});l.featureIndex.insert(s[Ie].feature,Se,Ie,Oe,this.index)}},fl.prototype.update=function(s,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,u)},fl.prototype.addFeatures=function(s,l,u){for(var m=0,y=this.patternFeatures;m<y.length;m+=1){var b=y[m];this.addFeature(b,b.geometry,b.index,l,u)}},fl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},fl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},fl.prototype.upload=function(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Ow),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0},fl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},fl.prototype.addFeature=function(s,l,u,m,y){for(var b=0,E=nv(l,500);b<E.length;b+=1){for(var S=E[b],k=0,R=0,P=S;R<P.length;R+=1)k+=P[R].length;for(var N=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray),V=N.vertexLength,H=[],X=[],Y=0,ue=S;Y<ue.length;Y+=1){var le=ue[Y];if(0!==le.length){le!==S[0]&&X.push(H.length/2);var ye=this.segments2.prepareSegment(le.length,this.layoutVertexArray,this.indexArray2),ge=ye.vertexLength;this.layoutVertexArray.emplaceBack(le[0].x,le[0].y),this.indexArray2.emplaceBack(ge+le.length-1,ge),H.push(le[0].x),H.push(le[0].y);for(var Se=1;Se<le.length;Se++)this.layoutVertexArray.emplaceBack(le[Se].x,le[Se].y),this.indexArray2.emplaceBack(ge+Se-1,ge+Se),H.push(le[Se].x),H.push(le[Se].y);ye.vertexLength+=le.length,ye.primitiveLength+=le.length}}for(var Ie=jp(H,X),Oe=0;Oe<Ie.length;Oe+=3)this.indexArray.emplaceBack(V+Ie[Oe],V+Ie[Oe+1],V+Ie[Oe+2]);N.vertexLength+=k,N.primitiveLength+=Ie.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,u,y,m)},rt("FillBucket",fl,{omit:["layers","patternFeatures"]});var dT=new hi({"fill-sort-key":new It(W.layout_fill["fill-sort-key"])}),iv={paint:new hi({"fill-antialias":new Xe(W.paint_fill["fill-antialias"]),"fill-opacity":new It(W.paint_fill["fill-opacity"]),"fill-color":new It(W.paint_fill["fill-color"]),"fill-outline-color":new It(W.paint_fill["fill-outline-color"]),"fill-translate":new Xe(W.paint_fill["fill-translate"]),"fill-translate-anchor":new Xe(W.paint_fill["fill-translate-anchor"]),"fill-pattern":new di(W.paint_fill["fill-pattern"])}),layout:dT},Vw=function(s){function l(u){s.call(this,u,iv)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.recalculate=function(u,m){s.prototype.recalculate.call(this,u,m);var y=this.paint._values["fill-outline-color"];"constant"===y.value.kind&&void 0===y.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},l.prototype.createBucket=function(u){return new fl(u)},l.prototype.queryRadius=function(){return tc(this.paint.get("fill-translate"))},l.prototype.queryIntersectsFeature=function(u,m,y,b,E,S,k){return Bt(qs(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,k),b)},l.prototype.isTileClipped=function(){return!0},l}(Ci),zw=wn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Uw=yf;function yf(s,l,u,m,y){this.properties={},this.extent=u,this.type=0,this._pbf=s,this._geometry=-1,this._keys=m,this._values=y,s.readFields(hT,this,l)}function hT(s,l,u){1==s?l.id=u.readVarint():2==s?function(m,y){for(var b=m.readVarint()+m.pos;m.pos<b;){var E=y._keys[m.readVarint()],S=y._values[m.readVarint()];y.properties[E]=S}}(u,l):3==s?l.type=u.readVarint():4==s&&(l._geometry=u.pos)}function jw(s){for(var l,u,m=0,y=0,b=s.length,E=b-1;y<b;E=y++)m+=((u=s[E]).x-(l=s[y]).x)*(l.y+u.y);return m}yf.types=["Unknown","Point","LineString","Polygon"],yf.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var l,u=s.readVarint()+s.pos,m=1,y=0,b=0,E=0,S=[];s.pos<u;){if(y<=0){var k=s.readVarint();m=7&k,y=k>>3}if(y--,1===m||2===m)b+=s.readSVarint(),E+=s.readSVarint(),1===m&&(l&&S.push(l),l=[]),l.push(new Ut(b,E));else{if(7!==m)throw new Error("unknown command "+m);l&&l.push(l[0].clone())}}return l&&S.push(l),S},yf.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var l=s.readVarint()+s.pos,u=1,m=0,y=0,b=0,E=1/0,S=-1/0,k=1/0,R=-1/0;s.pos<l;){if(m<=0){var P=s.readVarint();u=7&P,m=P>>3}if(m--,1===u||2===u)(y+=s.readSVarint())<E&&(E=y),y>S&&(S=y),(b+=s.readSVarint())<k&&(k=b),b>R&&(R=b);else if(7!==u)throw new Error("unknown command "+u)}return[E,k,S,R]},yf.prototype.toGeoJSON=function(s,l,u){var m,y,b=this.extent*Math.pow(2,u),E=this.extent*s,S=this.extent*l,k=this.loadGeometry(),R=yf.types[this.type];function P(H){for(var X=0;X<H.length;X++){var Y=H[X];H[X]=[360*(Y.x+E)/b-180,360/Math.PI*Math.atan(Math.exp((180-360*(Y.y+S)/b)*Math.PI/180))-90]}}switch(this.type){case 1:var N=[];for(m=0;m<k.length;m++)N[m]=k[m][0];P(k=N);break;case 2:for(m=0;m<k.length;m++)P(k[m]);break;case 3:for(k=function(H){var X=H.length;if(X<=1)return[H];for(var Y,ue,le=[],ye=0;ye<X;ye++){var ge=jw(H[ye]);0!==ge&&(void 0===ue&&(ue=ge<0),ue===ge<0?(Y&&le.push(Y),Y=[H[ye]]):Y.push(H[ye]))}return Y&&le.push(Y),le}(k),m=0;m<k.length;m++)for(y=0;y<k[m].length;y++)P(k[m][y])}1===k.length?k=k[0]:R="Multi"+R;var V={type:"Feature",geometry:{type:R,coordinates:k},properties:this.properties};return"id"in this&&(V.id=this.id),V};var vf=pl;function pl(s,l){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(Hw,this,l),this.length=this._features.length}function Hw(s,l,u){15===s?l.version=u.readVarint():1===s?l.name=u.readString():5===s?l.extent=u.readVarint():2===s?l._features.push(u.pos):3===s?l._keys.push(u.readString()):4===s&&l._values.push(function(m){for(var y=null,b=m.readVarint()+m.pos;m.pos<b;){var E=m.readVarint()>>3;y=1===E?m.readString():2===E?m.readFloat():3===E?m.readDouble():4===E?m.readVarint64():5===E?m.readVarint():6===E?m.readSVarint():7===E?m.readBoolean():null}return y}(u))}function fT(s,l,u){if(3===s){var m=new vf(u,u.readVarint()+u.pos);m.length&&(l[m.name]=m)}}pl.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var l=this._pbf.readVarint()+this._pbf.pos;return new Uw(this._pbf,l,this.extent,this._keys,this._values)};var Zp={VectorTile:function(s,l){this.layers=s.readFields(fT,{},l)},VectorTileFeature:Uw,VectorTileLayer:vf},u2=Zp.VectorTileFeature.types,cs=Math.pow(2,13);function Wd(s,l,u,m,y,b,E,S){s.emplaceBack(l,u,2*Math.floor(m*cs)+E,y*cs*2,b*cs*2,Math.round(S))}var ic=function(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(function(l){return l.id}),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new qi,this.indexArray=new Hs,this.programConfigurations=new nr(s.layers,s.zoom),this.segments=new j,this.stateDependentLayerIds=this.layers.filter(function(l){return l.isStateDependent()}).map(function(l){return l.id})};function ov(s,l){return s.x===l.x&&(s.x<0||s.x>8192)||s.y===l.y&&(s.y<0||s.y>8192)}ic.prototype.populate=function(s,l,u){this.features=[],this.hasPattern=rv("fill-extrusion",this.layers,l);for(var m=0,y=s;m<y.length;m+=1){var b=y[m],E=b.feature,S=b.id,k=b.index,R=b.sourceLayerIndex,P=this.layers[0]._featureFilter.needGeometry,N=ko(E,P);if(this.layers[0]._featureFilter.filter(new Ht(this.zoom),N,u)){var V={id:S,sourceLayerIndex:R,index:k,geometry:P?N.geometry:Zr(E),properties:E.properties,type:E.type,patterns:{}};this.hasPattern?this.features.push(Wp("fill-extrusion",this.layers,V,this.zoom,l)):this.addFeature(V,V.geometry,k,u,{}),l.featureIndex.insert(E,V.geometry,k,R,this.index,!0)}}},ic.prototype.addFeatures=function(s,l,u){for(var m=0,y=this.features;m<y.length;m+=1){var b=y[m];this.addFeature(b,b.geometry,b.index,l,u)}},ic.prototype.update=function(s,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,u)},ic.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ic.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ic.prototype.upload=function(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,zw),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0},ic.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ic.prototype.addFeature=function(s,l,u,m,y){for(var b=0,E=nv(l,500);b<E.length;b+=1){for(var S=E[b],k=0,R=0,P=S;R<P.length;R+=1)k+=P[R].length;for(var N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),V=0,H=S;V<H.length;V+=1){var X=H[V];if(0!==X.length&&!((pn=X).every(function(Qt){return Qt.x<0})||pn.every(function(Qt){return Qt.x>8192})||pn.every(function(Qt){return Qt.y<0})||pn.every(function(Qt){return Qt.y>8192})))for(var Y=0,ue=0;ue<X.length;ue++){var le=X[ue];if(ue>=1){var ye=X[ue-1];if(!ov(le,ye)){N.vertexLength+4>j.MAX_VERTEX_ARRAY_LENGTH&&(N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ge=le.sub(ye)._perp()._unit(),Se=ye.dist(le);Y+Se>32768&&(Y=0),Wd(this.layoutVertexArray,le.x,le.y,ge.x,ge.y,0,0,Y),Wd(this.layoutVertexArray,le.x,le.y,ge.x,ge.y,0,1,Y),Wd(this.layoutVertexArray,ye.x,ye.y,ge.x,ge.y,0,0,Y+=Se),Wd(this.layoutVertexArray,ye.x,ye.y,ge.x,ge.y,0,1,Y);var Ie=N.vertexLength;this.indexArray.emplaceBack(Ie,Ie+2,Ie+1),this.indexArray.emplaceBack(Ie+1,Ie+2,Ie+3),N.vertexLength+=4,N.primitiveLength+=2}}}}if(N.vertexLength+k>j.MAX_VERTEX_ARRAY_LENGTH&&(N=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray)),"Polygon"===u2[s.type]){for(var Oe=[],Ge=[],Je=N.vertexLength,mt=0,tt=S;mt<tt.length;mt+=1){var Et=tt[mt];if(0!==Et.length){Et!==S[0]&&Ge.push(Oe.length/2);for(var nt=0;nt<Et.length;nt++){var un=Et[nt];Wd(this.layoutVertexArray,un.x,un.y,0,0,1,1,0),Oe.push(un.x),Oe.push(un.y)}}}for(var Mt=jp(Oe,Ge),ft=0;ft<Mt.length;ft+=3)this.indexArray.emplaceBack(Je+Mt[ft],Je+Mt[ft+2],Je+Mt[ft+1]);N.primitiveLength+=Mt.length/3,N.vertexLength+=k}}var pn;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,u,y,m)},rt("FillExtrusionBucket",ic,{omit:["layers","features"]});var pT={paint:new hi({"fill-extrusion-opacity":new Xe(W["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new It(W["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Xe(W["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Xe(W["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new di(W["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new It(W["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new It(W["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Xe(W["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},bf=function(s){function l(u){s.call(this,u,pT)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.createBucket=function(u){return new ic(u)},l.prototype.queryRadius=function(){return tc(this.paint.get("fill-extrusion-translate"))},l.prototype.is3D=function(){return!0},l.prototype.queryIntersectsFeature=function(u,m,y,b,E,S,k,R){var P=qs(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,k),N=this.paint.get("fill-extrusion-height").evaluate(m,y),V=this.paint.get("fill-extrusion-base").evaluate(m,y),H=function(Y,ue){for(var ge=[],Se=0,Ie=Y;Se<Ie.length;Se+=1){var Oe=Ie[Se],Ge=[Oe.x,Oe.y,0,1];_f(Ge,Ge,ue),ge.push(new Ut(Ge[0]/Ge[3],Ge[1]/Ge[3]))}return ge}(P,R),X=function(Y,ue,le,ye){for(var ge=[],Se=[],Ie=ye[8]*ue,Oe=ye[9]*ue,Ge=ye[10]*ue,Je=ye[11]*ue,mt=ye[8]*le,tt=ye[9]*le,Et=ye[10]*le,nt=ye[11]*le,un=0,Mt=Y;un<Mt.length;un+=1){for(var ft=[],pn=[],Qt=0,xn=Mt[un];Qt<xn.length;Qt+=1){var Ct=xn[Qt],Sn=Ct.x,gr=Ct.y,Or=ye[0]*Sn+ye[4]*gr+ye[12],Ir=ye[1]*Sn+ye[5]*gr+ye[13],_r=ye[2]*Sn+ye[6]*gr+ye[14],zr=ye[3]*Sn+ye[7]*gr+ye[15],Ti=_r+Ge,Si=zr+Je,Po=Or+mt,Zi=Ir+tt,Oo=_r+Et,Yr=zr+nt,Ii=new Ut((Or+Ie)/Si,(Ir+Oe)/Si);Ii.z=Ti/Si,ft.push(Ii);var yn=new Ut(Po/Yr,Zi/Yr);yn.z=Oo/Yr,pn.push(yn)}ge.push(ft),Se.push(pn)}return[ge,Se]}(b,V,N,R);return function(Y,ue,le){var ye=1/0;Bt(le,ue)&&(ye=mT(le,ue[0]));for(var ge=0;ge<ue.length;ge++)for(var Se=ue[ge],Ie=Y[ge],Oe=0;Oe<Se.length-1;Oe++){var Ge=Se[Oe],Je=[Ge,Se[Oe+1],Ie[Oe+1],Ie[Oe],Ge];Me(le,Je)&&(ye=Math.min(ye,mT(le,Je)))}return ye!==1/0&&ye}(X[0],X[1],H)},l}(Ci);function Gu(s,l){return s.x*l.x+s.y*l.y}function mT(s,l){if(1===s.length){for(var u,m=0,y=l[m++];!u||y.equals(u);)if(!(u=l[m++]))return 1/0;for(;m<l.length;m++){var b=l[m],E=s[0],S=u.sub(y),k=b.sub(y),R=E.sub(y),P=Gu(S,S),N=Gu(S,k),V=Gu(k,k),H=Gu(R,S),X=Gu(R,k),Y=P*V-N*N,ue=(V*H-N*X)/Y,le=(P*X-N*H)/Y,ye=y.z*(1-ue-le)+u.z*ue+b.z*le;if(isFinite(ye))return ye}return 1/0}for(var ge=1/0,Se=0,Ie=l;Se<Ie.length;Se+=1)ge=Math.min(ge,Ie[Se].z);return ge}var $w=wn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,sv=wn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,qw=Zp.VectorTileFeature.types,gT=Math.cos(Math.PI/180*37.5),$g=Math.pow(2,14)/.5,Go=function(s){var l=this;this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(function(u){return u.id}),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(u){l.gradients[u.id]={}}),this.layoutVertexArray=new os,this.layoutVertexArray2=new ss,this.indexArray=new Hs,this.programConfigurations=new nr(s.layers,s.zoom),this.segments=new j,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(u){return u.isStateDependent()}).map(function(u){return u.id})};Go.prototype.populate=function(s,l,u){this.hasPattern=rv("line",this.layers,l);for(var m=this.layers[0].layout.get("line-sort-key"),y=!m.isConstant(),b=[],E=0,S=s;E<S.length;E+=1){var k=S[E],R=k.feature,P=k.id,N=k.index,V=k.sourceLayerIndex,H=this.layers[0]._featureFilter.needGeometry,X=ko(R,H);if(this.layers[0]._featureFilter.filter(new Ht(this.zoom),X,u)){var Y=y?m.evaluate(X,{},u):void 0,ue={id:P,properties:R.properties,type:R.type,sourceLayerIndex:V,index:N,geometry:H?X.geometry:Zr(R),patterns:{},sortKey:Y};b.push(ue)}}y&&b.sort(function(Je,mt){return Je.sortKey-mt.sortKey});for(var le=0,ye=b;le<ye.length;le+=1){var ge=ye[le],Se=ge.geometry,Ie=ge.index,Oe=ge.sourceLayerIndex;if(this.hasPattern){var Ge=Wp("line",this.layers,ge,this.zoom,l);this.patternFeatures.push(Ge)}else this.addFeature(ge,Se,Ie,u,{});l.featureIndex.insert(s[Ie].feature,Se,Ie,Oe,this.index)}},Go.prototype.update=function(s,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,u)},Go.prototype.addFeatures=function(s,l,u){for(var m=0,y=this.patternFeatures;m<y.length;m+=1){var b=y[m];this.addFeature(b,b.geometry,b.index,l,u)}},Go.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Go.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Go.prototype.upload=function(s){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,sv)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,$w),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0},Go.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Go.prototype.lineFeatureClips=function(s){if(s.properties&&s.properties.hasOwnProperty("mapbox_clip_start")&&s.properties.hasOwnProperty("mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}},Go.prototype.addFeature=function(s,l,u,m,y){var b=this.layers[0].layout,E=b.get("line-join").evaluate(s,{}),S=b.get("line-cap"),k=b.get("line-miter-limit"),R=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(var P=0,N=l;P<N.length;P+=1)this.addLine(N[P],s,E,S,k,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,u,y,m)},Go.prototype.addLine=function(s,l,u,m,y,b){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var E=0;E<s.length-1;E++)this.totalDistance+=s[E].dist(s[E+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var S="Polygon"===qw[l.type],k=s.length;k>=2&&s[k-1].equals(s[k-2]);)k--;for(var R=0;R<k-1&&s[R].equals(s[R+1]);)R++;if(!(k<(S?3:2))){"bevel"===u&&(y=1.05);var P,N=this.overscaling<=16?122880/(512*this.overscaling):0,V=this.segments.prepareSegment(10*k,this.layoutVertexArray,this.indexArray),H=void 0,X=void 0,Y=void 0,ue=void 0;this.e1=this.e2=-1,S&&(ue=s[R].sub(P=s[k-2])._unit()._perp());for(var le=R;le<k;le++)if(!(X=le===k-1?S?s[R+1]:void 0:s[le+1])||!s[le].equals(X)){ue&&(Y=ue),P&&(H=P),P=s[le],ue=X?X.sub(P)._unit()._perp():Y;var ye=(Y=Y||ue).add(ue);0===ye.x&&0===ye.y||ye._unit();var ge=Y.x*ue.x+Y.y*ue.y,Se=ye.x*ue.x+ye.y*ue.y,Ie=0!==Se?1/Se:1/0,Oe=2*Math.sqrt(2-2*Se),Ge=Se<gT&&H&&X,Je=Y.x*ue.y-Y.y*ue.x>0;if(Ge&&le>R){var mt=P.dist(H);if(mt>2*N){var tt=P.sub(P.sub(H)._mult(N/mt)._round());this.updateDistance(H,tt),this.addCurrentVertex(tt,Y,0,0,V),H=tt}}var Et=H&&X,nt=Et?u:S?"butt":m;if(Et&&"round"===nt&&(Ie<b?nt="miter":Ie<=2&&(nt="fakeround")),"miter"===nt&&Ie>y&&(nt="bevel"),"bevel"===nt&&(Ie>2&&(nt="flipbevel"),Ie<y&&(nt="miter")),H&&this.updateDistance(H,P),"miter"===nt)ye._mult(Ie),this.addCurrentVertex(P,ye,0,0,V);else if("flipbevel"===nt){if(Ie>100)ye=ue.mult(-1);else{var un=Ie*Y.add(ue).mag()/Y.sub(ue).mag();ye._perp()._mult(un*(Je?-1:1))}this.addCurrentVertex(P,ye,0,0,V),this.addCurrentVertex(P,ye.mult(-1),0,0,V)}else if("bevel"===nt||"fakeround"===nt){var Mt=-Math.sqrt(Ie*Ie-1),ft=Je?Mt:0,pn=Je?0:Mt;if(H&&this.addCurrentVertex(P,Y,ft,pn,V),"fakeround"===nt)for(var Qt=Math.round(180*Oe/Math.PI/20),xn=1;xn<Qt;xn++){var Ct=xn/Qt;if(.5!==Ct){var Sn=Ct-.5;Ct+=Ct*Sn*(Ct-1)*((1.0904+ge*(ge*(3.55645-1.43519*ge)-3.2452))*Sn*Sn+(.848013+ge*(.215638*ge-1.06021)))}var gr=ue.sub(Y)._mult(Ct)._add(Y)._unit()._mult(Je?-1:1);this.addHalfVertex(P,gr.x,gr.y,!1,Je,0,V)}X&&this.addCurrentVertex(P,ue,-ft,-pn,V)}else if("butt"===nt)this.addCurrentVertex(P,ye,0,0,V);else if("square"===nt){var Or=H?1:-1;this.addCurrentVertex(P,ye,Or,Or,V)}else"round"===nt&&(H&&(this.addCurrentVertex(P,Y,0,0,V),this.addCurrentVertex(P,Y,1,1,V,!0)),X&&(this.addCurrentVertex(P,ue,-1,-1,V,!0),this.addCurrentVertex(P,ue,0,0,V)));if(Ge&&le<k-1){var Ir=P.dist(X);if(Ir>2*N){var _r=P.add(X.sub(P)._mult(N/Ir)._round());this.updateDistance(P,_r),this.addCurrentVertex(_r,ue,0,0,V),P=_r}}}}},Go.prototype.addCurrentVertex=function(s,l,u,m,y,b){void 0===b&&(b=!1);var E=l.y*m-l.x,S=-l.y-l.x*m;this.addHalfVertex(s,l.x+l.y*u,l.y-l.x*u,b,!1,u,y),this.addHalfVertex(s,E,S,b,!0,-m,y),this.distance>$g/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(s,l,u,m,y,b))},Go.prototype.addHalfVertex=function(s,l,u,m,y,b,E){var S=.5*(this.lineClips?this.scaledDistance*($g-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s.x<<1)+(m?1:0),(s.y<<1)+(y?1:0),Math.round(63*l)+128,Math.round(63*u)+128,1+(0===b?0:b<0?-1:1)|(63&S)<<2,S>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var k=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,k),E.primitiveLength++),y?this.e2=k:this.e1=k},Go.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Go.prototype.updateDistance=function(s,l){this.distance+=s.dist(l),this.updateScaledDistance()},rt("LineBucket",Go,{omit:["layers","patternFeatures"]});var Gw=new hi({"line-cap":new Xe(W.layout_line["line-cap"]),"line-join":new It(W.layout_line["line-join"]),"line-miter-limit":new Xe(W.layout_line["line-miter-limit"]),"line-round-limit":new Xe(W.layout_line["line-round-limit"]),"line-sort-key":new It(W.layout_line["line-sort-key"])}),Ww={paint:new hi({"line-opacity":new It(W.paint_line["line-opacity"]),"line-color":new It(W.paint_line["line-color"]),"line-translate":new Xe(W.paint_line["line-translate"]),"line-translate-anchor":new Xe(W.paint_line["line-translate-anchor"]),"line-width":new It(W.paint_line["line-width"]),"line-gap-width":new It(W.paint_line["line-gap-width"]),"line-offset":new It(W.paint_line["line-offset"]),"line-blur":new It(W.paint_line["line-blur"]),"line-dasharray":new kt(W.paint_line["line-dasharray"]),"line-pattern":new di(W.paint_line["line-pattern"]),"line-gradient":new ia(W.paint_line["line-gradient"])}),layout:Gw},Zw=new(function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.possiblyEvaluate=function(u,m){return m=new Ht(Math.floor(m.zoom),{now:m.now,fadeDuration:m.fadeDuration,zoomHistory:m.zoomHistory,transition:m.transition}),s.prototype.possiblyEvaluate.call(this,u,m)},l.prototype.evaluate=function(u,m,y,b){return m=Oi({},m,{zoom:Math.floor(m.zoom)}),s.prototype.evaluate.call(this,u,m,y,b)},l}(It))(Ww.paint.properties["line-width"].specification);Zw.useIntegerZoom=!0;var _T=function(s){function l(u){s.call(this,u,Ww),this.gradientVersion=0}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype._handleSpecialPaintPropertyUpdate=function(u){"line-gradient"===u&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Sa,this.gradientVersion=(this.gradientVersion+1)%Ol)},l.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},l.prototype.recalculate=function(u,m){s.prototype.recalculate.call(this,u,m),this.paint._values["line-floorwidth"]=Zw.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)},l.prototype.createBucket=function(u){return new Go(u)},l.prototype.queryRadius=function(u){var m=u,y=Kw(Di("line-width",this,m),Di("line-gap-width",this,m)),b=Di("line-offset",this,m);return y/2+Math.abs(b)+tc(this.paint.get("line-translate"))},l.prototype.queryIntersectsFeature=function(u,m,y,b,E,S,k){var R=qs(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,k),P=k/2*Kw(this.paint.get("line-width").evaluate(m,y),this.paint.get("line-gap-width").evaluate(m,y)),N=this.paint.get("line-offset").evaluate(m,y);return N&&(b=function(V,H){for(var X=[],Y=new Ut(0,0),ue=0;ue<V.length;ue++){for(var le=V[ue],ye=[],ge=0;ge<le.length;ge++){var Se=le[ge],Ie=le[ge+1],Oe=0===ge?Y:Se.sub(le[ge-1])._unit()._perp(),Ge=ge===le.length-1?Y:Ie.sub(Se)._unit()._perp(),Je=Oe._add(Ge)._unit();Je._mult(1/(Je.x*Ge.x+Je.y*Ge.y)),ye.push(Je._mult(H)._add(Se))}X.push(ye)}return X}(b,N*k)),function(V,H,X){for(var Y=0;Y<H.length;Y++){var ue=H[Y];if(V.length>=3)for(var le=0;le<ue.length;le++)if(sa(V,ue[le]))return!0;if(cn(V,ue,X))return!0}return!1}(R,b,P)},l.prototype.isTileClipped=function(){return!0},l}(Ci);function Kw(s,l){return l>0?l+2*s:s}var Yw=wn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mr=wn([{name:"a_projected_pos",components:3,type:"Float32"}],4),Xw=(wn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),wn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),_e=(wn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),wn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),yT=wn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ro(s,l,u){return s.sections.forEach(function(m){var y,E,S;m.text=(y=m.text,E=u,"uppercase"===(S=l.layout.get("text-transform").evaluate(E,{}))?y=y.toLocaleUpperCase():"lowercase"===S&&(y=y.toLocaleLowerCase()),tr.applyArabicShaping&&(y=tr.applyArabicShaping(y)),y)}),s}wn([{name:"triangle",components:3,type:"Uint16"}]),wn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),wn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),wn([{type:"Float32",name:"offsetX"}]),wn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ni={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},cr=function(s,l,u,m,y){var b,E,S=8*y-m-1,k=(1<<S)-1,R=k>>1,P=-7,N=u?y-1:0,V=u?-1:1,H=s[l+N];for(N+=V,b=H&(1<<-P)-1,H>>=-P,P+=S;P>0;b=256*b+s[l+N],N+=V,P-=8);for(E=b&(1<<-P)-1,b>>=-P,P+=m;P>0;E=256*E+s[l+N],N+=V,P-=8);if(0===b)b=1-R;else{if(b===k)return E?NaN:1/0*(H?-1:1);E+=Math.pow(2,m),b-=R}return(H?-1:1)*E*Math.pow(2,b-m)},oc=function(s,l,u,m,y,b){var E,S,k,R=8*b-y-1,P=(1<<R)-1,N=P>>1,V=23===y?Math.pow(2,-24)-Math.pow(2,-77):0,H=m?0:b-1,X=m?1:-1,Y=l<0||0===l&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(S=isNaN(l)?1:0,E=P):(E=Math.floor(Math.log(l)/Math.LN2),l*(k=Math.pow(2,-E))<1&&(E--,k*=2),(l+=E+N>=1?V/k:V*Math.pow(2,1-N))*k>=2&&(E++,k/=2),E+N>=P?(S=0,E=P):E+N>=1?(S=(l*k-1)*Math.pow(2,y),E+=N):(S=l*Math.pow(2,N-1)*Math.pow(2,y),E=0));y>=8;s[u+H]=255&S,H+=X,S/=256,y-=8);for(E=E<<y|S,R+=y;R>0;s[u+H]=255&E,H+=X,E/=256,R-=8);s[u+H-X]|=128*Y},Wc=Hn;function Hn(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Hn.Varint=0,Hn.Fixed64=1,Hn.Bytes=2,Hn.Fixed32=5;var Zd=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function sc(s){return s.type===Hn.Bytes?s.readVarint()+s.pos:s.pos+1}function Kd(s,l,u){var m=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));u.realloc(m);for(var y=u.pos-1;y>=s;y--)u.buf[y+m]=u.buf[y]}function d2(s,l){for(var u=0;u<s.length;u++)l.writeVarint(s[u])}function vT(s,l){for(var u=0;u<s.length;u++)l.writeSVarint(s[u])}function bT(s,l){for(var u=0;u<s.length;u++)l.writeFloat(s[u])}function wT(s,l){for(var u=0;u<s.length;u++)l.writeDouble(s[u])}function xT(s,l){for(var u=0;u<s.length;u++)l.writeBoolean(s[u])}function ET(s,l){for(var u=0;u<s.length;u++)l.writeFixed32(s[u])}function Ba(s,l){for(var u=0;u<s.length;u++)l.writeSFixed32(s[u])}function Qw(s,l){for(var u=0;u<s.length;u++)l.writeFixed64(s[u])}function CT(s,l){for(var u=0;u<s.length;u++)l.writeSFixed64(s[u])}function Zu(s,l){return(s[l]|s[l+1]<<8|s[l+2]<<16)+16777216*s[l+3]}function wf(s,l,u){s[u]=l,s[u+1]=l>>>8,s[u+2]=l>>>16,s[u+3]=l>>>24}function Jw(s,l){return(s[l]|s[l+1]<<8|s[l+2]<<16)+(s[l+3]<<24)}function DT(s,l,u){1===s&&u.readMessage(TT,l)}function TT(s,l,u){if(3===s){var m=u.readMessage(ST,{}),y=m.width,b=m.height,E=m.left,S=m.top,k=m.advance;l.push({id:m.id,bitmap:new rc({width:y+6,height:b+6},m.bitmap),metrics:{width:y,height:b,left:E,top:S,advance:k}})}}function ST(s,l,u){1===s?l.id=u.readVarint():2===s?l.bitmap=u.readBytes():3===s?l.width=u.readVarint():4===s?l.height=u.readVarint():5===s?l.left=u.readSVarint():6===s?l.top=u.readSVarint():7===s&&(l.advance=u.readVarint())}function ex(s){for(var l=0,u=0,m=0,y=s;m<y.length;m+=1){var b=y[m];l+=b.w*b.h,u=Math.max(u,b.w)}s.sort(function(Y,ue){return ue.h-Y.h});for(var E=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),u),h:1/0}],S=0,k=0,R=0,P=s;R<P.length;R+=1)for(var N=P[R],V=E.length-1;V>=0;V--){var H=E[V];if(!(N.w>H.w||N.h>H.h)){if(N.x=H.x,N.y=H.y,k=Math.max(k,N.y+N.h),S=Math.max(S,N.x+N.w),N.w===H.w&&N.h===H.h){var X=E.pop();V<E.length&&(E[V]=X)}else N.h===H.h?(H.x+=N.w,H.w-=N.w):N.w===H.w?(H.y+=N.h,H.h-=N.h):(E.push({x:H.x+N.w,y:H.y,w:H.w-N.w,h:N.h}),H.y+=N.h,H.h-=N.h);break}}return{w:S,h:k,fill:l/(S*k)||0}}Hn.prototype={destroy:function(){this.buf=null},readFields:function(s,l,u){for(u=u||this.length;this.pos<u;){var m=this.readVarint(),y=m>>3,b=this.pos;this.type=7&m,s(y,l,this),this.pos===b&&this.skip(m)}return l},readMessage:function(s,l){return this.readFields(s,l,this.readVarint()+this.pos)},readFixed32:function(){var s=Zu(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=Jw(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Zu(this.buf,this.pos)+4294967296*Zu(this.buf,this.pos+4);return this.pos+=8,s},readSFixed64:function(){var s=Zu(this.buf,this.pos)+4294967296*Jw(this.buf,this.pos+4);return this.pos+=8,s},readFloat:function(){var s=cr(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=cr(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var l,u,m=this.buf;return l=127&(u=m[this.pos++]),u<128?l:(l|=(127&(u=m[this.pos++]))<<7,u<128?l:(l|=(127&(u=m[this.pos++]))<<14,u<128?l:(l|=(127&(u=m[this.pos++]))<<21,u<128?l:function(y,b,E){var S,k,R=E.buf;if(S=(112&(k=R[E.pos++]))>>4,k<128||(S|=(127&(k=R[E.pos++]))<<3,k<128)||(S|=(127&(k=R[E.pos++]))<<10,k<128)||(S|=(127&(k=R[E.pos++]))<<17,k<128)||(S|=(127&(k=R[E.pos++]))<<24,k<128)||(S|=(1&(k=R[E.pos++]))<<31,k<128))return function Wu(s,l,u){return u?4294967296*l+(s>>>0):4294967296*(l>>>0)+(s>>>0)}(y,S,b);throw new Error("Expected varint not more than 10 bytes")}(l|=(15&(u=m[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,l=this.pos;return this.pos=s,s-l>=12&&Zd?Zd.decode(this.buf.subarray(l,s)):function(u,m,y){for(var b="",E=m;E<y;){var S,k,R,P=u[E],N=null,V=P>239?4:P>223?3:P>191?2:1;if(E+V>y)break;1===V?P<128&&(N=P):2===V?128==(192&(S=u[E+1]))&&(N=(31&P)<<6|63&S)<=127&&(N=null):3===V?(k=u[E+2],128==(192&(S=u[E+1]))&&128==(192&k)&&((N=(15&P)<<12|(63&S)<<6|63&k)<=2047||N>=55296&&N<=57343)&&(N=null)):4===V&&(k=u[E+2],R=u[E+3],128==(192&(S=u[E+1]))&&128==(192&k)&&128==(192&R)&&((N=(15&P)<<18|(63&S)<<12|(63&k)<<6|63&R)<=65535||N>=1114112)&&(N=null)),null===N?(N=65533,V=1):N>65535&&(N-=65536,b+=String.fromCharCode(N>>>10&1023|55296),N=56320|1023&N),b+=String.fromCharCode(N),E+=V}return b}(this.buf,l,s)},readBytes:function(){var s=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,s);return this.pos=s,l},readPackedVarint:function(s,l){if(this.type!==Hn.Bytes)return s.push(this.readVarint(l));var u=sc(this);for(s=s||[];this.pos<u;)s.push(this.readVarint(l));return s},readPackedSVarint:function(s){if(this.type!==Hn.Bytes)return s.push(this.readSVarint());var l=sc(this);for(s=s||[];this.pos<l;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Hn.Bytes)return s.push(this.readBoolean());var l=sc(this);for(s=s||[];this.pos<l;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Hn.Bytes)return s.push(this.readFloat());var l=sc(this);for(s=s||[];this.pos<l;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Hn.Bytes)return s.push(this.readDouble());var l=sc(this);for(s=s||[];this.pos<l;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Hn.Bytes)return s.push(this.readFixed32());var l=sc(this);for(s=s||[];this.pos<l;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Hn.Bytes)return s.push(this.readSFixed32());var l=sc(this);for(s=s||[];this.pos<l;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Hn.Bytes)return s.push(this.readFixed64());var l=sc(this);for(s=s||[];this.pos<l;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Hn.Bytes)return s.push(this.readSFixed64());var l=sc(this);for(s=s||[];this.pos<l;)s.push(this.readSFixed64());return s},skip:function(s){var l=7&s;if(l===Hn.Varint)for(;this.buf[this.pos++]>127;);else if(l===Hn.Bytes)this.pos=this.readVarint()+this.pos;else if(l===Hn.Fixed32)this.pos+=4;else{if(l!==Hn.Fixed64)throw new Error("Unimplemented type: "+l);this.pos+=8}},writeTag:function(s,l){this.writeVarint(s<<3|l)},realloc:function(s){for(var l=this.length||16;l<this.pos+s;)l*=2;if(l!==this.length){var u=new Uint8Array(l);u.set(this.buf),this.buf=u,this.length=l}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),wf(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),wf(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),wf(this.buf,-1&s,this.pos),wf(this.buf,Math.floor(s*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),wf(this.buf,-1&s,this.pos),wf(this.buf,Math.floor(s*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(l,u){var m,y,b,S;if(l>=0?(m=l%4294967296|0,y=l/4294967296|0):(y=~(-l/4294967296),4294967295^(m=~(-l%4294967296))?m=m+1|0:(m=0,y=y+1|0)),l>=0x10000000000000000||l<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),b=m,(S=u).buf[S.pos++]=127&b|128,b>>>=7,S.buf[S.pos++]=127&b|128,b>>>=7,S.buf[S.pos++]=127&b|128,b>>>=7,S.buf[S.pos++]=127&b|128,S.buf[S.pos]=127&(b>>>=7),function(b,E){var S=(7&b)<<4;E.buf[E.pos++]|=S|((b>>>=3)?128:0),b&&(E.buf[E.pos++]=127&b|((b>>>=7)?128:0),b&&(E.buf[E.pos++]=127&b|((b>>>=7)?128:0),b&&(E.buf[E.pos++]=127&b|((b>>>=7)?128:0),b&&(E.buf[E.pos++]=127&b|((b>>>=7)?128:0),b&&(E.buf[E.pos++]=127&b)))))}(y,u)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var l=this.pos;this.pos=function(m,y,b){for(var E,S,k=0;k<y.length;k++){if((E=y.charCodeAt(k))>55295&&E<57344){if(!S){E>56319||k+1===y.length?(m[b++]=239,m[b++]=191,m[b++]=189):S=E;continue}if(E<56320){m[b++]=239,m[b++]=191,m[b++]=189,S=E;continue}E=S-55296<<10|E-56320|65536,S=null}else S&&(m[b++]=239,m[b++]=191,m[b++]=189,S=null);E<128?m[b++]=E:(E<2048?m[b++]=E>>6|192:(E<65536?m[b++]=E>>12|224:(m[b++]=E>>18|240,m[b++]=E>>12&63|128),m[b++]=E>>6&63|128),m[b++]=63&E|128)}return b}(this.buf,s,this.pos);var u=this.pos-l;u>=128&&Kd(l,u,this),this.pos=l-1,this.writeVarint(u),this.pos+=u},writeFloat:function(s){this.realloc(4),oc(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),oc(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var l=s.length;this.writeVarint(l),this.realloc(l);for(var u=0;u<l;u++)this.buf[this.pos++]=s[u]},writeRawMessage:function(s,l){this.pos++;var u=this.pos;s(l,this);var m=this.pos-u;m>=128&&Kd(u,m,this),this.pos=u-1,this.writeVarint(m),this.pos+=m},writeMessage:function(s,l,u){this.writeTag(s,Hn.Bytes),this.writeRawMessage(l,u)},writePackedVarint:function(s,l){l.length&&this.writeMessage(s,d2,l)},writePackedSVarint:function(s,l){l.length&&this.writeMessage(s,vT,l)},writePackedBoolean:function(s,l){l.length&&this.writeMessage(s,xT,l)},writePackedFloat:function(s,l){l.length&&this.writeMessage(s,bT,l)},writePackedDouble:function(s,l){l.length&&this.writeMessage(s,wT,l)},writePackedFixed32:function(s,l){l.length&&this.writeMessage(s,ET,l)},writePackedSFixed32:function(s,l){l.length&&this.writeMessage(s,Ba,l)},writePackedFixed64:function(s,l){l.length&&this.writeMessage(s,Qw,l)},writePackedSFixed64:function(s,l){l.length&&this.writeMessage(s,CT,l)},writeBytesField:function(s,l){this.writeTag(s,Hn.Bytes),this.writeBytes(l)},writeFixed32Field:function(s,l){this.writeTag(s,Hn.Fixed32),this.writeFixed32(l)},writeSFixed32Field:function(s,l){this.writeTag(s,Hn.Fixed32),this.writeSFixed32(l)},writeFixed64Field:function(s,l){this.writeTag(s,Hn.Fixed64),this.writeFixed64(l)},writeSFixed64Field:function(s,l){this.writeTag(s,Hn.Fixed64),this.writeSFixed64(l)},writeVarintField:function(s,l){this.writeTag(s,Hn.Varint),this.writeVarint(l)},writeSVarintField:function(s,l){this.writeTag(s,Hn.Varint),this.writeSVarint(l)},writeStringField:function(s,l){this.writeTag(s,Hn.Bytes),this.writeString(l)},writeFloatField:function(s,l){this.writeTag(s,Hn.Fixed32),this.writeFloat(l)},writeDoubleField:function(s,l){this.writeTag(s,Hn.Fixed64),this.writeDouble(l)},writeBooleanField:function(s,l){this.writeVarintField(s,!!l)}};var xf=function(s,l){var u=l.pixelRatio,m=l.version,y=l.stretchX,b=l.stretchY,E=l.content;this.paddedRect=s,this.pixelRatio=u,this.stretchX=y,this.stretchY=b,this.content=E,this.version=m},Ku={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Ku.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Ku.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Ku.tlbr.get=function(){return this.tl.concat(this.br)},Ku.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(xf.prototype,Ku);var Ef=function(s,l){var u={},m={};this.haveRenderCallbacks=[];var y=[];this.addImages(s,u,y),this.addImages(l,m,y);var b=ex(y),E=new as({width:b.w||1,height:b.h||1});for(var S in s){var k=s[S],R=u[S].paddedRect;as.copy(k.data,E,{x:0,y:0},{x:R.x+1,y:R.y+1},k.data)}for(var P in l){var N=l[P],V=m[P].paddedRect,H=V.x+1,X=V.y+1,Y=N.data.width,ue=N.data.height;as.copy(N.data,E,{x:0,y:0},{x:H,y:X},N.data),as.copy(N.data,E,{x:0,y:ue-1},{x:H,y:X-1},{width:Y,height:1}),as.copy(N.data,E,{x:0,y:0},{x:H,y:X+ue},{width:Y,height:1}),as.copy(N.data,E,{x:Y-1,y:0},{x:H-1,y:X},{width:1,height:ue}),as.copy(N.data,E,{x:0,y:0},{x:H+Y,y:X},{width:1,height:ue})}this.image=E,this.iconPositions=u,this.patternPositions=m};Ef.prototype.addImages=function(s,l,u){for(var m in s){var y=s[m],b={x:0,y:0,w:y.data.width+2,h:y.data.height+2};u.push(b),l[m]=new xf(b,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(m)}},Ef.prototype.patchUpdatedImages=function(s,l){for(var u in s.dispatchRenderCallbacks(this.haveRenderCallbacks),s.updatedImages)this.patchUpdatedImage(this.iconPositions[u],s.getImage(u),l),this.patchUpdatedImage(this.patternPositions[u],s.getImage(u),l)},Ef.prototype.patchUpdatedImage=function(s,l,u){if(s&&l&&s.version!==l.version){s.version=l.version;var m=s.tl;u.update(l.data,void 0,{x:m[0],y:m[1]})}},rt("ImagePosition",xf),rt("ImageAtlas",Ef);var Gs={horizontal:1,vertical:2,horizontalOnly:3},Mo=function(){this.scale=1,this.fontStack="",this.imageName=null};Mo.forText=function(s,l){var u=new Mo;return u.scale=s||1,u.fontStack=l,u},Mo.forImage=function(s){var l=new Mo;return l.imageName=s,l};var _o=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function qg(s,l,u,m,y,b,E,S,k,R,P,N,V,H,X,Y){var ue,le=_o.fromFeature(s,y);N===Gs.vertical&&le.verticalizePunctuation();var ye=tr.processBidirectionalText,ge=tr.processStyledBidirectionalText;if(ye&&1===le.sections.length){ue=[];for(var Se=0,Ie=ye(le.toString(),lv(le,R,b,l,m,H,X));Se<Ie.length;Se+=1){var Oe=Ie[Se],Ge=new _o;Ge.text=Oe,Ge.sections=le.sections;for(var Je=0;Je<Oe.length;Je++)Ge.sectionIndex.push(0);ue.push(Ge)}}else if(ge){ue=[];for(var mt=0,tt=ge(le.text,le.sectionIndex,lv(le,R,b,l,m,H,X));mt<tt.length;mt+=1){var Et=tt[mt],nt=new _o;nt.text=Et[0],nt.sectionIndex=Et[1],nt.sections=le.sections,ue.push(nt)}}else ue=function(ft,pn){for(var Qt=[],xn=ft.text,Ct=0,Sn=0,gr=pn;Sn<gr.length;Sn+=1){var Or=gr[Sn];Qt.push(ft.substring(Ct,Or)),Ct=Or}return Ct<xn.length&&Qt.push(ft.substring(Ct,xn.length)),Qt}(le,lv(le,R,b,l,m,H,X));var un=[],Mt={positionedLines:un,text:le.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:N,iconsInText:!1,verticalizable:!1};return function(ft,pn,Qt,xn,Ct,Sn,gr,Or,Ir,_r,zr,Ti){for(var Si=0,Po=-17,Zi=0,Oo=0,Yr="right"===Or?1:"left"===Or?0:.5,Ii=0,yn=0,ir=Ct;yn<ir.length;yn+=1){var Yn=ir[yn];Yn.trim();var In=Yn.getMaxScale(),yo=24*(In-1),vo={positionedGlyphs:[],lineOffset:0};ft.positionedLines[Ii]=vo;var Xn=vo.positionedGlyphs,yr=0;if(Yn.length()){for(var bo=0;bo<Yn.length();bo++){var Fn=Yn.getSection(bo),gl=Yn.getSectionIndex(bo),ds=Yn.getCharCode(bo),la=0,Nr=null,ac=null,za=null,nm=24,_l=!(Ir===Gs.horizontal||!zr&&!qe(ds)||zr&&(Gg[ds]||(cc=ds,ct.Arabic(cc)||ct["Arabic Supplement"](cc)||ct["Arabic Extended-A"](cc)||ct["Arabic Presentation Forms-A"](cc)||ct["Arabic Presentation Forms-B"](cc))));if(Fn.imageName){var rh=xn[Fn.imageName];if(!rh)continue;za=Fn.imageName,ft.iconsInText=ft.iconsInText||!0,ac=rh.paddedRect;var lc=rh.displaySize;Fn.scale=24*Fn.scale/Ti,la=yo+(24-lc[1]*Fn.scale),nm=(Nr={width:lc[0],height:lc[1],left:1,top:-3,advance:_l?lc[1]:lc[0]}).advance;var ih=_l?lc[0]*Fn.scale-24*In:lc[1]*Fn.scale-24*In;ih>0&&ih>yr&&(yr=ih)}else{var Mf=Qt[Fn.fontStack],oh=Mf&&Mf[ds];if(oh&&oh.rect)ac=oh.rect,Nr=oh.metrics;else{var Pf=pn[Fn.fontStack],n_=Pf&&Pf[ds];if(!n_)continue;Nr=n_.metrics}la=24*(In-Fn.scale)}_l?(ft.verticalizable=!0,Xn.push({glyph:ds,imageName:za,x:Si,y:Po+la,vertical:_l,scale:Fn.scale,fontStack:Fn.fontStack,sectionIndex:gl,metrics:Nr,rect:ac}),Si+=nm*Fn.scale+_r):(Xn.push({glyph:ds,imageName:za,x:Si,y:Po+la,vertical:_l,scale:Fn.scale,fontStack:Fn.fontStack,sectionIndex:gl,metrics:Nr,rect:ac}),Si+=Nr.advance*Fn.scale+_r)}0!==Xn.length&&(Zi=Math.max(Si-_r,Zi),fr(Xn,0,Xn.length-1,Yr,yr)),Si=0;var Of=Sn*In+yr;vo.lineOffset=Math.max(yr,yo),Po+=Of,Oo=Math.max(Of,Oo),++Ii}else Po+=Sn,++Ii}var cc,uc=Po- -17,Nf=cv(gr),Xc=Nf.horizontalAlign,sh=Nf.verticalAlign;(function(r_,rm,Lf,im,Ff,i_,Bf,om,o_){var sm,xv=(rm-Lf)*Ff;sm=i_!==Bf?-om*im- -17:(-im*o_+.5)*Bf;for(var am=0,lm=r_;am<lm.length;am+=1)for(var ah=0,cm=lm[am].positionedGlyphs;ah<cm.length;ah+=1){var Qc=cm[ah];Qc.x+=xv,Qc.y+=sm}})(ft.positionedLines,Yr,Xc,sh,Zi,Oo,Sn,uc,Ct.length),ft.top+=-sh*uc,ft.bottom=ft.top+uc,ft.left+=-Xc*Zi,ft.right=ft.left+Zi}(Mt,l,u,m,ue,E,S,k,N,R,V,Y),!function(ft){for(var pn=0,Qt=ft;pn<Qt.length;pn+=1)if(0!==Qt[pn].positionedGlyphs.length)return!1;return!0}(un)&&Mt}_o.fromFeature=function(s,l){for(var u=new _o,m=0;m<s.sections.length;m++){var y=s.sections[m];y.image?u.addImageSection(y):u.addTextSection(y,l)}return u},_o.prototype.length=function(){return this.text.length},_o.prototype.getSection=function(s){return this.sections[this.sectionIndex[s]]},_o.prototype.getSectionIndex=function(s){return this.sectionIndex[s]},_o.prototype.getCharCode=function(s){return this.text.charCodeAt(s)},_o.prototype.verticalizePunctuation=function(){this.text=function(s){for(var l="",u=0;u<s.length;u++){var m=s.charCodeAt(u+1)||null,y=s.charCodeAt(u-1)||null;l+=m&&Rt(m)&&!ni[s[u+1]]||y&&Rt(y)&&!ni[s[u-1]]||!ni[s[u]]?s[u]:ni[s[u]]}return l}(this.text)},_o.prototype.trim=function(){for(var s=0,l=0;l<this.text.length&&Gg[this.text.charCodeAt(l)];l++)s++;for(var u=this.text.length,m=this.text.length-1;m>=0&&m>=s&&Gg[this.text.charCodeAt(m)];m--)u--;this.text=this.text.substring(s,u),this.sectionIndex=this.sectionIndex.slice(s,u)},_o.prototype.substring=function(s,l){var u=new _o;return u.text=this.text.substring(s,l),u.sectionIndex=this.sectionIndex.slice(s,l),u.sections=this.sections,u},_o.prototype.toString=function(){return this.text},_o.prototype.getMaxScale=function(){var s=this;return this.sectionIndex.reduce(function(l,u){return Math.max(l,s.sections[u].scale)},0)},_o.prototype.addTextSection=function(s,l){this.text+=s.text,this.sections.push(Mo.forText(s.scale,s.fontStack||l));for(var u=this.sections.length-1,m=0;m<s.text.length;++m)this.sectionIndex.push(u)},_o.prototype.addImageSection=function(s){var l=s.image?s.image.name:"";if(0!==l.length){var u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Mo.forImage(l)),this.sectionIndex.push(this.sections.length-1)):ur("Reached maximum number of images 6401")}else ur("Can't add FormattedSection with an empty image.")},_o.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Gg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},us={};function av(s,l,u,m,y,b){if(l.imageName){var E=m[l.imageName];return E?E.displaySize[0]*l.scale*24/b+y:0}var S=u[l.fontStack],k=S&&S[s];return k?k.metrics.advance*l.scale+y:0}function tx(s,l,u,m){var y=Math.pow(s-l,2);return m?s<l?y/2:2*y:y+Math.abs(u)*u}function Yd(s,l,u){var m=0;return 10===s&&(m-=1e4),u&&(m+=150),40!==s&&65288!==s||(m+=50),41!==l&&65289!==l||(m+=50),m}function nx(s,l,u,m,y,b){for(var E=null,S=tx(l,u,y,b),k=0,R=m;k<R.length;k+=1){var P=R[k],N=tx(l-P.x,u,y,b)+P.badness;N<=S&&(E=P,S=N)}return{index:s,x:l,priorBreak:E,badness:S}}function lv(s,l,u,m,y,b,E){if("point"!==b)return[];if(!s)return[];for(var S,k=[],R=function(ue,le,ye,ge,Se,Ie){for(var Oe=0,Ge=0;Ge<ue.length();Ge++){var Je=ue.getSection(Ge);Oe+=av(ue.getCharCode(Ge),Je,ge,Se,le,Ie)}return Oe/Math.max(1,Math.ceil(Oe/ye))}(s,l,u,m,y,E),P=s.text.indexOf("\u200b")>=0,N=0,V=0;V<s.length();V++){var H=s.getSection(V),X=s.getCharCode(V);if(Gg[X]||(N+=av(X,H,m,y,l,E)),V<s.length()-1){var Y=!((S=X)<11904||!(ct["Bopomofo Extended"](S)||ct.Bopomofo(S)||ct["CJK Compatibility Forms"](S)||ct["CJK Compatibility Ideographs"](S)||ct["CJK Compatibility"](S)||ct["CJK Radicals Supplement"](S)||ct["CJK Strokes"](S)||ct["CJK Symbols and Punctuation"](S)||ct["CJK Unified Ideographs Extension A"](S)||ct["CJK Unified Ideographs"](S)||ct["Enclosed CJK Letters and Months"](S)||ct["Halfwidth and Fullwidth Forms"](S)||ct.Hiragana(S)||ct["Ideographic Description Characters"](S)||ct["Kangxi Radicals"](S)||ct["Katakana Phonetic Extensions"](S)||ct.Katakana(S)||ct["Vertical Forms"](S)||ct["Yi Radicals"](S)||ct["Yi Syllables"](S)));(us[X]||Y||H.imageName)&&k.push(nx(V+1,N,R,k,Yd(X,s.getCharCode(V+1),Y&&P),!1))}}return function ue(le){return le?ue(le.priorBreak).concat(le.index):[]}(nx(s.length(),N,R,k,0,!0))}function cv(s){var l=.5,u=.5;switch(s){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:l,verticalAlign:u}}function fr(s,l,u,m,y){if(m||y)for(var b=s[u],E=(s[u].x+b.metrics.advance*b.scale)*m,S=l;S<=u;S++)s[S].x-=E,s[S].y+=y}function yt(s,l,u,m,y,b){var E,S=s.image;if(S.content){var k=S.content,R=S.pixelRatio||1;E=[k[0]/R,k[1]/R,S.displaySize[0]-k[2]/R,S.displaySize[1]-k[3]/R]}var P,N,V,H,X=l.left*b,Y=l.right*b;"width"===u||"both"===u?(H=y[0]+X-m[3],N=y[0]+Y+m[1]):N=(H=y[0]+(X+Y-S.displaySize[0])/2)+S.displaySize[0];var ue=l.top*b,le=l.bottom*b;return"height"===u||"both"===u?(P=y[1]+ue-m[0],V=y[1]+le+m[2]):V=(P=y[1]+(ue+le-S.displaySize[1])/2)+S.displaySize[1],{image:S,top:P,right:N,bottom:V,left:H,collisionPadding:E}}us[10]=!0,us[32]=!0,us[38]=!0,us[40]=!0,us[41]=!0,us[43]=!0,us[45]=!0,us[47]=!0,us[173]=!0,us[183]=!0,us[8203]=!0,us[8208]=!0,us[8211]=!0,us[8231]=!0;var Cf=function(s){function l(u,m,y,b){s.call(this,u,m),this.angle=y,void 0!==b&&(this.segment=b)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.clone=function(){return new l(this.x,this.y,this.angle,this.segment)},l}(Ut);function Wg(s,l){var u=l.expression;if("constant"===u.kind)return{kind:"constant",layoutSize:u.evaluate(new Ht(s+1))};if("source"===u.kind)return{kind:"source"};for(var m=u.zoomStops,y=u.interpolationType,b=0;b<m.length&&m[b]<=s;)b++;for(var E=b=Math.max(0,b-1);E<m.length&&m[E]<s+1;)E++;E=Math.min(m.length-1,E);var S=m[b],k=m[E];return"composite"===u.kind?{kind:"composite",minZoom:S,maxZoom:k,interpolationType:y}:{kind:"camera",minZoom:S,maxZoom:k,minSize:u.evaluate(new Ht(S)),maxSize:u.evaluate(new Ht(k)),interpolationType:y}}function Kp(s,l,u){var m=l.uSize,y=u.lowerSize;return"source"===s.kind?y/128:"composite"===s.kind?ci(y/128,u.upperSize/128,l.uSizeT):m}function Yp(s,l){var u=0,m=0;if("constant"===s.kind)m=s.layoutSize;else if("source"!==s.kind){var y=s.interpolationType,b=y?Qi(nn.interpolationFactor(y,l,s.minZoom,s.maxZoom),0,1):0;"camera"===s.kind?m=ci(s.minSize,s.maxSize,b):u=b}return{uSizeT:u,uSize:m}}rt("Anchor",Cf);var uv=Object.freeze({__proto__:null,getSizeData:Wg,evaluateSizeForFeature:Kp,evaluateSizeForZoom:Yp,SIZE_PACK_FACTOR:128});function dv(s,l,u,m,y){if(void 0===l.segment)return!0;for(var b=l,E=l.segment+1,S=0;S>-u/2;){if(--E<0)return!1;S-=s[E].dist(b),b=s[E]}S+=s[E].dist(s[E+1]),E++;for(var k=[],R=0;S<u/2;){var P=s[E],N=s[E+1];if(!N)return!1;var V=s[E-1].angleTo(P)-P.angleTo(N);for(V=Math.abs((V+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:S,angleDelta:V}),R+=V;S-k[0].distance>m;)R-=k.shift().angleDelta;if(R>y)return!1;E++,S+=P.dist(N)}return!0}function hv(s){for(var l=0,u=0;u<s.length-1;u++)l+=s[u].dist(s[u+1]);return l}function rx(s,l,u){return s?.6*l*u:0}function Xd(s,l){return Math.max(s?s.right-s.left:0,l?l.right-l.left:0)}function Xp(s,l,u,m,y,b){for(var E=rx(u,y,b),S=Xd(u,m)*b,k=0,R=hv(s)/2,P=0;P<s.length-1;P++){var N=s[P],V=s[P+1],H=N.dist(V);if(k+H>R){var X=(R-k)/H,Y=ci(N.x,V.x,X),ue=ci(N.y,V.y,X),le=new Cf(Y,ue,V.angleTo(N),P);return le._round(),!E||dv(s,le,S,E,l)?le:void 0}k+=H}}function fv(s,l,u,m,y,b,E,S,k){var R=rx(m,b,E),P=Xd(m,y),N=P*E,V=0===s[0].x||s[0].x===k||0===s[0].y||s[0].y===k;return l-N<l/4&&(l=N+l/4),function H(X,Y,ue,le,ye,ge,Se,Ie,Oe){for(var Ge=ge/2,Je=hv(X),mt=0,tt=Y-ue,Et=[],nt=0;nt<X.length-1;nt++){for(var un=X[nt],Mt=X[nt+1],ft=un.dist(Mt),pn=Mt.angleTo(un);tt+ue<mt+ft;){var Qt=((tt+=ue)-mt)/ft,xn=ci(un.x,Mt.x,Qt),Ct=ci(un.y,Mt.y,Qt);if(xn>=0&&xn<Oe&&Ct>=0&&Ct<Oe&&tt-Ge>=0&&tt+Ge<=Je){var Sn=new Cf(xn,Ct,pn,nt);Sn._round(),le&&!dv(X,Sn,ge,le,ye)||Et.push(Sn)}}mt+=ft}return Ie||Et.length||Se||(Et=H(X,mt/2,ue,le,ye,ge,Se,!0,Oe)),Et}(s,V?l/2*S%l:(P/2+2*b)*E*S%l,l,R,u,N,V,!1,k)}function pv(s,l,u,m,y){for(var b=[],E=0;E<s.length;E++)for(var S=s[E],k=void 0,R=0;R<S.length-1;R++){var P=S[R],N=S[R+1];P.x<l&&N.x<l||(P.x<l?P=new Ut(l,P.y+(l-P.x)/(N.x-P.x)*(N.y-P.y))._round():N.x<l&&(N=new Ut(l,P.y+(l-P.x)/(N.x-P.x)*(N.y-P.y))._round()),P.y<u&&N.y<u||(P.y<u?P=new Ut(P.x+(u-P.y)/(N.y-P.y)*(N.x-P.x),u)._round():N.y<u&&(N=new Ut(P.x+(u-P.y)/(N.y-P.y)*(N.x-P.x),u)._round()),P.x>=m&&N.x>=m||(P.x>=m?P=new Ut(m,P.y+(m-P.x)/(N.x-P.x)*(N.y-P.y))._round():N.x>=m&&(N=new Ut(m,P.y+(m-P.x)/(N.x-P.x)*(N.y-P.y))._round()),P.y>=y&&N.y>=y||(P.y>=y?P=new Ut(P.x+(y-P.y)/(N.y-P.y)*(N.x-P.x),y)._round():N.y>=y&&(N=new Ut(P.x+(y-P.y)/(N.y-P.y)*(N.x-P.x),y)._round()),k&&P.equals(k[k.length-1])||b.push(k=[P]),k.push(N)))))}return b}function IT(s,l,u,m){var y=[],b=s.image,E=b.pixelRatio,S=b.paddedRect.w-2,k=b.paddedRect.h-2,R=s.right-s.left,P=s.bottom-s.top,N=b.stretchX||[[0,S]],V=b.stretchY||[[0,k]],H=function(xn,Ct){return xn+Ct[1]-Ct[0]},X=N.reduce(H,0),Y=V.reduce(H,0),ue=S-X,le=k-Y,ye=0,ge=X,Se=0,Ie=Y,Oe=0,Ge=ue,Je=0,mt=le;if(b.content&&m){var tt=b.content;ye=Zg(N,0,tt[0]),Se=Zg(V,0,tt[1]),ge=Zg(N,tt[0],tt[2]),Ie=Zg(V,tt[1],tt[3]),Oe=tt[0]-ye,Je=tt[1]-Se,Ge=tt[2]-tt[0]-ge,mt=tt[3]-tt[1]-Ie}var Et=function(xn,Ct,Sn,gr){var Or=mv(xn.stretch-ye,ge,R,s.left),Ir=gv(xn.fixed-Oe,Ge,xn.stretch,X),_r=mv(Ct.stretch-Se,Ie,P,s.top),zr=gv(Ct.fixed-Je,mt,Ct.stretch,Y),Ti=mv(Sn.stretch-ye,ge,R,s.left),Si=gv(Sn.fixed-Oe,Ge,Sn.stretch,X),Po=mv(gr.stretch-Se,Ie,P,s.top),Zi=gv(gr.fixed-Je,mt,gr.stretch,Y),Oo=new Ut(Or,_r),Yr=new Ut(Ti,_r),Ii=new Ut(Ti,Po),yn=new Ut(Or,Po),ir=new Ut(Ir/E,zr/E),Yn=new Ut(Si/E,Zi/E),In=l*Math.PI/180;if(In){var yo=Math.sin(In),vo=Math.cos(In),Xn=[vo,-yo,yo,vo];Oo._matMult(Xn),Yr._matMult(Xn),yn._matMult(Xn),Ii._matMult(Xn)}var yr=xn.stretch+xn.fixed,bo=Ct.stretch+Ct.fixed;return{tl:Oo,tr:Yr,bl:yn,br:Ii,tex:{x:b.paddedRect.x+1+yr,y:b.paddedRect.y+1+bo,w:Sn.stretch+Sn.fixed-yr,h:gr.stretch+gr.fixed-bo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ir,pixelOffsetBR:Yn,minFontScaleX:Ge/E/R,minFontScaleY:mt/E/P,isSDF:u}};if(m&&(b.stretchX||b.stretchY))for(var nt=ix(N,ue,X),un=ix(V,le,Y),Mt=0;Mt<nt.length-1;Mt++)for(var ft=nt[Mt],pn=nt[Mt+1],Qt=0;Qt<un.length-1;Qt++)y.push(Et(ft,un[Qt],pn,un[Qt+1]));else y.push(Et({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:k+1}));return y}function Zg(s,l,u){for(var m=0,y=0,b=s;y<b.length;y+=1){var E=b[y];m+=Math.max(l,Math.min(u,E[1]))-Math.max(l,Math.min(u,E[0]))}return m}function ix(s,l,u){for(var m=[{fixed:-1,stretch:0}],y=0,b=s;y<b.length;y+=1){var E=b[y],S=E[0],k=E[1],R=m[m.length-1];m.push({fixed:S-R.stretch,stretch:R.stretch}),m.push({fixed:S-R.stretch,stretch:R.stretch+(k-S)})}return m.push({fixed:l+1,stretch:u}),m}function mv(s,l,u,m){return s/l*u+m}function gv(s,l,u,m){return s-l*u/m}var Kg=function(s,l,u,m,y,b,E,S,k,R){if(this.boxStartIndex=s.length,k){var P=b.top,N=b.bottom,V=b.collisionPadding;V&&(P-=V[1],N+=V[3]);var H=N-P;H>0&&(H=Math.max(10,H),this.circleDiameter=H)}else{var X=b.top*E-S,Y=b.bottom*E+S,ue=b.left*E-S,le=b.right*E+S,ye=b.collisionPadding;if(ye&&(ue-=ye[0]*E,X-=ye[1]*E,le+=ye[2]*E,Y+=ye[3]*E),R){var ge=new Ut(ue,X),Se=new Ut(le,X),Ie=new Ut(ue,Y),Oe=new Ut(le,Y),Ge=R*Math.PI/180;ge._rotate(Ge),Se._rotate(Ge),Ie._rotate(Ge),Oe._rotate(Ge),ue=Math.min(ge.x,Se.x,Ie.x,Oe.x),le=Math.max(ge.x,Se.x,Ie.x,Oe.x),X=Math.min(ge.y,Se.y,Ie.y,Oe.y),Y=Math.max(ge.y,Se.y,Ie.y,Oe.y)}s.emplaceBack(l.x,l.y,ue,X,le,Y,u,m,y)}this.boxEndIndex=s.length},Yu=function(s,l){if(void 0===s&&(s=[]),void 0===l&&(l=ox),this.data=s,this.length=this.data.length,this.compare=l,this.length>0)for(var u=(this.length>>1)-1;u>=0;u--)this._down(u)};function ox(s,l){return s<l?-1:s>l?1:0}function Df(s,l,u){void 0===l&&(l=1),void 0===u&&(u=!1);for(var m=1/0,y=1/0,b=-1/0,E=-1/0,S=s[0],k=0;k<S.length;k++){var R=S[k];(!k||R.x<m)&&(m=R.x),(!k||R.y<y)&&(y=R.y),(!k||R.x>b)&&(b=R.x),(!k||R.y>E)&&(E=R.y)}var P=Math.min(b-m,E-y),N=P/2,V=new Yu([],sx);if(0===P)return new Ut(m,y);for(var H=m;H<b;H+=P)for(var X=y;X<E;X+=P)V.push(new Xu(H+N,X+N,N,s));for(var Y=function(ye){for(var ge=0,Se=0,Ie=0,Oe=ye[0],Ge=0,Je=Oe.length,mt=Je-1;Ge<Je;mt=Ge++){var tt=Oe[Ge],Et=Oe[mt],nt=tt.x*Et.y-Et.x*tt.y;Se+=(tt.x+Et.x)*nt,Ie+=(tt.y+Et.y)*nt,ge+=3*nt}return new Xu(Se/ge,Ie/ge,0,ye)}(s),ue=V.length;V.length;){var le=V.pop();(le.d>Y.d||!Y.d)&&(Y=le,u&&console.log("found best %d after %d probes",Math.round(1e4*le.d)/1e4,ue)),le.max-Y.d<=l||(V.push(new Xu(le.p.x-(N=le.h/2),le.p.y-N,N,s)),V.push(new Xu(le.p.x+N,le.p.y-N,N,s)),V.push(new Xu(le.p.x-N,le.p.y+N,N,s)),V.push(new Xu(le.p.x+N,le.p.y+N,N,s)),ue+=4)}return u&&(console.log("num probes: "+ue),console.log("best distance: "+Y.d)),Y.p}function sx(s,l){return l.max-s.max}function Xu(s,l,u,m){this.p=new Ut(s,l),this.h=u,this.d=function(y,b){for(var E=!1,S=1/0,k=0;k<b.length;k++)for(var R=b[k],P=0,N=R.length,V=N-1;P<N;V=P++){var H=R[P],X=R[V];H.y>y.y!=X.y>y.y&&y.x<(X.x-H.x)*(y.y-H.y)/(X.y-H.y)+H.x&&(E=!E),S=Math.min(S,Rs(y,H,X))}return(E?1:-1)*Math.sqrt(S)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}Yu.prototype.push=function(s){this.data.push(s),this.length++,this._up(this.length-1)},Yu.prototype.pop=function(){if(0!==this.length){var s=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),s}},Yu.prototype.peek=function(){return this.data[0]},Yu.prototype._up=function(s){for(var l=this.data,u=this.compare,m=l[s];s>0;){var y=s-1>>1,b=l[y];if(u(m,b)>=0)break;l[s]=b,s=y}l[s]=m},Yu.prototype._down=function(s){for(var l=this.data,u=this.compare,m=this.length>>1,y=l[s];s<m;){var b=1+(s<<1),E=l[b],S=b+1;if(S<this.length&&u(l[S],E)<0&&(b=S,E=l[S]),u(E,y)>=0)break;l[s]=E,s=b}l[s]=y};var Qd=Number.POSITIVE_INFINITY;function ax(s,l){return l[1]!==Qd?function(u,m,y){var b=0,E=0;switch(m=Math.abs(m),y=Math.abs(y),u){case"top-right":case"top-left":case"top":E=y-7;break;case"bottom-right":case"bottom-left":case"bottom":E=7-y}switch(u){case"top-right":case"bottom-right":case"right":b=-m;break;case"top-left":case"bottom-left":case"left":b=m}return[b,E]}(s,l[0],l[1]):function(u,m){var y=0,b=0;m<0&&(m=0);var E=m/Math.sqrt(2);switch(u){case"top-right":case"top-left":b=E-7;break;case"bottom-right":case"bottom-left":b=7-E;break;case"bottom":b=7-m;break;case"top":b=m-7}switch(u){case"top-right":case"bottom-right":y=-E;break;case"top-left":case"bottom-left":y=E;break;case"left":y=m;break;case"right":y=-m}return[y,b]}(s,l[0])}function Jd(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Yg(s,l,u,m,y,b,E,S,k,R,P,N,V,H,X){var Y=function(Se,Ie,Oe,Ge,Je,mt,tt,Et){for(var nt=Ge.layout.get("text-rotate").evaluate(mt,{})*Math.PI/180,un=[],Mt=0,ft=Ie.positionedLines;Mt<ft.length;Mt+=1)for(var pn=ft[Mt],Qt=0,xn=pn.positionedGlyphs;Qt<xn.length;Qt+=1){var Ct=xn[Qt];if(Ct.rect){var Sn=Ct.rect||{},gr=4,Or=!0,Ir=1,_r=0,zr=(Je||Et)&&Ct.vertical,Ti=Ct.metrics.advance*Ct.scale/2;if(Et&&Ie.verticalizable&&(_r=pn.lineOffset/2-(Ct.imageName?-(24-Ct.metrics.width*Ct.scale)/2:24*(Ct.scale-1))),Ct.imageName){var Si=tt[Ct.imageName];Or=Si.sdf,gr=1/(Ir=Si.pixelRatio)}var Po=Je?[Ct.x+Ti,Ct.y]:[0,0],Zi=Je?[0,0]:[Ct.x+Ti+Oe[0],Ct.y+Oe[1]-_r],Oo=[0,0];zr&&(Oo=Zi,Zi=[0,0]);var Yr=(Ct.metrics.left-gr)*Ct.scale-Ti+Zi[0],Ii=(-Ct.metrics.top-gr)*Ct.scale+Zi[1],yn=Yr+Sn.w*Ct.scale/Ir,ir=Ii+Sn.h*Ct.scale/Ir,Yn=new Ut(Yr,Ii),In=new Ut(yn,Ii),yo=new Ut(Yr,ir),vo=new Ut(yn,ir);if(zr){var Xn=new Ut(-Ti,Ti- -17),yr=-Math.PI/2,bo=12-Ti,Fn=new Ut(22-bo,-(Ct.imageName?bo:0)),gl=new(Function.prototype.bind.apply(Ut,[null].concat(Oo)));Yn._rotateAround(yr,Xn)._add(Fn)._add(gl),In._rotateAround(yr,Xn)._add(Fn)._add(gl),yo._rotateAround(yr,Xn)._add(Fn)._add(gl),vo._rotateAround(yr,Xn)._add(Fn)._add(gl)}if(nt){var ds=Math.sin(nt),la=Math.cos(nt),Nr=[la,-ds,ds,la];Yn._matMult(Nr),In._matMult(Nr),yo._matMult(Nr),vo._matMult(Nr)}var ac=new Ut(0,0),za=new Ut(0,0);un.push({tl:Yn,tr:In,bl:yo,br:vo,tex:Sn,writingMode:Ie.writingMode,glyphOffset:Po,sectionIndex:Ct.sectionIndex,isSDF:Or,pixelOffsetTL:ac,pixelOffsetBR:za,minFontScaleX:0,minFontScaleY:0})}}return un}(0,u,S,y,b,E,m,s.allowVerticalPlacement),ue=s.textSizeData,le=null;"source"===ue.kind?(le=[128*y.layout.get("text-size").evaluate(E,{})])[0]>32640&&ur(s.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===ue.kind&&((le=[128*H.compositeTextSizes[0].evaluate(E,{},X),128*H.compositeTextSizes[1].evaluate(E,{},X)])[0]>32640||le[1]>32640)&&ur(s.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),s.addSymbols(s.text,Y,le,S,b,E,R,l,k.lineStartIndex,k.lineLength,V,X);for(var ye=0,ge=P;ye<ge.length;ye+=1)N[ge[ye]]=s.text.placedSymbolArray.length-1;return 4*Y.length}function Qp(s){for(var l in s)return s[l];return null}function h2(s,l,u,m){var y=s.compareText;if(l in y){for(var b=y[l],E=b.length-1;E>=0;E--)if(m.dist(b[E])<u)return!0}else y[l]=[];return y[l].push(m),!1}var lx=Zp.VectorTileFeature.types,cx=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Xg(s,l,u,m,y,b,E,S,k,R,P,N,V){var H=S?Math.min(32640,Math.round(S[0])):0,X=S?Math.min(32640,Math.round(S[1])):0;s.emplaceBack(l,u,Math.round(32*m),Math.round(32*y),b,E,(H<<1)+(k?1:0),X,16*R,16*P,256*N,256*V)}function Va(s,l,u){s.emplaceBack(l.x,l.y,u),s.emplaceBack(l.x,l.y,u),s.emplaceBack(l.x,l.y,u),s.emplaceBack(l.x,l.y,u)}function kT(s){for(var l=0,u=s.sections;l<u.length;l+=1)if(Ui(u[l].text))return!0;return!1}var Zc=function(s){this.layoutVertexArray=new Hd,this.indexArray=new Hs,this.programConfigurations=s,this.segments=new j,this.dynamicLayoutVertexArray=new As,this.opacityVertexArray=new pf,this.placedSymbolArray=new w};Zc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Zc.prototype.upload=function(s,l,u,m){this.isEmpty()||(u&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Yw.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,mr.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,cx,!0),this.opacityVertexBuffer.itemSize=1),(u||m)&&this.programConfigurations.upload(s))},Zc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},rt("SymbolBuffers",Zc);var eh=function(s,l,u){this.layoutVertexArray=new s,this.layoutAttributes=l,this.indexArray=new u,this.segments=new j,this.collisionVertexArray=new Og};eh.prototype.upload=function(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,Xw.members,!0)},eh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},rt("CollisionBuffers",eh);var Kn=function(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(function(b){return b.id}),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Mr([]),this.placementViewportMatrix=Mr([]);var l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Wg(this.zoom,l["text-size"]),this.iconSizeData=Wg(this.zoom,l["icon-size"]);var u=this.layers[0].layout,m=u.get("symbol-sort-key"),y=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==y&&!m.isConstant(),this.sortFeaturesByY=("viewport-y"===y||"auto"===y&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===u.get("symbol-placement")&&(this.writingModes=u.get("text-writing-mode").map(function(b){return Gs[b]})),this.stateDependentLayerIds=this.layers.filter(function(b){return b.isStateDependent()}).map(function(b){return b.id}),this.sourceID=s.sourceID};Kn.prototype.createArrays=function(){this.text=new Zc(new nr(this.layers,this.zoom,function(s){return/^text/.test(s)})),this.icon=new Zc(new nr(this.layers,this.zoom,function(s){return/^icon/.test(s)})),this.glyphOffsetArray=new I,this.lineVertexArray=new M,this.symbolInstances=new T},Kn.prototype.calculateGlyphDependencies=function(s,l,u,m,y){for(var b=0;b<s.length;b++)if(l[s.charCodeAt(b)]=!0,(u||m)&&y){var E=ni[s.charAt(b)];E&&(l[E.charCodeAt(0)]=!0)}},Kn.prototype.populate=function(s,l,u){var m=this.layers[0],y=m.layout,b=y.get("text-font"),E=y.get("text-field"),S=y.get("icon-image"),k=("constant"!==E.value.kind||E.value.value instanceof ei&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&("constant"!==b.value.kind||b.value.value.length>0),R="constant"!==S.value.kind||!!S.value.value||Object.keys(S.parameters).length>0,P=y.get("symbol-sort-key");if(this.features=[],k||R){for(var N=l.iconDependencies,V=l.glyphDependencies,H=l.availableImages,X=new Ht(this.zoom),Y=0,ue=s;Y<ue.length;Y+=1){var le=ue[Y],ye=le.feature,ge=le.id,Se=le.index,Ie=le.sourceLayerIndex,Oe=m._featureFilter.needGeometry,Ge=ko(ye,Oe);if(m._featureFilter.filter(X,Ge,u)){Oe||(Ge.geometry=Zr(ye));var Je=void 0;if(k){var mt=m.getValueAndResolveTokens("text-field",Ge,u,H),tt=ei.factory(mt);kT(tt)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===fo()||this.hasRTLText&&tr.isParsed())&&(Je=Ro(tt,m,Ge))}var Et=void 0;if(R){var nt=m.getValueAndResolveTokens("icon-image",Ge,u,H);Et=nt instanceof xr?nt:xr.fromString(nt)}if(Je||Et){var un=this.sortFeaturesByKey?P.evaluate(Ge,{},u):void 0;if(this.features.push({id:ge,text:Je,icon:Et,index:Se,sourceLayerIndex:Ie,geometry:Ge.geometry,properties:ye.properties,type:lx[ye.type],sortKey:un}),Et&&(N[Et.name]=!0),Je){var Mt=b.evaluate(Ge,{},u).join(","),ft="map"===y.get("text-rotation-alignment")&&"point"!==y.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Gs.vertical)>=0;for(var pn=0,Qt=Je.sections;pn<Qt.length;pn+=1){var xn=Qt[pn];if(xn.image)N[xn.image.name]=!0;else{var Ct=Wr(Je.toString()),Sn=xn.fontStack||Mt,gr=V[Sn]=V[Sn]||{};this.calculateGlyphDependencies(xn.text,gr,ft,this.allowVerticalPlacement,Ct)}}}}}}"line"===y.get("symbol-placement")&&(this.features=function(Or){var Ir={},_r={},zr=[],Ti=0;function Si(Xn){zr.push(Or[Xn]),Ti++}function Po(Xn,yr,bo){var Fn=_r[Xn];return delete _r[Xn],_r[yr]=Fn,zr[Fn].geometry[0].pop(),zr[Fn].geometry[0]=zr[Fn].geometry[0].concat(bo[0]),Fn}function Zi(Xn,yr,bo){var Fn=Ir[yr];return delete Ir[yr],Ir[Xn]=Fn,zr[Fn].geometry[0].shift(),zr[Fn].geometry[0]=bo[0].concat(zr[Fn].geometry[0]),Fn}function Oo(Xn,yr,bo){var Fn=bo?yr[0][yr[0].length-1]:yr[0][0];return Xn+":"+Fn.x+":"+Fn.y}for(var Yr=0;Yr<Or.length;Yr++){var Ii=Or[Yr],yn=Ii.geometry,ir=Ii.text?Ii.text.toString():null;if(ir){var Yn=Oo(ir,yn),In=Oo(ir,yn,!0);if(Yn in _r&&In in Ir&&_r[Yn]!==Ir[In]){var yo=Zi(Yn,In,yn),vo=Po(Yn,In,zr[yo].geometry);delete Ir[Yn],delete _r[In],_r[Oo(ir,zr[vo].geometry,!0)]=vo,zr[yo].geometry=null}else Yn in _r?Po(Yn,In,yn):In in Ir?Zi(Yn,In,yn):(Si(Yr),Ir[Yn]=Ti-1,_r[In]=Ti-1)}else Si(Yr)}return zr.filter(function(Xn){return Xn.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Or,Ir){return Or.sortKey-Ir.sortKey})}},Kn.prototype.update=function(s,l,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,l,this.layers,u),this.icon.programConfigurations.updatePaintArrays(s,l,this.layers,u))},Kn.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Kn.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Kn.prototype.upload=function(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Kn.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Kn.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Kn.prototype.addToLineVertexArray=function(s,l){var u=this.lineVertexArray.length;if(void 0!==s.segment){for(var m=s.dist(l[s.segment+1]),y=s.dist(l[s.segment]),b={},E=s.segment+1;E<l.length;E++)b[E]={x:l[E].x,y:l[E].y,tileUnitDistanceFromAnchor:m},E<l.length-1&&(m+=l[E+1].dist(l[E]));for(var S=s.segment||0;S>=0;S--)b[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:y},S>0&&(y+=l[S-1].dist(l[S]));for(var k=0;k<l.length;k++){var R=b[k];this.lineVertexArray.emplaceBack(R.x,R.y,R.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}},Kn.prototype.addSymbols=function(s,l,u,m,y,b,E,S,k,R,P,N){for(var V=s.indexArray,H=s.layoutVertexArray,X=s.segments.prepareSegment(4*l.length,H,V,this.canOverlap?b.sortKey:void 0),Y=this.glyphOffsetArray.length,ue=X.vertexLength,le=this.allowVerticalPlacement&&E===Gs.vertical?Math.PI/2:0,ye=b.text&&b.text.sections,ge=0;ge<l.length;ge++){var Se=l[ge],Ie=Se.tl,Oe=Se.tr,Ge=Se.bl,Je=Se.br,mt=Se.tex,tt=Se.pixelOffsetTL,Et=Se.pixelOffsetBR,nt=Se.minFontScaleX,un=Se.minFontScaleY,Mt=Se.glyphOffset,ft=Se.isSDF,pn=Se.sectionIndex,Qt=X.vertexLength,xn=Mt[1];Xg(H,S.x,S.y,Ie.x,xn+Ie.y,mt.x,mt.y,u,ft,tt.x,tt.y,nt,un),Xg(H,S.x,S.y,Oe.x,xn+Oe.y,mt.x+mt.w,mt.y,u,ft,Et.x,tt.y,nt,un),Xg(H,S.x,S.y,Ge.x,xn+Ge.y,mt.x,mt.y+mt.h,u,ft,tt.x,Et.y,nt,un),Xg(H,S.x,S.y,Je.x,xn+Je.y,mt.x+mt.w,mt.y+mt.h,u,ft,Et.x,Et.y,nt,un),Va(s.dynamicLayoutVertexArray,S,le),V.emplaceBack(Qt,Qt+1,Qt+2),V.emplaceBack(Qt+1,Qt+2,Qt+3),X.vertexLength+=4,X.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Mt[0]),ge!==l.length-1&&pn===l[ge+1].sectionIndex||s.programConfigurations.populatePaintArrays(H.length,b,b.index,{},N,ye&&ye[pn])}s.placedSymbolArray.emplaceBack(S.x,S.y,Y,this.glyphOffsetArray.length-Y,ue,k,R,S.segment,u?u[0]:0,u?u[1]:0,m[0],m[1],E,0,!1,0,P)},Kn.prototype._addCollisionDebugVertex=function(s,l,u,m,y,b){return l.emplaceBack(0,0),s.emplaceBack(u.x,u.y,m,y,Math.round(b.x),Math.round(b.y))},Kn.prototype.addCollisionDebugVertices=function(s,l,u,m,y,b,E){var S=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),k=S.vertexLength,R=y.layoutVertexArray,P=y.collisionVertexArray,N=E.anchorX,V=E.anchorY;this._addCollisionDebugVertex(R,P,b,N,V,new Ut(s,l)),this._addCollisionDebugVertex(R,P,b,N,V,new Ut(u,l)),this._addCollisionDebugVertex(R,P,b,N,V,new Ut(u,m)),this._addCollisionDebugVertex(R,P,b,N,V,new Ut(s,m)),S.vertexLength+=4;var H=y.indexArray;H.emplaceBack(k,k+1),H.emplaceBack(k+1,k+2),H.emplaceBack(k+2,k+3),H.emplaceBack(k+3,k),S.primitiveLength+=4},Kn.prototype.addDebugCollisionBoxes=function(s,l,u,m){for(var y=s;y<l;y++){var b=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,m?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,u)}},Kn.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new eh(ec,_e.members,gf),this.iconCollisionBox=new eh(ec,_e.members,gf);for(var s=0;s<this.symbolInstances.length;s++){var l=this.symbolInstances.get(s);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}},Kn.prototype._deserializeCollisionBoxesForSymbol=function(s,l,u,m,y,b,E,S,k){for(var R={},P=l;P<u;P++){var N=s.get(P);R.textBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},R.textFeatureIndex=N.featureIndex;break}for(var V=m;V<y;V++){var H=s.get(V);R.verticalTextBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},R.verticalTextFeatureIndex=H.featureIndex;break}for(var X=b;X<E;X++){var Y=s.get(X);R.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},R.iconFeatureIndex=Y.featureIndex;break}for(var ue=S;ue<k;ue++){var le=s.get(ue);R.verticalIconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},R.verticalIconFeatureIndex=le.featureIndex;break}return R},Kn.prototype.deserializeCollisionBoxes=function(s){this.collisionArrays=[];for(var l=0;l<this.symbolInstances.length;l++){var u=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}},Kn.prototype.hasTextData=function(){return this.text.segments.get().length>0},Kn.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Kn.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Kn.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Kn.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Kn.prototype.addIndicesForPlacedSymbol=function(s,l){for(var u=s.placedSymbolArray.get(l),m=u.vertexStartIndex+4*u.numGlyphs,y=u.vertexStartIndex;y<m;y+=4)s.indexArray.emplaceBack(y,y+1,y+2),s.indexArray.emplaceBack(y+1,y+2,y+3)},Kn.prototype.getSortedSymbolIndexes=function(s){if(this.sortedAngle===s&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var l=Math.sin(s),u=Math.cos(s),m=[],y=[],b=[],E=0;E<this.symbolInstances.length;++E){b.push(E);var S=this.symbolInstances.get(E);m.push(0|Math.round(l*S.anchorX+u*S.anchorY)),y.push(S.featureIndex)}return b.sort(function(k,R){return m[k]-m[R]||y[R]-y[k]}),b},Kn.prototype.addToSortKeyRanges=function(s,l){var u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===l?u.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:s,symbolInstanceEnd:s+1})},Kn.prototype.sortFeatures=function(s){var l=this;if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var u=0,m=this.symbolInstanceIndexes;u<m.length;u+=1){var y=this.symbolInstances.get(m[u]);this.featureSortOrder.push(y.featureIndex),[y.rightJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.leftJustifiedTextSymbolIndex].forEach(function(b,E,S){b>=0&&S.indexOf(b)===E&&l.addIndicesForPlacedSymbol(l.text,b)}),y.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,y.verticalPlacedTextSymbolIndex),y.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.placedIconSymbolIndex),y.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},rt("SymbolBucket",Kn,{omit:["layers","collisionBoxArray","features","compareText"]}),Kn.MAX_GLYPHS=65535,Kn.addDynamicAttributes=Va;var Qg=new hi({"symbol-placement":new Xe(W.layout_symbol["symbol-placement"]),"symbol-spacing":new Xe(W.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Xe(W.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new It(W.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Xe(W.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Xe(W.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Xe(W.layout_symbol["icon-ignore-placement"]),"icon-optional":new Xe(W.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Xe(W.layout_symbol["icon-rotation-alignment"]),"icon-size":new It(W.layout_symbol["icon-size"]),"icon-text-fit":new Xe(W.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Xe(W.layout_symbol["icon-text-fit-padding"]),"icon-image":new It(W.layout_symbol["icon-image"]),"icon-rotate":new It(W.layout_symbol["icon-rotate"]),"icon-padding":new Xe(W.layout_symbol["icon-padding"]),"icon-keep-upright":new Xe(W.layout_symbol["icon-keep-upright"]),"icon-offset":new It(W.layout_symbol["icon-offset"]),"icon-anchor":new It(W.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Xe(W.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Xe(W.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Xe(W.layout_symbol["text-rotation-alignment"]),"text-field":new It(W.layout_symbol["text-field"]),"text-font":new It(W.layout_symbol["text-font"]),"text-size":new It(W.layout_symbol["text-size"]),"text-max-width":new It(W.layout_symbol["text-max-width"]),"text-line-height":new Xe(W.layout_symbol["text-line-height"]),"text-letter-spacing":new It(W.layout_symbol["text-letter-spacing"]),"text-justify":new It(W.layout_symbol["text-justify"]),"text-radial-offset":new It(W.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Xe(W.layout_symbol["text-variable-anchor"]),"text-anchor":new It(W.layout_symbol["text-anchor"]),"text-max-angle":new Xe(W.layout_symbol["text-max-angle"]),"text-writing-mode":new Xe(W.layout_symbol["text-writing-mode"]),"text-rotate":new It(W.layout_symbol["text-rotate"]),"text-padding":new Xe(W.layout_symbol["text-padding"]),"text-keep-upright":new Xe(W.layout_symbol["text-keep-upright"]),"text-transform":new It(W.layout_symbol["text-transform"]),"text-offset":new It(W.layout_symbol["text-offset"]),"text-allow-overlap":new Xe(W.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Xe(W.layout_symbol["text-ignore-placement"]),"text-optional":new Xe(W.layout_symbol["text-optional"])}),Jp={paint:new hi({"icon-opacity":new It(W.paint_symbol["icon-opacity"]),"icon-color":new It(W.paint_symbol["icon-color"]),"icon-halo-color":new It(W.paint_symbol["icon-halo-color"]),"icon-halo-width":new It(W.paint_symbol["icon-halo-width"]),"icon-halo-blur":new It(W.paint_symbol["icon-halo-blur"]),"icon-translate":new Xe(W.paint_symbol["icon-translate"]),"icon-translate-anchor":new Xe(W.paint_symbol["icon-translate-anchor"]),"text-opacity":new It(W.paint_symbol["text-opacity"]),"text-color":new It(W.paint_symbol["text-color"],{runtimeType:Zt,getOverride:function(s){return s.textColor},hasOverride:function(s){return!!s.textColor}}),"text-halo-color":new It(W.paint_symbol["text-halo-color"]),"text-halo-width":new It(W.paint_symbol["text-halo-width"]),"text-halo-blur":new It(W.paint_symbol["text-halo-blur"]),"text-translate":new Xe(W.paint_symbol["text-translate"]),"text-translate-anchor":new Xe(W.paint_symbol["text-translate-anchor"])}),layout:Qg},Tf=function(s){this.type=s.property.overrides?s.property.overrides.runtimeType:gt,this.defaultValue=s};Tf.prototype.evaluate=function(s){if(s.formattedSection){var l=this.defaultValue.property.overrides;if(l&&l.hasOverride(s.formattedSection))return l.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default},Tf.prototype.eachChild=function(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)},Tf.prototype.outputDefined=function(){return!1},Tf.prototype.serialize=function(){return null},rt("FormatSectionOverride",Tf,{omit:["defaultValue"]});var ux=function(s){function l(u){s.call(this,u,Jp)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.recalculate=function(u,m){if(s.prototype.recalculate.call(this,u,m),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var y=this.layout.get("text-writing-mode");if(y){for(var b=[],E=0,S=y;E<S.length;E+=1){var k=S[E];b.indexOf(k)<0&&b.push(k)}this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},l.prototype.getValueAndResolveTokens=function(u,m,y,b){var k,E=this.layout.get(u).evaluate(m,{},y,b),S=this._unevaluatedLayout._values[u];return S.isDataDriven()||sf(S.value)||!E?E:(k=m.properties,E.replace(/{([^{}]+)}/g,function(P,N){return N in k?String(k[N]):""}))},l.prototype.createBucket=function(u){return new Kn(u)},l.prototype.queryRadius=function(){return 0},l.prototype.queryIntersectsFeature=function(){return!1},l.prototype._setPaintOverrides=function(){for(var u=0,m=Jp.paint.overridableProperties;u<m.length;u+=1){var y=m[u];if(l.hasPaintOverride(this.layout,y)){var b,E=this.paint.get(y),S=new Tf(E),k=new Ra(S,E.property.specification);b="constant"===E.value.kind||"source"===E.value.kind?new Bd("source",k):new uo("composite",k,E.value.zoomStops,E.value._interpolationType),this.paint._values[y]=new qo(E.property,b,E.parameters)}}},l.prototype._handleOverridablePaintPropertyUpdate=function(u,m,y){return!(!this.layout||m.isDataDriven()||y.isDataDriven())&&l.hasPaintOverride(this.layout,u)},l.hasPaintOverride=function(u,m){var y=u.get("text-field"),b=Jp.paint.properties[m],E=!1,S=function(P){for(var N=0,V=P;N<V.length;N+=1)if(b.overrides&&b.overrides.hasOverride(V[N]))return void(E=!0)};if("constant"===y.value.kind&&y.value.value instanceof ei)S(y.value.value.sections);else if("source"===y.value.kind){var k=function(P){E||(P instanceof Js&&Fi(P.value)===Lt?S(P.value.sections):P instanceof es?S(P.sections):P.eachChild(k))},R=y.value;R._styleExpression&&k(R._styleExpression.expression)}return E},l}(Ci),dx={paint:new hi({"background-color":new Xe(W.paint_background["background-color"]),"background-pattern":new kt(W.paint_background["background-pattern"]),"background-opacity":new Xe(W.paint_background["background-opacity"])})},hx=function(s){function l(u){s.call(this,u,dx)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l}(Ci),fx={paint:new hi({"raster-opacity":new Xe(W.paint_raster["raster-opacity"]),"raster-hue-rotate":new Xe(W.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Xe(W.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Xe(W.paint_raster["raster-brightness-max"]),"raster-saturation":new Xe(W.paint_raster["raster-saturation"]),"raster-contrast":new Xe(W.paint_raster["raster-contrast"]),"raster-resampling":new Xe(W.paint_raster["raster-resampling"]),"raster-fade-duration":new Xe(W.paint_raster["raster-fade-duration"])})},AT=function(s){function l(u){s.call(this,u,fx)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l}(Ci),Jg=function(s){function l(u){s.call(this,u,{}),this.implementation=u}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},l.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},l.prototype.recalculate=function(){},l.prototype.updateTransitions=function(){},l.prototype.hasTransition=function(){},l.prototype.serialize=function(){},l.prototype.onAdd=function(u){this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},l.prototype.onRemove=function(u){this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},l}(Ci),f2={circle:$d,heatmap:Rw,hillshade:Pw,fill:Vw,"fill-extrusion":bf,line:_T,symbol:ux,background:hx,raster:AT},Sf=pt.HTMLImageElement,px=pt.HTMLCanvasElement,_v=pt.HTMLVideoElement,yv=pt.ImageData,ml=pt.ImageBitmap,aa=function(s,l,u,m){this.context=s,this.format=u,this.texture=s.gl.createTexture(),this.update(l,m)};aa.prototype.update=function(s,l,u){var m=s.width,y=s.height,b=!(this.size&&this.size[0]===m&&this.size[1]===y||u),E=this.context,S=E.gl;if(this.useMipmap=!(!l||!l.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!l||!1!==l.premultiply)),b)this.size=[m,y],s instanceof Sf||s instanceof px||s instanceof _v||s instanceof yv||ml&&s instanceof ml?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,s):S.texImage2D(S.TEXTURE_2D,0,this.format,m,y,0,this.format,S.UNSIGNED_BYTE,s.data);else{var k=u||{x:0,y:0},R=k.x,P=k.y;s instanceof Sf||s instanceof px||s instanceof _v||s instanceof yv||ml&&s instanceof ml?S.texSubImage2D(S.TEXTURE_2D,0,R,P,S.RGBA,S.UNSIGNED_BYTE,s):S.texSubImage2D(S.TEXTURE_2D,0,R,P,m,y,S.RGBA,S.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)},aa.prototype.bind=function(s,l,u){var m=this.context.gl;m.bindTexture(m.TEXTURE_2D,this.texture),u!==m.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(u=m.LINEAR),s!==this.filter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,s),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,u||s),this.filter=s),l!==this.wrap&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,l),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,l),this.wrap=l)},aa.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},aa.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var ri=function(s){var l=this;this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){l._triggered=!1,l._callback()})};ri.prototype.trigger=function(){var s=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){s._triggered=!1,s._callback()},0))},ri.prototype.remove=function(){delete this._channel,this._callback=function(){}};var If=function(s,l,u){this.target=s,this.parent=l,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},va(["receive","process"],this),this.invoker=new ri(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ws()?s:pt};function Vr(s,l,u){var m=2*Math.PI*6378137/256/Math.pow(2,u);return[s*m-2*Math.PI*6378137/2,l*m-2*Math.PI*6378137/2]}If.prototype.send=function(s,l,u,m,y){var b=this;void 0===y&&(y=!1);var E=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[E]=u);var S=ba(this.globalScope)?void 0:[];return this.target.postMessage({id:E,type:s,hasCallback:!!u,targetMapId:m,mustQueue:y,sourceMapId:this.mapId,data:Io(l,S)},S),{cancel:function(){u&&delete b.callbacks[E],b.target.postMessage({id:E,type:"<cancel>",targetMapId:m,sourceMapId:b.mapId})}}},If.prototype.receive=function(s){var l=s.data,u=l.id;if(u&&(!l.targetMapId||this.mapId===l.targetMapId))if("<cancel>"===l.type){delete this.tasks[u];var m=this.cancelCallbacks[u];delete this.cancelCallbacks[u],m&&m()}else ws()||l.mustQueue?(this.tasks[u]=l,this.taskQueue.push(u),this.invoker.trigger()):this.processTask(u,l)},If.prototype.process=function(){if(this.taskQueue.length){var s=this.taskQueue.shift(),l=this.tasks[s];delete this.tasks[s],this.taskQueue.length&&this.invoker.trigger(),l&&this.processTask(s,l)}},If.prototype.processTask=function(s,l){var u=this;if("<response>"===l.type){var m=this.callbacks[s];delete this.callbacks[s],m&&(l.error?m(Vi(l.error)):m(null,Vi(l.data)))}else{var y=!1,b=ba(this.globalScope)?void 0:[],E=l.hasCallback?function(P,N){y=!0,delete u.cancelCallbacks[s],u.target.postMessage({id:s,type:"<response>",sourceMapId:u.mapId,error:P?Io(P):null,data:Io(N,b)},b)}:function(P){y=!0},S=null,k=Vi(l.data);if(this.parent[l.type])S=this.parent[l.type](l.sourceMapId,k,E);else if(this.parent.getWorkerSource){var R=l.type.split(".");S=this.parent.getWorkerSource(l.sourceMapId,R[0],k.source)[R[1]](k,E)}else E(new Error("Could not find function "+l.type));!y&&S&&S.cancel&&(this.cancelCallbacks[s]=S.cancel)}},If.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Kr=function(s,l){s&&(l?this.setSouthWest(s).setNorthEast(l):4===s.length?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1]))};Kr.prototype.setNorthEast=function(s){return this._ne=s instanceof Er?new Er(s.lng,s.lat):Er.convert(s),this},Kr.prototype.setSouthWest=function(s){return this._sw=s instanceof Er?new Er(s.lng,s.lat):Er.convert(s),this},Kr.prototype.extend=function(s){var l,u,m=this._sw,y=this._ne;if(s instanceof Er)l=s,u=s;else{if(!(s instanceof Kr))return Array.isArray(s)?4===s.length||s.every(Array.isArray)?this.extend(Kr.convert(s)):this.extend(Er.convert(s)):this;if(u=s._ne,!(l=s._sw)||!u)return this}return m||y?(m.lng=Math.min(l.lng,m.lng),m.lat=Math.min(l.lat,m.lat),y.lng=Math.max(u.lng,y.lng),y.lat=Math.max(u.lat,y.lat)):(this._sw=new Er(l.lng,l.lat),this._ne=new Er(u.lng,u.lat)),this},Kr.prototype.getCenter=function(){return new Er((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Kr.prototype.getSouthWest=function(){return this._sw},Kr.prototype.getNorthEast=function(){return this._ne},Kr.prototype.getNorthWest=function(){return new Er(this.getWest(),this.getNorth())},Kr.prototype.getSouthEast=function(){return new Er(this.getEast(),this.getSouth())},Kr.prototype.getWest=function(){return this._sw.lng},Kr.prototype.getSouth=function(){return this._sw.lat},Kr.prototype.getEast=function(){return this._ne.lng},Kr.prototype.getNorth=function(){return this._ne.lat},Kr.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Kr.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Kr.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Kr.prototype.contains=function(s){var l=Er.convert(s),u=l.lng,m=l.lat,y=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&y},Kr.convert=function(s){return!s||s instanceof Kr?s:new Kr(s)};var Er=function(s,l){if(isNaN(s)||isNaN(l))throw new Error("Invalid LngLat object: ("+s+", "+l+")");if(this.lng=+s,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Er.prototype.wrap=function(){return new Er(wu(this.lng,-180,180),this.lat)},Er.prototype.toArray=function(){return[this.lng,this.lat]},Er.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Er.prototype.distanceTo=function(s){var l=Math.PI/180,u=this.lat*l,m=s.lat*l,y=Math.sin(u)*Math.sin(m)+Math.cos(u)*Math.cos(m)*Math.cos((s.lng-this.lng)*l);return 6371008.8*Math.acos(Math.min(y,1))},Er.prototype.toBounds=function(s){void 0===s&&(s=0);var l=360*s/40075017,u=l/Math.cos(Math.PI/180*this.lat);return new Kr(new Er(this.lng-u,this.lat-l),new Er(this.lng+u,this.lat+l))},Er.convert=function(s){if(s instanceof Er)return s;if(Array.isArray(s)&&(2===s.length||3===s.length))return new Er(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&"object"==typeof s&&null!==s)return new Er(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var vv=2*Math.PI*6371008.8;function kf(s){return vv*Math.cos(s*Math.PI/180)}function mx(s){return(180+s)/360}function bv(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function e_(s,l){return s/kf(l)}function Af(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}var Qu=function(s,l,u){void 0===u&&(u=0),this.x=+s,this.y=+l,this.z=+u};Qu.fromLngLat=function(s,l){void 0===l&&(l=0);var u=Er.convert(s);return new Qu(mx(u.lng),bv(u.lat),e_(l,u.lat))},Qu.prototype.toLngLat=function(){return new Er(360*this.x-180,Af(this.y))},Qu.prototype.toAltitude=function(){return this.z*kf(Af(this.y))},Qu.prototype.meterInMercatorCoordinateUnits=function(){return 1/vv*(s=Af(this.y),1/Math.cos(s*Math.PI/180));var s};var th=function(s,l,u){this.z=s,this.x=l,this.y=u,this.key=Rf(0,s,s,l,u)};th.prototype.equals=function(s){return this.z===s.z&&this.x===s.x&&this.y===s.y},th.prototype.url=function(s,l){var u,m,y,b,E,S=(m=this.y,y=this.z,b=Vr(256*(u=this.x),256*(m=Math.pow(2,y)-m-1),y),E=Vr(256*(u+1),256*(m+1),y),b[0]+","+b[1]+","+E[0]+","+E[1]),k=function(R,P,N){for(var V,H="",X=R;X>0;X--)H+=(P&(V=1<<X-1)?1:0)+(N&V?2:0);return H}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===l?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",k).replace("{bbox-epsg-3857}",S)},th.prototype.getTilePoint=function(s){var l=Math.pow(2,this.z);return new Ut(8192*(s.x*l-this.x),8192*(s.y*l-this.y))},th.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var gx=function(s,l){this.wrap=s,this.canonical=l,this.key=Rf(s,l.z,l.z,l.x,l.y)},mi=function(s,l,u,m,y){this.overscaledZ=s,this.wrap=l,this.canonical=new th(u,+m,+y),this.key=Rf(l,s,u,m,y)};function Rf(s,l,u,m,y){(s*=2)<0&&(s=-1*s-1);var b=1<<u;return(b*b*s+b*y+m).toString(36)+u.toString(36)+l.toString(36)}mi.prototype.equals=function(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)},mi.prototype.scaledTo=function(s){var l=this.canonical.z-s;return s>this.canonical.z?new mi(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new mi(s,this.wrap,s,this.canonical.x>>l,this.canonical.y>>l)},mi.prototype.calculateScaledKey=function(s,l){var u=this.canonical.z-s;return s>this.canonical.z?Rf(this.wrap*+l,s,this.canonical.z,this.canonical.x,this.canonical.y):Rf(this.wrap*+l,s,s,this.canonical.x>>u,this.canonical.y>>u)},mi.prototype.isChildOf=function(s){if(s.wrap!==this.wrap)return!1;var l=this.canonical.z-s.canonical.z;return 0===s.overscaledZ||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>l&&s.canonical.y===this.canonical.y>>l},mi.prototype.children=function(s){if(this.overscaledZ>=s)return[new mi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var l=this.canonical.z+1,u=2*this.canonical.x,m=2*this.canonical.y;return[new mi(l,this.wrap,l,u,m),new mi(l,this.wrap,l,u+1,m),new mi(l,this.wrap,l,u,m+1),new mi(l,this.wrap,l,u+1,m+1)]},mi.prototype.isLessThan=function(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))},mi.prototype.wrapped=function(){return new mi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},mi.prototype.unwrapTo=function(s){return new mi(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)},mi.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},mi.prototype.toUnwrapped=function(){return new gx(this.wrap,this.canonical)},mi.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},mi.prototype.getTilePoint=function(s){return this.canonical.getTilePoint(new Qu(s.x-this.wrap,s.y))},rt("CanonicalTileID",th),rt("OverscaledTileID",mi,{omit:["posMatrix"]});var Kc=function(s,l,u){if(this.uid=s,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(u&&"mapbox"!==u&&"terrarium"!==u)return ur('"'+u+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=l.height;var m=this.dim=l.height-2;this.data=new Uint32Array(l.data.buffer),this.encoding=u||"mapbox";for(var y=0;y<m;y++)this.data[this._idx(-1,y)]=this.data[this._idx(0,y)],this.data[this._idx(m,y)]=this.data[this._idx(m-1,y)],this.data[this._idx(y,-1)]=this.data[this._idx(y,0)],this.data[this._idx(y,m)]=this.data[this._idx(y,m-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(m,-1)]=this.data[this._idx(m-1,0)],this.data[this._idx(-1,m)]=this.data[this._idx(0,m-1)],this.data[this._idx(m,m)]=this.data[this._idx(m-1,m-1)]};Kc.prototype.get=function(s,l){var u=new Uint8Array(this.data.buffer),m=4*this._idx(s,l);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(u[m],u[m+1],u[m+2])},Kc.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Kc.prototype._idx=function(s,l){if(s<-1||s>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(s+1)},Kc.prototype._unpackMapbox=function(s,l,u){return(256*s*256+256*l+u)/10-1e4},Kc.prototype._unpackTerrarium=function(s,l,u){return 256*s+l+u/256-32768},Kc.prototype.getPixels=function(){return new as({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Kc.prototype.backfillBorder=function(s,l,u){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");var m=l*this.dim,y=l*this.dim+this.dim,b=u*this.dim,E=u*this.dim+this.dim;switch(l){case-1:m=y-1;break;case 1:y=m+1}switch(u){case-1:b=E-1;break;case 1:E=b+1}for(var S=-l*this.dim,k=-u*this.dim,R=b;R<E;R++)for(var P=m;P<y;P++)this.data[this._idx(P,R)]=s.data[this._idx(P+S,R+k)]},rt("DEMData",Kc);var em=function(s){this._stringToNumber={},this._numberToString=[];for(var l=0;l<s.length;l++){var u=s[l];this._stringToNumber[u]=l,this._numberToString[l]=u}};em.prototype.encode=function(s){return this._stringToNumber[s]},em.prototype.decode=function(s){return this._numberToString[s]};var t_=function(s,l,u,m,y){this.type="Feature",this._vectorTileFeature=s,s._z=l,s._x=u,s._y=m,this.properties=s.properties,this.id=y},wv={geometry:{configurable:!0}};wv.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},wv.geometry.set=function(s){this._geometry=s},t_.prototype.toJSON=function(){var s={geometry:this.geometry};for(var l in this)"_geometry"!==l&&"_vectorTileFeature"!==l&&(s[l]=this[l]);return s},Object.defineProperties(t_.prototype,wv);var tm=function(){this.state={},this.stateChanges={},this.deletedStates={}};tm.prototype.updateState=function(s,l,u){var m=String(l);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][m]=this.stateChanges[s][m]||{},Oi(this.stateChanges[s][m],u),null===this.deletedStates[s])for(var y in this.deletedStates[s]={},this.state[s])y!==m&&(this.deletedStates[s][y]=null);else if(this.deletedStates[s]&&null===this.deletedStates[s][m])for(var b in this.deletedStates[s][m]={},this.state[s][m])u[b]||(this.deletedStates[s][m][b]=null);else for(var E in u)this.deletedStates[s]&&this.deletedStates[s][m]&&null===this.deletedStates[s][m][E]&&delete this.deletedStates[s][m][E]},tm.prototype.removeFeatureState=function(s,l,u){if(null!==this.deletedStates[s]){var m=String(l);if(this.deletedStates[s]=this.deletedStates[s]||{},u&&void 0!==l)null!==this.deletedStates[s][m]&&(this.deletedStates[s][m]=this.deletedStates[s][m]||{},this.deletedStates[s][m][u]=null);else if(void 0!==l)if(this.stateChanges[s]&&this.stateChanges[s][m])for(u in this.deletedStates[s][m]={},this.stateChanges[s][m])this.deletedStates[s][m][u]=null;else this.deletedStates[s][m]=null;else this.deletedStates[s]=null}},tm.prototype.getState=function(s,l){var u=String(l),m=Oi({},(this.state[s]||{})[u],(this.stateChanges[s]||{})[u]);if(null===this.deletedStates[s])return{};if(this.deletedStates[s]){var y=this.deletedStates[s][l];if(null===y)return{};for(var b in y)delete m[b]}return m},tm.prototype.initializeTileState=function(s,l){s.setFeatureState(this.state,l)},tm.prototype.coalesceChanges=function(s,l){var u={};for(var m in this.stateChanges){this.state[m]=this.state[m]||{};var y={};for(var b in this.stateChanges[m])this.state[m][b]||(this.state[m][b]={}),Oi(this.state[m][b],this.stateChanges[m][b]),y[b]=this.state[m][b];u[m]=y}for(var E in this.deletedStates){this.state[E]=this.state[E]||{};var S={};if(null===this.deletedStates[E])for(var k in this.state[E])S[k]={},this.state[E][k]={};else for(var R in this.deletedStates[E]){if(null===this.deletedStates[E][R])this.state[E][R]={};else for(var P=0,N=Object.keys(this.deletedStates[E][R]);P<N.length;P+=1)delete this.state[E][R][N[P]];S[R]=this.state[E][R]}u[E]=u[E]||{},Oi(u[E],S)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(u).length)for(var V in s)s[V].setFeatureState(u,l)};var Yc=function(s,l){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Bi(8192,16,0),this.grid3D=new Bi(8192,16,0),this.featureIndexArray=new $,this.promoteId=l};function nh(s,l,u,m,y){return Ni(s,function(b,E){var S=l instanceof ks?l.get(E):null;return S&&S.evaluate?S.evaluate(u,m,y):S})}function Pr(s){for(var l=1/0,u=1/0,m=-1/0,y=-1/0,b=0,E=s;b<E.length;b+=1){var S=E[b];l=Math.min(l,S.x),u=Math.min(u,S.y),m=Math.max(m,S.x),y=Math.max(y,S.y)}return{minX:l,minY:u,maxX:m,maxY:y}}function _x(s,l){return l-s}Yc.prototype.insert=function(s,l,u,m,y,b){var E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,m,y);for(var S=b?this.grid3D:this.grid,k=0;k<l.length;k++){for(var R=l[k],P=[1/0,1/0,-1/0,-1/0],N=0;N<R.length;N++){var V=R[N];P[0]=Math.min(P[0],V.x),P[1]=Math.min(P[1],V.y),P[2]=Math.max(P[2],V.x),P[3]=Math.max(P[3],V.y)}P[0]<8192&&P[1]<8192&&P[2]>=0&&P[3]>=0&&S.insert(E,P[0],P[1],P[2],P[3])}},Yc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Zp.VectorTile(new Wc(this.rawTileData)).layers,this.sourceLayerCoder=new em(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Yc.prototype.query=function(s,l,u,m){var y=this;this.loadVTLayers();for(var b=s.params||{},E=8192/s.tileSize/s.scale,S=Ss(b.filter),k=s.queryGeometry,R=s.queryPadding*E,P=Pr(k),N=this.grid.query(P.minX-R,P.minY-R,P.maxX+R,P.maxY+R),V=Pr(s.cameraQueryGeometry),X=0,Y=this.grid3D.query(V.minX-R,V.minY-R,V.maxX+R,V.maxY+R,function(Se,Ie,Oe,Ge){return function(Je,mt,tt,Et,nt){for(var un=0,Mt=Je;un<Mt.length;un+=1){var ft=Mt[un];if(mt<=ft.x&&tt<=ft.y&&Et>=ft.x&&nt>=ft.y)return!0}var pn=[new Ut(mt,tt),new Ut(mt,nt),new Ut(Et,nt),new Ut(Et,tt)];if(Je.length>2)for(var Qt=0,xn=pn;Qt<xn.length;Qt+=1)if(sa(Je,xn[Qt]))return!0;for(var Ct=0;Ct<Je.length-1;Ct++)if(qc(Je[Ct],Je[Ct+1],pn))return!0;return!1}(s.cameraQueryGeometry,Se-R,Ie-R,Oe+R,Ge+R)});X<Y.length;X+=1)N.push(Y[X]);N.sort(_x);for(var ue,le={},ye=function(Se){var Ie=N[Se];if(Ie!==ue){ue=Ie;var Oe=y.featureIndexArray.get(Ie),Ge=null;y.loadMatchingFeature(le,Oe.bucketIndex,Oe.sourceLayerIndex,Oe.featureIndex,S,b.layers,b.availableImages,l,u,m,function(Je,mt,tt){return Ge||(Ge=Zr(Je)),mt.queryIntersectsFeature(k,Je,tt,Ge,y.z,s.transform,E,s.pixelPosMatrix)})}},ge=0;ge<N.length;ge++)ye(ge);return le},Yc.prototype.loadMatchingFeature=function(s,l,u,m,y,b,E,S,k,R,P){var N=this.bucketLayerIDs[l];if(!b||function(Je,mt){for(var tt=0;tt<Je.length;tt++)if(mt.indexOf(Je[tt])>=0)return!0;return!1}(b,N)){var V=this.sourceLayerCoder.decode(u),H=this.vtLayers[V].feature(m);if(y.needGeometry){var X=ko(H,!0);if(!y.filter(new Ht(this.tileID.overscaledZ),X,this.tileID.canonical))return}else if(!y.filter(new Ht(this.tileID.overscaledZ),H))return;for(var Y=this.getId(H,V),ue=0;ue<N.length;ue++){var le=N[ue];if(!(b&&b.indexOf(le)<0)){var ye=S[le];if(ye){var ge={};void 0!==Y&&R&&(ge=R.getState(ye.sourceLayer||"_geojsonTileLayer",Y));var Se=Oi({},k[le]);Se.paint=nh(Se.paint,ye.paint,H,ge,E),Se.layout=nh(Se.layout,ye.layout,H,ge,E);var Ie=!P||P(H,ye,ge);if(Ie){var Oe=new t_(H,this.z,this.x,this.y,Y);Oe.layer=Se;var Ge=s[le];void 0===Ge&&(Ge=s[le]=[]),Ge.push({featureIndex:m,feature:Oe,intersectionZ:Ie})}}}}}},Yc.prototype.lookupSymbolFeatures=function(s,l,u,m,y,b,E,S){var k={};this.loadVTLayers();for(var R=Ss(y),P=0,N=s;P<N.length;P+=1)this.loadMatchingFeature(k,u,m,N[P],R,b,E,S,l);return k},Yc.prototype.hasLayer=function(s){for(var l=0,u=this.bucketLayerIDs;l<u.length;l+=1)for(var m=0,y=u[l];m<y.length;m+=1)if(s===y[m])return!0;return!1},Yc.prototype.getId=function(s,l){var u=s.id;return this.promoteId&&"boolean"==typeof(u=s.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[l]])&&(u=Number(u)),u},rt("FeatureIndex",Yc,{omit:["rawTileData","sourceLayerCoder"]});var Wi=function(s,l){this.tileID=s,this.uid=tl(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Wi.prototype.registerFadeDuration=function(s){var l=s+this.timeAdded;l<rl.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)},Wi.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Wi.prototype.loadVectorData=function(s,l,u){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){for(var m in s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(R,P){var N={};if(!P)return N;for(var V=function(){var Y=X[H],ue=Y.layerIds.map(function(ge){return P.getLayer(ge)}).filter(Boolean);if(0!==ue.length){Y.layers=ue,Y.stateDependentLayerIds&&(Y.stateDependentLayers=Y.stateDependentLayerIds.map(function(ge){return ue.filter(function(Se){return Se.id===ge})[0]}));for(var le=0,ye=ue;le<ye.length;le+=1)N[ye[le].id]=Y}},H=0,X=R;H<X.length;H+=1)V();return N}(s.buckets,l.style),this.hasSymbolBuckets=!1,this.buckets){var y=this.buckets[m];if(y instanceof Kn){if(this.hasSymbolBuckets=!0,!u)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var b in this.buckets){var E=this.buckets[b];if(E instanceof Kn&&E.hasRTLText){this.hasRTLText=!0,tr.isLoading()||tr.isLoaded()||"deferred"!==fo()||jd();break}}for(var S in this.queryPadding=0,this.buckets){var k=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(S).queryRadius(k))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new h},Wi.prototype.unloadVectorData=function(){for(var s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Wi.prototype.getBucket=function(s){return this.buckets[s.id]},Wi.prototype.upload=function(s){for(var l in this.buckets){var u=this.buckets[l];u.uploadPending()&&u.upload(s)}var m=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new aa(s,this.imageAtlas.image,m.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new aa(s,this.glyphAtlasImage,m.ALPHA),this.glyphAtlasImage=null)},Wi.prototype.prepare=function(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)},Wi.prototype.queryRenderedFeatures=function(s,l,u,m,y,b,E,S,k,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:y,scale:b,tileSize:this.tileSize,pixelPosMatrix:R,transform:S,params:E,queryPadding:this.queryPadding*k},s,l,u):{}},Wi.prototype.querySourceFeatures=function(s,l){var u=this.latestFeatureIndex;if(u&&u.rawTileData){var m=u.loadVTLayers(),y=l?l.sourceLayer:"",b=m._geojsonTileLayer||m[y];if(b)for(var E=Ss(l&&l.filter),S=this.tileID.canonical,k=S.z,R=S.x,P=S.y,N={z:k,x:R,y:P},V=0;V<b.length;V++){var H=b.feature(V);if(E.needGeometry){var X=ko(H,!0);if(!E.filter(new Ht(this.tileID.overscaledZ),X,this.tileID.canonical))continue}else if(!E.filter(new Ht(this.tileID.overscaledZ),H))continue;var Y=u.getId(H,y),ue=new t_(H,k,R,P,Y);ue.tile=N,s.push(ue)}}},Wi.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Wi.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Wi.prototype.setExpiryData=function(s){var l=this.expirationTime;if(s.cacheControl){var u=Ll(s.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){var m=Date.now(),y=!1;if(this.expirationTime>m)y=!1;else if(l)if(this.expirationTime<l)y=!0;else{var b=this.expirationTime-l;b?this.expirationTime=m+Math.max(b,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Wi.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Wi.prototype.setFeatureState=function(s,l){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(s).length){var u=this.latestFeatureIndex.loadVTLayers();for(var m in this.buckets)if(l.style.hasLayer(m)){var y=this.buckets[m],b=y.layers[0].sourceLayer||"_geojsonTileLayer",E=u[b],S=s[b];if(E&&S&&0!==Object.keys(S).length){y.update(S,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});var k=l&&l.style&&l.style.getLayer(m);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(y)))}}}},Wi.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Wi.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<rl.now()},Wi.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Wi.prototype.setHoldDuration=function(s){this.symbolFadeHoldUntil=rl.now()+s},Wi.prototype.setDependencies=function(s,l){for(var u={},m=0,y=l;m<y.length;m+=1)u[y[m]]=!0;this.dependencies[s]=u},Wi.prototype.hasDependency=function(s,l){for(var u=0,m=s;u<m.length;u+=1){var y=this.dependencies[m[u]];if(y)for(var b=0,E=l;b<E.length;b+=1)if(y[E[b]])return!0}return!1};var Ju=pt.performance,yx=function(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},Ju.mark(this._marks.start)};yx.prototype.finish=function(){Ju.mark(this._marks.end);var s=Ju.getEntriesByName(this._marks.measure);return 0===s.length&&(Ju.measure(this._marks.measure,this._marks.start,this._marks.end),s=Ju.getEntriesByName(this._marks.measure),Ju.clearMarks(this._marks.start),Ju.clearMarks(this._marks.end),Ju.clearMeasures(this._marks.measure)),s},v.Actor=If,v.AlphaImage=rc,v.CanonicalTileID=th,v.CollisionBoxArray=h,v.Color=vn,v.DEMData=Kc,v.DataConstantProperty=Xe,v.DictionaryCoder=em,v.EXTENT=8192,v.ErrorEvent=me,v.EvaluationParameters=Ht,v.Event=de,v.Evented=K,v.FeatureIndex=Yc,v.FillBucket=fl,v.FillExtrusionBucket=ic,v.ImageAtlas=Ef,v.ImagePosition=xf,v.LineBucket=Go,v.LngLat=Er,v.LngLatBounds=Kr,v.MercatorCoordinate=Qu,v.ONE_EM=24,v.OverscaledTileID=mi,v.Point=Ut,v.Point$1=Ut,v.Properties=hi,v.Protobuf=Wc,v.RGBAImage=as,v.RequestManager=To,v.RequestPerformance=yx,v.ResourceType=Su,v.SegmentVector=j,v.SourceFeatureState=tm,v.StructArrayLayout1ui2=zp,v.StructArrayLayout2f1f2i16=Uu,v.StructArrayLayout2i4=zu,v.StructArrayLayout3ui6=Hs,v.StructArrayLayout4i8=io,v.SymbolBucket=Kn,v.Texture=aa,v.Tile=Wi,v.Transitionable=ui,v.Uniform1f=He,v.Uniform1i=Ze,v.Uniform2f=it,v.Uniform3f=_t,v.Uniform4f=xt,v.UniformColor=bt,v.UniformMatrix4f=at,v.UnwrappedTileID=gx,v.ValidationError=re,v.WritingMode=Gs,v.ZoomHistory=ho,v.add=function(s,l,u){return s[0]=l[0]+u[0],s[1]=l[1]+u[1],s[2]=l[2]+u[2],s},v.addDynamicAttributes=Va,v.asyncAll=function(s,l,u){if(!s.length)return u(null,[]);var m=s.length,y=new Array(s.length),b=null;s.forEach(function(E,S){l(E,function(k,R){k&&(b=k),y[S]=R,0==--m&&u(b,y)})})},v.bezier=Co,v.bindAll=va,v.browser=rl,v.cacheEntryPossiblyAdded=function(s){++Vl>Gh&&(s.getActor().send("enforceCacheSizeLimit",Du),Vl=0)},v.clamp=Qi,v.clearTileCache=function(s){var l=pt.caches.delete("mapbox-tiles");s&&l.catch(s).then(function(){return s()})},v.clipLine=pv,v.clone=function(s){var l=new Nn(16);return l[0]=s[0],l[1]=s[1],l[2]=s[2],l[3]=s[3],l[4]=s[4],l[5]=s[5],l[6]=s[6],l[7]=s[7],l[8]=s[8],l[9]=s[9],l[10]=s[10],l[11]=s[11],l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15],l},v.clone$1=Fs,v.clone$2=function(s){var l=new Nn(3);return l[0]=s[0],l[1]=s[1],l[2]=s[2],l},v.collisionCircleLayout=yT,v.config=Jn,v.create=function(){var s=new Nn(16);return Nn!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},v.create$1=function(){var s=new Nn(9);return Nn!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s},v.create$2=function(){var s=new Nn(4);return Nn!=Float32Array&&(s[1]=0,s[2]=0),s[0]=1,s[3]=1,s},v.createCommonjsModule=jo,v.createExpression=Ma,v.createLayout=wn,v.createStyleLayer=function(s){return"custom"===s.type?new Jg(s):new f2[s.type](s)},v.cross=function(s,l,u){var m=l[0],y=l[1],b=l[2],E=u[0],S=u[1],k=u[2];return s[0]=y*k-b*S,s[1]=b*E-m*k,s[2]=m*S-y*E,s},v.deepEqual=function s(l,u){if(Array.isArray(l)){if(!Array.isArray(u)||l.length!==u.length)return!1;for(var m=0;m<l.length;m++)if(!s(l[m],u[m]))return!1;return!0}if("object"==typeof l&&null!==l&&null!==u){if("object"!=typeof u||Object.keys(l).length!==Object.keys(u).length)return!1;for(var y in l)if(!s(l[y],u[y]))return!1;return!0}return l===u},v.dot=function(s,l){return s[0]*l[0]+s[1]*l[1]+s[2]*l[2]},v.dot$1=function(s,l){return s[0]*l[0]+s[1]*l[1]+s[2]*l[2]+s[3]*l[3]},v.ease=kc,v.emitValidationErrors=na,v.endsWith=Ac,v.enforceCacheSizeLimit=function(s){Tu(),Es&&Es.then(function(l){l.keys().then(function(u){for(var m=0;m<u.length-s;m++)l.delete(u[m])})})},v.evaluateSizeForFeature=Kp,v.evaluateSizeForZoom=Yp,v.evaluateVariableOffset=ax,v.evented=Xt,v.extend=Oi,v.featureFilter=Ss,v.filterObject=bs,v.fromRotation=function(s,l){var u=Math.sin(l),m=Math.cos(l);return s[0]=m,s[1]=u,s[2]=0,s[3]=-u,s[4]=m,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},v.getAnchorAlignment=cv,v.getAnchorJustification=Jd,v.getArrayBuffer=er,v.getImage=U,v.getJSON=function(s,l){return Ul(Oi(s,{type:"json"}),l)},v.getRTLTextPluginStatus=fo,v.getReferrer=al,v.getVideo=function(s,l){var u,m,y=pt.document.createElement("video");y.muted=!0,y.onloadstart=function(){l(null,y)};for(var b=0;b<s.length;b++){var E=pt.document.createElement("source");u=s[b],m=void 0,(m=pt.document.createElement("a")).href=u,(m.protocol!==pt.document.location.protocol||m.host!==pt.document.location.host)&&(y.crossOrigin="Anonymous"),E.src=s[b],y.appendChild(E)}return{cancel:function(){}}},v.identity=Mr,v.invert=function(s,l){var u=l[0],m=l[1],y=l[2],b=l[3],E=l[4],S=l[5],k=l[6],R=l[7],P=l[8],N=l[9],V=l[10],H=l[11],X=l[12],Y=l[13],ue=l[14],le=l[15],ye=u*S-m*E,ge=u*k-y*E,Se=u*R-b*E,Ie=m*k-y*S,Oe=m*R-b*S,Ge=y*R-b*k,Je=P*Y-N*X,mt=P*ue-V*X,tt=P*le-H*X,Et=N*ue-V*Y,nt=N*le-H*Y,un=V*le-H*ue,Mt=ye*un-ge*nt+Se*Et+Ie*tt-Oe*mt+Ge*Je;return Mt?(s[0]=(S*un-k*nt+R*Et)*(Mt=1/Mt),s[1]=(y*nt-m*un-b*Et)*Mt,s[2]=(Y*Ge-ue*Oe+le*Ie)*Mt,s[3]=(V*Oe-N*Ge-H*Ie)*Mt,s[4]=(k*tt-E*un-R*mt)*Mt,s[5]=(u*un-y*tt+b*mt)*Mt,s[6]=(ue*Se-X*Ge-le*ge)*Mt,s[7]=(P*Ge-V*Se+H*ge)*Mt,s[8]=(E*nt-S*tt+R*Je)*Mt,s[9]=(m*tt-u*nt-b*Je)*Mt,s[10]=(X*Oe-Y*Se+le*ye)*Mt,s[11]=(N*Se-P*Oe-H*ye)*Mt,s[12]=(S*mt-E*Et-k*Je)*Mt,s[13]=(u*Et-m*mt+y*Je)*Mt,s[14]=(Y*ge-X*Ie-ue*ye)*Mt,s[15]=(P*Ie-N*ge+V*ye)*Mt,s):null},v.isChar=ct,v.isMapboxURL=Vs,v.keysDifference=function(s,l){var u=[];for(var m in s)m in l||u.push(m);return u},v.makeRequest=Ul,v.mapObject=Ni,v.mercatorXfromLng=mx,v.mercatorYfromLat=bv,v.mercatorZfromAltitude=e_,v.mul=hl,v.multiply=Hu,v.mvt=Zp,v.nextPowerOfTwo=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},v.normalize=function(s,l){var u=l[0],m=l[1],y=l[2],b=u*u+m*m+y*y;return b>0&&(b=1/Math.sqrt(b)),s[0]=l[0]*b,s[1]=l[1]*b,s[2]=l[2]*b,s},v.number=ci,v.offscreenCanvasSupported=kd,v.ortho=function(s,l,u,m,y,b,E){var S=1/(l-u),k=1/(m-y),R=1/(b-E);return s[0]=-2*S,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*k,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*R,s[11]=0,s[12]=(l+u)*S,s[13]=(y+m)*k,s[14]=(E+b)*R,s[15]=1,s},v.parseGlyphPBF=function(s){return new Wc(s).readFields(DT,[])},v.pbf=Wc,v.performSymbolLayout=function(s,l,u,m,y,b,E){s.createArrays(),s.tilePixelRatio=8192/(512*s.overscaling),s.compareText={},s.iconsNeedLinear=!1;var S=s.layers[0].layout,k=s.layers[0]._unevaluatedLayout._values,R={};if("composite"===s.textSizeData.kind){var P=s.textSizeData,N=P.maxZoom;R.compositeTextSizes=[k["text-size"].possiblyEvaluate(new Ht(P.minZoom),E),k["text-size"].possiblyEvaluate(new Ht(N),E)]}if("composite"===s.iconSizeData.kind){var V=s.iconSizeData,H=V.maxZoom;R.compositeIconSizes=[k["icon-size"].possiblyEvaluate(new Ht(V.minZoom),E),k["icon-size"].possiblyEvaluate(new Ht(H),E)]}R.layoutTextSize=k["text-size"].possiblyEvaluate(new Ht(s.zoom+1),E),R.layoutIconSize=k["icon-size"].possiblyEvaluate(new Ht(s.zoom+1),E),R.textMaxSize=k["text-size"].possiblyEvaluate(new Ht(18));for(var X=24*S.get("text-line-height"),Y="map"===S.get("text-rotation-alignment")&&"point"!==S.get("symbol-placement"),ue=S.get("text-keep-upright"),le=S.get("text-size"),ye=function(){var Ie=Se[ge],Oe=S.get("text-font").evaluate(Ie,{},E).join(","),Ge=le.evaluate(Ie,{},E),Je=R.layoutTextSize.evaluate(Ie,{},E),mt=R.layoutIconSize.evaluate(Ie,{},E),tt={horizontal:{},vertical:void 0},Et=Ie.text,nt=[0,0];if(Et){var un=Et.toString(),Mt=24*S.get("text-letter-spacing").evaluate(Ie,{},E),ft=function(yn){for(var ir=0,Yn=yn;ir<Yn.length;ir+=1)if(In=Yn[ir].charCodeAt(0),ct.Arabic(In)||ct["Arabic Supplement"](In)||ct["Arabic Extended-A"](In)||ct["Arabic Presentation Forms-A"](In)||ct["Arabic Presentation Forms-B"](In))return!1;var In;return!0}(un)?Mt:0,pn=S.get("text-anchor").evaluate(Ie,{},E),Qt=S.get("text-variable-anchor");if(!Qt){var xn=S.get("text-radial-offset").evaluate(Ie,{},E);nt=xn?ax(pn,[24*xn,Qd]):S.get("text-offset").evaluate(Ie,{},E).map(function(yn){return 24*yn})}var Ct=Y?"center":S.get("text-justify").evaluate(Ie,{},E),Sn=S.get("symbol-placement"),gr="point"===Sn?24*S.get("text-max-width").evaluate(Ie,{},E):0,Or=function(){s.allowVerticalPlacement&&Wr(un)&&(tt.vertical=qg(Et,l,u,y,Oe,gr,X,pn,"left",ft,nt,Gs.vertical,!0,Sn,Je,Ge))};if(!Y&&Qt){for(var Ir="auto"===Ct?Qt.map(function(yn){return Jd(yn)}):[Ct],_r=!1,zr=0;zr<Ir.length;zr++){var Ti=Ir[zr];if(!tt.horizontal[Ti])if(_r)tt.horizontal[Ti]=tt.horizontal[0];else{var Si=qg(Et,l,u,y,Oe,gr,X,"center",Ti,ft,nt,Gs.horizontal,!1,Sn,Je,Ge);Si&&(tt.horizontal[Ti]=Si,_r=1===Si.positionedLines.length)}}Or()}else{"auto"===Ct&&(Ct=Jd(pn));var Po=qg(Et,l,u,y,Oe,gr,X,pn,Ct,ft,nt,Gs.horizontal,!1,Sn,Je,Ge);Po&&(tt.horizontal[Ct]=Po),Or(),Wr(un)&&Y&&ue&&(tt.vertical=qg(Et,l,u,y,Oe,gr,X,pn,Ct,ft,nt,Gs.vertical,!1,Sn,Je,Ge))}}var yn,ir,In,yo,vo,Zi=void 0,Oo=!1;if(Ie.icon&&Ie.icon.name){var Yr=m[Ie.icon.name];Yr&&(yn=y[Ie.icon.name],ir=S.get("icon-offset").evaluate(Ie,{},E),In=cv(S.get("icon-anchor").evaluate(Ie,{},E)),Zi={image:yn,top:vo=ir[1]-yn.displaySize[1]*In.verticalAlign,bottom:vo+yn.displaySize[1],left:yo=ir[0]-yn.displaySize[0]*In.horizontalAlign,right:yo+yn.displaySize[0]},Oo=Yr.sdf,void 0===s.sdfIcons?s.sdfIcons=Yr.sdf:s.sdfIcons!==Yr.sdf&&ur("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Yr.pixelRatio!==s.pixelRatio||0!==S.get("icon-rotate").constantOr(1))&&(s.iconsNeedLinear=!0))}var Ii=Qp(tt.horizontal)||tt.vertical;s.iconsInText=!!Ii&&Ii.iconsInText,(Ii||Zi)&&function(yn,ir,Yn,In,yo,vo,Xn,yr,bo,Fn,gl){var ds=vo.textMaxSize.evaluate(ir,{});void 0===ds&&(ds=Xn);var la,Nr=yn.layers[0].layout,ac=Nr.get("icon-offset").evaluate(ir,{},gl),za=Qp(Yn.horizontal),nm=Xn/24,_l=yn.tilePixelRatio*nm,rh=yn.tilePixelRatio*ds/24,lc=yn.tilePixelRatio*yr,ih=yn.tilePixelRatio*Nr.get("symbol-spacing"),Mf=Nr.get("text-padding")*yn.tilePixelRatio,oh=Nr.get("icon-padding")*yn.tilePixelRatio,Pf=Nr.get("text-max-angle")/180*Math.PI,n_="map"===Nr.get("text-rotation-alignment")&&"point"!==Nr.get("symbol-placement"),Of="map"===Nr.get("icon-rotation-alignment")&&"point"!==Nr.get("symbol-placement"),cc=Nr.get("symbol-placement"),uc=ih/2,Nf=Nr.get("icon-text-fit");In&&"none"!==Nf&&(yn.allowVerticalPlacement&&Yn.vertical&&(la=yt(In,Yn.vertical,Nf,Nr.get("icon-text-fit-padding"),ac,nm)),za&&(In=yt(In,za,Nf,Nr.get("icon-text-fit-padding"),ac,nm)));var Xc=function(a_,lh){lh.x<0||lh.x>=8192||lh.y<0||lh.y>=8192||function(Ur,Ua,RT,ed,l_,c_,Ev,Jc,u_,d_,h_,Cv,vx,f_,p_,Dv,Tv,bx,MT,eu,ca,ch,wx,hc,xx){var hm,uh,td,zf,dh,Uf=Ur.addToLineVertexArray(Ua,RT),PT=0,Sv=0,Ex=0,Cx=0,Iv=-1,hh=-1,fc={},m_=ie(""),kv=0,Dx=0;if(void 0===Jc._unevaluatedLayout.getValue("text-radial-offset")?(kv=(hm=Jc.layout.get("text-offset").evaluate(ca,{},hc).map(function(w_){return 24*w_}))[0],Dx=hm[1]):(kv=24*Jc.layout.get("text-radial-offset").evaluate(ca,{},hc),Dx=Qd),Ur.allowVerticalPlacement&&ed.vertical){var OT=Jc.layout.get("text-rotate").evaluate(ca,{},hc)+90;zf=new Kg(u_,Ua,d_,h_,Cv,ed.vertical,vx,f_,p_,OT),Ev&&(dh=new Kg(u_,Ua,d_,h_,Cv,Ev,Tv,bx,p_,OT))}if(l_){var Tx=Jc.layout.get("icon-rotate").evaluate(ca,{}),jf="none"!==Jc.layout.get("icon-text-fit"),Sx=IT(l_,Tx,wx,jf),Hf=Ev?IT(Ev,Tx,wx,jf):void 0;td=new Kg(u_,Ua,d_,h_,Cv,l_,Tv,bx,!1,Tx),PT=4*Sx.length;var g_=Ur.iconSizeData,$f=null;"source"===g_.kind?($f=[128*Jc.layout.get("icon-size").evaluate(ca,{})])[0]>32640&&ur(Ur.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===g_.kind&&(($f=[128*ch.compositeIconSizes[0].evaluate(ca,{},hc),128*ch.compositeIconSizes[1].evaluate(ca,{},hc)])[0]>32640||$f[1]>32640)&&ur(Ur.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Ur.addSymbols(Ur.icon,Sx,$f,eu,MT,ca,!1,Ua,Uf.lineStartIndex,Uf.lineLength,-1,hc),Iv=Ur.icon.placedSymbolArray.length-1,Hf&&(Sv=4*Hf.length,Ur.addSymbols(Ur.icon,Hf,$f,eu,MT,ca,Gs.vertical,Ua,Uf.lineStartIndex,Uf.lineLength,-1,hc),hh=Ur.icon.placedSymbolArray.length-1)}for(var __ in ed.horizontal){var Av=ed.horizontal[__];if(!uh){m_=ie(Av.text);var p2=Jc.layout.get("text-rotate").evaluate(ca,{},hc);uh=new Kg(u_,Ua,d_,h_,Cv,Av,vx,f_,p_,p2)}var NT=1===Av.positionedLines.length;if(Ex+=Yg(Ur,Ua,Av,c_,Jc,p_,ca,Dv,Uf,ed.vertical?Gs.horizontal:Gs.horizontalOnly,NT?Object.keys(ed.horizontal):[__],fc,Iv,ch,hc),NT)break}ed.vertical&&(Cx+=Yg(Ur,Ua,ed.vertical,c_,Jc,p_,ca,Dv,Uf,Gs.vertical,["vertical"],fc,hh,ch,hc));var Ix=uh?uh.boxStartIndex:Ur.collisionBoxArray.length,LT=uh?uh.boxEndIndex:Ur.collisionBoxArray.length,kx=zf?zf.boxStartIndex:Ur.collisionBoxArray.length,Rv=zf?zf.boxEndIndex:Ur.collisionBoxArray.length,Ax=td?td.boxStartIndex:Ur.collisionBoxArray.length,y_=td?td.boxEndIndex:Ur.collisionBoxArray.length,v_=dh?dh.boxStartIndex:Ur.collisionBoxArray.length,FT=dh?dh.boxEndIndex:Ur.collisionBoxArray.length,tu=-1,b_=function(w_,Mv){return w_&&w_.circleDiameter?Math.max(w_.circleDiameter,Mv):Mv};tu=b_(uh,tu),tu=b_(zf,tu),tu=b_(td,tu);var Rx=(tu=b_(dh,tu))>-1?1:0;Rx&&(tu*=xx/24),Ur.glyphOffsetArray.length>=Kn.MAX_GLYPHS&&ur("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==ca.sortKey&&Ur.addToSortKeyRanges(Ur.symbolInstances.length,ca.sortKey),Ur.symbolInstances.emplaceBack(Ua.x,Ua.y,fc.right>=0?fc.right:-1,fc.center>=0?fc.center:-1,fc.left>=0?fc.left:-1,fc.vertical||-1,Iv,hh,m_,Ix,LT,kx,Rv,Ax,y_,v_,FT,d_,Ex,Cx,PT,Sv,Rx,0,vx,kv,Dx,tu)}(yn,lh,a_,Yn,In,yo,la,yn.layers[0],yn.collisionBoxArray,ir.index,ir.sourceLayerIndex,yn.index,_l,Mf,n_,bo,lc,oh,Of,ac,ir,vo,Fn,gl,Xn)};if("line"===cc)for(var sh=0,r_=pv(ir.geometry,0,0,8192,8192);sh<r_.length;sh+=1)for(var rm=r_[sh],Lf=0,im=fv(rm,ih,Pf,Yn.vertical||za,In,24,rh,yn.overscaling,8192);Lf<im.length;Lf+=1){var Ff=im[Lf];za&&h2(yn,za.text,uc,Ff)||Xc(rm,Ff)}else if("line-center"===cc)for(var i_=0,Bf=ir.geometry;i_<Bf.length;i_+=1){var om=Bf[i_];if(om.length>1){var o_=Xp(om,Pf,Yn.vertical||za,In,24,rh);o_&&Xc(om,o_)}}else if("Polygon"===ir.type)for(var sm=0,xv=nv(ir.geometry,0);sm<xv.length;sm+=1){var am=xv[sm],lm=Df(am,16);Xc(am[0],new Cf(lm.x,lm.y,0))}else if("LineString"===ir.type)for(var ah=0,cm=ir.geometry;ah<cm.length;ah+=1){var Qc=cm[ah];Xc(Qc,new Cf(Qc[0].x,Qc[0].y,0))}else if("Point"===ir.type)for(var um=0,s_=ir.geometry;um<s_.length;um+=1)for(var dc=0,dm=s_[um];dc<dm.length;dc+=1){var Vf=dm[dc];Xc([Vf],new Cf(Vf.x,Vf.y,0))}}(s,Ie,tt,Zi,m,R,Je,mt,nt,Oo,E)},ge=0,Se=s.features;ge<Se.length;ge+=1)ye();b&&s.generateCollisionDebugBuffers()},v.perspective=function(s,l,u,m,y){var b,E=1/Math.tan(l/2);return s[0]=E/u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=E,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,null!=y&&y!==1/0?(s[10]=(y+m)*(b=1/(m-y)),s[14]=2*y*m*b):(s[10]=-1,s[14]=-2*m),s},v.pick=function(s,l){for(var u={},m=0;m<l.length;m++){var y=l[m];y in s&&(u[y]=s[y])}return u},v.plugin=tr,v.polygonIntersectsPolygon=Me,v.postMapLoadEvent=Da,v.postTurnstileEvent=Mc,v.potpack=ex,v.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],v.register=rt,v.registerForPluginStateChange=function(s){return s({pluginStatus:ji,pluginURL:kn}),Xt.on("pluginStateChange",s),s},v.renderColorRamp=Bg,v.rotate=function(s,l,u){var m=l[0],y=l[1],b=l[2],E=l[3],S=Math.sin(u),k=Math.cos(u);return s[0]=m*k+b*S,s[1]=y*k+E*S,s[2]=m*-S+b*k,s[3]=y*-S+E*k,s},v.rotateX=function(s,l,u){var m=Math.sin(u),y=Math.cos(u),b=l[4],E=l[5],S=l[6],k=l[7],R=l[8],P=l[9],N=l[10],V=l[11];return l!==s&&(s[0]=l[0],s[1]=l[1],s[2]=l[2],s[3]=l[3],s[12]=l[12],s[13]=l[13],s[14]=l[14],s[15]=l[15]),s[4]=b*y+R*m,s[5]=E*y+P*m,s[6]=S*y+N*m,s[7]=k*y+V*m,s[8]=R*y-b*m,s[9]=P*y-E*m,s[10]=N*y-S*m,s[11]=V*y-k*m,s},v.rotateZ=function(s,l,u){var m=Math.sin(u),y=Math.cos(u),b=l[0],E=l[1],S=l[2],k=l[3],R=l[4],P=l[5],N=l[6],V=l[7];return l!==s&&(s[8]=l[8],s[9]=l[9],s[10]=l[10],s[11]=l[11],s[12]=l[12],s[13]=l[13],s[14]=l[14],s[15]=l[15]),s[0]=b*y+R*m,s[1]=E*y+P*m,s[2]=S*y+N*m,s[3]=k*y+V*m,s[4]=R*y-b*m,s[5]=P*y-E*m,s[6]=N*y-S*m,s[7]=V*y-k*m,s},v.scale=function(s,l,u){var m=u[0],y=u[1],b=u[2];return s[0]=l[0]*m,s[1]=l[1]*m,s[2]=l[2]*m,s[3]=l[3]*m,s[4]=l[4]*y,s[5]=l[5]*y,s[6]=l[6]*y,s[7]=l[7]*y,s[8]=l[8]*b,s[9]=l[9]*b,s[10]=l[10]*b,s[11]=l[11]*b,s[12]=l[12],s[13]=l[13],s[14]=l[14],s[15]=l[15],s},v.scale$1=function(s,l,u){return s[0]=l[0]*u,s[1]=l[1]*u,s[2]=l[2]*u,s[3]=l[3]*u,s},v.scale$2=function(s,l,u){return s[0]=l[0]*u,s[1]=l[1]*u,s[2]=l[2]*u,s},v.setCacheLimits=function(s,l){Du=s,Gh=l},v.setRTLTextPlugin=function(s,l,u){if(void 0===u&&(u=!1),"deferred"===ji||"loading"===ji||"loaded"===ji)throw new Error("setRTLTextPlugin cannot be called multiple times.");kn=rl.resolveURL(s),ji="deferred",dl=l,rs(),u||jd()},v.sphericalToCartesian=function(s){var l=s[0],u=s[1],m=s[2];return u+=90,u*=Math.PI/180,m*=Math.PI/180,{x:l*Math.cos(u)*Math.sin(m),y:l*Math.sin(u)*Math.sin(m),z:l*Math.cos(m)}},v.sqrLen=function(s){var l=s[0],u=s[1];return l*l+u*u},v.styleSpec=W,v.sub=function(s,l,u){return s[0]=l[0]-u[0],s[1]=l[1]-u[1],s[2]=l[2]-u[2],s},v.symbolSize=uv,v.transformMat3=function(s,l,u){var m=l[0],y=l[1],b=l[2];return s[0]=m*u[0]+y*u[3]+b*u[6],s[1]=m*u[1]+y*u[4]+b*u[7],s[2]=m*u[2]+y*u[5]+b*u[8],s},v.transformMat4=_f,v.translate=function(s,l,u){var m,y,b,E,S,k,R,P,N,V,H,X,Y=u[0],ue=u[1],le=u[2];return l===s?(s[12]=l[0]*Y+l[4]*ue+l[8]*le+l[12],s[13]=l[1]*Y+l[5]*ue+l[9]*le+l[13],s[14]=l[2]*Y+l[6]*ue+l[10]*le+l[14],s[15]=l[3]*Y+l[7]*ue+l[11]*le+l[15]):(y=l[1],b=l[2],E=l[3],S=l[4],k=l[5],R=l[6],P=l[7],N=l[8],V=l[9],H=l[10],X=l[11],s[0]=m=l[0],s[1]=y,s[2]=b,s[3]=E,s[4]=S,s[5]=k,s[6]=R,s[7]=P,s[8]=N,s[9]=V,s[10]=H,s[11]=X,s[12]=m*Y+S*ue+N*le+l[12],s[13]=y*Y+k*ue+V*le+l[13],s[14]=b*Y+R*ue+H*le+l[14],s[15]=E*Y+P*ue+X*le+l[15]),s},v.triggerPluginCompletionEvent=On,v.uniqueId=tl,v.validateCustomStyleLayer=function(s){var l=[],u=s.id;return void 0===u&&l.push({message:"layers."+u+': missing required property "id"'}),void 0===s.render&&l.push({message:"layers."+u+': missing required method "render"'}),s.renderingMode&&"2d"!==s.renderingMode&&"3d"!==s.renderingMode&&l.push({message:"layers."+u+': property "renderingMode" must be either "2d" or "3d"'}),l},v.validateLight=Fp,v.validateStyle=Bu,v.values=function(s){var l=[];for(var u in s)l.push(s[u]);return l},v.vectorTile=Zp,v.version="1.15.3",v.warnOnce=ur,v.webpSupported=xa,v.window=pt,v.wrap=wu}),Id(0,function(v){function jo(F){var z=typeof F;if("number"===z||"boolean"===z||"string"===z||null==F)return JSON.stringify(F);if(Array.isArray(F)){for(var U="[",G=0,te=F;G<te.length;G+=1)U+=jo(te[G])+",";return U+"]"}for(var de=Object.keys(F).sort(),me="{",K=0;K<de.length;K++)me+=JSON.stringify(de[K])+":"+jo(F[de[K]])+",";return me+"}"}function Ve(F){for(var z="",U=0,G=v.refProperties;U<G.length;U+=1)z+="/"+jo(F[G[U]]);return z}var vt=function(F){this.keyCache={},F&&this.replace(F)};vt.prototype.replace=function(F){this._layerConfigs={},this._layers={},this.update(F,[])},vt.prototype.update=function(F,z){for(var U=this,G=0,te=F;G<te.length;G+=1){var de=te[G];this._layerConfigs[de.id]=de;var me=this._layers[de.id]=v.createStyleLayer(de);me._featureFilter=v.featureFilter(me.filter),this.keyCache[de.id]&&delete this.keyCache[de.id]}for(var K=0,W=z;K<W.length;K+=1){var re=W[K];delete this.keyCache[re],delete this._layerConfigs[re],delete this._layers[re]}this.familiesBySource={};for(var ze=0,Ke=function(et,Be){for(var Zt={},Kt=0;Kt<et.length;Kt++){var se=Be&&Be[et[Kt].id]||Ve(et[Kt]);Be&&(Be[et[Kt].id]=se);var ar=Zt[se];ar||(ar=Zt[se]=[]),ar.push(et[Kt])}var Lt=[];for(var tn in Zt)Lt.push(Zt[tn]);return Lt}(v.values(this._layerConfigs),this.keyCache);ze<Ke.length;ze+=1){var Ce=Ke[ze].map(function(et){return U._layers[et.id]}),je=Ce[0];if("none"!==je.visibility){var st=je.source||"",lt=this.familiesBySource[st];lt||(lt=this.familiesBySource[st]={});var gt=je.sourceLayer||"_geojsonTileLayer",Pe=lt[gt];Pe||(Pe=lt[gt]=[]),Pe.push(Ce)}}};var Ut=function(F){var z={},U=[];for(var G in F){var te=F[G],de=z[G]={};for(var me in te){var K=te[+me];if(K&&0!==K.bitmap.width&&0!==K.bitmap.height){var W={x:0,y:0,w:K.bitmap.width+2,h:K.bitmap.height+2};U.push(W),de[me]={rect:W,metrics:K.metrics}}}}var re=v.potpack(U),ze=new v.AlphaImage({width:re.w||1,height:re.h||1});for(var Ke in F){var Ce=F[Ke];for(var je in Ce){var st=Ce[+je];if(st&&0!==st.bitmap.width&&0!==st.bitmap.height){var lt=z[Ke][je].rect;v.AlphaImage.copy(st.bitmap,ze,{x:0,y:0},{x:lt.x+1,y:lt.y+1},st.bitmap)}}}this.image=ze,this.positions=z};v.register("GlyphAtlas",Ut);var el=function(F){this.tileID=new v.OverscaledTileID(F.tileID.overscaledZ,F.tileID.wrap,F.tileID.canonical.z,F.tileID.canonical.x,F.tileID.canonical.y),this.uid=F.uid,this.zoom=F.zoom,this.pixelRatio=F.pixelRatio,this.tileSize=F.tileSize,this.source=F.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=F.showCollisionBoxes,this.collectResourceTiming=!!F.collectResourceTiming,this.returnDependencies=!!F.returnDependencies,this.promoteId=F.promoteId};function pt(F,z,U){for(var G=new v.EvaluationParameters(z),te=0,de=F;te<de.length;te+=1)de[te].recalculate(G,U)}function Ol(F,z){var U=v.getArrayBuffer(F.request,function(G,te,de,me){G?z(G):te&&z(null,{vectorTile:new v.vectorTile.VectorTile(new v.pbf(te)),rawData:te,cacheControl:de,expires:me})});return function(){U.cancel(),z()}}el.prototype.parse=function(F,z,U,G,te){var de=this;this.status="parsing",this.data=F,this.collisionBoxArray=new v.CollisionBoxArray;var me=new v.DictionaryCoder(Object.keys(F.layers).sort()),K=new v.FeatureIndex(this.tileID,this.promoteId);K.bucketLayerIDs=[];var W,re,ze,Ke,Ce={},je={featureIndex:K,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:U},st=z.familiesBySource[this.source];for(var lt in st){var gt=F.layers[lt];if(gt){1===gt.version&&v.warnOnce('Vector tile source "'+this.source+'" layer "'+lt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Pe=me.encode(lt),et=[],Be=0;Be<gt.length;Be++){var Zt=gt.feature(Be),Kt=K.getId(Zt,lt);et.push({feature:Zt,id:Kt,index:Be,sourceLayerIndex:Pe})}for(var se=0,ar=st[lt];se<ar.length;se+=1){var Lt=ar[se],tn=Lt[0];tn.minzoom&&this.zoom<Math.floor(tn.minzoom)||tn.maxzoom&&this.zoom>=tn.maxzoom||"none"!==tn.visibility&&(pt(Lt,this.zoom,U),(Ce[tn.id]=tn.createBucket({index:K.bucketLayerIDs.length,layers:Lt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pe,sourceID:this.source})).populate(et,je,this.tileID.canonical),K.bucketLayerIDs.push(Lt.map(function(bn){return bn.id})))}}}var wr=v.mapObject(je.glyphDependencies,function(bn){return Object.keys(bn).map(Number)});Object.keys(wr).length?G.send("getGlyphs",{uid:this.uid,stacks:wr},function(bn,dn){W||(W=bn,re=dn,Rr.call(de))}):re={};var Pn=Object.keys(je.iconDependencies);Pn.length?G.send("getImages",{icons:Pn,source:this.source,tileID:this.tileID,type:"icons"},function(bn,dn){W||(W=bn,ze=dn,Rr.call(de))}):ze={};var dt=Object.keys(je.patternDependencies);function Rr(){if(W)return te(W);if(re&&ze&&Ke){var bn=new Ut(re),dn=new v.ImageAtlas(ze,Ke);for(var Rd in Ce){var vn=Ce[Rd];vn instanceof v.SymbolBucket?(pt(vn.layers,this.zoom,U),v.performSymbolLayout(vn,re,bn.positions,ze,dn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):vn.hasPattern&&(vn instanceof v.LineBucket||vn instanceof v.FillBucket||vn instanceof v.FillExtrusionBucket)&&(pt(vn.layers,this.zoom,U),vn.addFeatures(je,this.tileID.canonical,dn.patternPositions))}this.status="done",te(null,{buckets:v.values(Ce).filter(function(Wn){return!Wn.isEmpty()}),featureIndex:K,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:bn.image,imageAtlas:dn,glyphMap:this.returnDependencies?re:null,iconMap:this.returnDependencies?ze:null,glyphPositions:this.returnDependencies?bn.positions:null})}}dt.length?G.send("getImages",{icons:dt,source:this.source,tileID:this.tileID,type:"patterns"},function(bn,dn){W||(W=bn,Ke=dn,Rr.call(de))}):Ke={},Rr.call(this)};var Co=function(F,z,U,G){this.actor=F,this.layerIndex=z,this.availableImages=U,this.loadVectorData=G||Ol,this.loading={},this.loaded={}};Co.prototype.loadTile=function(F,z){var U=this,G=F.uid;this.loading||(this.loading={});var te=!!(F&&F.request&&F.request.collectResourceTiming)&&new v.RequestPerformance(F.request),de=this.loading[G]=new el(F);de.abort=this.loadVectorData(F,function(me,K){if(delete U.loading[G],me||!K)return de.status="done",U.loaded[G]=de,z(me);var W=K.rawData,re={};K.expires&&(re.expires=K.expires),K.cacheControl&&(re.cacheControl=K.cacheControl);var ze={};if(te){var Ke=te.finish();Ke&&(ze.resourceTiming=JSON.parse(JSON.stringify(Ke)))}de.vectorTile=K.vectorTile,de.parse(K.vectorTile,U.layerIndex,U.availableImages,U.actor,function(Ce,je){if(Ce||!je)return z(Ce);z(null,v.extend({rawTileData:W.slice(0)},je,re,ze))}),U.loaded=U.loaded||{},U.loaded[G]=de})},Co.prototype.reloadTile=function(F,z){var U=this,G=this.loaded,te=F.uid,de=this;if(G&&G[te]){var me=G[te];me.showCollisionBoxes=F.showCollisionBoxes;var K=function(W,re){var ze=me.reloadCallback;ze&&(delete me.reloadCallback,me.parse(me.vectorTile,de.layerIndex,U.availableImages,de.actor,ze)),z(W,re)};"parsing"===me.status?me.reloadCallback=K:"done"===me.status&&(me.vectorTile?me.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor,K):K())}},Co.prototype.abortTile=function(F,z){var U=this.loading,G=F.uid;U&&U[G]&&U[G].abort&&(U[G].abort(),delete U[G]),z()},Co.prototype.removeTile=function(F,z){var U=this.loaded,G=F.uid;U&&U[G]&&delete U[G],z()};var kc=v.window.ImageBitmap,Qi=function(){this.loaded={}};function wu(F,z){if(0!==F.length){Oi(F[0],z);for(var U=1;U<F.length;U++)Oi(F[U],!z)}}function Oi(F,z){for(var U=0,G=0,te=F.length,de=te-1;G<te;de=G++)U+=(F[G][0]-F[de][0])*(F[de][1]+F[G][1]);U>=0!=!!z&&F.reverse()}Qi.prototype.loadTile=function(F,z){var U=F.uid,G=F.encoding,te=F.rawImageData,de=kc&&te instanceof kc?this.getImageData(te):te,me=new v.DEMData(U,de,G);this.loaded=this.loaded||{},this.loaded[U]=me,z(null,me)},Qi.prototype.getImageData=function(F){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(F.width,F.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=F.width,this.offscreenCanvas.height=F.height,this.offscreenCanvasContext.drawImage(F,0,0,F.width,F.height);var z=this.offscreenCanvasContext.getImageData(-1,-1,F.width+2,F.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new v.RGBAImage({width:z.width,height:z.height},z.data)},Qi.prototype.removeTile=function(F){var z=this.loaded,U=F.uid;z&&z[U]&&delete z[U]};var qh=v.vectorTile.VectorTileFeature.prototype.toGeoJSON,tl=function(F){this._feature=F,this.extent=v.EXTENT,this.type=F.type,this.properties=F.tags,"id"in F&&!isNaN(F.id)&&(this.id=parseInt(F.id,10))};tl.prototype.loadGeometry=function(){if(1===this._feature.type){for(var F=[],z=0,U=this._feature.geometry;z<U.length;z+=1){var G=U[z];F.push([new v.Point$1(G[0],G[1])])}return F}for(var te=[],de=0,me=this._feature.geometry;de<me.length;de+=1){for(var K=[],W=0,re=me[de];W<re.length;W+=1){var ze=re[W];K.push(new v.Point$1(ze[0],ze[1]))}te.push(K)}return te},tl.prototype.toGeoJSON=function(F,z,U){return qh.call(this,F,z,U)};var Xo=function(F){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=v.EXTENT,this.length=F.length,this._features=F};Xo.prototype.feature=function(F){return new tl(this._features[F])};var xu=v.vectorTile.VectorTileFeature,va=Ac;function Ac(F,z){this.options=z||{},this.features=F,this.length=F.length}function Ni(F,z){this.id="number"==typeof F.id?F.id:void 0,this.type=F.type,this.rawGeometry=1===F.type?[F.geometry]:F.geometry,this.properties=F.tags,this.extent=z||4096}Ac.prototype.feature=function(F){return new Ni(this.features[F],this.options.extent)},Ni.prototype.loadGeometry=function(){var F=this.rawGeometry;this.geometry=[];for(var z=0;z<F.length;z++){for(var U=F[z],G=[],te=0;te<U.length;te++)G.push(new v.Point$1(U[te][0],U[te][1]));this.geometry.push(G)}return this.geometry},Ni.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var F=this.geometry,z=1/0,U=-1/0,G=1/0,te=-1/0,de=0;de<F.length;de++)for(var me=F[de],K=0;K<me.length;K++){var W=me[K];z=Math.min(z,W.x),U=Math.max(U,W.x),G=Math.min(G,W.y),te=Math.max(te,W.y)}return[z,G,U,te]},Ni.prototype.toGeoJSON=xu.prototype.toGeoJSON;var bs=Nl,Fs=va;function Nl(F){var z=new v.pbf;return function(U,G){for(var te in U.layers)G.writeMessage(3,ur,U.layers[te])}(F,z),z.finish()}function ur(F,z){var U;z.writeVarintField(15,F.version||1),z.writeStringField(1,F.name||""),z.writeVarintField(5,F.extent||4096);var G={keys:[],values:[],keycache:{},valuecache:{}};for(U=0;U<F.length;U++)G.feature=F.feature(U),z.writeMessage(2,Do,G);var te=G.keys;for(U=0;U<te.length;U++)z.writeStringField(3,te[U]);var de=G.values;for(U=0;U<de.length;U++)z.writeMessage(4,ba,de[U])}function Do(F,z){var U=F.feature;void 0!==U.id&&z.writeVarintField(1,U.id),z.writeMessage(2,Tp,F),z.writeVarintField(3,U.type),z.writeMessage(4,Eu,U)}function Tp(F,z){var U=F.feature,G=F.keys,te=F.values,de=F.keycache,me=F.valuecache;for(var K in U.properties){var W=de[K];void 0===W&&(G.push(K),de[K]=W=G.length-1),z.writeVarint(W);var re=U.properties[K],ze=typeof re;"string"!==ze&&"boolean"!==ze&&"number"!==ze&&(re=JSON.stringify(re));var Ke=ze+":"+re,Ce=me[Ke];void 0===Ce&&(te.push(re),me[Ke]=Ce=te.length-1),z.writeVarint(Ce)}}function ws(F,z){return(z<<3)+(7&F)}function Ll(F){return F<<1^F>>31}function Eu(F,z){for(var U=F.loadGeometry(),G=F.type,te=0,de=0,me=U.length,K=0;K<me;K++){var W=U[K],re=1;1===G&&(re=W.length),z.writeVarint(ws(1,re));for(var ze=3===G?W.length-1:W.length,Ke=0;Ke<ze;Ke++){1===Ke&&1!==G&&z.writeVarint(ws(2,ze-1));var Ce=W[Ke].x-te,je=W[Ke].y-de;z.writeVarint(Ll(Ce)),z.writeVarint(Ll(je)),te+=Ce,de+=je}3===G&&z.writeVarint(ws(7,1))}}function ba(F,z){var U=typeof F;"string"===U?z.writeStringField(1,F):"boolean"===U?z.writeBooleanField(7,F):"number"===U&&(F%1!=0?z.writeDoubleField(3,F):F<0?z.writeSVarintField(6,F):z.writeVarintField(5,F))}function xs(F,z,U,G){Ji(F,U,G),Ji(z,2*U,2*G),Ji(z,2*U+1,2*G+1)}function Ji(F,z,U){var G=F[z];F[z]=F[U],F[U]=G}function wa(F,z,U,G){var te=F-U,de=z-G;return te*te+de*de}bs.fromVectorTileJs=Nl,bs.fromGeojsonVt=function(F,z){z=z||{};var U={};for(var G in F)U[G]=new va(F[G].features,z),U[G].name=G,U[G].version=z.version,U[G].extent=z.extent;return Nl({layers:U})},bs.GeoJSONWrapper=Fs;var Rc=function(F){return F[0]},Fl=function(F){return F[1]},nl=function(F,z,U,G,te){void 0===z&&(z=Rc),void 0===U&&(U=Fl),void 0===G&&(G=64),void 0===te&&(te=Float64Array),this.nodeSize=G,this.points=F;for(var de=F.length<65536?Uint16Array:Uint32Array,me=this.ids=new de(F.length),K=this.coords=new te(2*F.length),W=0;W<F.length;W++)me[W]=W,K[2*W]=z(F[W]),K[2*W+1]=U(F[W]);!function re(ze,Ke,Ce,je,st,lt){if(!(st-je<=Ce)){var gt=je+st>>1;(function Pe(et,Be,Zt,Kt,se,ar){for(;se>Kt;){if(se-Kt>600){var Lt=se-Kt+1,tn=Zt-Kt+1,wr=Math.log(Lt),Pn=.5*Math.exp(2*wr/3),dt=.5*Math.sqrt(wr*Pn*(Lt-Pn)/Lt)*(tn-Lt/2<0?-1:1);Pe(et,Be,Zt,Math.max(Kt,Math.floor(Zt-tn*Pn/Lt+dt)),Math.min(se,Math.floor(Zt+(Lt-tn)*Pn/Lt+dt)),ar)}var Rr=Be[2*Zt+ar],bn=Kt,dn=se;for(xs(et,Be,Kt,Zt),Be[2*se+ar]>Rr&&xs(et,Be,Kt,se);bn<dn;){for(xs(et,Be,bn,dn),bn++,dn--;Be[2*bn+ar]<Rr;)bn++;for(;Be[2*dn+ar]>Rr;)dn--}Be[2*Kt+ar]===Rr?xs(et,Be,Kt,dn):xs(et,Be,++dn,se),dn<=Zt&&(Kt=dn+1),Zt<=dn&&(se=dn-1)}})(ze,Ke,gt,je,st,lt%2),re(ze,Ke,Ce,je,gt-1,lt+1),re(ze,Ke,Ce,gt+1,st,lt+1)}}(me,K,G,0,me.length-1,0)};nl.prototype.range=function(F,z,U,G){return function(te,de,me,K,W,re,ze){for(var Ke,Ce,je=[0,te.length-1,0],st=[];je.length;){var lt=je.pop(),gt=je.pop(),Pe=je.pop();if(gt-Pe<=ze)for(var et=Pe;et<=gt;et++)Ce=de[2*et+1],(Ke=de[2*et])>=me&&Ke<=W&&Ce>=K&&Ce<=re&&st.push(te[et]);else{var Be=Math.floor((Pe+gt)/2);Ce=de[2*Be+1],(Ke=de[2*Be])>=me&&Ke<=W&&Ce>=K&&Ce<=re&&st.push(te[Be]);var Zt=(lt+1)%2;(0===lt?me<=Ke:K<=Ce)&&(je.push(Pe),je.push(Be-1),je.push(Zt)),(0===lt?W>=Ke:re>=Ce)&&(je.push(Be+1),je.push(gt),je.push(Zt))}}return st}(this.ids,this.coords,F,z,U,G,this.nodeSize)},nl.prototype.within=function(F,z,U){return function(G,te,de,me,K,W){for(var re=[0,G.length-1,0],ze=[],Ke=K*K;re.length;){var Ce=re.pop(),je=re.pop(),st=re.pop();if(je-st<=W)for(var lt=st;lt<=je;lt++)wa(te[2*lt],te[2*lt+1],de,me)<=Ke&&ze.push(G[lt]);else{var gt=Math.floor((st+je)/2),Pe=te[2*gt],et=te[2*gt+1];wa(Pe,et,de,me)<=Ke&&ze.push(G[gt]);var Be=(Ce+1)%2;(0===Ce?de-K<=Pe:me-K<=et)&&(re.push(st),re.push(gt-1),re.push(Be)),(0===Ce?de+K>=Pe:me+K>=et)&&(re.push(gt+1),re.push(je),re.push(Be))}}return ze}(this.ids,this.coords,F,z,U,this.nodeSize)};var Sp={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(F){return F}},Li=function(F){this.options=Ea(Object.create(Sp),F),this.trees=new Array(this.options.maxZoom+1)};function rl(F,z,U,G,te){return{x:F,y:z,zoom:1/0,id:U,parentId:-1,numPoints:G,properties:te}}function Jn(F,z){var U=F.geometry.coordinates,G=U[1];return{x:Bs(U[0]),y:En(G),zoom:1/0,index:z,parentId:-1}}function xa(F){return{type:"Feature",id:F.id,properties:il(F),geometry:{type:"Point",coordinates:[(G=F.x,360*(G-.5)),(z=F.y,U=(180-360*z)*Math.PI/180,360*Math.atan(Math.exp(U))/Math.PI-90)]}};var z,U,G}function il(F){var z=F.numPoints,U=z>=1e4?Math.round(z/1e3)+"k":z>=1e3?Math.round(z/100)/10+"k":z;return Ea(Ea({},F.properties),{cluster:!0,cluster_id:F.id,point_count:z,point_count_abbreviated:U})}function Bs(F){return F/360+.5}function En(F){var z=Math.sin(F*Math.PI/180),U=.5-.25*Math.log((1+z)/(1-z))/Math.PI;return U<0?0:U>1?1:U}function Ea(F,z){for(var U in z)F[U]=z[U];return F}function To(F){return F.x}function Vs(F){return F.y}function Ip(F,z,U,G,te,de){var me=te-U,K=de-G;if(0!==me||0!==K){var W=((F-U)*me+(z-G)*K)/(me*me+K*K);W>1?(U=te,G=de):W>0&&(U+=me*W,G+=K*W)}return(me=F-U)*me+(K=z-G)*K}function Qs(F,z,U,G){var te={id:void 0===F?null:F,type:z,geometry:U,tags:G,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(de){var me=de.geometry,K=de.type;if("Point"===K||"MultiPoint"===K||"LineString"===K)dr(de,me);else if("Polygon"===K||"MultiLineString"===K)for(var W=0;W<me.length;W++)dr(de,me[W]);else if("MultiPolygon"===K)for(W=0;W<me.length;W++)for(var re=0;re<me[W].length;re++)dr(de,me[W][re])}(te),te}function dr(F,z){for(var U=0;U<z.length;U+=3)F.minX=Math.min(F.minX,z[U]),F.minY=Math.min(F.minY,z[U+1]),F.maxX=Math.max(F.maxX,z[U]),F.maxY=Math.max(F.maxY,z[U+1])}function Qo(F,z,U,G){if(z.geometry){var te=z.geometry.coordinates,de=z.geometry.type,me=Math.pow(U.tolerance/((1<<U.maxZoom)*U.extent),2),K=[],W=z.id;if(U.promoteId?W=z.properties[U.promoteId]:U.generateId&&(W=G||0),"Point"===de)ol(te,K);else if("MultiPoint"===de)for(var re=0;re<te.length;re++)ol(te[re],K);else if("LineString"===de)sl(te,K,me,!1);else if("MultiLineString"===de){if(U.lineMetrics){for(re=0;re<te.length;re++)sl(te[re],K=[],me,!1),F.push(Qs(W,"LineString",K,z.properties));return}Gn(te,K,me,!1)}else if("Polygon"===de)Gn(te,K,me,!0);else{if("MultiPolygon"!==de){if("GeometryCollection"===de){for(re=0;re<z.geometry.geometries.length;re++)Qo(F,{id:W,geometry:z.geometry.geometries[re],properties:z.properties},U,G);return}throw new Error("Input data is not a valid GeoJSON object.")}for(re=0;re<te.length;re++){var ze=[];Gn(te[re],ze,me,!0),K.push(ze)}}F.push(Qs(W,de,K,z.properties))}}function ol(F,z){z.push(Es(F[0])),z.push(Bl(F[1])),z.push(0)}function sl(F,z,U,G){for(var te,de,me=0,K=0;K<F.length;K++){var W=Es(F[K][0]),re=Bl(F[K][1]);z.push(W),z.push(re),z.push(0),K>0&&(me+=G?(te*re-W*de)/2:Math.sqrt(Math.pow(W-te,2)+Math.pow(re-de,2))),te=W,de=re}var ze=z.length-3;z[2]=1,function Ke(Ce,je,st,lt){for(var gt,Pe=lt,et=st-je>>1,Be=st-je,Zt=Ce[je],Kt=Ce[je+1],se=Ce[st],ar=Ce[st+1],Lt=je+3;Lt<st;Lt+=3){var tn=Ip(Ce[Lt],Ce[Lt+1],Zt,Kt,se,ar);if(tn>Pe)gt=Lt,Pe=tn;else if(tn===Pe){var wr=Math.abs(Lt-et);wr<Be&&(gt=Lt,Be=wr)}}Pe>lt&&(gt-je>3&&Ke(Ce,je,gt,lt),Ce[gt+2]=Pe,st-gt>3&&Ke(Ce,gt,st,lt))}(z,0,ze,U),z[ze+2]=1,z.size=Math.abs(me),z.start=0,z.end=z.size}function Gn(F,z,U,G){for(var te=0;te<F.length;te++){var de=[];sl(F[te],de,U,G),z.push(de)}}function Es(F){return F/360+.5}function Bl(F){var z=Math.sin(F*Math.PI/180),U=.5-.25*Math.log((1+z)/(1-z))/Math.PI;return U<0?0:U>1?1:U}function zs(F,z,U,G,te,de,me,K){if(G/=z,de>=(U/=z)&&me<G)return F;if(me<U||de>=G)return null;for(var W=[],re=0;re<F.length;re++){var ze=F[re],Ke=ze.geometry,Ce=ze.type,je=0===te?ze.minX:ze.minY,st=0===te?ze.maxX:ze.maxY;if(je>=U&&st<G)W.push(ze);else if(!(st<U||je>=G)){var lt=[];if("Point"===Ce||"MultiPoint"===Ce)Ca(Ke,lt,U,G,te);else if("LineString"===Ce)Mc(Ke,lt,U,G,te,!1,K.lineMetrics);else if("MultiLineString"===Ce)Da(Ke,lt,U,G,te,!1);else if("Polygon"===Ce)Da(Ke,lt,U,G,te,!0);else if("MultiPolygon"===Ce)for(var gt=0;gt<Ke.length;gt++){var Pe=[];Da(Ke[gt],Pe,U,G,te,!0),Pe.length&&lt.push(Pe)}if(lt.length){if(K.lineMetrics&&"LineString"===Ce){for(gt=0;gt<lt.length;gt++)W.push(Qs(ze.id,Ce,lt[gt],ze.tags));continue}"LineString"!==Ce&&"MultiLineString"!==Ce||(1===lt.length?(Ce="LineString",lt=lt[0]):Ce="MultiLineString"),"Point"!==Ce&&"MultiPoint"!==Ce||(Ce=3===lt.length?"Point":"MultiPoint"),W.push(Qs(ze.id,Ce,lt,ze.tags))}}}return W.length?W:null}function Ca(F,z,U,G,te){for(var de=0;de<F.length;de+=3){var me=F[de+te];me>=U&&me<=G&&(z.push(F[de]),z.push(F[de+1]),z.push(F[de+2]))}}function Mc(F,z,U,G,te,de,me){for(var K,W,re=Cu(F),ze=0===te?Gh:Tu,Ke=F.start,Ce=0;Ce<F.length-3;Ce+=3){var je=F[Ce],st=F[Ce+1],lt=F[Ce+2],gt=F[Ce+3],Pe=F[Ce+4],et=0===te?je:st,Be=0===te?gt:Pe,Zt=!1;me&&(K=Math.sqrt(Math.pow(je-gt,2)+Math.pow(st-Pe,2))),et<U?Be>U&&(W=ze(re,je,st,gt,Pe,U),me&&(re.start=Ke+K*W)):et>G?Be<G&&(W=ze(re,je,st,gt,Pe,G),me&&(re.start=Ke+K*W)):Du(re,je,st,lt),Be<U&&et>=U&&(W=ze(re,je,st,gt,Pe,U),Zt=!0),Be>G&&et<=G&&(W=ze(re,je,st,gt,Pe,G),Zt=!0),!de&&Zt&&(me&&(re.end=Ke+K*W),z.push(re),re=Cu(F)),me&&(Ke+=K)}var Kt=F.length-3;je=F[Kt],st=F[Kt+1],lt=F[Kt+2],(et=0===te?je:st)>=U&&et<=G&&Du(re,je,st,lt),Kt=re.length-3,de&&Kt>=3&&(re[Kt]!==re[0]||re[Kt+1]!==re[1])&&Du(re,re[0],re[1],re[2]),re.length&&z.push(re)}function Cu(F){var z=[];return z.size=F.size,z.start=F.start,z.end=F.end,z}function Da(F,z,U,G,te,de){for(var me=0;me<F.length;me++)Mc(F[me],z,U,G,te,de,!1)}function Du(F,z,U,G){F.push(z),F.push(U),F.push(G)}function Gh(F,z,U,G,te,de){var me=(de-z)/(G-z);return F.push(de),F.push(U+(te-U)*me),F.push(1),me}function Tu(F,z,U,G,te,de){var me=(de-U)/(te-U);return F.push(z+(G-z)*me),F.push(de),F.push(1),me}function Pc(F,z){for(var U=[],G=0;G<F.length;G++){var te,de=F[G],me=de.type;if("Point"===me||"MultiPoint"===me||"LineString"===me)te=Cs(de.geometry,z);else if("MultiLineString"===me||"Polygon"===me){te=[];for(var K=0;K<de.geometry.length;K++)te.push(Cs(de.geometry[K],z))}else if("MultiPolygon"===me)for(te=[],K=0;K<de.geometry.length;K++){for(var W=[],re=0;re<de.geometry[K].length;re++)W.push(Cs(de.geometry[K][re],z));te.push(W)}U.push(Qs(de.id,me,te,de.tags))}return U}function Cs(F,z){var U=[];U.size=F.size,void 0!==F.start&&(U.start=F.start,U.end=F.end);for(var G=0;G<F.length;G+=3)U.push(F[G]+z,F[G+1],F[G+2]);return U}function Vl(F,z){if(F.transformed)return F;var U,G,te,de=1<<F.z,me=F.x,K=F.y;for(U=0;U<F.features.length;U++){var W=F.features[U],re=W.geometry,ze=W.type;if(W.geometry=[],1===ze)for(G=0;G<re.length;G+=2)W.geometry.push(kd(re[G],re[G+1],z,de,me,K));else for(G=0;G<re.length;G++){var Ke=[];for(te=0;te<re[G].length;te+=2)Ke.push(kd(re[G][te],re[G][te+1],z,de,me,K));W.geometry.push(Ke)}}return F.transformed=!0,F}function kd(F,z,U,G,te,de){return[Math.round(U*(F*G-te)),Math.round(U*(z*G-de))]}function Su(F,z,U,G,te){for(var de=z===te.maxZoom?0:te.tolerance/((1<<z)*te.extent),me={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:U,y:G,z,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},K=0;K<F.length;K++){me.numFeatures++,Ad(me,F[K],de,te);var W=F[K].minX,re=F[K].minY,ze=F[K].maxX,Ke=F[K].maxY;W<me.minX&&(me.minX=W),re<me.minY&&(me.minY=re),ze>me.maxX&&(me.maxX=ze),Ke>me.maxY&&(me.maxY=Ke)}return me}function Ad(F,z,U,G){var te=z.geometry,de=z.type,me=[];if("Point"===de||"MultiPoint"===de)for(var K=0;K<te.length;K+=3)me.push(te[K]),me.push(te[K+1]),F.numPoints++,F.numSimplified++;else if("LineString"===de)al(me,te,F,U,!1,!1);else if("MultiLineString"===de||"Polygon"===de)for(K=0;K<te.length;K++)al(me,te[K],F,U,"Polygon"===de,0===K);else if("MultiPolygon"===de)for(var W=0;W<te.length;W++){var re=te[W];for(K=0;K<re.length;K++)al(me,re[K],F,U,!0,0===K)}if(me.length){var ze=z.tags||null;if("LineString"===de&&G.lineMetrics){for(var Ke in ze={},z.tags)ze[Ke]=z.tags[Ke];ze.mapbox_clip_start=te.start/te.size,ze.mapbox_clip_end=te.end/te.size}var Ce={geometry:me,type:"Polygon"===de||"MultiPolygon"===de?3:"LineString"===de||"MultiLineString"===de?2:1,tags:ze};null!==z.id&&(Ce.id=z.id),F.features.push(Ce)}}function al(F,z,U,G,te,de){var me=G*G;if(G>0&&z.size<(te?me:G))U.numPoints+=z.length/3;else{for(var K=[],W=0;W<z.length;W+=3)(0===G||z[W+2]>me)&&(U.numSimplified++,K.push(z[W]),K.push(z[W+1])),U.numPoints++;te&&function(re,ze){for(var Ke=0,Ce=0,je=re.length,st=je-2;Ce<je;st=Ce,Ce+=2)Ke+=(re[Ce]-re[st])*(re[Ce+1]+re[st+1]);if(Ke>0===ze)for(Ce=0,je=re.length;Ce<je/2;Ce+=2){var lt=re[Ce],gt=re[Ce+1];re[Ce]=re[je-2-Ce],re[Ce+1]=re[je-1-Ce],re[je-2-Ce]=lt,re[je-1-Ce]=gt}}(K,de),F.push(K)}}function zl(F,z){var U=(z=this.options=function(te,de){for(var me in de)te[me]=de[me];return te}(Object.create(this.options),z)).debug;if(U&&console.time("preprocess data"),z.maxZoom<0||z.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(z.promoteId&&z.generateId)throw new Error("promoteId and generateId cannot be used together.");var te,de,me,K,W,re,G=function(te,de){var me=[];if("FeatureCollection"===te.type)for(var K=0;K<te.features.length;K++)Qo(me,te.features[K],de,K);else Qo(me,"Feature"===te.type?te:{geometry:te},de);return me}(F,z);this.tiles={},this.tileCoords=[],U&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",z.indexMaxZoom,z.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(te=G,de=z,me=de.buffer/de.extent,K=te,W=zs(te,1,-1-me,me,0,-1,2,de),re=zs(te,1,1-me,2+me,0,-1,2,de),(W||re)&&(K=zs(te,1,-me,1+me,0,-1,2,de)||[],W&&(K=Pc(W,1).concat(K)),re&&(K=K.concat(Pc(re,-1)))),G=K).length&&this.splitTile(G,0,0,0),U&&(G.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ta(F,z,U){return 32*((1<<F)*U+z)+F}function Oc(F,z){var U=F.tileID.canonical;if(!this._geoJSONIndex)return z(null,null);var G=this._geoJSONIndex.getTile(U.z,U.x,U.y);if(!G)return z(null,null);var te=new Xo(G.features),de=bs(te);0===de.byteOffset&&de.byteLength===de.buffer.byteLength||(de=new Uint8Array(de)),z(null,{vectorTile:te,rawData:de.buffer})}Li.prototype.load=function(F){var z=this.options,U=z.log,G=z.minZoom,te=z.maxZoom,de=z.nodeSize;U&&console.time("total time");var me="prepare "+F.length+" points";U&&console.time(me),this.points=F;for(var K=[],W=0;W<F.length;W++)F[W].geometry&&K.push(Jn(F[W],W));this.trees[te+1]=new nl(K,To,Vs,de,Float32Array),U&&console.timeEnd(me);for(var re=te;re>=G;re--){var ze=+Date.now();K=this._cluster(K,re),this.trees[re]=new nl(K,To,Vs,de,Float32Array),U&&console.log("z%d: %d clusters in %dms",re,K.length,+Date.now()-ze)}return U&&console.timeEnd("total time"),this},Li.prototype.getClusters=function(F,z){var U=((F[0]+180)%360+360)%360-180,G=Math.max(-90,Math.min(90,F[1])),te=180===F[2]?180:((F[2]+180)%360+360)%360-180,de=Math.max(-90,Math.min(90,F[3]));if(F[2]-F[0]>=360)U=-180,te=180;else if(U>te){var me=this.getClusters([U,G,180,de],z),K=this.getClusters([-180,G,te,de],z);return me.concat(K)}for(var W=this.trees[this._limitZoom(z)],re=[],ze=0,Ke=W.range(Bs(U),En(de),Bs(te),En(G));ze<Ke.length;ze+=1){var Ce=W.points[Ke[ze]];re.push(Ce.numPoints?xa(Ce):this.points[Ce.index])}return re},Li.prototype.getChildren=function(F){var z=this._getOriginId(F),U=this._getOriginZoom(F),G="No cluster with the specified id.",te=this.trees[U];if(!te)throw new Error(G);var de=te.points[z];if(!de)throw new Error(G);for(var me=this.options.radius/(this.options.extent*Math.pow(2,U-1)),K=[],W=0,re=te.within(de.x,de.y,me);W<re.length;W+=1){var ze=te.points[re[W]];ze.parentId===F&&K.push(ze.numPoints?xa(ze):this.points[ze.index])}if(0===K.length)throw new Error(G);return K},Li.prototype.getLeaves=function(F,z,U){var G=[];return this._appendLeaves(G,F,z=z||10,U=U||0,0),G},Li.prototype.getTile=function(F,z,U){var G=this.trees[this._limitZoom(F)],te=Math.pow(2,F),de=this.options,me=de.radius/de.extent,K=(U-me)/te,W=(U+1+me)/te,re={features:[]};return this._addTileFeatures(G.range((z-me)/te,K,(z+1+me)/te,W),G.points,z,U,te,re),0===z&&this._addTileFeatures(G.range(1-me/te,K,1,W),G.points,te,U,te,re),z===te-1&&this._addTileFeatures(G.range(0,K,me/te,W),G.points,-1,U,te,re),re.features.length?re:null},Li.prototype.getClusterExpansionZoom=function(F){for(var z=this._getOriginZoom(F)-1;z<=this.options.maxZoom;){var U=this.getChildren(F);if(z++,1!==U.length)break;F=U[0].properties.cluster_id}return z},Li.prototype._appendLeaves=function(F,z,U,G,te){for(var de=0,me=this.getChildren(z);de<me.length;de+=1){var K=me[de],W=K.properties;if(W&&W.cluster?te+W.point_count<=G?te+=W.point_count:te=this._appendLeaves(F,W.cluster_id,U,G,te):te<G?te++:F.push(K),F.length===U)break}return te},Li.prototype._addTileFeatures=function(F,z,U,G,te,de){for(var me=0,K=F;me<K.length;me+=1){var W=z[K[me]],re=W.numPoints,ze={type:1,geometry:[[Math.round(this.options.extent*(W.x*te-U)),Math.round(this.options.extent*(W.y*te-G))]],tags:re?il(W):this.points[W.index].properties},Ke=void 0;re?Ke=W.id:this.options.generateId?Ke=W.index:this.points[W.index].id&&(Ke=this.points[W.index].id),void 0!==Ke&&(ze.id=Ke),de.features.push(ze)}},Li.prototype._limitZoom=function(F){return Math.max(this.options.minZoom,Math.min(+F,this.options.maxZoom+1))},Li.prototype._cluster=function(F,z){for(var U=[],G=this.options,te=G.reduce,de=G.minPoints,me=G.radius/(G.extent*Math.pow(2,z)),K=0;K<F.length;K++){var W=F[K];if(!(W.zoom<=z)){W.zoom=z;for(var re=this.trees[z+1],ze=re.within(W.x,W.y,me),Ke=W.numPoints||1,Ce=Ke,je=0,st=ze;je<st.length;je+=1){var lt=re.points[st[je]];lt.zoom>z&&(Ce+=lt.numPoints||1)}if(Ce>=de){for(var gt=W.x*Ke,Pe=W.y*Ke,et=te&&Ke>1?this._map(W,!0):null,Be=(K<<5)+(z+1)+this.points.length,Zt=0,Kt=ze;Zt<Kt.length;Zt+=1){var se=re.points[Kt[Zt]];if(!(se.zoom<=z)){se.zoom=z;var ar=se.numPoints||1;gt+=se.x*ar,Pe+=se.y*ar,se.parentId=Be,te&&(et||(et=this._map(W,!0)),te(et,this._map(se)))}}W.parentId=Be,U.push(rl(gt/Ce,Pe/Ce,Be,Ce,et))}else if(U.push(W),Ce>1)for(var Lt=0,tn=ze;Lt<tn.length;Lt+=1){var wr=re.points[tn[Lt]];wr.zoom<=z||(wr.zoom=z,U.push(wr))}}}return U},Li.prototype._getOriginId=function(F){return F-this.points.length>>5},Li.prototype._getOriginZoom=function(F){return(F-this.points.length)%32},Li.prototype._map=function(F,z){if(F.numPoints)return z?Ea({},F.properties):F.properties;var U=this.points[F.index].properties,G=this.options.map(U);return z&&G===U?Ea({},G):G},zl.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},zl.prototype.splitTile=function(F,z,U,G,te,de,me){for(var K=[F,z,U,G],W=this.options,re=W.debug;K.length;){G=K.pop(),U=K.pop(),z=K.pop(),F=K.pop();var ze=1<<z,Ke=Ta(z,U,G),Ce=this.tiles[Ke];if(!Ce&&(re>1&&console.time("creation"),Ce=this.tiles[Ke]=Su(F,z,U,G,W),this.tileCoords.push({z,x:U,y:G}),re)){re>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",z,U,G,Ce.numFeatures,Ce.numPoints,Ce.numSimplified),console.timeEnd("creation"));var je="z"+z;this.stats[je]=(this.stats[je]||0)+1,this.total++}if(Ce.source=F,te){if(z===W.maxZoom||z===te)continue;var st=1<<te-z;if(U!==Math.floor(de/st)||G!==Math.floor(me/st))continue}else if(z===W.indexMaxZoom||Ce.numPoints<=W.indexMaxPoints)continue;if(Ce.source=null,0!==F.length){re>1&&console.time("clipping");var lt,gt,Pe,et,Be,Zt,Kt=.5*W.buffer/W.extent,se=.5-Kt,ar=.5+Kt,Lt=1+Kt;lt=gt=Pe=et=null,Be=zs(F,ze,U-Kt,U+ar,0,Ce.minX,Ce.maxX,W),Zt=zs(F,ze,U+se,U+Lt,0,Ce.minX,Ce.maxX,W),F=null,Be&&(lt=zs(Be,ze,G-Kt,G+ar,1,Ce.minY,Ce.maxY,W),gt=zs(Be,ze,G+se,G+Lt,1,Ce.minY,Ce.maxY,W),Be=null),Zt&&(Pe=zs(Zt,ze,G-Kt,G+ar,1,Ce.minY,Ce.maxY,W),et=zs(Zt,ze,G+se,G+Lt,1,Ce.minY,Ce.maxY,W),Zt=null),re>1&&console.timeEnd("clipping"),K.push(lt||[],z+1,2*U,2*G),K.push(gt||[],z+1,2*U,2*G+1),K.push(Pe||[],z+1,2*U+1,2*G),K.push(et||[],z+1,2*U+1,2*G+1)}}},zl.prototype.getTile=function(F,z,U){var G=this.options,te=G.extent,de=G.debug;if(F<0||F>24)return null;var me=1<<F,K=Ta(F,z=(z%me+me)%me,U);if(this.tiles[K])return Vl(this.tiles[K],te);de>1&&console.log("drilling down to z%d-%d-%d",F,z,U);for(var W,re=F,ze=z,Ke=U;!W&&re>0;)re--,ze=Math.floor(ze/2),Ke=Math.floor(Ke/2),W=this.tiles[Ta(re,ze,Ke)];return W&&W.source?(de>1&&console.log("found parent tile z%d-%d-%d",re,ze,Ke),de>1&&console.time("drilling down"),this.splitTile(W.source,re,ze,Ke,F,z,U),de>1&&console.timeEnd("drilling down"),this.tiles[K]?Vl(this.tiles[K],te):null):null};var Ul=function(F){function z(U,G,te,de){F.call(this,U,G,te,Oc),de&&(this.loadGeoJSON=de)}return F&&(z.__proto__=F),(z.prototype=Object.create(F&&F.prototype)).constructor=z,z.prototype.loadData=function(U,G){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=G,this._pendingLoadDataParams=U,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},z.prototype._loadData=function(){var U=this;if(this._pendingCallback&&this._pendingLoadDataParams){var G=this._pendingCallback,te=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var de=!!(te&&te.request&&te.request.collectResourceTiming)&&new v.RequestPerformance(te.request);this.loadGeoJSON(te,function(me,K){if(me||!K)return G(me);if("object"!=typeof K)return G(new Error("Input data given to '"+te.source+"' is not a valid GeoJSON object."));!function Ce(je,st){var lt,gt=je&&je.type;if("FeatureCollection"===gt)for(lt=0;lt<je.features.length;lt++)Ce(je.features[lt],st);else if("GeometryCollection"===gt)for(lt=0;lt<je.geometries.length;lt++)Ce(je.geometries[lt],st);else if("Feature"===gt)Ce(je.geometry,st);else if("Polygon"===gt)wu(je.coordinates,st);else if("MultiPolygon"===gt)for(lt=0;lt<je.coordinates.length;lt++)wu(je.coordinates[lt],st);return je}(K,!0);try{if(te.filter){var W=v.createExpression(te.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===W.result)throw new Error(W.value.map(function(Ce){return Ce.key+": "+Ce.message}).join(", "));var re=K.features.filter(function(Ce){return W.value.evaluate({zoom:0},Ce)});K={type:"FeatureCollection",features:re}}U._geoJSONIndex=te.cluster?new Li(function(Ce){var je=Ce.superclusterOptions,st=Ce.clusterProperties;if(!st||!je)return je;for(var lt={},gt={},Pe={accumulated:null,zoom:0},et={properties:null},Be=Object.keys(st),Zt=0,Kt=Be;Zt<Kt.length;Zt+=1){var se=Kt[Zt],ar=st[se],Lt=ar[0],tn=v.createExpression(ar[1]),wr=v.createExpression("string"==typeof Lt?[Lt,["accumulated"],["get",se]]:Lt);lt[se]=tn.value,gt[se]=wr.value}return je.map=function(Pn){et.properties=Pn;for(var dt={},Rr=0,bn=Be;Rr<bn.length;Rr+=1){var dn=bn[Rr];dt[dn]=lt[dn].evaluate(Pe,et)}return dt},je.reduce=function(Pn,dt){et.properties=dt;for(var Rr=0,bn=Be;Rr<bn.length;Rr+=1){var dn=bn[Rr];Pe.accumulated=Pn[dn],Pn[dn]=gt[dn].evaluate(Pe,et)}},je}(te)).load(K.features):new zl(Ce=K,te.geojsonVtOptions)}catch(Ce){return G(Ce)}var Ce;U.loaded={};var ze={};if(de){var Ke=de.finish();Ke&&(ze.resourceTiming={},ze.resourceTiming[te.source]=JSON.parse(JSON.stringify(Ke)))}G(null,ze)})}},z.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},z.prototype.reloadTile=function(U,G){var te=this.loaded;return te&&te[U.uid]?F.prototype.reloadTile.call(this,U,G):this.loadTile(U,G)},z.prototype.loadGeoJSON=function(U,G){if(U.request)v.getJSON(U.request,G);else{if("string"!=typeof U.data)return G(new Error("Input data given to '"+U.source+"' is not a valid GeoJSON object."));try{return G(null,JSON.parse(U.data))}catch{return G(new Error("Input data given to '"+U.source+"' is not a valid GeoJSON object."))}}},z.prototype.removeSource=function(U,G){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),G()},z.prototype.getClusterExpansionZoom=function(U,G){try{G(null,this._geoJSONIndex.getClusterExpansionZoom(U.clusterId))}catch(te){G(te)}},z.prototype.getClusterChildren=function(U,G){try{G(null,this._geoJSONIndex.getChildren(U.clusterId))}catch(te){G(te)}},z.prototype.getClusterLeaves=function(U,G){try{G(null,this._geoJSONIndex.getLeaves(U.clusterId,U.limit,U.offset))}catch(te){G(te)}},z}(Co),er=function(F){var z=this;this.self=F,this.actor=new v.Actor(F,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Co,geojson:Ul},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(U,G){if(z.workerSourceTypes[U])throw new Error('Worker source with name "'+U+'" already registered.');z.workerSourceTypes[U]=G},this.self.registerRTLTextPlugin=function(U){if(v.plugin.isParsed())throw new Error("RTL text plugin already registered.");v.plugin.applyArabicShaping=U.applyArabicShaping,v.plugin.processBidirectionalText=U.processBidirectionalText,v.plugin.processStyledBidirectionalText=U.processStyledBidirectionalText}};return er.prototype.setReferrer=function(F,z){this.referrer=z},er.prototype.setImages=function(F,z,U){for(var G in this.availableImages[F]=z,this.workerSources[F]){var te=this.workerSources[F][G];for(var de in te)te[de].availableImages=z}U()},er.prototype.setLayers=function(F,z,U){this.getLayerIndex(F).replace(z),U()},er.prototype.updateLayers=function(F,z,U){this.getLayerIndex(F).update(z.layers,z.removedIds),U()},er.prototype.loadTile=function(F,z,U){this.getWorkerSource(F,z.type,z.source).loadTile(z,U)},er.prototype.loadDEMTile=function(F,z,U){this.getDEMWorkerSource(F,z.source).loadTile(z,U)},er.prototype.reloadTile=function(F,z,U){this.getWorkerSource(F,z.type,z.source).reloadTile(z,U)},er.prototype.abortTile=function(F,z,U){this.getWorkerSource(F,z.type,z.source).abortTile(z,U)},er.prototype.removeTile=function(F,z,U){this.getWorkerSource(F,z.type,z.source).removeTile(z,U)},er.prototype.removeDEMTile=function(F,z){this.getDEMWorkerSource(F,z.source).removeTile(z)},er.prototype.removeSource=function(F,z,U){if(this.workerSources[F]&&this.workerSources[F][z.type]&&this.workerSources[F][z.type][z.source]){var G=this.workerSources[F][z.type][z.source];delete this.workerSources[F][z.type][z.source],void 0!==G.removeSource?G.removeSource(z,U):U()}},er.prototype.loadWorkerSource=function(F,z,U){try{this.self.importScripts(z.url),U()}catch(G){U(G.toString())}},er.prototype.syncRTLPluginState=function(F,z,U){try{v.plugin.setState(z);var G=v.plugin.getPluginURL();if(v.plugin.isLoaded()&&!v.plugin.isParsed()&&null!=G){this.self.importScripts(G);var te=v.plugin.isParsed();U(te?void 0:new Error("RTL Text Plugin failed to import scripts from "+G),te)}}catch(de){U(de.toString())}},er.prototype.getAvailableImages=function(F){var z=this.availableImages[F];return z||(z=[]),z},er.prototype.getLayerIndex=function(F){var z=this.layerIndexes[F];return z||(z=this.layerIndexes[F]=new vt),z},er.prototype.getWorkerSource=function(F,z,U){var G=this;return this.workerSources[F]||(this.workerSources[F]={}),this.workerSources[F][z]||(this.workerSources[F][z]={}),this.workerSources[F][z][U]||(this.workerSources[F][z][U]=new this.workerSourceTypes[z]({send:function(te,de,me){G.actor.send(te,de,me,F)}},this.getLayerIndex(F),this.getAvailableImages(F))),this.workerSources[F][z][U]},er.prototype.getDEMWorkerSource=function(F,z){return this.demWorkerSources[F]||(this.demWorkerSources[F]={}),this.demWorkerSources[F][z]||(this.demWorkerSources[F][z]=new Qi),this.demWorkerSources[F][z]},er.prototype.enforceCacheSizeLimit=function(F,z){v.enforceCacheSizeLimit(z)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new er(self)),er}),Id(0,function(v){var jo=v.createCommonjsModule(function(d){function f(w){return!h(w)}function h(w){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var T,I,M=new Blob([""],{type:"text/javascript"}),L=URL.createObjectURL(M);try{I=new Worker(L),T=!0}catch{T=!1}return I&&I.terminate(),URL.revokeObjectURL(L),T}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var T=document.createElement("canvas");T.width=T.height=1;var I=T.getContext("2d");if(!I)return!1;var M=I.getImageData(0,0,1,1);return M&&M.width===T.width}()?(void 0===g[C=w&&w.failIfMajorPerformanceCaveat]&&(g[C]=function(T){var L,$,q,I=(L=T,$=document.createElement("canvas"),(q=Object.create(f.webGLContextAttributes)).failIfMajorPerformanceCaveat=L,$.probablySupportsContext?$.probablySupportsContext("webgl",q)||$.probablySupportsContext("experimental-webgl",q):$.supportsContext?$.supportsContext("webgl",q)||$.supportsContext("experimental-webgl",q):$.getContext("webgl",q)||$.getContext("experimental-webgl",q));if(!I)return!1;var M=I.createShader(I.VERTEX_SHADER);return!(!M||I.isContextLost())&&(I.shaderSource(M,"void main() {}"),I.compileShader(M),!0===I.getShaderParameter(M,I.COMPILE_STATUS))}(C)),g[C]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var C}d.exports?d.exports=f:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=f,window.mapboxgl.notSupportedReason=h);var g={};f.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),Ve={create:function(d,f,h){var g=v.window.document.createElement(d);return void 0!==f&&(g.className=f),h&&h.appendChild(g),g},createNS:function(d,f){return v.window.document.createElementNS(d,f)}},vt=v.window.document&&v.window.document.documentElement.style;function Ut(d){if(!vt)return d[0];for(var f=0;f<d.length;f++)if(d[f]in vt)return d[f];return d[0]}var el,pt=Ut(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);Ve.disableDrag=function(){vt&&pt&&(el=vt[pt],vt[pt]="none")},Ve.enableDrag=function(){vt&&pt&&(vt[pt]=el)};var Ol=Ut(["transform","WebkitTransform"]);Ve.setTransform=function(d,f){d.style[Ol]=f};var Co=!1;try{var kc=Object.defineProperty({},"passive",{get:function(){Co=!0}});v.window.addEventListener("test",kc,kc),v.window.removeEventListener("test",kc,kc)}catch{Co=!1}Ve.addEventListener=function(d,f,h,g){void 0===g&&(g={}),d.addEventListener(f,h,"passive"in g&&Co?g:g.capture)},Ve.removeEventListener=function(d,f,h,g){void 0===g&&(g={}),d.removeEventListener(f,h,"passive"in g&&Co?g:g.capture)};var Qi=function(d){d.preventDefault(),d.stopPropagation(),v.window.removeEventListener("click",Qi,!0)};function wu(d){var f=d.userImage;return!!(f&&f.render&&f.render())&&(d.data.replace(new Uint8Array(f.data.buffer)),!0)}Ve.suppressClick=function(){v.window.addEventListener("click",Qi,!0),v.window.setTimeout(function(){v.window.removeEventListener("click",Qi,!0)},0)},Ve.mousePos=function(d,f){var h=d.getBoundingClientRect();return new v.Point(f.clientX-h.left-d.clientLeft,f.clientY-h.top-d.clientTop)},Ve.touchPos=function(d,f){for(var h=d.getBoundingClientRect(),g=[],w=0;w<f.length;w++)g.push(new v.Point(f[w].clientX-h.left-d.clientLeft,f[w].clientY-h.top-d.clientTop));return g},Ve.mouseButton=function(d){return void 0!==v.window.InstallTrigger&&2===d.button&&d.ctrlKey&&v.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:d.button},Ve.remove=function(d){d.parentNode&&d.parentNode.removeChild(d)};var Oi=function(d){function f(){d.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new v.RGBAImage({width:1,height:1}),this.dirty=!0}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.isLoaded=function(){return this.loaded},f.prototype.setLoaded=function(h){if(this.loaded!==h&&(this.loaded=h,h)){for(var g=0,w=this.requestors;g<w.length;g+=1){var C=w[g];this._notify(C.ids,C.callback)}this.requestors=[]}},f.prototype.getImage=function(h){return this.images[h]},f.prototype.addImage=function(h,g){this._validate(h,g)&&(this.images[h]=g)},f.prototype._validate=function(h,g){var w=!0;return this._validateStretch(g.stretchX,g.data&&g.data.width)||(this.fire(new v.ErrorEvent(new Error('Image "'+h+'" has invalid "stretchX" value'))),w=!1),this._validateStretch(g.stretchY,g.data&&g.data.height)||(this.fire(new v.ErrorEvent(new Error('Image "'+h+'" has invalid "stretchY" value'))),w=!1),this._validateContent(g.content,g)||(this.fire(new v.ErrorEvent(new Error('Image "'+h+'" has invalid "content" value'))),w=!1),w},f.prototype._validateStretch=function(h,g){if(!h)return!0;for(var w=0,C=0,T=h;C<T.length;C+=1){var I=T[C];if(I[0]<w||I[1]<I[0]||g<I[1])return!1;w=I[1]}return!0},f.prototype._validateContent=function(h,g){return!(h&&(4!==h.length||h[0]<0||g.data.width<h[0]||h[1]<0||g.data.height<h[1]||h[2]<0||g.data.width<h[2]||h[3]<0||g.data.height<h[3]||h[2]<h[0]||h[3]<h[1]))},f.prototype.updateImage=function(h,g){g.version=this.images[h].version+1,this.images[h]=g,this.updatedImages[h]=!0},f.prototype.removeImage=function(h){var g=this.images[h];delete this.images[h],delete this.patterns[h],g.userImage&&g.userImage.onRemove&&g.userImage.onRemove()},f.prototype.listImages=function(){return Object.keys(this.images)},f.prototype.getImages=function(h,g){var w=!0;if(!this.isLoaded())for(var C=0,T=h;C<T.length;C+=1)this.images[T[C]]||(w=!1);this.isLoaded()||w?this._notify(h,g):this.requestors.push({ids:h,callback:g})},f.prototype._notify=function(h,g){for(var w={},C=0,T=h;C<T.length;C+=1){var I=T[C];this.images[I]||this.fire(new v.Event("styleimagemissing",{id:I}));var M=this.images[I];M?w[I]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:!(!M.userImage||!M.userImage.render)}:v.warnOnce('Image "'+I+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}g(null,w)},f.prototype.getPixelSize=function(){var h=this.atlasImage;return{width:h.width,height:h.height}},f.prototype.getPattern=function(h){var g=this.patterns[h],w=this.getImage(h);if(!w)return null;if(g&&g.position.version===w.version)return g.position;if(g)g.position.version=w.version;else{var C={w:w.data.width+2,h:w.data.height+2,x:0,y:0},T=new v.ImagePosition(C,w);this.patterns[h]={bin:C,position:T}}return this._updatePatternAtlas(),this.patterns[h].position},f.prototype.bind=function(h){var g=h.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new v.Texture(h,this.atlasImage,g.RGBA),this.atlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE)},f.prototype._updatePatternAtlas=function(){var h=[];for(var g in this.patterns)h.push(this.patterns[g].bin);var w=v.potpack(h),C=w.w,T=w.h,I=this.atlasImage;for(var M in I.resize({width:C||1,height:T||1}),this.patterns){var L=this.patterns[M].bin,$=L.x+1,q=L.y+1,j=this.images[M].data,ne=j.width,J=j.height;v.RGBAImage.copy(j,I,{x:0,y:0},{x:$,y:q},{width:ne,height:J}),v.RGBAImage.copy(j,I,{x:0,y:J-1},{x:$,y:q-1},{width:ne,height:1}),v.RGBAImage.copy(j,I,{x:0,y:0},{x:$,y:q+J},{width:ne,height:1}),v.RGBAImage.copy(j,I,{x:ne-1,y:0},{x:$-1,y:q},{width:1,height:J}),v.RGBAImage.copy(j,I,{x:0,y:0},{x:$+ne,y:q},{width:1,height:J})}this.dirty=!0},f.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},f.prototype.dispatchRenderCallbacks=function(h){for(var g=0,w=h;g<w.length;g+=1){var C=w[g];if(!this.callbackDispatchedThisFrame[C]){this.callbackDispatchedThisFrame[C]=!0;var T=this.images[C];wu(T)&&this.updateImage(C,T)}}},f}(v.Evented),qh=xu,tl=xu,Xo=1e20;function xu(d,f,h,g,w,C){this.fontSize=d||24,this.buffer=void 0===f?3:f,this.cutoff=g||.25,this.fontFamily=w||"sans-serif",this.fontWeight=C||"normal",this.radius=h||8;var T=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=T,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.d=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Int16Array(T),this.middle=Math.round(T/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function va(d,f,h,g,w,C,T){for(var I=0;I<f;I++){for(var M=0;M<h;M++)g[M]=d[M*f+I];for(Ac(g,w,C,T,h),M=0;M<h;M++)d[M*f+I]=w[M]}for(M=0;M<h;M++){for(I=0;I<f;I++)g[I]=d[M*f+I];for(Ac(g,w,C,T,f),I=0;I<f;I++)d[M*f+I]=Math.sqrt(w[I])}}function Ac(d,f,h,g,w){h[0]=0,g[0]=-Xo,g[1]=+Xo;for(var C=1,T=0;C<w;C++){for(var I=(d[C]+C*C-(d[h[T]]+h[T]*h[T]))/(2*C-2*h[T]);I<=g[T];)T--,I=(d[C]+C*C-(d[h[T]]+h[T]*h[T]))/(2*C-2*h[T]);h[++T]=C,g[T]=I,g[T+1]=+Xo}for(C=0,T=0;C<w;C++){for(;g[T+1]<C;)T++;f[C]=(C-h[T])*(C-h[T])+d[h[T]]}}xu.prototype.draw=function(d){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(d,this.buffer,this.middle);for(var f=this.ctx.getImageData(0,0,this.size,this.size),h=new Uint8ClampedArray(this.size*this.size),g=0;g<this.size*this.size;g++){var w=f.data[4*g+3]/255;this.gridOuter[g]=1===w?0:0===w?Xo:Math.pow(Math.max(0,.5-w),2),this.gridInner[g]=1===w?Xo:0===w?0:Math.pow(Math.max(0,w-.5),2)}for(va(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),va(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),g=0;g<this.size*this.size;g++)h[g]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[g]-this.gridInner[g])/this.radius+this.cutoff))));return h},qh.default=tl;var Ni=function(d,f){this.requestManager=d,this.localIdeographFontFamily=f,this.entries={}};Ni.prototype.setURL=function(d){this.url=d},Ni.prototype.getGlyphs=function(d,f){var h=this,g=[];for(var w in d)for(var C=0,T=d[w];C<T.length;C+=1)g.push({stack:w,id:T[C]});v.asyncAll(g,function(I,M){var L=I.stack,$=I.id,q=h.entries[L];q||(q=h.entries[L]={glyphs:{},requests:{},ranges:{}});var j=q.glyphs[$];if(void 0===j){if(j=h._tinySDF(q,L,$))return q.glyphs[$]=j,void M(null,{stack:L,id:$,glyph:j});var ne=Math.floor($/256);if(256*ne>65535)M(new Error("glyphs > 65535 not supported"));else if(q.ranges[ne])M(null,{stack:L,id:$,glyph:j});else{var J=q.requests[ne];J||(J=q.requests[ne]=[],Ni.loadGlyphRange(L,ne,h.url,h.requestManager,function(ae,ee){if(ee){for(var ie in ee)h._doesCharSupportLocalGlyph(+ie)||(q.glyphs[+ie]=ee[+ie]);q.ranges[ne]=!0}for(var pe=0,ve=J;pe<ve.length;pe+=1)(0,ve[pe])(ae,ee);delete q.requests[ne]})),J.push(function(ae,ee){ae?M(ae):ee&&M(null,{stack:L,id:$,glyph:ee[$]||null})})}}else M(null,{stack:L,id:$,glyph:j})},function(I,M){if(I)f(I);else if(M){for(var L={},$=0,q=M;$<q.length;$+=1){var j=q[$],ne=j.stack,J=j.id,ae=j.glyph;(L[ne]||(L[ne]={}))[J]=ae&&{id:ae.id,bitmap:ae.bitmap.clone(),metrics:ae.metrics}}f(null,L)}})},Ni.prototype._doesCharSupportLocalGlyph=function(d){return!!this.localIdeographFontFamily&&(v.isChar["CJK Unified Ideographs"](d)||v.isChar["Hangul Syllables"](d)||v.isChar.Hiragana(d)||v.isChar.Katakana(d))},Ni.prototype._tinySDF=function(d,f,h){var g=this.localIdeographFontFamily;if(g&&this._doesCharSupportLocalGlyph(h)){var w=d.tinySDF;if(!w){var C="400";/bold/i.test(f)?C="900":/medium/i.test(f)?C="500":/light/i.test(f)&&(C="200"),w=d.tinySDF=new Ni.TinySDF(24,3,8,.25,g,C)}return{id:h,bitmap:new v.AlphaImage({width:30,height:30},w.draw(String.fromCharCode(h))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Ni.loadGlyphRange=function(d,f,h,g,w){var C=256*f,T=C+255,I=g.transformRequest(g.normalizeGlyphsURL(h).replace("{fontstack}",d).replace("{range}",C+"-"+T),v.ResourceType.Glyphs);v.getArrayBuffer(I,function(M,L){if(M)w(M);else if(L){for(var $={},q=0,j=v.parseGlyphPBF(L);q<j.length;q+=1){var ne=j[q];$[ne.id]=ne}w(null,$)}})},Ni.TinySDF=qh;var bs=function(){this.specification=v.styleSpec.light.position};bs.prototype.possiblyEvaluate=function(d,f){return v.sphericalToCartesian(d.expression.evaluate(f))},bs.prototype.interpolate=function(d,f,h){return{x:v.number(d.x,f.x,h),y:v.number(d.y,f.y,h),z:v.number(d.z,f.z,h)}};var Fs=new v.Properties({anchor:new v.DataConstantProperty(v.styleSpec.light.anchor),position:new bs,color:new v.DataConstantProperty(v.styleSpec.light.color),intensity:new v.DataConstantProperty(v.styleSpec.light.intensity)}),Nl=function(d){function f(h){d.call(this),this._transitionable=new v.Transitionable(Fs),this.setLight(h),this._transitioning=this._transitionable.untransitioned()}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getLight=function(){return this._transitionable.serialize()},f.prototype.setLight=function(h,g){if(void 0===g&&(g={}),!this._validate(v.validateLight,h,g))for(var w in h){var C=h[w];v.endsWith(w,"-transition")?this._transitionable.setTransition(w.slice(0,-11),C):this._transitionable.setValue(w,C)}},f.prototype.updateTransitions=function(h){this._transitioning=this._transitionable.transitioned(h,this._transitioning)},f.prototype.hasTransition=function(){return this._transitioning.hasTransition()},f.prototype.recalculate=function(h){this.properties=this._transitioning.possiblyEvaluate(h)},f.prototype._validate=function(h,g,w){return(!w||!1!==w.validate)&&v.emitValidationErrors(this,h.call(v.validateStyle,v.extend({value:g,style:{glyphs:!0,sprite:!0},styleSpec:v.styleSpec})))},f}(v.Evented),ur=function(d,f){this.width=d,this.height=f,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};ur.prototype.getDash=function(d,f){var h=d.join(",")+String(f);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(d,f)),this.dashEntry[h]},ur.prototype.getDashRanges=function(d,f,h){var g=[],w=d.length%2==1?-d[d.length-1]*h:0,C=d[0]*h,T=!0;g.push({left:w,right:C,isDash:T,zeroLength:0===d[0]});for(var I=d[0],M=1;M<d.length;M++){var L=d[M];g.push({left:w=I*h,right:C=(I+=L)*h,isDash:T=!T,zeroLength:0===L})}return g},ur.prototype.addRoundDash=function(d,f,h){for(var g=f/2,w=-h;w<=h;w++)for(var C=this.width*(this.nextRow+h+w),T=0,I=d[T],M=0;M<this.width;M++){M/I.right>1&&(I=d[++T]);var L=Math.abs(M-I.left),$=Math.abs(M-I.right),q=Math.min(L,$),j=void 0,ne=w/h*(g+1);if(I.isDash){var J=g-Math.abs(ne);j=Math.sqrt(q*q+J*J)}else j=g-Math.sqrt(q*q+ne*ne);this.data[C+M]=Math.max(0,Math.min(255,j+128))}},ur.prototype.addRegularDash=function(d){for(var f=d.length-1;f>=0;--f){var h=d[f],g=d[f+1];h.zeroLength?d.splice(f,1):g&&g.isDash===h.isDash&&(g.left=h.left,d.splice(f,1))}var w=d[0],C=d[d.length-1];w.isDash===C.isDash&&(w.left=C.left-this.width,C.right=w.right+this.width);for(var T=this.width*this.nextRow,I=0,M=d[I],L=0;L<this.width;L++){L/M.right>1&&(M=d[++I]);var $=Math.abs(L-M.left),q=Math.abs(L-M.right),j=Math.min($,q);this.data[T+L]=Math.max(0,Math.min(255,(M.isDash?j:-j)+128))}},ur.prototype.addDash=function(d,f){var h=f?7:0,g=2*h+1;if(this.nextRow+g>this.height)return v.warnOnce("LineAtlas out of space"),null;for(var w=0,C=0;C<d.length;C++)w+=d[C];if(0!==w){var T=this.width/w,I=this.getDashRanges(d,this.width,T);f?this.addRoundDash(I,T,h):this.addRegularDash(I)}var M={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:w};return this.nextRow+=g,this.dirty=!0,M},ur.prototype.bind=function(d){var f=d.gl;this.texture?(f.bindTexture(f.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.width,this.height,f.ALPHA,f.UNSIGNED_BYTE,this.data))):(this.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,this.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.ALPHA,this.width,this.height,0,f.ALPHA,f.UNSIGNED_BYTE,this.data))};var Do=function d(f,h){this.workerPool=f,this.actors=[],this.currentActor=0,this.id=v.uniqueId();for(var g=this.workerPool.acquire(this.id),w=0;w<g.length;w++){var C=new d.Actor(g[w],h,this.id);C.name="Worker "+w,this.actors.push(C)}};function Tp(d,f,h){var g=function(w,C){if(w)return h(w);if(C){var T=v.pick(v.extend(C,d),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);C.vector_layers&&(T.vectorLayers=C.vector_layers,T.vectorLayerIds=T.vectorLayers.map(function(I){return I.id})),T.tiles=f.canonicalizeTileset(T,d.url),h(null,T)}};return d.url?v.getJSON(f.transformRequest(f.normalizeSourceURL(d.url),v.ResourceType.Source),g):v.browser.frame(function(){return g(null,d)})}Do.prototype.broadcast=function(d,f,h){v.asyncAll(this.actors,function(g,w){g.send(d,f,w)},h=h||function(){})},Do.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Do.prototype.remove=function(){this.actors.forEach(function(d){d.remove()}),this.actors=[],this.workerPool.release(this.id)},Do.Actor=v.Actor;var ws=function(d,f,h){this.bounds=v.LngLatBounds.convert(this.validateBounds(d)),this.minzoom=f||0,this.maxzoom=h||24};ws.prototype.validateBounds=function(d){return Array.isArray(d)&&4===d.length?[Math.max(-180,d[0]),Math.max(-90,d[1]),Math.min(180,d[2]),Math.min(90,d[3])]:[-180,-90,180,90]},ws.prototype.contains=function(d){var f=Math.pow(2,d.z),h=Math.floor(v.mercatorXfromLng(this.bounds.getWest())*f),g=Math.floor(v.mercatorYfromLat(this.bounds.getNorth())*f),w=Math.ceil(v.mercatorXfromLng(this.bounds.getEast())*f),C=Math.ceil(v.mercatorYfromLat(this.bounds.getSouth())*f);return d.x>=h&&d.x<w&&d.y>=g&&d.y<C};var Ll=function(d){function f(h,g,w,C){if(d.call(this),this.id=h,this.dispatcher=w,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,v.extend(this,v.pick(g,["url","scheme","tileSize","promoteId"])),this._options=v.extend({type:"vector"},g),this._collectResourceTiming=g.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(C)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.load=function(){var h=this;this._loaded=!1,this.fire(new v.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Tp(this._options,this.map._requestManager,function(g,w){h._tileJSONRequest=null,h._loaded=!0,g?h.fire(new v.ErrorEvent(g)):w&&(v.extend(h,w),w.bounds&&(h.tileBounds=new ws(w.bounds,h.minzoom,h.maxzoom)),v.postTurnstileEvent(w.tiles,h.map._requestManager._customAccessToken),v.postMapLoadEvent(w.tiles,h.map._getMapId(),h.map._requestManager._skuToken,h.map._requestManager._customAccessToken),h.fire(new v.Event("data",{dataType:"source",sourceDataType:"metadata"})),h.fire(new v.Event("data",{dataType:"source",sourceDataType:"content"})))})},f.prototype.loaded=function(){return this._loaded},f.prototype.hasTile=function(h){return!this.tileBounds||this.tileBounds.contains(h.canonical)},f.prototype.onAdd=function(h){this.map=h,this.load()},f.prototype.setSourceProperty=function(h){this._tileJSONRequest&&this._tileJSONRequest.cancel(),h(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},f.prototype.setTiles=function(h){var g=this;return this.setSourceProperty(function(){g._options.tiles=h}),this},f.prototype.setUrl=function(h){var g=this;return this.setSourceProperty(function(){g.url=h,g._options.url=h}),this},f.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},f.prototype.serialize=function(){return v.extend({},this._options)},f.prototype.loadTile=function(h,g){var w=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme)),C={request:this.map._requestManager.transformRequest(w,v.ResourceType.Tile),uid:h.uid,tileID:h.tileID,zoom:h.tileID.overscaledZ,tileSize:this.tileSize*h.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:v.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function T(I,M){return delete h.request,h.aborted?g(null):I&&404!==I.status?g(I):(M&&M.resourceTiming&&(h.resourceTiming=M.resourceTiming),this.map._refreshExpiredTiles&&M&&h.setExpiryData(M),h.loadVectorData(M,this.map.painter),v.cacheEntryPossiblyAdded(this.dispatcher),g(null),void(h.reloadCallback&&(this.loadTile(h,h.reloadCallback),h.reloadCallback=null)))}C.request.collectResourceTiming=this._collectResourceTiming,h.actor&&"expired"!==h.state?"loading"===h.state?h.reloadCallback=g:h.request=h.actor.send("reloadTile",C,T.bind(this)):(h.actor=this.dispatcher.getActor(),h.request=h.actor.send("loadTile",C,T.bind(this)))},f.prototype.abortTile=function(h){h.request&&(h.request.cancel(),delete h.request),h.actor&&h.actor.send("abortTile",{uid:h.uid,type:this.type,source:this.id},void 0)},f.prototype.unloadTile=function(h){h.unloadVectorData(),h.actor&&h.actor.send("removeTile",{uid:h.uid,type:this.type,source:this.id},void 0)},f.prototype.hasTransition=function(){return!1},f}(v.Evented),Eu=function(d){function f(h,g,w,C){d.call(this),this.id=h,this.dispatcher=w,this.setEventedParent(C),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=v.extend({type:"raster"},g),v.extend(this,v.pick(g,["url","scheme","tileSize"]))}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.load=function(){var h=this;this._loaded=!1,this.fire(new v.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Tp(this._options,this.map._requestManager,function(g,w){h._tileJSONRequest=null,h._loaded=!0,g?h.fire(new v.ErrorEvent(g)):w&&(v.extend(h,w),w.bounds&&(h.tileBounds=new ws(w.bounds,h.minzoom,h.maxzoom)),v.postTurnstileEvent(w.tiles),v.postMapLoadEvent(w.tiles,h.map._getMapId(),h.map._requestManager._skuToken),h.fire(new v.Event("data",{dataType:"source",sourceDataType:"metadata"})),h.fire(new v.Event("data",{dataType:"source",sourceDataType:"content"})))})},f.prototype.loaded=function(){return this._loaded},f.prototype.onAdd=function(h){this.map=h,this.load()},f.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},f.prototype.serialize=function(){return v.extend({},this._options)},f.prototype.hasTile=function(h){return!this.tileBounds||this.tileBounds.contains(h.canonical)},f.prototype.loadTile=function(h,g){var w=this,C=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);h.request=v.getImage(this.map._requestManager.transformRequest(C,v.ResourceType.Tile),function(T,I){if(delete h.request,h.aborted)h.state="unloaded",g(null);else if(T)h.state="errored",g(T);else if(I){w.map._refreshExpiredTiles&&h.setExpiryData(I),delete I.cacheControl,delete I.expires;var M=w.map.painter.context,L=M.gl;h.texture=w.map.painter.getTileTexture(I.width),h.texture?h.texture.update(I,{useMipmap:!0}):(h.texture=new v.Texture(M,I,L.RGBA,{useMipmap:!0}),h.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),M.extTextureFilterAnisotropic&&L.texParameterf(L.TEXTURE_2D,M.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,M.extTextureFilterAnisotropicMax)),h.state="loaded",v.cacheEntryPossiblyAdded(w.dispatcher),g(null)}})},f.prototype.abortTile=function(h,g){h.request&&(h.request.cancel(),delete h.request),g()},f.prototype.unloadTile=function(h,g){h.texture&&this.map.painter.saveTileTexture(h.texture),g()},f.prototype.hasTransition=function(){return!1},f}(v.Evented),ba=function(d){function f(h,g,w,C){d.call(this,h,g,w,C),this.type="raster-dem",this.maxzoom=22,this._options=v.extend({type:"raster-dem"},g),this.encoding=g.encoding||"mapbox"}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},f.prototype.loadTile=function(h,g){var w=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function C(T,I){T&&(h.state="errored",g(T)),I&&(h.dem=I,h.needsHillshadePrepare=!0,h.state="loaded",g(null))}h.request=v.getImage(this.map._requestManager.transformRequest(w,v.ResourceType.Tile),function(T,I){if(delete h.request,h.aborted)h.state="unloaded",g(null);else if(T)h.state="errored",g(T);else if(I){this.map._refreshExpiredTiles&&h.setExpiryData(I),delete I.cacheControl,delete I.expires;var M=v.window.ImageBitmap&&I instanceof v.window.ImageBitmap&&v.offscreenCanvasSupported()?I:v.browser.getImageData(I,1),L={uid:h.uid,coord:h.tileID,source:this.id,rawImageData:M,encoding:this.encoding};h.actor&&"expired"!==h.state||(h.actor=this.dispatcher.getActor(),h.actor.send("loadDEMTile",L,C.bind(this)))}}.bind(this)),h.neighboringTiles=this._getNeighboringTiles(h.tileID)},f.prototype._getNeighboringTiles=function(h){var g=h.canonical,w=Math.pow(2,g.z),C=(g.x-1+w)%w,T=0===g.x?h.wrap-1:h.wrap,I=(g.x+1+w)%w,M=g.x+1===w?h.wrap+1:h.wrap,L={};return L[new v.OverscaledTileID(h.overscaledZ,T,g.z,C,g.y).key]={backfilled:!1},L[new v.OverscaledTileID(h.overscaledZ,M,g.z,I,g.y).key]={backfilled:!1},g.y>0&&(L[new v.OverscaledTileID(h.overscaledZ,T,g.z,C,g.y-1).key]={backfilled:!1},L[new v.OverscaledTileID(h.overscaledZ,h.wrap,g.z,g.x,g.y-1).key]={backfilled:!1},L[new v.OverscaledTileID(h.overscaledZ,M,g.z,I,g.y-1).key]={backfilled:!1}),g.y+1<w&&(L[new v.OverscaledTileID(h.overscaledZ,T,g.z,C,g.y+1).key]={backfilled:!1},L[new v.OverscaledTileID(h.overscaledZ,h.wrap,g.z,g.x,g.y+1).key]={backfilled:!1},L[new v.OverscaledTileID(h.overscaledZ,M,g.z,I,g.y+1).key]={backfilled:!1}),L},f.prototype.unloadTile=function(h){h.demTexture&&this.map.painter.saveTileTexture(h.demTexture),h.fbo&&(h.fbo.destroy(),delete h.fbo),h.dem&&delete h.dem,delete h.neighboringTiles,h.state="unloaded",h.actor&&h.actor.send("removeDEMTile",{uid:h.uid,source:this.id})},f}(Eu),xs=function(d){function f(h,g,w,C){d.call(this),this.id=h,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=w.getActor(),this.setEventedParent(C),this._data=g.data,this._options=v.extend({},g),this._collectResourceTiming=g.collectResourceTiming,this._resourceTiming=[],void 0!==g.maxzoom&&(this.maxzoom=g.maxzoom),g.type&&(this.type=g.type),g.attribution&&(this.attribution=g.attribution),this.promoteId=g.promoteId;var T=v.EXTENT/this.tileSize;this.workerOptions=v.extend({source:this.id,cluster:g.cluster||!1,geojsonVtOptions:{buffer:(void 0!==g.buffer?g.buffer:128)*T,tolerance:(void 0!==g.tolerance?g.tolerance:.375)*T,extent:v.EXTENT,maxZoom:this.maxzoom,lineMetrics:g.lineMetrics||!1,generateId:g.generateId||!1},superclusterOptions:{maxZoom:void 0!==g.clusterMaxZoom?Math.min(g.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,g.clusterMinPoints||2),extent:v.EXTENT,radius:(g.clusterRadius||50)*T,log:!1,generateId:g.generateId||!1},clusterProperties:g.clusterProperties,filter:g.filter},g.workerOptions)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.load=function(){var h=this;this.fire(new v.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(g){if(g)h.fire(new v.ErrorEvent(g));else{var w={dataType:"source",sourceDataType:"metadata"};h._collectResourceTiming&&h._resourceTiming&&h._resourceTiming.length>0&&(w.resourceTiming=h._resourceTiming,h._resourceTiming=[]),h.fire(new v.Event("data",w))}})},f.prototype.onAdd=function(h){this.map=h,this.load()},f.prototype.setData=function(h){var g=this;return this._data=h,this.fire(new v.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(w){if(w)g.fire(new v.ErrorEvent(w));else{var C={dataType:"source",sourceDataType:"content"};g._collectResourceTiming&&g._resourceTiming&&g._resourceTiming.length>0&&(C.resourceTiming=g._resourceTiming,g._resourceTiming=[]),g.fire(new v.Event("data",C))}}),this},f.prototype.getClusterExpansionZoom=function(h,g){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:h,source:this.id},g),this},f.prototype.getClusterChildren=function(h,g){return this.actor.send("geojson.getClusterChildren",{clusterId:h,source:this.id},g),this},f.prototype.getClusterLeaves=function(h,g,w,C){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:h,limit:g,offset:w},C),this},f.prototype._updateWorkerData=function(h){var g=this;this._loaded=!1;var w=v.extend({},this.workerOptions),C=this._data;"string"==typeof C?(w.request=this.map._requestManager.transformRequest(v.browser.resolveURL(C),v.ResourceType.Source),w.request.collectResourceTiming=this._collectResourceTiming):w.data=JSON.stringify(C),this.actor.send(this.type+".loadData",w,function(T,I){g._removed||I&&I.abandoned||(g._loaded=!0,I&&I.resourceTiming&&I.resourceTiming[g.id]&&(g._resourceTiming=I.resourceTiming[g.id].slice(0)),g.actor.send(g.type+".coalesce",{source:w.source},null),h(T))})},f.prototype.loaded=function(){return this._loaded},f.prototype.loadTile=function(h,g){var w=this,C=h.actor?"reloadTile":"loadTile";h.actor=this.actor,h.request=this.actor.send(C,{type:this.type,uid:h.uid,tileID:h.tileID,zoom:h.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:v.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(T,I){return delete h.request,h.unloadVectorData(),h.aborted?g(null):T?g(T):(h.loadVectorData(I,w.map.painter,"reloadTile"===C),g(null))})},f.prototype.abortTile=function(h){h.request&&(h.request.cancel(),delete h.request),h.aborted=!0},f.prototype.unloadTile=function(h){h.unloadVectorData(),this.actor.send("removeTile",{uid:h.uid,type:this.type,source:this.id})},f.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},f.prototype.serialize=function(){return v.extend({},this._options,{type:this.type,data:this._data})},f.prototype.hasTransition=function(){return!1},f}(v.Evented),Ji=v.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),wa=function(d){function f(h,g,w,C){d.call(this),this.id=h,this.dispatcher=w,this.coordinates=g.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(C),this.options=g}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.load=function(h,g){var w=this;this._loaded=!1,this.fire(new v.Event("dataloading",{dataType:"source"})),this.url=this.options.url,v.getImage(this.map._requestManager.transformRequest(this.url,v.ResourceType.Image),function(C,T){w._loaded=!0,C?w.fire(new v.ErrorEvent(C)):T&&(w.image=T,h&&(w.coordinates=h),g&&g(),w._finishLoading())})},f.prototype.loaded=function(){return this._loaded},f.prototype.updateImage=function(h){var g=this;return this.image&&h.url?(this.options.url=h.url,this.load(h.coordinates,function(){g.texture=null}),this):this},f.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"metadata"})))},f.prototype.onAdd=function(h){this.map=h,this.load()},f.prototype.setCoordinates=function(h){var g=this;this.coordinates=h;var w=h.map(v.MercatorCoordinate.fromLngLat);this.tileID=function(T){for(var I=1/0,M=1/0,L=-1/0,$=-1/0,q=0,j=T;q<j.length;q+=1){var ne=j[q];I=Math.min(I,ne.x),M=Math.min(M,ne.y),L=Math.max(L,ne.x),$=Math.max($,ne.y)}var J=Math.max(L-I,$-M),ae=Math.max(0,Math.floor(-Math.log(J)/Math.LN2)),ee=Math.pow(2,ae);return new v.CanonicalTileID(ae,Math.floor((I+L)/2*ee),Math.floor((M+$)/2*ee))}(w),this.minzoom=this.maxzoom=this.tileID.z;var C=w.map(function(T){return g.tileID.getTilePoint(T)._round()});return this._boundsArray=new v.StructArrayLayout4i8,this._boundsArray.emplaceBack(C[0].x,C[0].y,0,0),this._boundsArray.emplaceBack(C[1].x,C[1].y,v.EXTENT,0),this._boundsArray.emplaceBack(C[3].x,C[3].y,0,v.EXTENT),this._boundsArray.emplaceBack(C[2].x,C[2].y,v.EXTENT,v.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"content"})),this},f.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var h=this.map.painter.context,g=h.gl;for(var w in this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,Ji.members)),this.boundsSegments||(this.boundsSegments=v.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new v.Texture(h,this.image,g.RGBA),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE)),this.tiles){var C=this.tiles[w];"loaded"!==C.state&&(C.state="loaded",C.texture=this.texture)}}},f.prototype.loadTile=function(h,g){this.tileID&&this.tileID.equals(h.tileID.canonical)?(this.tiles[String(h.tileID.wrap)]=h,h.buckets={},g(null)):(h.state="errored",g(null))},f.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},f.prototype.hasTransition=function(){return!1},f}(v.Evented),Rc=function(d){function f(h,g,w,C){d.call(this,h,g,w,C),this.roundZoom=!0,this.type="video",this.options=g}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.load=function(){var h=this;this._loaded=!1;var g=this.options;this.urls=[];for(var w=0,C=g.urls;w<C.length;w+=1)this.urls.push(this.map._requestManager.transformRequest(C[w],v.ResourceType.Source).url);v.getVideo(this.urls,function(T,I){h._loaded=!0,T?h.fire(new v.ErrorEvent(T)):I&&(h.video=I,h.video.loop=!0,h.video.addEventListener("playing",function(){h.map.triggerRepaint()}),h.map&&h.video.play(),h._finishLoading())})},f.prototype.pause=function(){this.video&&this.video.pause()},f.prototype.play=function(){this.video&&this.video.play()},f.prototype.seek=function(h){if(this.video){var g=this.video.seekable;h<g.start(0)||h>g.end(0)?this.fire(new v.ErrorEvent(new v.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+g.start(0)+" and "+g.end(0)+"-second mark."))):this.video.currentTime=h}},f.prototype.getVideo=function(){return this.video},f.prototype.onAdd=function(h){this.map||(this.map=h,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},f.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var h=this.map.painter.context,g=h.gl;for(var w in this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,Ji.members)),this.boundsSegments||(this.boundsSegments=v.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE),g.texSubImage2D(g.TEXTURE_2D,0,0,0,g.RGBA,g.UNSIGNED_BYTE,this.video)):(this.texture=new v.Texture(h,this.video,g.RGBA),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE)),this.tiles){var C=this.tiles[w];"loaded"!==C.state&&(C.state="loaded",C.texture=this.texture)}}},f.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},f.prototype.hasTransition=function(){return this.video&&!this.video.paused},f}(wa),Fl=function(d){function f(h,g,w,C){d.call(this,h,g,w,C),g.coordinates?Array.isArray(g.coordinates)&&4===g.coordinates.length&&!g.coordinates.some(function(T){return!Array.isArray(T)||2!==T.length||T.some(function(I){return"number"!=typeof I})})||this.fire(new v.ErrorEvent(new v.ValidationError("sources."+h,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new v.ErrorEvent(new v.ValidationError("sources."+h,null,'missing required property "coordinates"'))),g.animate&&"boolean"!=typeof g.animate&&this.fire(new v.ErrorEvent(new v.ValidationError("sources."+h,null,'optional "animate" property must be a boolean value'))),g.canvas?"string"==typeof g.canvas||g.canvas instanceof v.window.HTMLCanvasElement||this.fire(new v.ErrorEvent(new v.ValidationError("sources."+h,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new v.ErrorEvent(new v.ValidationError("sources."+h,null,'missing required property "canvas"'))),this.options=g,this.animate=void 0===g.animate||g.animate}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof v.window.HTMLCanvasElement?this.options.canvas:v.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new v.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},f.prototype.getCanvas=function(){return this.canvas},f.prototype.onAdd=function(h){this.map=h,this.load(),this.canvas&&this.animate&&this.play()},f.prototype.onRemove=function(){this.pause()},f.prototype.prepare=function(){var h=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,h=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,h=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var g=this.map.painter.context,w=g.gl;for(var C in this.boundsBuffer||(this.boundsBuffer=g.createVertexBuffer(this._boundsArray,Ji.members)),this.boundsSegments||(this.boundsSegments=v.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(h||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new v.Texture(g,this.canvas,w.RGBA,{premultiply:!0}),this.tiles){var T=this.tiles[C];"loaded"!==T.state&&(T.state="loaded",T.texture=this.texture)}}},f.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},f.prototype.hasTransition=function(){return this._playing},f.prototype._hasInvalidDimensions=function(){for(var h=0,g=[this.canvas.width,this.canvas.height];h<g.length;h+=1){var w=g[h];if(isNaN(w)||w<=0)return!0}return!1},f}(wa),nl={vector:Ll,raster:Eu,"raster-dem":ba,geojson:xs,video:Rc,image:wa,canvas:Fl};function Sp(d,f){var h=v.identity([]);return v.translate(h,h,[1,1,0]),v.scale(h,h,[.5*d.width,.5*d.height,1]),v.multiply(h,h,d.calculatePosMatrix(f.toUnwrapped()))}function Li(d,f,h,g,w,C){var T=function(ae,ee,ie){if(ae)for(var pe=0,ve=ae;pe<ve.length;pe+=1){var ke=ee[ve[pe]];if(ke&&ke.source===ie&&"fill-extrusion"===ke.type)return!0}else for(var Ee in ee){var Ae=ee[Ee];if(Ae.source===ie&&"fill-extrusion"===Ae.type)return!0}return!1}(w&&w.layers,f,d.id),I=C.maxPitchScaleFactor(),M=d.tilesIn(g,I,T);M.sort(rl);for(var L=[],$=0,q=M;$<q.length;$+=1){var j=q[$];L.push({wrappedTileID:j.tileID.wrapped().key,queryResults:j.tile.queryRenderedFeatures(f,h,d._state,j.queryGeometry,j.cameraQueryGeometry,j.scale,w,C,I,Sp(d.transform,j.tileID))})}var ne=function(ae){for(var ee={},ie={},pe=0,ve=ae;pe<ve.length;pe+=1){var ke=ve[pe],Ee=ke.queryResults,Ae=ke.wrappedTileID,Ne=ie[Ae]=ie[Ae]||{};for(var Ze in Ee)for(var He=Ee[Ze],it=Ne[Ze]=Ne[Ze]||{},_t=ee[Ze]=ee[Ze]||[],xt=0,bt=He;xt<bt.length;xt+=1){var hn=bt[xt];it[hn.featureIndex]||(it[hn.featureIndex]=!0,_t.push(hn))}}return ee}(L);for(var J in ne)ne[J].forEach(function(ae){var ee=ae.feature,ie=d.getFeatureState(ee.layer["source-layer"],ee.id);ee.source=ee.layer.source,ee.layer["source-layer"]&&(ee.sourceLayer=ee.layer["source-layer"]),ee.state=ie});return ne}function rl(d,f){var h=d.tileID,g=f.tileID;return h.overscaledZ-g.overscaledZ||h.canonical.y-g.canonical.y||h.wrap-g.wrap||h.canonical.x-g.canonical.x}var Jn=function(d,f){this.max=d,this.onRemove=f,this.reset()};Jn.prototype.reset=function(){for(var d in this.data)for(var f=0,h=this.data[d];f<h.length;f+=1){var g=h[f];g.timeout&&clearTimeout(g.timeout),this.onRemove(g.value)}return this.data={},this.order=[],this},Jn.prototype.add=function(d,f,h){var g=this,w=d.wrapped().key;void 0===this.data[w]&&(this.data[w]=[]);var C={value:f,timeout:void 0};if(void 0!==h&&(C.timeout=setTimeout(function(){g.remove(d,C)},h)),this.data[w].push(C),this.order.push(w),this.order.length>this.max){var T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this},Jn.prototype.has=function(d){return d.wrapped().key in this.data},Jn.prototype.getAndRemove=function(d){return this.has(d)?this._getAndRemoveByKey(d.wrapped().key):null},Jn.prototype._getAndRemoveByKey=function(d){var f=this.data[d].shift();return f.timeout&&clearTimeout(f.timeout),0===this.data[d].length&&delete this.data[d],this.order.splice(this.order.indexOf(d),1),f.value},Jn.prototype.getByKey=function(d){var f=this.data[d];return f?f[0].value:null},Jn.prototype.get=function(d){return this.has(d)?this.data[d.wrapped().key][0].value:null},Jn.prototype.remove=function(d,f){if(!this.has(d))return this;var h=d.wrapped().key,g=void 0===f?0:this.data[h].indexOf(f),w=this.data[h][g];return this.data[h].splice(g,1),w.timeout&&clearTimeout(w.timeout),0===this.data[h].length&&delete this.data[h],this.onRemove(w.value),this.order.splice(this.order.indexOf(h),1),this},Jn.prototype.setMaxSize=function(d){for(this.max=d;this.order.length>this.max;){var f=this._getAndRemoveByKey(this.order[0]);f&&this.onRemove(f)}return this},Jn.prototype.filter=function(d){var f=[];for(var h in this.data)for(var g=0,w=this.data[h];g<w.length;g+=1){var C=w[g];d(C.value)||f.push(C)}for(var T=0,I=f;T<I.length;T+=1){var M=I[T];this.remove(M.value.tileID,M)}};var xa=function(d,f,h){this.context=d;var g=d.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!h,this.context.unbindVAO(),d.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer};xa.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},xa.prototype.updateData=function(d){var f=this.context.gl;this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,d.arrayBuffer)},xa.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var il={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Bs=function(d,f,h,g){this.length=f.length,this.attributes=h,this.itemSize=f.bytesPerElement,this.dynamicDraw=g,this.context=d;var w=d.gl;this.buffer=w.createBuffer(),d.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer};Bs.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Bs.prototype.updateData=function(d){var f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,d.arrayBuffer)},Bs.prototype.enableAttributes=function(d,f){for(var h=0;h<this.attributes.length;h++){var g=f.attributes[this.attributes[h].name];void 0!==g&&d.enableVertexAttribArray(g)}},Bs.prototype.setVertexAttribPointers=function(d,f,h){for(var g=0;g<this.attributes.length;g++){var w=this.attributes[g],C=f.attributes[w.name];void 0!==C&&d.vertexAttribPointer(C,w.components,d[il[w.type]],!1,this.itemSize,w.offset+this.itemSize*(h||0))}},Bs.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var En=function(d){this.gl=d.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};En.prototype.get=function(){return this.current},En.prototype.set=function(d){},En.prototype.getDefault=function(){return this.default},En.prototype.setDefault=function(){this.set(this.default)};var Ea=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return v.Color.transparent},f.prototype.set=function(h){var g=this.current;(h.r!==g.r||h.g!==g.g||h.b!==g.b||h.a!==g.a||this.dirty)&&(this.gl.clearColor(h.r,h.g,h.b,h.a),this.current=h,this.dirty=!1)},f}(En),To=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return 1},f.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.clearDepth(h),this.current=h,this.dirty=!1)},f}(En),Vs=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return 0},f.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.clearStencil(h),this.current=h,this.dirty=!1)},f}(En),Ip=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return[!0,!0,!0,!0]},f.prototype.set=function(h){var g=this.current;(h[0]!==g[0]||h[1]!==g[1]||h[2]!==g[2]||h[3]!==g[3]||this.dirty)&&(this.gl.colorMask(h[0],h[1],h[2],h[3]),this.current=h,this.dirty=!1)},f}(En),Qs=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return!0},f.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.depthMask(h),this.current=h,this.dirty=!1)},f}(En),dr=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return 255},f.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.stencilMask(h),this.current=h,this.dirty=!1)},f}(En),Qo=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},f.prototype.set=function(h){var g=this.current;(h.func!==g.func||h.ref!==g.ref||h.mask!==g.mask||this.dirty)&&(this.gl.stencilFunc(h.func,h.ref,h.mask),this.current=h,this.dirty=!1)},f}(En),ol=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){var h=this.gl;return[h.KEEP,h.KEEP,h.KEEP]},f.prototype.set=function(h){var g=this.current;(h[0]!==g[0]||h[1]!==g[1]||h[2]!==g[2]||this.dirty)&&(this.gl.stencilOp(h[0],h[1],h[2]),this.current=h,this.dirty=!1)},f}(En),sl=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return!1},f.prototype.set=function(h){if(h!==this.current||this.dirty){var g=this.gl;h?g.enable(g.STENCIL_TEST):g.disable(g.STENCIL_TEST),this.current=h,this.dirty=!1}},f}(En),Gn=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return[0,1]},f.prototype.set=function(h){var g=this.current;(h[0]!==g[0]||h[1]!==g[1]||this.dirty)&&(this.gl.depthRange(h[0],h[1]),this.current=h,this.dirty=!1)},f}(En),Es=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return!1},f.prototype.set=function(h){if(h!==this.current||this.dirty){var g=this.gl;h?g.enable(g.DEPTH_TEST):g.disable(g.DEPTH_TEST),this.current=h,this.dirty=!1}},f}(En),Bl=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return this.gl.LESS},f.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.depthFunc(h),this.current=h,this.dirty=!1)},f}(En),zs=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return!1},f.prototype.set=function(h){if(h!==this.current||this.dirty){var g=this.gl;h?g.enable(g.BLEND):g.disable(g.BLEND),this.current=h,this.dirty=!1}},f}(En),Ca=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){var h=this.gl;return[h.ONE,h.ZERO]},f.prototype.set=function(h){var g=this.current;(h[0]!==g[0]||h[1]!==g[1]||this.dirty)&&(this.gl.blendFunc(h[0],h[1]),this.current=h,this.dirty=!1)},f}(En),Mc=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return v.Color.transparent},f.prototype.set=function(h){var g=this.current;(h.r!==g.r||h.g!==g.g||h.b!==g.b||h.a!==g.a||this.dirty)&&(this.gl.blendColor(h.r,h.g,h.b,h.a),this.current=h,this.dirty=!1)},f}(En),Cu=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return this.gl.FUNC_ADD},f.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.blendEquation(h),this.current=h,this.dirty=!1)},f}(En),Da=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return!1},f.prototype.set=function(h){if(h!==this.current||this.dirty){var g=this.gl;h?g.enable(g.CULL_FACE):g.disable(g.CULL_FACE),this.current=h,this.dirty=!1}},f}(En),Du=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return this.gl.BACK},f.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.cullFace(h),this.current=h,this.dirty=!1)},f}(En),Gh=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return this.gl.CCW},f.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.frontFace(h),this.current=h,this.dirty=!1)},f}(En),Tu=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return null},f.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.useProgram(h),this.current=h,this.dirty=!1)},f}(En),Pc=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return this.gl.TEXTURE0},f.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.activeTexture(h),this.current=h,this.dirty=!1)},f}(En),Cs=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){var h=this.gl;return[0,0,h.drawingBufferWidth,h.drawingBufferHeight]},f.prototype.set=function(h){var g=this.current;(h[0]!==g[0]||h[1]!==g[1]||h[2]!==g[2]||h[3]!==g[3]||this.dirty)&&(this.gl.viewport(h[0],h[1],h[2],h[3]),this.current=h,this.dirty=!1)},f}(En),Vl=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return null},f.prototype.set=function(h){if(h!==this.current||this.dirty){var g=this.gl;g.bindFramebuffer(g.FRAMEBUFFER,h),this.current=h,this.dirty=!1}},f}(En),kd=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return null},f.prototype.set=function(h){if(h!==this.current||this.dirty){var g=this.gl;g.bindRenderbuffer(g.RENDERBUFFER,h),this.current=h,this.dirty=!1}},f}(En),Su=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return null},f.prototype.set=function(h){if(h!==this.current||this.dirty){var g=this.gl;g.bindTexture(g.TEXTURE_2D,h),this.current=h,this.dirty=!1}},f}(En),Ad=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return null},f.prototype.set=function(h){if(h!==this.current||this.dirty){var g=this.gl;g.bindBuffer(g.ARRAY_BUFFER,h),this.current=h,this.dirty=!1}},f}(En),al=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return null},f.prototype.set=function(h){var g=this.gl;g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,h),this.current=h,this.dirty=!1},f}(En),zl=function(d){function f(h){d.call(this,h),this.vao=h.extVertexArrayObject}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return null},f.prototype.set=function(h){this.vao&&(h!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(h),this.current=h,this.dirty=!1)},f}(En),Ta=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return 4},f.prototype.set=function(h){if(h!==this.current||this.dirty){var g=this.gl;g.pixelStorei(g.UNPACK_ALIGNMENT,h),this.current=h,this.dirty=!1}},f}(En),Oc=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return!1},f.prototype.set=function(h){if(h!==this.current||this.dirty){var g=this.gl;g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h),this.current=h,this.dirty=!1}},f}(En),Ul=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return!1},f.prototype.set=function(h){if(h!==this.current||this.dirty){var g=this.gl;g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,h),this.current=h,this.dirty=!1}},f}(En),er=function(d){function f(h,g){d.call(this,h),this.context=h,this.parent=g}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getDefault=function(){return null},f}(En),F=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.setDirty=function(){this.dirty=!0},f.prototype.set=function(h){if(h!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var g=this.gl;g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,h,0),this.current=h,this.dirty=!1}},f}(er),z=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.set=function(h){if(h!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var g=this.gl;g.framebufferRenderbuffer(g.FRAMEBUFFER,g.DEPTH_ATTACHMENT,g.RENDERBUFFER,h),this.current=h,this.dirty=!1}},f}(er),U=function(d,f,h,g){this.context=d,this.width=f,this.height=h;var w=this.framebuffer=d.gl.createFramebuffer();this.colorAttachment=new F(d,w),g&&(this.depthAttachment=new z(d,w))};U.prototype.destroy=function(){var d=this.context.gl,f=this.colorAttachment.get();if(f&&d.deleteTexture(f),this.depthAttachment){var h=this.depthAttachment.get();h&&d.deleteRenderbuffer(h)}d.deleteFramebuffer(this.framebuffer)};var G=function(d,f,h){this.func=d,this.mask=f,this.range=h};G.ReadOnly=!1,G.ReadWrite=!0,G.disabled=new G(519,G.ReadOnly,[0,1]);var te=function(d,f,h,g,w,C){this.test=d,this.ref=f,this.mask=h,this.fail=g,this.depthFail=w,this.pass=C};te.disabled=new te({func:519,mask:0},0,0,7680,7680,7680);var de=function(d,f,h){this.blendFunction=d,this.blendColor=f,this.mask=h};de.disabled=new de(de.Replace=[1,0],v.Color.transparent,[!1,!1,!1,!1]),de.unblended=new de(de.Replace,v.Color.transparent,[!0,!0,!0,!0]),de.alphaBlended=new de([1,771],v.Color.transparent,[!0,!0,!0,!0]);var me=function(d,f,h){this.enable=d,this.mode=f,this.frontFace=h};me.disabled=new me(!1,1029,2305),me.backCCW=new me(!0,1029,2305);var K=function(d){this.gl=d,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ea(this),this.clearDepth=new To(this),this.clearStencil=new Vs(this),this.colorMask=new Ip(this),this.depthMask=new Qs(this),this.stencilMask=new dr(this),this.stencilFunc=new Qo(this),this.stencilOp=new ol(this),this.stencilTest=new sl(this),this.depthRange=new Gn(this),this.depthTest=new Es(this),this.depthFunc=new Bl(this),this.blend=new zs(this),this.blendFunc=new Ca(this),this.blendColor=new Mc(this),this.blendEquation=new Cu(this),this.cullFace=new Da(this),this.cullFaceSide=new Du(this),this.frontFace=new Gh(this),this.program=new Tu(this),this.activeTexture=new Pc(this),this.viewport=new Cs(this),this.bindFramebuffer=new Vl(this),this.bindRenderbuffer=new kd(this),this.bindTexture=new Su(this),this.bindVertexBuffer=new Ad(this),this.bindElementBuffer=new al(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new zl(this),this.pixelStoreUnpack=new Ta(this),this.pixelStoreUnpackPremultiplyAlpha=new Oc(this),this.pixelStoreUnpackFlipY=new Ul(this),this.extTextureFilterAnisotropic=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=d.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=d.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(d.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=d.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=d.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE)};K.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},K.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},K.prototype.createIndexBuffer=function(d,f){return new xa(this,d,f)},K.prototype.createVertexBuffer=function(d,f,h){return new Bs(this,d,f,h)},K.prototype.createRenderbuffer=function(d,f,h){var g=this.gl,w=g.createRenderbuffer();return this.bindRenderbuffer.set(w),g.renderbufferStorage(g.RENDERBUFFER,d,f,h),this.bindRenderbuffer.set(null),w},K.prototype.createFramebuffer=function(d,f,h){return new U(this,d,f,h)},K.prototype.clear=function(d){var f=d.color,h=d.depth,g=this.gl,w=0;f&&(w|=g.COLOR_BUFFER_BIT,this.clearColor.set(f),this.colorMask.set([!0,!0,!0,!0])),void 0!==h&&(w|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),g.clear(w)},K.prototype.setCullFace=function(d){!1===d.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(d.mode),this.frontFace.set(d.frontFace))},K.prototype.setDepthMode=function(d){d.func!==this.gl.ALWAYS||d.mask?(this.depthTest.set(!0),this.depthFunc.set(d.func),this.depthMask.set(d.mask),this.depthRange.set(d.range)):this.depthTest.set(!1)},K.prototype.setStencilMode=function(d){d.test.func!==this.gl.ALWAYS||d.mask?(this.stencilTest.set(!0),this.stencilMask.set(d.mask),this.stencilOp.set([d.fail,d.depthFail,d.pass]),this.stencilFunc.set({func:d.test.func,ref:d.ref,mask:d.test.mask})):this.stencilTest.set(!1)},K.prototype.setColorMode=function(d){v.deepEqual(d.blendFunction,de.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(d.blendFunction),this.blendColor.set(d.blendColor)),this.colorMask.set(d.mask)},K.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var W=function(d){function f(h,g,w){var C=this;d.call(this),this.id=h,this.dispatcher=w,this.on("data",function(T){"source"===T.dataType&&"metadata"===T.sourceDataType&&(C._sourceLoaded=!0),C._sourceLoaded&&!C._paused&&"source"===T.dataType&&"content"===T.sourceDataType&&(C.reload(),C.transform&&C.update(C.transform))}),this.on("error",function(){C._sourceErrored=!0}),this._source=function(T,I,M,L){var $=new nl[I.type](T,I,M,L);if($.id!==T)throw new Error("Expected Source id to be "+T+" instead of "+$.id);return v.bindAll(["load","abort","unload","serialize","prepare"],$),$}(h,g,w,this),this._tiles={},this._cache=new Jn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new v.SourceFeatureState}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.onAdd=function(h){this.map=h,this._maxTileCacheSize=h?h._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(h)},f.prototype.onRemove=function(h){this._source&&this._source.onRemove&&this._source.onRemove(h)},f.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var h in this._tiles){var g=this._tiles[h];if("loaded"!==g.state&&"errored"!==g.state)return!1}return!0},f.prototype.getSource=function(){return this._source},f.prototype.pause=function(){this._paused=!0},f.prototype.resume=function(){if(this._paused){var h=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,h&&this.reload(),this.transform&&this.update(this.transform)}},f.prototype._loadTile=function(h,g){return this._source.loadTile(h,g)},f.prototype._unloadTile=function(h){if(this._source.unloadTile)return this._source.unloadTile(h,function(){})},f.prototype._abortTile=function(h){if(this._source.abortTile)return this._source.abortTile(h,function(){})},f.prototype.serialize=function(){return this._source.serialize()},f.prototype.prepare=function(h){for(var g in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var w=this._tiles[g];w.upload(h),w.prepare(this.map.style.imageManager)}},f.prototype.getIds=function(){return v.values(this._tiles).map(function(h){return h.tileID}).sort(re).map(function(h){return h.key})},f.prototype.getRenderableIds=function(h){var g=this,w=[];for(var C in this._tiles)this._isIdRenderable(C,h)&&w.push(this._tiles[C]);return h?w.sort(function(T,I){var M=T.tileID,L=I.tileID,$=new v.Point(M.canonical.x,M.canonical.y)._rotate(g.transform.angle),q=new v.Point(L.canonical.x,L.canonical.y)._rotate(g.transform.angle);return M.overscaledZ-L.overscaledZ||q.y-$.y||q.x-$.x}).map(function(T){return T.tileID.key}):w.map(function(T){return T.tileID}).sort(re).map(function(T){return T.key})},f.prototype.hasRenderableParent=function(h){var g=this.findLoadedParent(h,0);return!!g&&this._isIdRenderable(g.tileID.key)},f.prototype._isIdRenderable=function(h,g){return this._tiles[h]&&this._tiles[h].hasData()&&!this._coveredTiles[h]&&(g||!this._tiles[h].holdingForFade())},f.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var h in this._cache.reset(),this._tiles)"errored"!==this._tiles[h].state&&this._reloadTile(h,"reloading")},f.prototype._reloadTile=function(h,g){var w=this._tiles[h];w&&("loading"!==w.state&&(w.state=g),this._loadTile(w,this._tileLoaded.bind(this,w,h,g)))},f.prototype._tileLoaded=function(h,g,w,C){if(C)return h.state="errored",void(404!==C.status?this._source.fire(new v.ErrorEvent(C,{tile:h})):this.update(this.transform));h.timeAdded=v.browser.now(),"expired"===w&&(h.refreshedUponExpiration=!0),this._setTileReloadTimer(g,h),"raster-dem"===this.getSource().type&&h.dem&&this._backfillDEM(h),this._state.initializeTileState(h,this.map?this.map.painter:null),this._source.fire(new v.Event("data",{dataType:"source",tile:h,coord:h.tileID}))},f.prototype._backfillDEM=function(h){for(var g=this.getRenderableIds(),w=0;w<g.length;w++){var C=g[w];if(h.neighboringTiles&&h.neighboringTiles[C]){var T=this.getTileByID(C);I(h,T),I(T,h)}}function I(M,L){M.needsHillshadePrepare=!0;var $=L.tileID.canonical.x-M.tileID.canonical.x,q=L.tileID.canonical.y-M.tileID.canonical.y,j=Math.pow(2,M.tileID.canonical.z),ne=L.tileID.key;0===$&&0===q||Math.abs(q)>1||(Math.abs($)>1&&(1===Math.abs($+j)?$+=j:1===Math.abs($-j)&&($-=j)),L.dem&&M.dem&&(M.dem.backfillBorder(L.dem,$,q),M.neighboringTiles&&M.neighboringTiles[ne]&&(M.neighboringTiles[ne].backfilled=!0)))}},f.prototype.getTile=function(h){return this.getTileByID(h.key)},f.prototype.getTileByID=function(h){return this._tiles[h]},f.prototype._retainLoadedChildren=function(h,g,w,C){for(var T in this._tiles){var I=this._tiles[T];if(!(C[T]||!I.hasData()||I.tileID.overscaledZ<=g||I.tileID.overscaledZ>w)){for(var M=I.tileID;I&&I.tileID.overscaledZ>g+1;){var L=I.tileID.scaledTo(I.tileID.overscaledZ-1);(I=this._tiles[L.key])&&I.hasData()&&(M=L)}for(var $=M;$.overscaledZ>g;)if(h[($=$.scaledTo($.overscaledZ-1)).key]){C[M.key]=M;break}}}},f.prototype.findLoadedParent=function(h,g){if(h.key in this._loadedParentTiles){var w=this._loadedParentTiles[h.key];return w&&w.tileID.overscaledZ>=g?w:null}for(var C=h.overscaledZ-1;C>=g;C--){var T=h.scaledTo(C),I=this._getLoadedTile(T);if(I)return I}},f.prototype._getLoadedTile=function(h){var g=this._tiles[h.key];return g&&g.hasData()?g:this._cache.getByKey(h.wrapped().key)},f.prototype.updateCacheSize=function(h){var g=Math.ceil(h.width/this._source.tileSize)+1,w=Math.ceil(h.height/this._source.tileSize)+1,C=Math.floor(g*w*5),T="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,C):C;this._cache.setMaxSize(T)},f.prototype.handleWrapJump=function(h){var g=Math.round((h-(void 0===this._prevLng?h:this._prevLng))/360);if(this._prevLng=h,g){var w={};for(var C in this._tiles){var T=this._tiles[C];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+g),w[T.tileID.key]=T}for(var I in this._tiles=w,this._timers)clearTimeout(this._timers[I]),delete this._timers[I];for(var M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}},f.prototype.update=function(h){var g=this;if(this.transform=h,this._sourceLoaded&&!this._paused){var w;this.updateCacheSize(h),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?w=h.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ne){return new v.OverscaledTileID(Ne.canonical.z,Ne.wrap,Ne.canonical.z,Ne.canonical.x,Ne.canonical.y)}):(w=h.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(w=w.filter(function(Ne){return g._source.hasTile(Ne)}))):w=[];var C=h.coveringZoomLevel(this._source),T=Math.max(C-f.maxOverzooming,this._source.minzoom),I=Math.max(C+f.maxUnderzooming,this._source.minzoom),M=this._updateRetainedTiles(w,C);if(ze(this._source.type)){for(var L={},$={},q=0,j=Object.keys(M);q<j.length;q+=1){var ne=j[q],J=M[ne],ae=this._tiles[ne];if(ae&&!(ae.fadeEndTime&&ae.fadeEndTime<=v.browser.now())){var ee=this.findLoadedParent(J,T);ee&&(this._addTile(ee.tileID),L[ee.tileID.key]=ee.tileID),$[ne]=J}}for(var ie in this._retainLoadedChildren($,C,I,M),L)M[ie]||(this._coveredTiles[ie]=!0,M[ie]=L[ie])}for(var pe in M)this._tiles[pe].clearFadeHold();for(var ve=0,ke=v.keysDifference(this._tiles,M);ve<ke.length;ve+=1){var Ee=ke[ve],Ae=this._tiles[Ee];Ae.hasSymbolBuckets&&!Ae.holdingForFade()?Ae.setHoldDuration(this.map._fadeDuration):Ae.hasSymbolBuckets&&!Ae.symbolFadeFinished()||this._removeTile(Ee)}this._updateLoadedParentTileCache()}},f.prototype.releaseSymbolFadeTiles=function(){for(var h in this._tiles)this._tiles[h].holdingForFade()&&this._removeTile(h)},f.prototype._updateRetainedTiles=function(h,g){for(var w={},C={},T=Math.max(g-f.maxOverzooming,this._source.minzoom),I=Math.max(g+f.maxUnderzooming,this._source.minzoom),M={},L=0,$=h;L<$.length;L+=1){var q=$[L],j=this._addTile(q);w[q.key]=q,j.hasData()||g<this._source.maxzoom&&(M[q.key]=q)}this._retainLoadedChildren(M,g,I,w);for(var ne=0,J=h;ne<J.length;ne+=1){var ae=J[ne],ee=this._tiles[ae.key];if(!ee.hasData()){if(g+1>this._source.maxzoom){var ie=ae.children(this._source.maxzoom)[0],pe=this.getTile(ie);if(pe&&pe.hasData()){w[ie.key]=ie;continue}}else{var ve=ae.children(this._source.maxzoom);if(w[ve[0].key]&&w[ve[1].key]&&w[ve[2].key]&&w[ve[3].key])continue}for(var ke=ee.wasRequested(),Ee=ae.overscaledZ-1;Ee>=T;--Ee){var Ae=ae.scaledTo(Ee);if(C[Ae.key]||(C[Ae.key]=!0,!(ee=this.getTile(Ae))&&ke&&(ee=this._addTile(Ae)),ee&&(w[Ae.key]=Ae,ke=ee.wasRequested(),ee.hasData())))break}}}return w},f.prototype._updateLoadedParentTileCache=function(){for(var h in this._loadedParentTiles={},this._tiles){for(var g=[],w=void 0,C=this._tiles[h].tileID;C.overscaledZ>0;){if(C.key in this._loadedParentTiles){w=this._loadedParentTiles[C.key];break}g.push(C.key);var T=C.scaledTo(C.overscaledZ-1);if(w=this._getLoadedTile(T))break;C=T}for(var I=0,M=g;I<M.length;I+=1)this._loadedParentTiles[M[I]]=w}},f.prototype._addTile=function(h){var g=this._tiles[h.key];if(g)return g;(g=this._cache.getAndRemove(h))&&(this._setTileReloadTimer(h.key,g),g.tileID=h,this._state.initializeTileState(g,this.map?this.map.painter:null),this._cacheTimers[h.key]&&(clearTimeout(this._cacheTimers[h.key]),delete this._cacheTimers[h.key],this._setTileReloadTimer(h.key,g)));var w=!!g;return w||(g=new v.Tile(h,this._source.tileSize*h.overscaleFactor()),this._loadTile(g,this._tileLoaded.bind(this,g,h.key,g.state))),g?(g.uses++,this._tiles[h.key]=g,w||this._source.fire(new v.Event("dataloading",{tile:g,coord:g.tileID,dataType:"source"})),g):null},f.prototype._setTileReloadTimer=function(h,g){var w=this;h in this._timers&&(clearTimeout(this._timers[h]),delete this._timers[h]);var C=g.getExpiryTimeout();C&&(this._timers[h]=setTimeout(function(){w._reloadTile(h,"expired"),delete w._timers[h]},C))},f.prototype._removeTile=function(h){var g=this._tiles[h];g&&(g.uses--,delete this._tiles[h],this._timers[h]&&(clearTimeout(this._timers[h]),delete this._timers[h]),g.uses>0||(g.hasData()&&"reloading"!==g.state?this._cache.add(g.tileID,g,g.getExpiryTimeout()):(g.aborted=!0,this._abortTile(g),this._unloadTile(g))))},f.prototype.clearTiles=function(){for(var h in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(h);this._cache.reset()},f.prototype.tilesIn=function(h,g,w){var C=this,T=[],I=this.transform;if(!I)return T;for(var M=w?I.getCameraQueryGeometry(h):h,L=h.map(function(Ee){return I.pointCoordinate(Ee)}),$=M.map(function(Ee){return I.pointCoordinate(Ee)}),q=this.getIds(),j=1/0,ne=1/0,J=-1/0,ae=-1/0,ee=0,ie=$;ee<ie.length;ee+=1){var pe=ie[ee];j=Math.min(j,pe.x),ne=Math.min(ne,pe.y),J=Math.max(J,pe.x),ae=Math.max(ae,pe.y)}for(var ve=function(Ee){var Ae=C._tiles[q[Ee]];if(!Ae.holdingForFade()){var Ne=Ae.tileID,Ze=Math.pow(2,I.zoom-Ae.tileID.overscaledZ),He=g*Ae.queryPadding*v.EXTENT/Ae.tileSize/Ze,it=[Ne.getTilePoint(new v.MercatorCoordinate(j,ne)),Ne.getTilePoint(new v.MercatorCoordinate(J,ae))];if(it[0].x-He<v.EXTENT&&it[0].y-He<v.EXTENT&&it[1].x+He>=0&&it[1].y+He>=0){var _t=L.map(function(bt){return Ne.getTilePoint(bt)}),xt=$.map(function(bt){return Ne.getTilePoint(bt)});T.push({tile:Ae,tileID:Ne,queryGeometry:_t,cameraQueryGeometry:xt,scale:Ze})}}},ke=0;ke<q.length;ke++)ve(ke);return T},f.prototype.getVisibleCoordinates=function(h){for(var g=this,w=this.getRenderableIds(h).map(function(M){return g._tiles[M].tileID}),C=0,T=w;C<T.length;C+=1){var I=T[C];I.posMatrix=this.transform.calculatePosMatrix(I.toUnwrapped())}return w},f.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ze(this._source.type))for(var h in this._tiles){var g=this._tiles[h];if(void 0!==g.fadeEndTime&&g.fadeEndTime>=v.browser.now())return!0}return!1},f.prototype.setFeatureState=function(h,g,w){this._state.updateState(h=h||"_geojsonTileLayer",g,w)},f.prototype.removeFeatureState=function(h,g,w){this._state.removeFeatureState(h=h||"_geojsonTileLayer",g,w)},f.prototype.getFeatureState=function(h,g){return this._state.getState(h=h||"_geojsonTileLayer",g)},f.prototype.setDependencies=function(h,g,w){var C=this._tiles[h];C&&C.setDependencies(g,w)},f.prototype.reloadTilesForDependencies=function(h,g){for(var w in this._tiles)this._tiles[w].hasDependency(h,g)&&this._reloadTile(w,"reloading");this._cache.filter(function(C){return!C.hasDependency(h,g)})},f}(v.Evented);function re(d,f){var h=Math.abs(2*d.wrap)-+(d.wrap<0),g=Math.abs(2*f.wrap)-+(f.wrap<0);return d.overscaledZ-f.overscaledZ||g-h||f.canonical.y-d.canonical.y||f.canonical.x-d.canonical.x}function ze(d){return"raster"===d||"image"===d||"video"===d}function Ke(){return new v.window.Worker(zp.workerUrl)}W.maxOverzooming=10,W.maxUnderzooming=3;var Ce="mapboxgl_preloaded_worker_pool",je=function(){this.active={}};je.prototype.acquire=function(d){if(!this.workers)for(this.workers=[];this.workers.length<je.workerCount;)this.workers.push(new Ke);return this.active[d]=!0,this.workers.slice()},je.prototype.release=function(d){delete this.active[d],0===this.numActive()&&(this.workers.forEach(function(f){f.terminate()}),this.workers=null)},je.prototype.isPreloaded=function(){return!!this.active[Ce]},je.prototype.numActive=function(){return Object.keys(this.active).length};var st,lt=Math.floor(v.browser.hardwareConcurrency/2);function gt(){return st||(st=new je),st}function Pe(d,f){var h={};for(var g in d)"ref"!==g&&(h[g]=d[g]);return v.refProperties.forEach(function(w){w in f&&(h[w]=f[w])}),h}function et(d){d=d.slice();for(var f=Object.create(null),h=0;h<d.length;h++)f[d[h].id]=d[h];for(var g=0;g<d.length;g++)"ref"in d[g]&&(d[g]=Pe(d[g],f[d[g].ref]));return d}je.workerCount=Math.max(Math.min(lt,6),1);var Be={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Zt(d,f,h){h.push({command:Be.addSource,args:[d,f[d]]})}function Kt(d,f,h){f.push({command:Be.removeSource,args:[d]}),h[d]=!0}function se(d,f,h,g){Kt(d,h,g),Zt(d,f,h)}function ar(d,f,h){var g;for(g in d[h])if(d[h].hasOwnProperty(g)&&"data"!==g&&!v.deepEqual(d[h][g],f[h][g]))return!1;for(g in f[h])if(f[h].hasOwnProperty(g)&&"data"!==g&&!v.deepEqual(d[h][g],f[h][g]))return!1;return!0}function Lt(d,f,h,g,w,C){var T;for(T in f=f||{},d=d||{})d.hasOwnProperty(T)&&(v.deepEqual(d[T],f[T])||h.push({command:C,args:[g,T,f[T],w]}));for(T in f)f.hasOwnProperty(T)&&!d.hasOwnProperty(T)&&(v.deepEqual(d[T],f[T])||h.push({command:C,args:[g,T,f[T],w]}))}function tn(d){return d.id}function wr(d,f){return d[f.id]=f,d}var Pn=function(d,f){this.reset(d,f)};Pn.prototype.reset=function(d,f){this.points=d||[],this._distances=[0];for(var h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Pn.prototype.lerp=function(d){if(1===this.points.length)return this.points[0];d=v.clamp(d,0,1);for(var f=1,h=this._distances[f],g=d*this.paddedLength+this.padding;h<g&&f<this._distances.length;)h=this._distances[++f];var w=f-1,C=this._distances[w],T=h-C,I=T>0?(g-C)/T:0;return this.points[w].mult(1-I).add(this.points[f].mult(I))};var dt=function(d,f,h){var g=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(d/h),this.yCellCount=Math.ceil(f/h);for(var C=0;C<this.xCellCount*this.yCellCount;C++)g.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=d,this.height=f,this.xScale=this.xCellCount/d,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0};function Rr(d,f,h,g,w){var C=v.create();return f?(v.scale(C,C,[1/w,1/w,1]),h||v.rotateZ(C,C,g.angle)):v.multiply(C,g.labelPlaneMatrix,d),C}function bn(d,f,h,g,w){if(f){var C=v.clone(d);return v.scale(C,C,[w,w,1]),h||v.rotateZ(C,C,-g.angle),C}return g.glCoordMatrix}function dn(d,f){var h=[d.x,d.y,0,1];Js(h,h,f);var g=h[3];return{point:new v.Point(h[0]/g,h[1]/g),signedDistanceFromCamera:g}}function Rd(d,f){return.5+d/f*.5}function vn(d,f){var h=d[0]/d[3],g=d[1]/d[3];return h>=-f[0]&&h<=f[0]&&g>=-f[1]&&g<=f[1]}function Wn(d,f,h,g,w,C,T,I){var M=g?d.textSizeData:d.iconSizeData,L=v.evaluateSizeForZoom(M,h.transform.zoom),$=[256/h.width*2+1,256/h.height*2+1],q=g?d.text.dynamicLayoutVertexArray:d.icon.dynamicLayoutVertexArray;q.clear();for(var j=d.lineVertexArray,ne=g?d.text.placedSymbolArray:d.icon.placedSymbolArray,J=h.transform.width/h.transform.height,ae=!1,ee=0;ee<ne.length;ee++){var ie=ne.get(ee);if(ie.hidden||ie.writingMode===v.WritingMode.vertical&&!ae)So(ie.numGlyphs,q);else{ae=!1;var pe=[ie.anchorX,ie.anchorY,0,1];if(v.transformMat4(pe,pe,f),vn(pe,$)){var ve=Rd(h.transform.cameraToCenterDistance,pe[3]),ke=v.evaluateSizeForFeature(M,L,ie),Ee=T?ke/ve:ke*ve,Ae=new v.Point(ie.anchorX,ie.anchorY),Ne=dn(Ae,w).point,Ze={},He=xr(ie,Ee,!1,I,f,w,C,d.glyphOffsetArray,j,q,Ne,Ae,Ze,J);ae=He.useVertical,(He.notEnoughRoom||ae||He.needsFlipping&&xr(ie,Ee,!0,I,f,w,C,d.glyphOffsetArray,j,q,Ne,Ae,Ze,J).notEnoughRoom)&&So(ie.numGlyphs,q)}else So(ie.numGlyphs,q)}}g?d.text.dynamicLayoutVertexBuffer.updateData(q):d.icon.dynamicLayoutVertexBuffer.updateData(q)}function fn(d,f,h,g,w,C,T,I,M,L,$){var q=I.glyphStartIndex+I.numGlyphs,j=I.lineStartIndex,ne=I.lineStartIndex+I.lineLength,J=f.getoffsetX(I.glyphStartIndex),ae=f.getoffsetX(q-1),ee=Nc(d*J,h,g,w,C,T,I.segment,j,ne,M,L,$);if(!ee)return null;var ie=Nc(d*ae,h,g,w,C,T,I.segment,j,ne,M,L,$);return ie?{first:ee,last:ie}:null}function ei(d,f,h,g){return d===v.WritingMode.horizontal&&Math.abs(h.y-f.y)>Math.abs(h.x-f.x)*g?{useVertical:!0}:(d===v.WritingMode.vertical?f.y<h.y:f.x>h.x)?{needsFlipping:!0}:null}function xr(d,f,h,g,w,C,T,I,M,L,$,q,j,ne){var J,ae=f/24,ee=d.lineOffsetX*ae,ie=d.lineOffsetY*ae;if(d.numGlyphs>1){var pe=d.glyphStartIndex+d.numGlyphs,ve=d.lineStartIndex,ke=d.lineStartIndex+d.lineLength,Ee=fn(ae,I,ee,ie,h,$,q,d,M,C,j);if(!Ee)return{notEnoughRoom:!0};var Ae=dn(Ee.first.point,T).point,Ne=dn(Ee.last.point,T).point;if(g&&!h){var Ze=ei(d.writingMode,Ae,Ne,ne);if(Ze)return Ze}J=[Ee.first];for(var He=d.glyphStartIndex+1;He<pe-1;He++)J.push(Nc(ae*I.getoffsetX(He),ee,ie,h,$,q,d.segment,ve,ke,M,C,j));J.push(Ee.last)}else{if(g&&!h){var it=dn(q,w).point,_t=d.lineStartIndex+d.segment+1,xt=new v.Point(M.getx(_t),M.gety(_t)),bt=dn(xt,w),hn=bt.signedDistanceFromCamera>0?bt.point:Ig(q,xt,it,1,w),at=ei(d.writingMode,it,hn,ne);if(at)return at}var qt=Nc(ae*I.getoffsetX(d.glyphStartIndex),ee,ie,h,$,q,d.segment,d.lineStartIndex,d.lineStartIndex+d.lineLength,M,C,j);if(!qt)return{notEnoughRoom:!0};J=[qt]}for(var ln=0,Ye=J;ln<Ye.length;ln+=1){var Pt=Ye[ln];v.addDynamicAttributes(L,Pt.point,Pt.angle)}return{}}function Ig(d,f,h,g,w){var C=dn(d.add(d.sub(f)._unit()),w).point,T=h.sub(C);return h.add(T._mult(g/T.mag()))}function Nc(d,f,h,g,w,C,T,I,M,L,$,q){var j=g?d-f:d+f,ne=j>0?1:-1,J=0;g&&(ne*=-1,J=Math.PI),ne<0&&(J+=Math.PI);for(var ae=ne>0?I+T:I+T+1,ee=w,ie=w,pe=0,ve=0,ke=Math.abs(j),Ee=[];pe+ve<=ke;){if((ae+=ne)<I||ae>=M)return null;if(ie=ee,Ee.push(ee),void 0===(ee=q[ae])){var Ae=new v.Point(L.getx(ae),L.gety(ae)),Ne=dn(Ae,$);if(Ne.signedDistanceFromCamera>0)ee=q[ae]=Ne.point;else{var Ze=ae-ne;ee=Ig(0===pe?C:new v.Point(L.getx(Ze),L.gety(Ze)),Ae,ie,ke-pe+1,$)}}pe+=ve,ve=ie.dist(ee)}var He=(ke-pe)/ve,it=ee.sub(ie),_t=it.mult(He)._add(ie);_t._add(it._unit()._perp()._mult(h*ne));var xt=J+Math.atan2(ee.y-ie.y,ee.x-ie.x);return Ee.push(_t),{point:_t,angle:xt,path:Ee}}dt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},dt.prototype.insert=function(d,f,h,g,w){this._forEachCell(f,h,g,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(d),this.bboxes.push(f),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(w)},dt.prototype.insertCircle=function(d,f,h,g){this._forEachCell(f-g,h-g,f+g,h+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(d),this.circles.push(f),this.circles.push(h),this.circles.push(g)},dt.prototype._insertBoxCell=function(d,f,h,g,w,C){this.boxCells[w].push(C)},dt.prototype._insertCircleCell=function(d,f,h,g,w,C){this.circleCells[w].push(C)},dt.prototype._query=function(d,f,h,g,w,C){if(h<0||d>this.width||g<0||f>this.height)return!w&&[];var T=[];if(d<=0&&f<=0&&this.width<=h&&this.height<=g){if(w)return!0;for(var I=0;I<this.boxKeys.length;I++)T.push({key:this.boxKeys[I],x1:this.bboxes[4*I],y1:this.bboxes[4*I+1],x2:this.bboxes[4*I+2],y2:this.bboxes[4*I+3]});for(var M=0;M<this.circleKeys.length;M++){var L=this.circles[3*M],$=this.circles[3*M+1],q=this.circles[3*M+2];T.push({key:this.circleKeys[M],x1:L-q,y1:$-q,x2:L+q,y2:$+q})}return C?T.filter(C):T}return this._forEachCell(d,f,h,g,this._queryCell,T,{hitTest:w,seenUids:{box:{},circle:{}}},C),w?T.length>0:T},dt.prototype._queryCircle=function(d,f,h,g,w){var C=d-h,T=d+h,I=f-h,M=f+h;if(T<0||C>this.width||M<0||I>this.height)return!g&&[];var L=[];return this._forEachCell(C,I,T,M,this._queryCellCircle,L,{hitTest:g,circle:{x:d,y:f,radius:h},seenUids:{box:{},circle:{}}},w),g?L.length>0:L},dt.prototype.query=function(d,f,h,g,w){return this._query(d,f,h,g,!1,w)},dt.prototype.hitTest=function(d,f,h,g,w){return this._query(d,f,h,g,!0,w)},dt.prototype.hitTestCircle=function(d,f,h,g){return this._queryCircle(d,f,h,!0,g)},dt.prototype._queryCell=function(d,f,h,g,w,C,T,I){var M=T.seenUids,L=this.boxCells[w];if(null!==L)for(var $=this.bboxes,q=0,j=L;q<j.length;q+=1){var ne=j[q];if(!M.box[ne]){M.box[ne]=!0;var J=4*ne;if(d<=$[J+2]&&f<=$[J+3]&&h>=$[J+0]&&g>=$[J+1]&&(!I||I(this.boxKeys[ne]))){if(T.hitTest)return C.push(!0),!0;C.push({key:this.boxKeys[ne],x1:$[J],y1:$[J+1],x2:$[J+2],y2:$[J+3]})}}}var ae=this.circleCells[w];if(null!==ae)for(var ee=this.circles,ie=0,pe=ae;ie<pe.length;ie+=1){var ve=pe[ie];if(!M.circle[ve]){M.circle[ve]=!0;var ke=3*ve;if(this._circleAndRectCollide(ee[ke],ee[ke+1],ee[ke+2],d,f,h,g)&&(!I||I(this.circleKeys[ve]))){if(T.hitTest)return C.push(!0),!0;var Ee=ee[ke],Ae=ee[ke+1],Ne=ee[ke+2];C.push({key:this.circleKeys[ve],x1:Ee-Ne,y1:Ae-Ne,x2:Ee+Ne,y2:Ae+Ne})}}}},dt.prototype._queryCellCircle=function(d,f,h,g,w,C,T,I){var M=T.circle,L=T.seenUids,$=this.boxCells[w];if(null!==$)for(var q=this.bboxes,j=0,ne=$;j<ne.length;j+=1){var J=ne[j];if(!L.box[J]){L.box[J]=!0;var ae=4*J;if(this._circleAndRectCollide(M.x,M.y,M.radius,q[ae+0],q[ae+1],q[ae+2],q[ae+3])&&(!I||I(this.boxKeys[J])))return C.push(!0),!0}}var ee=this.circleCells[w];if(null!==ee)for(var ie=this.circles,pe=0,ve=ee;pe<ve.length;pe+=1){var ke=ve[pe];if(!L.circle[ke]){L.circle[ke]=!0;var Ee=3*ke;if(this._circlesCollide(ie[Ee],ie[Ee+1],ie[Ee+2],M.x,M.y,M.radius)&&(!I||I(this.circleKeys[ke])))return C.push(!0),!0}}},dt.prototype._forEachCell=function(d,f,h,g,w,C,T,I){for(var M=this._convertToXCellCoord(d),L=this._convertToYCellCoord(f),$=this._convertToXCellCoord(h),q=this._convertToYCellCoord(g),j=M;j<=$;j++)for(var ne=L;ne<=q;ne++)if(w.call(this,d,f,h,g,this.xCellCount*ne+j,C,T,I))return},dt.prototype._convertToXCellCoord=function(d){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(d*this.xScale)))},dt.prototype._convertToYCellCoord=function(d){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(d*this.yScale)))},dt.prototype._circlesCollide=function(d,f,h,g,w,C){var T=g-d,I=w-f,M=h+C;return M*M>T*T+I*I},dt.prototype._circleAndRectCollide=function(d,f,h,g,w,C,T){var I=(C-g)/2,M=Math.abs(d-(g+I));if(M>I+h)return!1;var L=(T-w)/2,$=Math.abs(f-(w+L));if($>L+h)return!1;if(M<=I||$<=L)return!0;var q=M-I,j=$-L;return q*q+j*j<=h*h};var Fi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function So(d,f){for(var h=0;h<d;h++){var g=f.length;f.resize(g+4),f.float32.set(Fi,3*g)}}function Js(d,f,h){var g=f[0],w=f[1];return d[0]=h[0]*g+h[4]*w+h[12],d[1]=h[1]*g+h[5]*w+h[13],d[3]=h[3]*g+h[7]*w+h[15],d}var Dr=function(d,f,h){void 0===f&&(f=new dt(d.width+200,d.height+200,25)),void 0===h&&(h=new dt(d.width+200,d.height+200,25)),this.transform=d,this.grid=f,this.ignoredGrid=h,this.pitchfactor=Math.cos(d._pitch)*d.cameraToCenterDistance,this.screenRightBoundary=d.width+100,this.screenBottomBoundary=d.height+100,this.gridRightBoundary=d.width+200,this.gridBottomBoundary=d.height+200};function Jo(d,f,h){return f*(v.EXTENT/(d.tileSize*Math.pow(2,h-d.tileID.overscaledZ)))}Dr.prototype.placeCollisionBox=function(d,f,h,g,w){var C=this.projectAndGetPerspectiveRatio(g,d.anchorPointX,d.anchorPointY),T=h*C.perspectiveRatio,I=d.x1*T+C.point.x,M=d.y1*T+C.point.y,L=d.x2*T+C.point.x,$=d.y2*T+C.point.y;return!this.isInsideGrid(I,M,L,$)||!f&&this.grid.hitTest(I,M,L,$,w)?{box:[],offscreen:!1}:{box:[I,M,L,$],offscreen:this.isOffscreen(I,M,L,$)}},Dr.prototype.placeCollisionCircles=function(d,f,h,g,w,C,T,I,M,L,$,q,j){var ne=[],J=new v.Point(f.anchorX,f.anchorY),ae=dn(J,C),ee=Rd(this.transform.cameraToCenterDistance,ae.signedDistanceFromCamera),ie=(L?w/ee:w*ee)/v.ONE_EM,pe=dn(J,T).point,ve=fn(ie,g,f.lineOffsetX*ie,f.lineOffsetY*ie,!1,pe,J,f,h,T,{}),ke=!1,Ee=!1,Ae=!0;if(ve){for(var Ne=.5*q*ee+j,Ze=new v.Point(-100,-100),He=new v.Point(this.screenRightBoundary,this.screenBottomBoundary),it=new Pn,_t=ve.first,xt=ve.last,bt=[],hn=_t.path.length-1;hn>=1;hn--)bt.push(_t.path[hn]);for(var at=1;at<xt.path.length;at++)bt.push(xt.path[at]);var qt=2.5*Ne;if(I){var ln=bt.map(function(Bt){return dn(Bt,I)});bt=ln.some(function(Bt){return Bt.signedDistanceFromCamera<=0})?[]:ln.map(function(Bt){return Bt.point})}var Ye=[];if(bt.length>0){for(var Pt=bt[0].clone(),Vt=bt[0].clone(),Ot=1;Ot<bt.length;Ot++)Pt.x=Math.min(Pt.x,bt[Ot].x),Pt.y=Math.min(Pt.y,bt[Ot].y),Vt.x=Math.max(Vt.x,bt[Ot].x),Vt.y=Math.max(Vt.y,bt[Ot].y);Ye=Pt.x>=Ze.x&&Vt.x<=He.x&&Pt.y>=Ze.y&&Vt.y<=He.y?[bt]:Vt.x<Ze.x||Pt.x>He.x||Vt.y<Ze.y||Pt.y>He.y?[]:v.clipLine([bt],Ze.x,Ze.y,He.x,He.y)}for(var Tt=0,nr=Ye;Tt<nr.length;Tt+=1){var Br;it.reset(nr[Tt],.25*Ne),Br=it.length<=.5*Ne?1:Math.ceil(it.paddedLength/qt)+1;for(var oo=0;oo<Br;oo++){var fi=oo/Math.max(Br-1,1),pi=it.lerp(fi),Zr=pi.x+100,ko=pi.y+100;ne.push(Zr,ko,Ne,0);var La=Zr-Ne,go=ko-Ne,Me=Zr+Ne,Ft=ko+Ne;if(Ae=Ae&&this.isOffscreen(La,go,Me,Ft),Ee=Ee||this.isInsideGrid(La,go,Me,Ft),!d&&this.grid.hitTestCircle(Zr,ko,Ne,$)&&(ke=!0,!M))return{circles:[],offscreen:!1,collisionDetected:ke}}}}return{circles:!M&&ke||!Ee?[]:ne,offscreen:Ae,collisionDetected:ke}},Dr.prototype.queryRenderedSymbols=function(d){if(0===d.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var f=[],h=1/0,g=1/0,w=-1/0,C=-1/0,T=0,I=d;T<I.length;T+=1){var M=I[T],L=new v.Point(M.x+100,M.y+100);h=Math.min(h,L.x),g=Math.min(g,L.y),w=Math.max(w,L.x),C=Math.max(C,L.y),f.push(L)}for(var $={},q={},j=0,ne=this.grid.query(h,g,w,C).concat(this.ignoredGrid.query(h,g,w,C));j<ne.length;j+=1){var J=ne[j],ae=J.key;if(void 0===$[ae.bucketInstanceId]&&($[ae.bucketInstanceId]={}),!$[ae.bucketInstanceId][ae.featureIndex]){var ee=[new v.Point(J.x1,J.y1),new v.Point(J.x2,J.y1),new v.Point(J.x2,J.y2),new v.Point(J.x1,J.y2)];v.polygonIntersectsPolygon(f,ee)&&($[ae.bucketInstanceId][ae.featureIndex]=!0,void 0===q[ae.bucketInstanceId]&&(q[ae.bucketInstanceId]=[]),q[ae.bucketInstanceId].push(ae.featureIndex))}}return q},Dr.prototype.insertCollisionBox=function(d,f,h,g,w){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:h,featureIndex:g,collisionGroupID:w},d[0],d[1],d[2],d[3])},Dr.prototype.insertCollisionCircles=function(d,f,h,g,w){for(var C=f?this.ignoredGrid:this.grid,T={bucketInstanceId:h,featureIndex:g,collisionGroupID:w},I=0;I<d.length;I+=4)C.insertCircle(T,d[I],d[I+1],d[I+2])},Dr.prototype.projectAndGetPerspectiveRatio=function(d,f,h){var g=[f,h,0,1];return Js(g,g,d),{point:new v.Point((g[0]/g[3]+1)/2*this.transform.width+100,(-g[1]/g[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/g[3]*.5}},Dr.prototype.isOffscreen=function(d,f,h,g){return h<100||d>=this.screenRightBoundary||g<100||f>this.screenBottomBoundary},Dr.prototype.isInsideGrid=function(d,f,h,g){return h>=0&&d<this.gridRightBoundary&&g>=0&&f<this.gridBottomBoundary},Dr.prototype.getViewportMatrix=function(){var d=v.identity([]);return v.translate(d,d,[-100,-100,0]),d};var lo=function(d,f,h,g){this.opacity=d?Math.max(0,Math.min(1,d.opacity+(d.placed?f:-f))):g&&h?1:0,this.placed=h};lo.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var es=function(d,f,h,g,w){this.text=new lo(d?d.text:null,f,h,w),this.icon=new lo(d?d.icon:null,f,g,w)};es.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var jl=function(d,f,h){this.text=d,this.icon=f,this.skipFade=h},Zy=function(){this.invProjMatrix=v.create(),this.viewportMatrix=v.create(),this.circles=[]},ea=function(d,f,h,g,w){this.bucketInstanceId=d,this.featureIndex=f,this.sourceLayerIndex=h,this.bucketIndex=g,this.tileID=w},co=function(d){this.crossSourceCollisions=d,this.maxGroupID=0,this.collisionGroups={}};function Dt(d,f,h,g,w){var C=v.getAnchorAlignment(d),T=-(C.horizontalAlign-.5)*f,I=-(C.verticalAlign-.5)*h,M=v.evaluateVariableOffset(d,g);return new v.Point(T+M[0]*w,I+M[1]*w)}function eo(d,f,h,g,w,C){var T=d.x1,I=d.x2,M=d.y1,L=d.y2,$=d.anchorPointX,q=d.anchorPointY,j=new v.Point(f,h);return g&&j._rotate(w?C:-C),{x1:T+j.x,y1:M+j.y,x2:I+j.x,y2:L+j.y,anchorPointX:$,anchorPointY:q}}co.prototype.get=function(d){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[d]){var f=++this.maxGroupID;this.collisionGroups[d]={ID:f,predicate:function(h){return h.collisionGroupID===f}}}return this.collisionGroups[d]};var wi=function(d,f,h,g){this.transform=d.clone(),this.collisionIndex=new Dr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new co(h),this.collisionCircleArrays={},this.prevPlacement=g,g&&(g.prevPlacement=void 0),this.placedOrientations={}};function Iu(d,f,h,g,w){d.emplaceBack(f?1:0,h?1:0,g||0,w||0),d.emplaceBack(f?1:0,h?1:0,g||0,w||0),d.emplaceBack(f?1:0,h?1:0,g||0,w||0),d.emplaceBack(f?1:0,h?1:0,g||0,w||0)}wi.prototype.getBucketParts=function(d,f,h,g){var w=h.getBucket(f),C=h.latestFeatureIndex;if(w&&C&&f.id===w.layerIds[0]){var T=h.collisionBoxArray,I=w.layers[0].layout,M=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),L=h.tileSize/v.EXTENT,$=this.transform.calculatePosMatrix(h.tileID.toUnwrapped()),q="map"===I.get("text-pitch-alignment"),j="map"===I.get("text-rotation-alignment"),ne=Jo(h,1,this.transform.zoom),J=Rr($,q,j,this.transform,ne),ae=null;if(q){var ee=bn($,q,j,this.transform,ne);ae=v.multiply([],this.transform.labelPlaneMatrix,ee)}this.retainedQueryData[w.bucketInstanceId]=new ea(w.bucketInstanceId,C,w.sourceLayerIndex,w.index,h.tileID);var ie={bucket:w,layout:I,posMatrix:$,textLabelPlaneMatrix:J,labelToScreenMatrix:ae,scale:M,textPixelRatio:L,holdingForFade:h.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:v.evaluateSizeForZoom(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(g)for(var pe=0,ve=w.sortKeyRanges;pe<ve.length;pe+=1){var ke=ve[pe];d.push({sortKey:ke.sortKey,symbolInstanceStart:ke.symbolInstanceStart,symbolInstanceEnd:ke.symbolInstanceEnd,parameters:ie})}else d.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:ie})}},wi.prototype.attemptAnchorPlacement=function(d,f,h,g,w,C,T,I,M,L,$,q,j,ne,J){var ae,ee=[q.textOffset0,q.textOffset1],ie=Dt(d,h,g,ee,w),pe=this.collisionIndex.placeCollisionBox(eo(f,ie.x,ie.y,C,T,this.transform.angle),$,I,M,L.predicate);if(!J||0!==this.collisionIndex.placeCollisionBox(eo(J,ie.x,ie.y,C,T,this.transform.angle),$,I,M,L.predicate).box.length)return pe.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID].text&&(ae=this.prevPlacement.variableOffsets[q.crossTileID].anchor),this.variableOffsets[q.crossTileID]={textOffset:ee,width:h,height:g,anchor:d,textBoxScale:w,prevAnchor:ae},this.markUsedJustification(j,d,q,ne),j.allowVerticalPlacement&&(this.markUsedOrientation(j,ne,q),this.placedOrientations[q.crossTileID]=ne),{shift:ie,placedGlyphBoxes:pe}):void 0},wi.prototype.placeLayerBucketPart=function(d,f,h){var g=this,w=d.parameters,C=w.bucket,T=w.layout,I=w.posMatrix,M=w.textLabelPlaneMatrix,L=w.labelToScreenMatrix,$=w.textPixelRatio,q=w.holdingForFade,j=w.collisionBoxArray,ne=w.partiallyEvaluatedTextSize,J=w.collisionGroup,ae=T.get("text-optional"),ee=T.get("icon-optional"),ie=T.get("text-allow-overlap"),pe=T.get("icon-allow-overlap"),ve="map"===T.get("text-rotation-alignment"),ke="map"===T.get("text-pitch-alignment"),Ee="none"!==T.get("icon-text-fit"),Ae="viewport-y"===T.get("symbol-z-order"),Ne=ie&&(pe||!C.hasIconData()||ee),Ze=pe&&(ie||!C.hasTextData()||ae);!C.collisionArrays&&j&&C.deserializeCollisionBoxes(j);var He=function(at,qt){if(!f[at.crossTileID])if(q)g.placements[at.crossTileID]=new jl(!1,!1,!1);else{var ln,Ye=!1,Pt=!1,Vt=!0,Ot=null,Tt={box:null,offscreen:null},nr={box:null,offscreen:null},Br=null,oo=null,fi=0,pi=0,Zr=0;qt.textFeatureIndex?fi=qt.textFeatureIndex:at.useRuntimeCollisionCircles&&(fi=at.featureIndex),qt.verticalTextFeatureIndex&&(pi=qt.verticalTextFeatureIndex);var ko=qt.textBox;if(ko){var La=function(Sr){var Nn=v.WritingMode.horizontal;if(C.allowVerticalPlacement&&!Sr&&g.prevPlacement){var Mr=g.prevPlacement.placedOrientations[at.crossTileID];Mr&&(g.placedOrientations[at.crossTileID]=Mr,g.markUsedOrientation(C,Nn=Mr,at))}return Nn},go=function(Sr,Nn){if(C.allowVerticalPlacement&&at.numVerticalGlyphVertices>0&&qt.verticalTextBox)for(var Mr=0,Hu=C.writingModes;Mr<Hu.length&&(Hu[Mr]===v.WritingMode.vertical?(Tt=Nn(),nr=Tt):Tt=Sr(),!(Tt&&Tt.box&&Tt.box.length));Mr+=1);else Tt=Sr()};if(T.get("text-variable-anchor")){var Me=T.get("text-variable-anchor");if(g.prevPlacement&&g.prevPlacement.variableOffsets[at.crossTileID]){var Ft=g.prevPlacement.variableOffsets[at.crossTileID];Me.indexOf(Ft.anchor)>0&&(Me=Me.filter(function(Sr){return Sr!==Ft.anchor})).unshift(Ft.anchor)}var Bt=function(Sr,Nn,Mr){for(var Hu=Sr.x2-Sr.x1,Gi=Sr.y2-Sr.y1,hl=at.textBoxScale,_f=Ee&&!pe?Nn:null,$d={box:[],offscreen:!1},Lg=ie?2*Me.length:Me.length,qd=0;qd<Lg;++qd){var Gc=g.attemptAnchorPlacement(Me[qd%Me.length],Sr,Hu,Gi,hl,ve,ke,$,I,J,qd>=Me.length,at,C,Mr,_f);if(Gc&&($d=Gc.placedGlyphBoxes)&&$d.box&&$d.box.length){Ye=!0,Ot=Gc.shift;break}}return $d};go(function(){return Bt(ko,qt.iconBox,v.WritingMode.horizontal)},function(){var Sr=qt.verticalTextBox;return C.allowVerticalPlacement&&!(Tt&&Tt.box&&Tt.box.length)&&at.numVerticalGlyphVertices>0&&Sr?Bt(Sr,qt.verticalIconBox,v.WritingMode.vertical):{box:null,offscreen:null}}),Tt&&(Ye=Tt.box,Vt=Tt.offscreen);var cn=La(Tt&&Tt.box);if(!Ye&&g.prevPlacement){var Gt=g.prevPlacement.variableOffsets[at.crossTileID];Gt&&(g.variableOffsets[at.crossTileID]=Gt,g.markUsedJustification(C,Gt.anchor,at,cn))}}else{var Hc=function(Sr,Nn){var Mr=g.collisionIndex.placeCollisionBox(Sr,ie,$,I,J.predicate);return Mr&&Mr.box&&Mr.box.length&&(g.markUsedOrientation(C,Nn,at),g.placedOrientations[at.crossTileID]=Nn),Mr};go(function(){return Hc(ko,v.WritingMode.horizontal)},function(){var Sr=qt.verticalTextBox;return C.allowVerticalPlacement&&at.numVerticalGlyphVertices>0&&Sr?Hc(Sr,v.WritingMode.vertical):{box:null,offscreen:null}}),La(Tt&&Tt.box&&Tt.box.length)}}if(Ye=(ln=Tt)&&ln.box&&ln.box.length>0,Vt=ln&&ln.offscreen,at.useRuntimeCollisionCircles){var oa=C.text.placedSymbolArray.get(at.centerJustifiedTextSymbolIndex),Rs=v.evaluateSizeForFeature(C.textSizeData,ne,oa),$c=T.get("text-padding");Br=g.collisionIndex.placeCollisionCircles(ie,oa,C.lineVertexArray,C.glyphOffsetArray,Rs,I,M,L,h,ke,J.predicate,at.collisionCircleDiameter,$c),Ye=ie||Br.circles.length>0&&!Br.collisionDetected,Vt=Vt&&Br.offscreen}if(qt.iconFeatureIndex&&(Zr=qt.iconFeatureIndex),qt.iconBox){var sa=function(Sr){var Nn=Ee&&Ot?eo(Sr,Ot.x,Ot.y,ve,ke,g.transform.angle):Sr;return g.collisionIndex.placeCollisionBox(Nn,pe,$,I,J.predicate)};Pt=nr&&nr.box&&nr.box.length&&qt.verticalIconBox?(oo=sa(qt.verticalIconBox)).box.length>0:(oo=sa(qt.iconBox)).box.length>0,Vt=Vt&&oo.offscreen}var qc=ae||0===at.numHorizontalGlyphVertices&&0===at.numVerticalGlyphVertices,Di=ee||0===at.numIconVertices;if(qc||Di?Di?qc||(Pt=Pt&&Ye):Ye=Pt&&Ye:Pt=Ye=Pt&&Ye,Ye&&ln&&ln.box&&g.collisionIndex.insertCollisionBox(ln.box,T.get("text-ignore-placement"),C.bucketInstanceId,nr&&nr.box&&pi?pi:fi,J.ID),Pt&&oo&&g.collisionIndex.insertCollisionBox(oo.box,T.get("icon-ignore-placement"),C.bucketInstanceId,Zr,J.ID),Br&&(Ye&&g.collisionIndex.insertCollisionCircles(Br.circles,T.get("text-ignore-placement"),C.bucketInstanceId,fi,J.ID),h)){var tc=C.bucketInstanceId,qs=g.collisionCircleArrays[tc];void 0===qs&&(qs=g.collisionCircleArrays[tc]=new Zy);for(var nc=0;nc<Br.circles.length;nc+=4)qs.circles.push(Br.circles[nc+0]),qs.circles.push(Br.circles[nc+1]),qs.circles.push(Br.circles[nc+2]),qs.circles.push(Br.collisionDetected?1:0)}g.placements[at.crossTileID]=new jl(Ye||Ne,Pt||Ze,Vt||C.justReloaded),f[at.crossTileID]=!0}};if(Ae)for(var it=C.getSortedSymbolIndexes(this.transform.angle),_t=it.length-1;_t>=0;--_t){var xt=it[_t];He(C.symbolInstances.get(xt),C.collisionArrays[xt])}else for(var bt=d.symbolInstanceStart;bt<d.symbolInstanceEnd;bt++)He(C.symbolInstances.get(bt),C.collisionArrays[bt]);if(h&&C.bucketInstanceId in this.collisionCircleArrays){var hn=this.collisionCircleArrays[C.bucketInstanceId];v.invert(hn.invProjMatrix,I),hn.viewportMatrix=this.collisionIndex.getViewportMatrix()}C.justReloaded=!1},wi.prototype.markUsedJustification=function(d,f,h,g){var w;w=g===v.WritingMode.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[v.getAnchorJustification(f)];for(var C=0,T=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];C<T.length;C+=1){var I=T[C];I>=0&&(d.text.placedSymbolArray.get(I).crossTileID=w>=0&&I!==w?0:h.crossTileID)}},wi.prototype.markUsedOrientation=function(d,f,h){for(var g=f===v.WritingMode.horizontal||f===v.WritingMode.horizontalOnly?f:0,w=f===v.WritingMode.vertical?f:0,C=0,T=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];C<T.length;C+=1)d.text.placedSymbolArray.get(T[C]).placedOrientation=g;h.verticalPlacedTextSymbolIndex&&(d.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=w)},wi.prototype.commit=function(d){this.commitTime=d,this.zoomAtLastRecencyCheck=this.transform.zoom;var f=this.prevPlacement,h=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;var g=f?f.symbolFadeChange(d):1,w=f?f.opacities:{},C=f?f.variableOffsets:{},T=f?f.placedOrientations:{};for(var I in this.placements){var M=this.placements[I],L=w[I];L?(this.opacities[I]=new es(L,g,M.text,M.icon),h=h||M.text!==L.text.placed||M.icon!==L.icon.placed):(this.opacities[I]=new es(null,g,M.text,M.icon,M.skipFade),h=h||M.text||M.icon)}for(var $ in w){var q=w[$];if(!this.opacities[$]){var j=new es(q,g,!1,!1);j.isHidden()||(this.opacities[$]=j,h=h||q.text.placed||q.icon.placed)}}for(var ne in C)this.variableOffsets[ne]||!this.opacities[ne]||this.opacities[ne].isHidden()||(this.variableOffsets[ne]=C[ne]);for(var J in T)this.placedOrientations[J]||!this.opacities[J]||this.opacities[J].isHidden()||(this.placedOrientations[J]=T[J]);h?this.lastPlacementChangeTime=d:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:d)},wi.prototype.updateLayerOpacities=function(d,f){for(var h={},g=0,w=f;g<w.length;g+=1){var C=w[g],T=C.getBucket(d);T&&C.latestFeatureIndex&&d.id===T.layerIds[0]&&this.updateBucketOpacities(T,h,C.collisionBoxArray)}},wi.prototype.updateBucketOpacities=function(d,f,h){var g=this;d.hasTextData()&&d.text.opacityVertexArray.clear(),d.hasIconData()&&d.icon.opacityVertexArray.clear(),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexArray.clear(),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexArray.clear();var w=d.layers[0].layout,C=new es(null,0,!1,!1,!0),T=w.get("text-allow-overlap"),I=w.get("icon-allow-overlap"),M=w.get("text-variable-anchor"),L="map"===w.get("text-rotation-alignment"),$="map"===w.get("text-pitch-alignment"),q="none"!==w.get("icon-text-fit"),j=new es(null,0,T&&(I||!d.hasIconData()||w.get("icon-optional")),I&&(T||!d.hasTextData()||w.get("text-optional")),!0);!d.collisionArrays&&h&&(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData())&&d.deserializeCollisionBoxes(h);for(var ne=function(ie,pe,ve){for(var ke=0;ke<pe/4;ke++)ie.opacityVertexArray.emplaceBack(ve)},J=function(ie){var pe=d.symbolInstances.get(ie),ve=pe.numHorizontalGlyphVertices,ke=pe.numVerticalGlyphVertices,Ee=pe.crossTileID,Ae=g.opacities[Ee];f[Ee]?Ae=C:Ae||(g.opacities[Ee]=Ae=j),f[Ee]=!0;var Ne=pe.numIconVertices>0,Ze=g.placedOrientations[pe.crossTileID],He=Ze===v.WritingMode.vertical,it=Ze===v.WritingMode.horizontal||Ze===v.WritingMode.horizontalOnly;if(ve>0||ke>0){var _t=Ap(Ae.text);ne(d.text,ve,He?Lc:_t),ne(d.text,ke,it?Lc:_t);var xt=Ae.text.isHidden();[pe.rightJustifiedTextSymbolIndex,pe.centerJustifiedTextSymbolIndex,pe.leftJustifiedTextSymbolIndex].forEach(function(Tt){Tt>=0&&(d.text.placedSymbolArray.get(Tt).hidden=xt||He?1:0)}),pe.verticalPlacedTextSymbolIndex>=0&&(d.text.placedSymbolArray.get(pe.verticalPlacedTextSymbolIndex).hidden=xt||it?1:0);var bt=g.variableOffsets[pe.crossTileID];bt&&g.markUsedJustification(d,bt.anchor,pe,Ze);var hn=g.placedOrientations[pe.crossTileID];hn&&(g.markUsedJustification(d,"left",pe,hn),g.markUsedOrientation(d,hn,pe))}if(Ne){var at=Ap(Ae.icon),qt=!(q&&pe.verticalPlacedIconSymbolIndex&&He);pe.placedIconSymbolIndex>=0&&(ne(d.icon,pe.numIconVertices,qt?at:Lc),d.icon.placedSymbolArray.get(pe.placedIconSymbolIndex).hidden=Ae.icon.isHidden()),pe.verticalPlacedIconSymbolIndex>=0&&(ne(d.icon,pe.numVerticalIconVertices,qt?Lc:at),d.icon.placedSymbolArray.get(pe.verticalPlacedIconSymbolIndex).hidden=Ae.icon.isHidden())}if(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData()){var ln=d.collisionArrays[ie];if(ln){var Ye=new v.Point(0,0);if(ln.textBox||ln.verticalTextBox){var Pt=!0;if(M){var Vt=g.variableOffsets[Ee];Vt?(Ye=Dt(Vt.anchor,Vt.width,Vt.height,Vt.textOffset,Vt.textBoxScale),L&&Ye._rotate($?g.transform.angle:-g.transform.angle)):Pt=!1}ln.textBox&&Iu(d.textCollisionBox.collisionVertexArray,Ae.text.placed,!Pt||He,Ye.x,Ye.y),ln.verticalTextBox&&Iu(d.textCollisionBox.collisionVertexArray,Ae.text.placed,!Pt||it,Ye.x,Ye.y)}var Ot=!(it||!ln.verticalIconBox);ln.iconBox&&Iu(d.iconCollisionBox.collisionVertexArray,Ae.icon.placed,Ot,q?Ye.x:0,q?Ye.y:0),ln.verticalIconBox&&Iu(d.iconCollisionBox.collisionVertexArray,Ae.icon.placed,!Ot,q?Ye.x:0,q?Ye.y:0)}}},ae=0;ae<d.symbolInstances.length;ae++)J(ae);if(d.sortFeatures(this.transform.angle),this.retainedQueryData[d.bucketInstanceId]&&(this.retainedQueryData[d.bucketInstanceId].featureSortOrder=d.featureSortOrder),d.hasTextData()&&d.text.opacityVertexBuffer&&d.text.opacityVertexBuffer.updateData(d.text.opacityVertexArray),d.hasIconData()&&d.icon.opacityVertexBuffer&&d.icon.opacityVertexBuffer.updateData(d.icon.opacityVertexArray),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexBuffer&&d.iconCollisionBox.collisionVertexBuffer.updateData(d.iconCollisionBox.collisionVertexArray),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexBuffer&&d.textCollisionBox.collisionVertexBuffer.updateData(d.textCollisionBox.collisionVertexArray),d.bucketInstanceId in this.collisionCircleArrays){var ee=this.collisionCircleArrays[d.bucketInstanceId];d.placementInvProjMatrix=ee.invProjMatrix,d.placementViewportMatrix=ee.viewportMatrix,d.collisionCircleArray=ee.circles,delete this.collisionCircleArrays[d.bucketInstanceId]}},wi.prototype.symbolFadeChange=function(d){return 0===this.fadeDuration?1:(d-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},wi.prototype.zoomAdjustment=function(d){return Math.max(0,(this.transform.zoom-d)/1.5)},wi.prototype.hasTransitions=function(d){return this.stale||d-this.lastPlacementChangeTime<this.fadeDuration},wi.prototype.stillRecent=function(d,f){var h=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*h>d},wi.prototype.setStale=function(){this.stale=!0};var kp=Math.pow(2,25),Sw=Math.pow(2,24),Ue=Math.pow(2,17),Lr=Math.pow(2,16),Wh=Math.pow(2,9),kg=Math.pow(2,8),Ky=Math.pow(2,1);function Ap(d){if(0===d.opacity&&!d.placed)return 0;if(1===d.opacity&&d.placed)return 4294967295;var f=d.placed?1:0,h=Math.floor(127*d.opacity);return h*kp+f*Sw+h*Ue+f*Lr+h*Wh+f*kg+h*Ky+f}var Lc=0,Fc=function(d){this._sortAcrossTiles="viewport-y"!==d.layout.get("symbol-z-order")&&!d.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Fc.prototype.continuePlacement=function(d,f,h,g,w){for(var C=this._bucketParts;this._currentTileIndex<d.length;)if(f.getBucketParts(C,g,d[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort(function(T,I){return T.sortKey-I.sortKey}));this._currentPartIndex<C.length;)if(f.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,w())return!0;return!1};var Bc=function(d,f,h,g,w,C,T){this.placement=new wi(d,w,C,T),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=h,this._showCollisionBoxes=g,this._done=!1};Bc.prototype.isDone=function(){return this._done},Bc.prototype.continuePlacement=function(d,f,h){for(var g=this,w=v.browser.now(),C=function(){var M=v.browser.now()-w;return!g._forceFullPlacement&&M>2};this._currentPlacementIndex>=0;){var T=f[d[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if("symbol"===T.type&&(!T.minzoom||T.minzoom<=I)&&(!T.maxzoom||T.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new Fc(T)),this._inProgressLayer.continuePlacement(h[T.source],this.placement,this._showCollisionBoxes,T,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Bc.prototype.commit=function(d){return this.placement.commit(d),this.placement};var Le=512/v.EXTENT/2,ku=function(d,f,h){this.tileID=d,this.indexedSymbolInstances={},this.bucketInstanceId=h;for(var g=0;g<f.length;g++){var w=f.get(g),C=w.key;this.indexedSymbolInstances[C]||(this.indexedSymbolInstances[C]=[]),this.indexedSymbolInstances[C].push({crossTileID:w.crossTileID,coord:this.getScaledCoordinates(w,d)})}};ku.prototype.getScaledCoordinates=function(d,f){var h=Le/Math.pow(2,f.canonical.z-this.tileID.canonical.z);return{x:Math.floor((f.canonical.x*v.EXTENT+d.anchorX)*h),y:Math.floor((f.canonical.y*v.EXTENT+d.anchorY)*h)}},ku.prototype.findMatches=function(d,f,h){for(var g=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z),w=0;w<d.length;w++){var C=d.get(w);if(!C.crossTileID){var T=this.indexedSymbolInstances[C.key];if(T)for(var I=this.getScaledCoordinates(C,f),M=0,L=T;M<L.length;M+=1){var $=L[M];if(Math.abs($.coord.x-I.x)<=g&&Math.abs($.coord.y-I.y)<=g&&!h[$.crossTileID]){h[$.crossTileID]=!0,C.crossTileID=$.crossTileID;break}}}}};var Hl=function(){this.maxCrossTileID=0};Hl.prototype.generate=function(){return++this.maxCrossTileID};var to=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};to.prototype.handleWrapJump=function(d){var f=Math.round((d-this.lng)/360);if(0!==f)for(var h in this.indexes){var g=this.indexes[h],w={};for(var C in g){var T=g[C];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+f),w[T.tileID.key]=T}this.indexes[h]=w}this.lng=d},to.prototype.addBucket=function(d,f,h){if(this.indexes[d.overscaledZ]&&this.indexes[d.overscaledZ][d.key]){if(this.indexes[d.overscaledZ][d.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(d.overscaledZ,this.indexes[d.overscaledZ][d.key])}for(var g=0;g<f.symbolInstances.length;g++)f.symbolInstances.get(g).crossTileID=0;this.usedCrossTileIDs[d.overscaledZ]||(this.usedCrossTileIDs[d.overscaledZ]={});var w=this.usedCrossTileIDs[d.overscaledZ];for(var C in this.indexes){var T=this.indexes[C];if(Number(C)>d.overscaledZ)for(var I in T){var M=T[I];M.tileID.isChildOf(d)&&M.findMatches(f.symbolInstances,d,w)}else{var L=T[d.scaledTo(Number(C)).key];L&&L.findMatches(f.symbolInstances,d,w)}}for(var $=0;$<f.symbolInstances.length;$++){var q=f.symbolInstances.get($);q.crossTileID||(q.crossTileID=h.generate(),w[q.crossTileID]=!0)}return void 0===this.indexes[d.overscaledZ]&&(this.indexes[d.overscaledZ]={}),this.indexes[d.overscaledZ][d.key]=new ku(d,f.symbolInstances,f.bucketInstanceId),!0},to.prototype.removeBucketCrossTileIDs=function(d,f){for(var h in f.indexedSymbolInstances)for(var g=0,w=f.indexedSymbolInstances[h];g<w.length;g+=1)delete this.usedCrossTileIDs[d][w[g].crossTileID]},to.prototype.removeStaleBuckets=function(d){var f=!1;for(var h in this.indexes){var g=this.indexes[h];for(var w in g)d[g[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,g[w]),delete g[w],f=!0)}return f};var Ds=function(){this.layerIndexes={},this.crossTileIDs=new Hl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ds.prototype.addLayer=function(d,f,h){var g=this.layerIndexes[d.id];void 0===g&&(g=this.layerIndexes[d.id]=new to);var w=!1,C={};g.handleWrapJump(h);for(var T=0,I=f;T<I.length;T+=1){var M=I[T],L=M.getBucket(d);L&&d.id===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(M.tileID,L,this.crossTileIDs)&&(w=!0),C[L.bucketInstanceId]=!0)}return g.removeStaleBuckets(C)&&(w=!0),w},Ds.prototype.pruneUnusedLayers=function(d){var f={};for(var h in d.forEach(function(g){f[g]=!0}),this.layerIndexes)f[h]||delete this.layerIndexes[h]};var $l=function(d,f){return v.emitValidationErrors(d,f&&f.filter(function(h){return"source.canvas"!==h.identifier}))},Zh=v.pick(Be,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ql=v.pick(Be,["setCenter","setZoom","setBearing","setPitch"]),Ts=function(){var d={},f=v.styleSpec.$version;for(var h in v.styleSpec.$root){var g,w=v.styleSpec.$root[h];w.required&&null!=(g="version"===h?f:"array"===w.type?[]:{})&&(d[h]=g)}return d}(),Gl=function(d){function f(h,g){var w=this;void 0===g&&(g={}),d.call(this),this.map=h,this.dispatcher=new Do(gt(),this),this.imageManager=new Oi,this.imageManager.setEventedParent(this),this.glyphManager=new Ni(h._requestManager,g.localIdeographFontFamily),this.lineAtlas=new ur(256,512),this.crossTileSymbolIndex=new Ds,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new v.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",v.getReferrer());var C=this;this._rtlTextPluginCallback=f.registerForPluginStateChange(function(T){C.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:T.pluginStatus,pluginURL:T.pluginURL},function(I,M){if(v.triggerPluginCompletionEvent(I),M&&M.every(function($){return $}))for(var L in C.sourceCaches)C.sourceCaches[L].reload()})}),this.on("data",function(T){if("source"===T.dataType&&"metadata"===T.sourceDataType){var I=w.sourceCaches[T.sourceId];if(I){var M=I.getSource();if(M&&M.vectorLayerIds)for(var L in w._layers){var $=w._layers[L];$.source===M.id&&w._validateLayer($)}}}})}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.loadURL=function(h,g){var w=this;void 0===g&&(g={}),this.fire(new v.Event("dataloading",{dataType:"style"}));var C="boolean"==typeof g.validate?g.validate:!v.isMapboxURL(h);h=this.map._requestManager.normalizeStyleURL(h,g.accessToken);var T=this.map._requestManager.transformRequest(h,v.ResourceType.Style);this._request=v.getJSON(T,function(I,M){w._request=null,I?w.fire(new v.ErrorEvent(I)):M&&w._load(M,C)})},f.prototype.loadJSON=function(h,g){var w=this;void 0===g&&(g={}),this.fire(new v.Event("dataloading",{dataType:"style"})),this._request=v.browser.frame(function(){w._request=null,w._load(h,!1!==g.validate)})},f.prototype.loadEmpty=function(){this.fire(new v.Event("dataloading",{dataType:"style"})),this._load(Ts,!1)},f.prototype._load=function(h,g){if(!g||!$l(this,v.validateStyle(h))){for(var w in this._loaded=!0,this.stylesheet=h,h.sources)this.addSource(w,h.sources[w],{validate:!1});h.sprite?this._loadSprite(h.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(h.glyphs);var C=et(this.stylesheet.layers);this._order=C.map(function(L){return L.id}),this._layers={},this._serializedLayers={};for(var T=0,I=C;T<I.length;T+=1){var M=I[T];(M=v.createStyleLayer(M)).setEventedParent(this,{layer:{id:M.id}}),this._layers[M.id]=M,this._serializedLayers[M.id]=M.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Nl(this.stylesheet.light),this.fire(new v.Event("data",{dataType:"style"})),this.fire(new v.Event("style.load"))}},f.prototype._loadSprite=function(h){var g=this;this._spriteRequest=function(w,C,T){var I,M,L,$=v.browser.devicePixelRatio>1?"@2x":"",q=v.getJSON(C.transformRequest(C.normalizeSpriteURL(w,$,".json"),v.ResourceType.SpriteJSON),function(J,ae){q=null,L||(L=J,I=ae,ne())}),j=v.getImage(C.transformRequest(C.normalizeSpriteURL(w,$,".png"),v.ResourceType.SpriteImage),function(J,ae){j=null,L||(L=J,M=ae,ne())});function ne(){if(L)T(L);else if(I&&M){var J=v.browser.getImageData(M),ae={};for(var ee in I){var ie=I[ee],pe=ie.width,ve=ie.height,ke=ie.x,Ee=ie.y,Ae=ie.sdf,Ne=ie.pixelRatio,Ze=ie.stretchX,He=ie.stretchY,it=ie.content,_t=new v.RGBAImage({width:pe,height:ve});v.RGBAImage.copy(J,_t,{x:ke,y:Ee},{x:0,y:0},{width:pe,height:ve}),ae[ee]={data:_t,pixelRatio:Ne,sdf:Ae,stretchX:Ze,stretchY:He,content:it}}T(null,ae)}}return{cancel:function(){q&&(q.cancel(),q=null),j&&(j.cancel(),j=null)}}}(h,this.map._requestManager,function(w,C){if(g._spriteRequest=null,w)g.fire(new v.ErrorEvent(w));else if(C)for(var T in C)g.imageManager.addImage(T,C[T]);g.imageManager.setLoaded(!0),g._availableImages=g.imageManager.listImages(),g.dispatcher.broadcast("setImages",g._availableImages),g.fire(new v.Event("data",{dataType:"style"}))})},f.prototype._validateLayer=function(h){var g=this.sourceCaches[h.source];if(g){var w=h.sourceLayer;if(w){var C=g.getSource();("geojson"===C.type||C.vectorLayerIds&&-1===C.vectorLayerIds.indexOf(w))&&this.fire(new v.ErrorEvent(new Error('Source layer "'+w+'" does not exist on source "'+C.id+'" as specified by style layer "'+h.id+'"')))}}},f.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var h in this.sourceCaches)if(!this.sourceCaches[h].loaded())return!1;return!!this.imageManager.isLoaded()},f.prototype._serializeLayers=function(h){for(var g=[],w=0,C=h;w<C.length;w+=1){var T=this._layers[C[w]];"custom"!==T.type&&g.push(T.serialize())}return g},f.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var h in this.sourceCaches)if(this.sourceCaches[h].hasTransition())return!0;for(var g in this._layers)if(this._layers[g].hasTransition())return!0;return!1},f.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},f.prototype.update=function(h){if(this._loaded){var g=this._changed;if(this._changed){var w=Object.keys(this._updatedLayers),C=Object.keys(this._removedLayers);for(var T in(w.length||C.length)&&this._updateWorkerLayers(w,C),this._updatedSources){var I=this._updatedSources[T];"reload"===I?this._reloadSource(T):"clear"===I&&this._clearSource(T)}for(var M in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[M].updateTransitions(h);this.light.updateTransitions(h),this._resetUpdates()}var L={};for(var $ in this.sourceCaches){var q=this.sourceCaches[$];L[$]=q.used,q.used=!1}for(var j=0,ne=this._order;j<ne.length;j+=1){var J=this._layers[ne[j]];J.recalculate(h,this._availableImages),!J.isHidden(h.zoom)&&J.source&&(this.sourceCaches[J.source].used=!0)}for(var ae in L){var ee=this.sourceCaches[ae];L[ae]!==ee.used&&ee.fire(new v.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:ae}))}this.light.recalculate(h),this.z=h.zoom,g&&this.fire(new v.Event("data",{dataType:"style"}))}},f.prototype._updateTilesForChangedImages=function(){var h=Object.keys(this._changedImages);if(h.length){for(var g in this.sourceCaches)this.sourceCaches[g].reloadTilesForDependencies(["icons","patterns"],h);this._changedImages={}}},f.prototype._updateWorkerLayers=function(h,g){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(h),removedIds:g})},f.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},f.prototype.setState=function(h){var g=this;if(this._checkLoaded(),$l(this,v.validateStyle(h)))return!1;(h=v.clone$1(h)).layers=et(h.layers);var w=function(T,I){if(!T)return[{command:Be.setStyle,args:[I]}];var M=[];try{if(!v.deepEqual(T.version,I.version))return[{command:Be.setStyle,args:[I]}];v.deepEqual(T.center,I.center)||M.push({command:Be.setCenter,args:[I.center]}),v.deepEqual(T.zoom,I.zoom)||M.push({command:Be.setZoom,args:[I.zoom]}),v.deepEqual(T.bearing,I.bearing)||M.push({command:Be.setBearing,args:[I.bearing]}),v.deepEqual(T.pitch,I.pitch)||M.push({command:Be.setPitch,args:[I.pitch]}),v.deepEqual(T.sprite,I.sprite)||M.push({command:Be.setSprite,args:[I.sprite]}),v.deepEqual(T.glyphs,I.glyphs)||M.push({command:Be.setGlyphs,args:[I.glyphs]}),v.deepEqual(T.transition,I.transition)||M.push({command:Be.setTransition,args:[I.transition]}),v.deepEqual(T.light,I.light)||M.push({command:Be.setLight,args:[I.light]});var L={},$=[];!function(j,ne,J,ae){var ee;for(ee in ne=ne||{},j=j||{})j.hasOwnProperty(ee)&&(ne.hasOwnProperty(ee)||Kt(ee,J,ae));for(ee in ne)ne.hasOwnProperty(ee)&&(j.hasOwnProperty(ee)?v.deepEqual(j[ee],ne[ee])||("geojson"===j[ee].type&&"geojson"===ne[ee].type&&ar(j,ne,ee)?J.push({command:Be.setGeoJSONSourceData,args:[ee,ne[ee].data]}):se(ee,ne,J,ae)):Zt(ee,ne,J))}(T.sources,I.sources,$,L);var q=[];T.layers&&T.layers.forEach(function(j){L[j.source]?M.push({command:Be.removeLayer,args:[j.id]}):q.push(j)}),M=M.concat($),function(j,ne,J){ne=ne||[];var ae,ee,ie,pe,ve,ke,Ee,Ae=(j=j||[]).map(tn),Ne=ne.map(tn),Ze=j.reduce(wr,{}),He=ne.reduce(wr,{}),it=Ae.slice(),_t=Object.create(null);for(ae=0,ee=0;ae<Ae.length;ae++)He.hasOwnProperty(ie=Ae[ae])?ee++:(J.push({command:Be.removeLayer,args:[ie]}),it.splice(it.indexOf(ie,ee),1));for(ae=0,ee=0;ae<Ne.length;ae++)it[it.length-1-ae]!==(ie=Ne[Ne.length-1-ae])&&(Ze.hasOwnProperty(ie)?(J.push({command:Be.removeLayer,args:[ie]}),it.splice(it.lastIndexOf(ie,it.length-ee),1)):ee++,J.push({command:Be.addLayer,args:[He[ie],ke=it[it.length-ae]]}),it.splice(it.length-ae,0,ie),_t[ie]=!0);for(ae=0;ae<Ne.length;ae++)if(pe=Ze[ie=Ne[ae]],ve=He[ie],!_t[ie]&&!v.deepEqual(pe,ve))if(v.deepEqual(pe.source,ve.source)&&v.deepEqual(pe["source-layer"],ve["source-layer"])&&v.deepEqual(pe.type,ve.type)){for(Ee in Lt(pe.layout,ve.layout,J,ie,null,Be.setLayoutProperty),Lt(pe.paint,ve.paint,J,ie,null,Be.setPaintProperty),v.deepEqual(pe.filter,ve.filter)||J.push({command:Be.setFilter,args:[ie,ve.filter]}),v.deepEqual(pe.minzoom,ve.minzoom)&&v.deepEqual(pe.maxzoom,ve.maxzoom)||J.push({command:Be.setLayerZoomRange,args:[ie,ve.minzoom,ve.maxzoom]}),pe)pe.hasOwnProperty(Ee)&&"layout"!==Ee&&"paint"!==Ee&&"filter"!==Ee&&"metadata"!==Ee&&"minzoom"!==Ee&&"maxzoom"!==Ee&&(0===Ee.indexOf("paint.")?Lt(pe[Ee],ve[Ee],J,ie,Ee.slice(6),Be.setPaintProperty):v.deepEqual(pe[Ee],ve[Ee])||J.push({command:Be.setLayerProperty,args:[ie,Ee,ve[Ee]]}));for(Ee in ve)ve.hasOwnProperty(Ee)&&!pe.hasOwnProperty(Ee)&&"layout"!==Ee&&"paint"!==Ee&&"filter"!==Ee&&"metadata"!==Ee&&"minzoom"!==Ee&&"maxzoom"!==Ee&&(0===Ee.indexOf("paint.")?Lt(pe[Ee],ve[Ee],J,ie,Ee.slice(6),Be.setPaintProperty):v.deepEqual(pe[Ee],ve[Ee])||J.push({command:Be.setLayerProperty,args:[ie,Ee,ve[Ee]]}))}else J.push({command:Be.removeLayer,args:[ie]}),ke=it[it.lastIndexOf(ie)+1],J.push({command:Be.addLayer,args:[ve,ke]})}(q,I.layers,M)}catch(j){console.warn("Unable to compute style diff:",j),M=[{command:Be.setStyle,args:[I]}]}return M}(this.serialize(),h).filter(function(T){return!(T.command in ql)});if(0===w.length)return!1;var C=w.filter(function(T){return!(T.command in Zh)});if(C.length>0)throw new Error("Unimplemented: "+C.map(function(T){return T.command}).join(", ")+".");return w.forEach(function(T){"setTransition"!==T.command&&g[T.command].apply(g,T.args)}),this.stylesheet=h,!0},f.prototype.addImage=function(h,g){if(this.getImage(h))return this.fire(new v.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(h,g),this._afterImageUpdated(h)},f.prototype.updateImage=function(h,g){this.imageManager.updateImage(h,g)},f.prototype.getImage=function(h){return this.imageManager.getImage(h)},f.prototype.removeImage=function(h){if(!this.getImage(h))return this.fire(new v.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(h),this._afterImageUpdated(h)},f.prototype._afterImageUpdated=function(h){this._availableImages=this.imageManager.listImages(),this._changedImages[h]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new v.Event("data",{dataType:"style"}))},f.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},f.prototype.addSource=function(h,g,w){var C=this;if(void 0===w&&(w={}),this._checkLoaded(),void 0!==this.sourceCaches[h])throw new Error("There is already a source with this ID");if(!g.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(g).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(g.type)>=0&&this._validate(v.validateStyle.source,"sources."+h,g,null,w))){this.map&&this.map._collectResourceTiming&&(g.collectResourceTiming=!0);var T=this.sourceCaches[h]=new W(h,g,this.dispatcher);T.style=this,T.setEventedParent(this,function(){return{isSourceLoaded:C.loaded(),source:T.serialize(),sourceId:h}}),T.onAdd(this.map),this._changed=!0}},f.prototype.removeSource=function(h){if(this._checkLoaded(),void 0===this.sourceCaches[h])throw new Error("There is no source with this ID");for(var g in this._layers)if(this._layers[g].source===h)return this.fire(new v.ErrorEvent(new Error('Source "'+h+'" cannot be removed while layer "'+g+'" is using it.')));var w=this.sourceCaches[h];delete this.sourceCaches[h],delete this._updatedSources[h],w.fire(new v.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:h})),w.setEventedParent(null),w.clearTiles(),w.onRemove&&w.onRemove(this.map),this._changed=!0},f.prototype.setGeoJSONSourceData=function(h,g){this._checkLoaded(),this.sourceCaches[h].getSource().setData(g),this._changed=!0},f.prototype.getSource=function(h){return this.sourceCaches[h]&&this.sourceCaches[h].getSource()},f.prototype.addLayer=function(h,g,w){void 0===w&&(w={}),this._checkLoaded();var C=h.id;if(this.getLayer(C))this.fire(new v.ErrorEvent(new Error('Layer with id "'+C+'" already exists on this map')));else{var T;if("custom"===h.type){if($l(this,v.validateCustomStyleLayer(h)))return;T=v.createStyleLayer(h)}else{if("object"==typeof h.source&&(this.addSource(C,h.source),h=v.clone$1(h),h=v.extend(h,{source:C})),this._validate(v.validateStyle.layer,"layers."+C,h,{arrayIndex:-1},w))return;T=v.createStyleLayer(h),this._validateLayer(T),T.setEventedParent(this,{layer:{id:C}}),this._serializedLayers[T.id]=T.serialize()}var I=g?this._order.indexOf(g):this._order.length;if(g&&-1===I)this.fire(new v.ErrorEvent(new Error('Layer with id "'+g+'" does not exist on this map.')));else{if(this._order.splice(I,0,C),this._layerOrderChanged=!0,this._layers[C]=T,this._removedLayers[C]&&T.source&&"custom"!==T.type){var M=this._removedLayers[C];delete this._removedLayers[C],M.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.sourceCaches[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}},f.prototype.moveLayer=function(h,g){if(this._checkLoaded(),this._changed=!0,this._layers[h]){if(h!==g){var w=this._order.indexOf(h);this._order.splice(w,1);var C=g?this._order.indexOf(g):this._order.length;g&&-1===C?this.fire(new v.ErrorEvent(new Error('Layer with id "'+g+'" does not exist on this map.'))):(this._order.splice(C,0,h),this._layerOrderChanged=!0)}}else this.fire(new v.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be moved.")))},f.prototype.removeLayer=function(h){this._checkLoaded();var g=this._layers[h];if(g){g.setEventedParent(null);var w=this._order.indexOf(h);this._order.splice(w,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[h]=g,delete this._layers[h],delete this._serializedLayers[h],delete this._updatedLayers[h],delete this._updatedPaintProps[h],g.onRemove&&g.onRemove(this.map)}else this.fire(new v.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be removed.")))},f.prototype.getLayer=function(h){return this._layers[h]},f.prototype.hasLayer=function(h){return h in this._layers},f.prototype.setLayerZoomRange=function(h,g,w){this._checkLoaded();var C=this.getLayer(h);C?C.minzoom===g&&C.maxzoom===w||(null!=g&&(C.minzoom=g),null!=w&&(C.maxzoom=w),this._updateLayer(C)):this.fire(new v.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot have zoom extent.")))},f.prototype.setFilter=function(h,g,w){void 0===w&&(w={}),this._checkLoaded();var C=this.getLayer(h);if(C){if(!v.deepEqual(C.filter,g))return null==g?(C.filter=void 0,void this._updateLayer(C)):void(this._validate(v.validateStyle.filter,"layers."+C.id+".filter",g,null,w)||(C.filter=v.clone$1(g),this._updateLayer(C)))}else this.fire(new v.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be filtered.")))},f.prototype.getFilter=function(h){return v.clone$1(this.getLayer(h).filter)},f.prototype.setLayoutProperty=function(h,g,w,C){void 0===C&&(C={}),this._checkLoaded();var T=this.getLayer(h);T?v.deepEqual(T.getLayoutProperty(g),w)||(T.setLayoutProperty(g,w,C),this._updateLayer(T)):this.fire(new v.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be styled.")))},f.prototype.getLayoutProperty=function(h,g){var w=this.getLayer(h);if(w)return w.getLayoutProperty(g);this.fire(new v.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style.")))},f.prototype.setPaintProperty=function(h,g,w,C){void 0===C&&(C={}),this._checkLoaded();var T=this.getLayer(h);T?v.deepEqual(T.getPaintProperty(g),w)||(T.setPaintProperty(g,w,C)&&this._updateLayer(T),this._changed=!0,this._updatedPaintProps[h]=!0):this.fire(new v.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be styled.")))},f.prototype.getPaintProperty=function(h,g){return this.getLayer(h).getPaintProperty(g)},f.prototype.setFeatureState=function(h,g){this._checkLoaded();var w=h.source,C=h.sourceLayer,T=this.sourceCaches[w];if(void 0!==T){var I=T.getSource().type;"geojson"===I&&C?this.fire(new v.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==I||C?(void 0===h.id&&this.fire(new v.ErrorEvent(new Error("The feature id parameter must be provided."))),T.setFeatureState(C,h.id,g)):this.fire(new v.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new v.ErrorEvent(new Error("The source '"+w+"' does not exist in the map's style.")))},f.prototype.removeFeatureState=function(h,g){this._checkLoaded();var w=h.source,C=this.sourceCaches[w];if(void 0!==C){var T=C.getSource().type,I="vector"===T?h.sourceLayer:void 0;"vector"!==T||I?g&&"string"!=typeof h.id&&"number"!=typeof h.id?this.fire(new v.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):C.removeFeatureState(I,h.id,g):this.fire(new v.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new v.ErrorEvent(new Error("The source '"+w+"' does not exist in the map's style.")))},f.prototype.getFeatureState=function(h){this._checkLoaded();var g=h.source,w=h.sourceLayer,C=this.sourceCaches[g];if(void 0!==C){if("vector"!==C.getSource().type||w)return void 0===h.id&&this.fire(new v.ErrorEvent(new Error("The feature id parameter must be provided."))),C.getFeatureState(w,h.id);this.fire(new v.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new v.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},f.prototype.getTransition=function(){return v.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},f.prototype.serialize=function(){return v.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:v.mapObject(this.sourceCaches,function(h){return h.serialize()}),layers:this._serializeLayers(this._order)},function(h){return void 0!==h})},f.prototype._updateLayer=function(h){this._updatedLayers[h.id]=!0,h.source&&!this._updatedSources[h.source]&&"raster"!==this.sourceCaches[h.source].getSource().type&&(this._updatedSources[h.source]="reload",this.sourceCaches[h.source].pause()),this._changed=!0},f.prototype._flattenAndSortRenderedFeatures=function(h){for(var g=this,w=function(Ze){return"fill-extrusion"===g._layers[Ze].type},C={},T=[],I=this._order.length-1;I>=0;I--){var M=this._order[I];if(w(M)){C[M]=I;for(var L=0,$=h;L<$.length;L+=1){var q=$[L][M];if(q)for(var j=0,ne=q;j<ne.length;j+=1)T.push(ne[j])}}}T.sort(function(Ze,He){return He.intersectionZ-Ze.intersectionZ});for(var J=[],ae=this._order.length-1;ae>=0;ae--){var ee=this._order[ae];if(w(ee))for(var ie=T.length-1;ie>=0;ie--){var pe=T[ie].feature;if(C[pe.layer.id]<ae)break;J.push(pe),T.pop()}else for(var ve=0,ke=h;ve<ke.length;ve+=1){var Ee=ke[ve][ee];if(Ee)for(var Ae=0,Ne=Ee;Ae<Ne.length;Ae+=1)J.push(Ne[Ae].feature)}}return J},f.prototype.queryRenderedFeatures=function(h,g,w){g&&g.filter&&this._validate(v.validateStyle.filter,"queryRenderedFeatures.filter",g.filter,null,g);var C={};if(g&&g.layers){if(!Array.isArray(g.layers))return this.fire(new v.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var T=0,I=g.layers;T<I.length;T+=1){var M=I[T],L=this._layers[M];if(!L)return this.fire(new v.ErrorEvent(new Error("The layer '"+M+"' does not exist in the map's style and cannot be queried for features."))),[];C[L.source]=!0}}var $=[];for(var q in g.availableImages=this._availableImages,this.sourceCaches)g.layers&&!C[q]||$.push(Li(this.sourceCaches[q],this._layers,this._serializedLayers,h,g,w));return this.placement&&$.push(function(j,ne,J,ae,ee,ie,pe){for(var ve={},ke=ie.queryRenderedSymbols(ae),Ee=[],Ae=0,Ne=Object.keys(ke).map(Number);Ae<Ne.length;Ae+=1)Ee.push(pe[Ne[Ae]]);Ee.sort(rl);for(var Ze=function(){var bt=it[He],hn=bt.featureIndex.lookupSymbolFeatures(ke[bt.bucketInstanceId],ne,bt.bucketIndex,bt.sourceLayerIndex,ee.filter,ee.layers,ee.availableImages,j);for(var at in hn){var qt=ve[at]=ve[at]||[],ln=hn[at];ln.sort(function(Vt,Ot){var Tt=bt.featureSortOrder;if(Tt){var nr=Tt.indexOf(Vt.featureIndex);return Tt.indexOf(Ot.featureIndex)-nr}return Ot.featureIndex-Vt.featureIndex});for(var Ye=0,Pt=ln;Ye<Pt.length;Ye+=1)qt.push(Pt[Ye])}},He=0,it=Ee;He<it.length;He+=1)Ze();var _t=function(bt){ve[bt].forEach(function(hn){var at=hn.feature,qt=J[j[bt].source].getFeatureState(at.layer["source-layer"],at.id);at.source=at.layer.source,at.layer["source-layer"]&&(at.sourceLayer=at.layer["source-layer"]),at.state=qt})};for(var xt in ve)_t(xt);return ve}(this._layers,this._serializedLayers,this.sourceCaches,h,g,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures($)},f.prototype.querySourceFeatures=function(h,g){g&&g.filter&&this._validate(v.validateStyle.filter,"querySourceFeatures.filter",g.filter,null,g);var w=this.sourceCaches[h];return w?function(C,T){for(var I=C.getRenderableIds().map(function(ne){return C.getTileByID(ne)}),M=[],L={},$=0;$<I.length;$++){var q=I[$],j=q.tileID.canonical.key;L[j]||(L[j]=!0,q.querySourceFeatures(M,T))}return M}(w,g):[]},f.prototype.addSourceType=function(h,g,w){return f.getSourceType(h)?w(new Error('A source type called "'+h+'" already exists.')):(f.setSourceType(h,g),g.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:h,url:g.workerSourceURL},w):w(null,null))},f.prototype.getLight=function(){return this.light.getLight()},f.prototype.setLight=function(h,g){void 0===g&&(g={}),this._checkLoaded();var w=this.light.getLight(),C=!1;for(var T in h)if(!v.deepEqual(h[T],w[T])){C=!0;break}if(C){var I={now:v.browser.now(),transition:v.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(h,g),this.light.updateTransitions(I)}},f.prototype._validate=function(h,g,w,C,T){return void 0===T&&(T={}),(!T||!1!==T.validate)&&$l(this,h.call(v.validateStyle,v.extend({key:g,style:this.serialize(),value:w,styleSpec:v.styleSpec},C)))},f.prototype._remove=function(){for(var h in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),v.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[h].setEventedParent(null);for(var g in this.sourceCaches)this.sourceCaches[g].clearTiles(),this.sourceCaches[g].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},f.prototype._clearSource=function(h){this.sourceCaches[h].clearTiles()},f.prototype._reloadSource=function(h){this.sourceCaches[h].resume(),this.sourceCaches[h].reload()},f.prototype._updateSources=function(h){for(var g in this.sourceCaches)this.sourceCaches[g].update(h)},f.prototype._generateCollisionBoxes=function(){for(var h in this.sourceCaches)this._reloadSource(h)},f.prototype._updatePlacement=function(h,g,w,C,T){void 0===T&&(T=!1);for(var I=!1,M=!1,L={},$=0,q=this._order;$<q.length;$+=1){var j=this._layers[q[$]];if("symbol"===j.type){if(!L[j.source]){var ne=this.sourceCaches[j.source];L[j.source]=ne.getRenderableIds(!0).map(function(pe){return ne.getTileByID(pe)}).sort(function(pe,ve){return ve.tileID.overscaledZ-pe.tileID.overscaledZ||(pe.tileID.isLessThan(ve.tileID)?-1:1)})}var J=this.crossTileSymbolIndex.addLayer(j,L[j.source],h.center.lng);I=I||J}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||0===w)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(v.browser.now(),h.zoom))&&(this.pauseablePlacement=new Bc(h,this._order,T,g,w,C,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(v.browser.now()),M=!0),I&&this.pauseablePlacement.placement.setStale()),M||I)for(var ae=0,ee=this._order;ae<ee.length;ae+=1){var ie=this._layers[ee[ae]];"symbol"===ie.type&&this.placement.updateLayerOpacities(ie,L[ie.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(v.browser.now())},f.prototype._releaseSymbolFadeTiles=function(){for(var h in this.sourceCaches)this.sourceCaches[h].releaseSymbolFadeTiles()},f.prototype.getImages=function(h,g,w){this.imageManager.getImages(g.icons,w),this._updateTilesForChangedImages();var C=this.sourceCaches[g.source];C&&C.setDependencies(g.tileID.key,g.type,g.icons)},f.prototype.getGlyphs=function(h,g,w){this.glyphManager.getGlyphs(g.stacks,w)},f.prototype.getResource=function(h,g,w){return v.makeRequest(g,w)},f}(v.Evented);Gl.getSourceType=function(d){return nl[d]},Gl.setSourceType=function(d,f){nl[d]=f},Gl.registerForPluginStateChange=v.registerForPluginStateChange;var Sa=v.createLayout([{name:"a_pos",type:"Int16",components:2}]),ci=pr("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Rp=pr("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Yy=pr("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Xy=pr("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Iw=pr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Md=pr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Kh=pr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Mp=pr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Pp=pr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Op=pr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Wl=pr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Pd=pr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Au=pr("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ts=pr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Yh=pr("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),nn=pr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Ag=pr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ti=pr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),no=pr("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Ia=pr("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Us=pr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Yt=pr("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),Cn=pr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ru=pr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Zl=pr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),Xh=pr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function pr(d,f){var h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=f.match(/attribute ([\w]+) ([\w]+)/g),w=d.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=C?C.concat(w):w,I={};return{fragmentSource:d=d.replace(h,function(M,L,$,q,j){return I[j]=!0,"define"===L?"\n#ifndef HAS_UNIFORM_u_"+j+"\nvarying "+$+" "+q+" "+j+";\n#else\nuniform "+$+" "+q+" u_"+j+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+j+"\n    "+$+" "+q+" "+j+" = u_"+j+";\n#endif\n"}),vertexSource:f=f.replace(h,function(M,L,$,q,j){var ne="float"===q?"vec2":"vec4",J=j.match(/color/)?"color":ne;return I[j]?"define"===L?"\n#ifndef HAS_UNIFORM_u_"+j+"\nuniform lowp float u_"+j+"_t;\nattribute "+$+" "+ne+" a_"+j+";\nvarying "+$+" "+q+" "+j+";\n#else\nuniform "+$+" "+q+" u_"+j+";\n#endif\n":"vec4"===J?"\n#ifndef HAS_UNIFORM_u_"+j+"\n    "+j+" = a_"+j+";\n#else\n    "+$+" "+q+" "+j+" = u_"+j+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+j+"\n    "+j+" = unpack_mix_"+J+"(a_"+j+", u_"+j+"_t);\n#else\n    "+$+" "+q+" "+j+" = u_"+j+";\n#endif\n":"define"===L?"\n#ifndef HAS_UNIFORM_u_"+j+"\nuniform lowp float u_"+j+"_t;\nattribute "+$+" "+ne+" a_"+j+";\n#else\nuniform "+$+" "+q+" u_"+j+";\n#endif\n":"vec4"===J?"\n#ifndef HAS_UNIFORM_u_"+j+"\n    "+$+" "+q+" "+j+" = a_"+j+";\n#else\n    "+$+" "+q+" "+j+" = u_"+j+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+j+"\n    "+$+" "+q+" "+j+" = unpack_mix_"+J+"(a_"+j+", u_"+j+"_t);\n#else\n    "+$+" "+q+" "+j+" = u_"+j+";\n#endif\n"}),staticAttributes:g,staticUniforms:T}}var ka=Object.freeze({__proto__:null,prelude:ci,background:Rp,backgroundPattern:Yy,circle:Xy,clippingMask:Iw,heatmap:Md,heatmapTexture:Kh,collisionBox:Mp,collisionCircle:Pp,debug:Op,fill:Wl,fillOutline:Pd,fillOutlinePattern:Au,fillPattern:ts,fillExtrusion:Yh,fillExtrusionPattern:nn,hillshadePrepare:Ag,hillshade:ti,line:no,lineGradient:Ia,linePattern:Us,lineSDF:Yt,raster:Cn,symbolIcon:Ru,symbolSDF:Zl,symbolTextAndIcon:Xh}),Mu=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Qy(d){for(var f=[],h=0;h<d.length;h++)if(null!==d[h]){var g=d[h].split(" ");f.push(g.pop())}return f}Mu.prototype.bind=function(d,f,h,g,w,C,T,I){this.context=d;for(var M=this.boundPaintVertexBuffers.length!==g.length,L=0;!M&&L<g.length;L++)this.boundPaintVertexBuffers[L]!==g[L]&&(M=!0);d.extVertexArrayObject&&this.vao&&this.boundProgram===f&&this.boundLayoutVertexBuffer===h&&!M&&this.boundIndexBuffer===w&&this.boundVertexOffset===C&&this.boundDynamicVertexBuffer===T&&this.boundDynamicVertexBuffer2===I?(d.bindVertexArrayOES.set(this.vao),T&&T.bind(),w&&w.dynamicDraw&&w.bind(),I&&I.bind()):this.freshBind(f,h,g,w,C,T,I)},Mu.prototype.freshBind=function(d,f,h,g,w,C,T){var I,M=d.numAttributes,L=this.context,$=L.gl;if(L.extVertexArrayObject)this.vao&&this.destroy(),this.vao=L.extVertexArrayObject.createVertexArrayOES(),L.bindVertexArrayOES.set(this.vao),I=0,this.boundProgram=d,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=g,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=T;else{I=L.currentNumAttributes||0;for(var q=M;q<I;q++)$.disableVertexAttribArray(q)}f.enableAttributes($,d);for(var j=0,ne=h;j<ne.length;j+=1)ne[j].enableAttributes($,d);C&&C.enableAttributes($,d),T&&T.enableAttributes($,d),f.bind(),f.setVertexAttribPointers($,d,w);for(var J=0,ae=h;J<ae.length;J+=1){var ee=ae[J];ee.bind(),ee.setVertexAttribPointers($,d,w)}C&&(C.bind(),C.setVertexAttribPointers($,d,w)),g&&g.bind(),T&&(T.bind(),T.setVertexAttribPointers($,d,w)),L.currentNumAttributes=M},Mu.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Jy=function(d,f,h,g,w,C){var T=d.gl;this.program=T.createProgram();for(var I=Qy(h.staticAttributes),M=g?g.getBinderAttributes():[],L=I.concat(M),$=h.staticUniforms?Qy(h.staticUniforms):[],q=g?g.getBinderUniforms():[],j=[],ne=0,J=$.concat(q);ne<J.length;ne+=1){var ae=J[ne];j.indexOf(ae)<0&&j.push(ae)}var ee=g?g.defines():[];C&&ee.push("#define OVERDRAW_INSPECTOR;");var ie=ee.concat(ci.fragmentSource,h.fragmentSource).join("\n"),pe=ee.concat(ci.vertexSource,h.vertexSource).join("\n"),ve=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())this.failedToCreate=!0;else{T.shaderSource(ve,ie),T.compileShader(ve),T.attachShader(this.program,ve);var ke=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())this.failedToCreate=!0;else{T.shaderSource(ke,pe),T.compileShader(ke),T.attachShader(this.program,ke),this.attributes={};var Ee={};this.numAttributes=L.length;for(var Ae=0;Ae<this.numAttributes;Ae++)L[Ae]&&(T.bindAttribLocation(this.program,Ae,L[Ae]),this.attributes[L[Ae]]=Ae);T.linkProgram(this.program),T.deleteShader(ke),T.deleteShader(ve);for(var Ne=0;Ne<j.length;Ne++){var Ze=j[Ne];if(Ze&&!Ee[Ze]){var He=T.getUniformLocation(this.program,Ze);He&&(Ee[Ze]=He)}}this.fixedUniforms=w(d,Ee),this.binderUniforms=g?g.getUniforms(d,Ee):[]}}};function Rg(d,f,h){var g=1/Jo(h,1,f.transform.tileZoom),w=Math.pow(2,h.tileID.overscaledZ),C=h.tileSize*Math.pow(2,f.transform.tileZoom)/w,T=C*(h.tileID.canonical.x+h.tileID.wrap*w),I=C*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[g,d.fromScale,d.toScale],u_fade:d.t,u_pixel_coord_upper:[T>>16,I>>16],u_pixel_coord_lower:[65535&T,65535&I]}}Jy.prototype.draw=function(d,f,h,g,w,C,T,I,M,L,$,q,j,ne,J,ae){var ee,ie=d.gl;if(!this.failedToCreate){for(var pe in d.program.set(this.program),d.setDepthMode(h),d.setStencilMode(g),d.setColorMode(w),d.setCullFace(C),this.fixedUniforms)this.fixedUniforms[pe].set(T[pe]);ne&&ne.setUniforms(d,this.binderUniforms,q,{zoom:j});for(var ve=(ee={},ee[ie.LINES]=2,ee[ie.TRIANGLES]=3,ee[ie.LINE_STRIP]=1,ee)[f],ke=0,Ee=$.get();ke<Ee.length;ke+=1){var Ae=Ee[ke],Ne=Ae.vaos||(Ae.vaos={});(Ne[I]||(Ne[I]=new Mu)).bind(d,this,M,ne?ne.getPaintVertexBuffers():[],L,Ae.vertexOffset,J,ae),ie.drawElements(f,Ae.primitiveLength*ve,ie.UNSIGNED_SHORT,Ae.primitiveOffset*ve*2)}}};var Qh=function(d,f,h,g){var w=f.style.light,C=w.properties.get("position"),T=[C.x,C.y,C.z],I=v.create$1();"viewport"===w.properties.get("anchor")&&v.fromRotation(I,-f.transform.angle),v.transformMat3(T,T,I);var M=w.properties.get("color");return{u_matrix:d,u_lightpos:T,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+h,u_opacity:g}},kw=function(d,f,h,g,w,C,T){return v.extend(Qh(d,f,h,g),Rg(C,f,T),{u_height_factor:-Math.pow(2,w.overscaledZ)/T.tileSize/8})},Kl=function(d){return{u_matrix:d}},ll=function(d,f,h,g){return v.extend(Kl(d),Rg(h,f,g))},Pu=function(d,f){return{u_matrix:d,u_world:f}},Mg=function(d,f,h,g,w){return v.extend(ll(d,f,h,g),{u_world:w})},Jh=function(d,f,h,g){var w,C,T=d.transform;if("map"===g.paint.get("circle-pitch-alignment")){var I=Jo(h,1,T.zoom);w=!0,C=[I,I]}else w=!1,C=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+("map"===g.paint.get("circle-pitch-scale")),u_matrix:d.translatePosMatrix(f.posMatrix,h,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+w,u_device_pixel_ratio:v.browser.devicePixelRatio,u_extrude_scale:C}},ef=function(d,f,h){var g=Jo(h,1,f.zoom),w=Math.pow(2,f.zoom-h.tileID.overscaledZ),C=h.tileID.overscaleFactor();return{u_matrix:d,u_camera_to_center_distance:f.cameraToCenterDistance,u_pixels_to_tile_units:g,u_extrude_scale:[f.pixelsToGLUnits[0]/(g*w),f.pixelsToGLUnits[1]/(g*w)],u_overscale_factor:C}},xi=function(d,f,h){return{u_matrix:d,u_inv_matrix:f,u_camera_to_center_distance:h.cameraToCenterDistance,u_viewport_size:[h.width,h.height]}},tf=function(d,f,h){return void 0===h&&(h=1),{u_matrix:d,u_color:f,u_overlay:0,u_overlay_scale:h}},Ou=function(d){return{u_matrix:d}},Od=function(d,f,h,g){return{u_matrix:d,u_extrude_scale:Jo(f,1,h),u_intensity:g}},Aa=function(d,f,h){var g=d.transform;return{u_matrix:Vc(d,f,h),u_ratio:1/Jo(f,1,g.zoom),u_device_pixel_ratio:v.browser.devicePixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Nd=function(d,f,h,g){return v.extend(Aa(d,f,h),{u_image:0,u_image_height:g})},hr=function(d,f,h,g){var w=d.transform,C=wt(f,w);return{u_matrix:Vc(d,f,h),u_texsize:f.imageAtlasTexture.size,u_ratio:1/Jo(f,1,w.zoom),u_device_pixel_ratio:v.browser.devicePixelRatio,u_image:0,u_scale:[C,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},nf=function(d,f,h,g,w){var C=d.lineAtlas,T=wt(f,d.transform),I="round"===h.layout.get("line-cap"),M=C.getDash(g.from,I),L=C.getDash(g.to,I),$=M.width*w.fromScale,q=L.width*w.toScale;return v.extend(Aa(d,f,h),{u_patternscale_a:[T/$,-M.height/2],u_patternscale_b:[T/q,-L.height/2],u_sdfgamma:C.width/(256*Math.min($,q)*v.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:M.y,u_tex_y_b:L.y,u_mix:w.t})};function wt(d,f){return 1/Jo(d,1,f.tileZoom)}function Vc(d,f,h){return d.translatePosMatrix(f.tileID.posMatrix,f,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}var Z=function(d,f,h,g,w){return{u_matrix:d,u_tl_parent:f,u_scale_parent:h,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*w.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:w.paint.get("raster-brightness-min"),u_brightness_high:w.paint.get("raster-brightness-max"),u_saturation_factor:(T=w.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(C=w.paint.get("raster-contrast"),C>0?1/(1-C):1+C),u_spin_weights:Ld(w.paint.get("raster-hue-rotate"))};var C,T};function Ld(d){d*=Math.PI/180;var f=Math.sin(d),h=Math.cos(d);return[(2*h+1)/3,(-Math.sqrt(3)*f-h+1)/3,(Math.sqrt(3)*f-h+1)/3]}var Fd,rf=function(d,f,h,g,w,C,T,I,M,L){var $=w.transform;return{u_is_size_zoom_constant:+("constant"===d||"source"===d),u_is_size_feature_constant:+("constant"===d||"camera"===d),u_size_t:f?f.uSizeT:0,u_size:f?f.uSize:0,u_camera_to_center_distance:$.cameraToCenterDistance,u_pitch:$.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:$.width/$.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:T,u_coord_matrix:I,u_is_text:+M,u_pitch_with_map:+g,u_texsize:L,u_texture:0}},Ra=function(d,f,h,g,w,C,T,I,M,L,$){var q=w.transform;return v.extend(rf(d,f,h,g,w,C,T,I,M,L),{u_gamma_scale:g?Math.cos(q._pitch)*q.cameraToCenterDistance:1,u_device_pixel_ratio:v.browser.devicePixelRatio,u_is_halo:+$})},sf=function(d,f,h,g,w,C,T,I,M,L){return v.extend(Ra(d,f,h,g,w,C,T,I,!0,M,!0),{u_texsize_icon:L,u_texture_icon:1})},Ma=function(d,f,h){return{u_matrix:d,u_opacity:f,u_color:h}},Bd=function(d,f,h,g,w,C){return v.extend((I=C,L=w,$=(M=h).imageManager.getPattern((T=g).from.toString()),q=M.imageManager.getPattern(T.to.toString()),ne=(j=M.imageManager.getPixelSize()).width,J=j.height,ae=Math.pow(2,L.tileID.overscaledZ),ie=(ee=L.tileSize*Math.pow(2,M.transform.tileZoom)/ae)*(L.tileID.canonical.x+L.tileID.wrap*ae),pe=ee*L.tileID.canonical.y,{u_image:0,u_pattern_tl_a:$.tl,u_pattern_br_a:$.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[ne,J],u_mix:I.t,u_pattern_size_a:$.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/Jo(L,1,M.transform.tileZoom),u_pixel_coord_upper:[ie>>16,pe>>16],u_pixel_coord_lower:[65535&ie,65535&pe]}),{u_matrix:d,u_opacity:f});var T,I,M,L,$,q,j,ne,J,ae,ee,ie,pe},uo={fillExtrusion:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_lightpos:new v.Uniform3f(d,f.u_lightpos),u_lightintensity:new v.Uniform1f(d,f.u_lightintensity),u_lightcolor:new v.Uniform3f(d,f.u_lightcolor),u_vertical_gradient:new v.Uniform1f(d,f.u_vertical_gradient),u_opacity:new v.Uniform1f(d,f.u_opacity)}},fillExtrusionPattern:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_lightpos:new v.Uniform3f(d,f.u_lightpos),u_lightintensity:new v.Uniform1f(d,f.u_lightintensity),u_lightcolor:new v.Uniform3f(d,f.u_lightcolor),u_vertical_gradient:new v.Uniform1f(d,f.u_vertical_gradient),u_height_factor:new v.Uniform1f(d,f.u_height_factor),u_image:new v.Uniform1i(d,f.u_image),u_texsize:new v.Uniform2f(d,f.u_texsize),u_pixel_coord_upper:new v.Uniform2f(d,f.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(d,f.u_pixel_coord_lower),u_scale:new v.Uniform3f(d,f.u_scale),u_fade:new v.Uniform1f(d,f.u_fade),u_opacity:new v.Uniform1f(d,f.u_opacity)}},fill:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix)}},fillPattern:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_image:new v.Uniform1i(d,f.u_image),u_texsize:new v.Uniform2f(d,f.u_texsize),u_pixel_coord_upper:new v.Uniform2f(d,f.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(d,f.u_pixel_coord_lower),u_scale:new v.Uniform3f(d,f.u_scale),u_fade:new v.Uniform1f(d,f.u_fade)}},fillOutline:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_world:new v.Uniform2f(d,f.u_world)}},fillOutlinePattern:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_world:new v.Uniform2f(d,f.u_world),u_image:new v.Uniform1i(d,f.u_image),u_texsize:new v.Uniform2f(d,f.u_texsize),u_pixel_coord_upper:new v.Uniform2f(d,f.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(d,f.u_pixel_coord_lower),u_scale:new v.Uniform3f(d,f.u_scale),u_fade:new v.Uniform1f(d,f.u_fade)}},circle:function(d,f){return{u_camera_to_center_distance:new v.Uniform1f(d,f.u_camera_to_center_distance),u_scale_with_map:new v.Uniform1i(d,f.u_scale_with_map),u_pitch_with_map:new v.Uniform1i(d,f.u_pitch_with_map),u_extrude_scale:new v.Uniform2f(d,f.u_extrude_scale),u_device_pixel_ratio:new v.Uniform1f(d,f.u_device_pixel_ratio),u_matrix:new v.UniformMatrix4f(d,f.u_matrix)}},collisionBox:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_camera_to_center_distance:new v.Uniform1f(d,f.u_camera_to_center_distance),u_pixels_to_tile_units:new v.Uniform1f(d,f.u_pixels_to_tile_units),u_extrude_scale:new v.Uniform2f(d,f.u_extrude_scale),u_overscale_factor:new v.Uniform1f(d,f.u_overscale_factor)}},collisionCircle:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_inv_matrix:new v.UniformMatrix4f(d,f.u_inv_matrix),u_camera_to_center_distance:new v.Uniform1f(d,f.u_camera_to_center_distance),u_viewport_size:new v.Uniform2f(d,f.u_viewport_size)}},debug:function(d,f){return{u_color:new v.UniformColor(d,f.u_color),u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_overlay:new v.Uniform1i(d,f.u_overlay),u_overlay_scale:new v.Uniform1f(d,f.u_overlay_scale)}},clippingMask:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix)}},heatmap:function(d,f){return{u_extrude_scale:new v.Uniform1f(d,f.u_extrude_scale),u_intensity:new v.Uniform1f(d,f.u_intensity),u_matrix:new v.UniformMatrix4f(d,f.u_matrix)}},heatmapTexture:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_world:new v.Uniform2f(d,f.u_world),u_image:new v.Uniform1i(d,f.u_image),u_color_ramp:new v.Uniform1i(d,f.u_color_ramp),u_opacity:new v.Uniform1f(d,f.u_opacity)}},hillshade:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_image:new v.Uniform1i(d,f.u_image),u_latrange:new v.Uniform2f(d,f.u_latrange),u_light:new v.Uniform2f(d,f.u_light),u_shadow:new v.UniformColor(d,f.u_shadow),u_highlight:new v.UniformColor(d,f.u_highlight),u_accent:new v.UniformColor(d,f.u_accent)}},hillshadePrepare:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_image:new v.Uniform1i(d,f.u_image),u_dimension:new v.Uniform2f(d,f.u_dimension),u_zoom:new v.Uniform1f(d,f.u_zoom),u_unpack:new v.Uniform4f(d,f.u_unpack)}},line:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_ratio:new v.Uniform1f(d,f.u_ratio),u_device_pixel_ratio:new v.Uniform1f(d,f.u_device_pixel_ratio),u_units_to_pixels:new v.Uniform2f(d,f.u_units_to_pixels)}},lineGradient:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_ratio:new v.Uniform1f(d,f.u_ratio),u_device_pixel_ratio:new v.Uniform1f(d,f.u_device_pixel_ratio),u_units_to_pixels:new v.Uniform2f(d,f.u_units_to_pixels),u_image:new v.Uniform1i(d,f.u_image),u_image_height:new v.Uniform1f(d,f.u_image_height)}},linePattern:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_texsize:new v.Uniform2f(d,f.u_texsize),u_ratio:new v.Uniform1f(d,f.u_ratio),u_device_pixel_ratio:new v.Uniform1f(d,f.u_device_pixel_ratio),u_image:new v.Uniform1i(d,f.u_image),u_units_to_pixels:new v.Uniform2f(d,f.u_units_to_pixels),u_scale:new v.Uniform3f(d,f.u_scale),u_fade:new v.Uniform1f(d,f.u_fade)}},lineSDF:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_ratio:new v.Uniform1f(d,f.u_ratio),u_device_pixel_ratio:new v.Uniform1f(d,f.u_device_pixel_ratio),u_units_to_pixels:new v.Uniform2f(d,f.u_units_to_pixels),u_patternscale_a:new v.Uniform2f(d,f.u_patternscale_a),u_patternscale_b:new v.Uniform2f(d,f.u_patternscale_b),u_sdfgamma:new v.Uniform1f(d,f.u_sdfgamma),u_image:new v.Uniform1i(d,f.u_image),u_tex_y_a:new v.Uniform1f(d,f.u_tex_y_a),u_tex_y_b:new v.Uniform1f(d,f.u_tex_y_b),u_mix:new v.Uniform1f(d,f.u_mix)}},raster:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_tl_parent:new v.Uniform2f(d,f.u_tl_parent),u_scale_parent:new v.Uniform1f(d,f.u_scale_parent),u_buffer_scale:new v.Uniform1f(d,f.u_buffer_scale),u_fade_t:new v.Uniform1f(d,f.u_fade_t),u_opacity:new v.Uniform1f(d,f.u_opacity),u_image0:new v.Uniform1i(d,f.u_image0),u_image1:new v.Uniform1i(d,f.u_image1),u_brightness_low:new v.Uniform1f(d,f.u_brightness_low),u_brightness_high:new v.Uniform1f(d,f.u_brightness_high),u_saturation_factor:new v.Uniform1f(d,f.u_saturation_factor),u_contrast_factor:new v.Uniform1f(d,f.u_contrast_factor),u_spin_weights:new v.Uniform3f(d,f.u_spin_weights)}},symbolIcon:function(d,f){return{u_is_size_zoom_constant:new v.Uniform1i(d,f.u_is_size_zoom_constant),u_is_size_feature_constant:new v.Uniform1i(d,f.u_is_size_feature_constant),u_size_t:new v.Uniform1f(d,f.u_size_t),u_size:new v.Uniform1f(d,f.u_size),u_camera_to_center_distance:new v.Uniform1f(d,f.u_camera_to_center_distance),u_pitch:new v.Uniform1f(d,f.u_pitch),u_rotate_symbol:new v.Uniform1i(d,f.u_rotate_symbol),u_aspect_ratio:new v.Uniform1f(d,f.u_aspect_ratio),u_fade_change:new v.Uniform1f(d,f.u_fade_change),u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_label_plane_matrix:new v.UniformMatrix4f(d,f.u_label_plane_matrix),u_coord_matrix:new v.UniformMatrix4f(d,f.u_coord_matrix),u_is_text:new v.Uniform1i(d,f.u_is_text),u_pitch_with_map:new v.Uniform1i(d,f.u_pitch_with_map),u_texsize:new v.Uniform2f(d,f.u_texsize),u_texture:new v.Uniform1i(d,f.u_texture)}},symbolSDF:function(d,f){return{u_is_size_zoom_constant:new v.Uniform1i(d,f.u_is_size_zoom_constant),u_is_size_feature_constant:new v.Uniform1i(d,f.u_is_size_feature_constant),u_size_t:new v.Uniform1f(d,f.u_size_t),u_size:new v.Uniform1f(d,f.u_size),u_camera_to_center_distance:new v.Uniform1f(d,f.u_camera_to_center_distance),u_pitch:new v.Uniform1f(d,f.u_pitch),u_rotate_symbol:new v.Uniform1i(d,f.u_rotate_symbol),u_aspect_ratio:new v.Uniform1f(d,f.u_aspect_ratio),u_fade_change:new v.Uniform1f(d,f.u_fade_change),u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_label_plane_matrix:new v.UniformMatrix4f(d,f.u_label_plane_matrix),u_coord_matrix:new v.UniformMatrix4f(d,f.u_coord_matrix),u_is_text:new v.Uniform1i(d,f.u_is_text),u_pitch_with_map:new v.Uniform1i(d,f.u_pitch_with_map),u_texsize:new v.Uniform2f(d,f.u_texsize),u_texture:new v.Uniform1i(d,f.u_texture),u_gamma_scale:new v.Uniform1f(d,f.u_gamma_scale),u_device_pixel_ratio:new v.Uniform1f(d,f.u_device_pixel_ratio),u_is_halo:new v.Uniform1i(d,f.u_is_halo)}},symbolTextAndIcon:function(d,f){return{u_is_size_zoom_constant:new v.Uniform1i(d,f.u_is_size_zoom_constant),u_is_size_feature_constant:new v.Uniform1i(d,f.u_is_size_feature_constant),u_size_t:new v.Uniform1f(d,f.u_size_t),u_size:new v.Uniform1f(d,f.u_size),u_camera_to_center_distance:new v.Uniform1f(d,f.u_camera_to_center_distance),u_pitch:new v.Uniform1f(d,f.u_pitch),u_rotate_symbol:new v.Uniform1i(d,f.u_rotate_symbol),u_aspect_ratio:new v.Uniform1f(d,f.u_aspect_ratio),u_fade_change:new v.Uniform1f(d,f.u_fade_change),u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_label_plane_matrix:new v.UniformMatrix4f(d,f.u_label_plane_matrix),u_coord_matrix:new v.UniformMatrix4f(d,f.u_coord_matrix),u_is_text:new v.Uniform1i(d,f.u_is_text),u_pitch_with_map:new v.Uniform1i(d,f.u_pitch_with_map),u_texsize:new v.Uniform2f(d,f.u_texsize),u_texsize_icon:new v.Uniform2f(d,f.u_texsize_icon),u_texture:new v.Uniform1i(d,f.u_texture),u_texture_icon:new v.Uniform1i(d,f.u_texture_icon),u_gamma_scale:new v.Uniform1f(d,f.u_gamma_scale),u_device_pixel_ratio:new v.Uniform1f(d,f.u_device_pixel_ratio),u_is_halo:new v.Uniform1i(d,f.u_is_halo)}},background:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_opacity:new v.Uniform1f(d,f.u_opacity),u_color:new v.UniformColor(d,f.u_color)}},backgroundPattern:function(d,f){return{u_matrix:new v.UniformMatrix4f(d,f.u_matrix),u_opacity:new v.Uniform1f(d,f.u_opacity),u_image:new v.Uniform1i(d,f.u_image),u_pattern_tl_a:new v.Uniform2f(d,f.u_pattern_tl_a),u_pattern_br_a:new v.Uniform2f(d,f.u_pattern_br_a),u_pattern_tl_b:new v.Uniform2f(d,f.u_pattern_tl_b),u_pattern_br_b:new v.Uniform2f(d,f.u_pattern_br_b),u_texsize:new v.Uniform2f(d,f.u_texsize),u_mix:new v.Uniform1f(d,f.u_mix),u_pattern_size_a:new v.Uniform2f(d,f.u_pattern_size_a),u_pattern_size_b:new v.Uniform2f(d,f.u_pattern_size_b),u_scale_a:new v.Uniform1f(d,f.u_scale_a),u_scale_b:new v.Uniform1f(d,f.u_scale_b),u_pixel_coord_upper:new v.Uniform2f(d,f.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(d,f.u_pixel_coord_lower),u_tile_units_to_pixels:new v.Uniform1f(d,f.u_tile_units_to_pixels)}}};function Yl(d,f,h,g,w,C,T){for(var I=d.context,M=I.gl,L=d.useProgram("collisionBox"),$=[],q=0,j=0,ne=0;ne<g.length;ne++){var J=g[ne],ae=f.getTile(J),ee=ae.getBucket(h);if(ee){var ie=J.posMatrix;0===w[0]&&0===w[1]||(ie=d.translatePosMatrix(J.posMatrix,ae,w,C));var pe=T?ee.textCollisionBox:ee.iconCollisionBox,ve=ee.collisionCircleArray;if(ve.length>0){var ke=v.create(),Ee=ie;v.mul(ke,ee.placementInvProjMatrix,d.transform.glCoordMatrix),v.mul(ke,ke,ee.placementViewportMatrix),$.push({circleArray:ve,circleOffset:j,transform:Ee,invTransform:ke}),j=q+=ve.length/4}pe&&L.draw(I,M.LINES,G.disabled,te.disabled,d.colorModeForRenderPass(),me.disabled,ef(ie,d.transform,ae),h.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,null,d.transform.zoom,null,null,pe.collisionVertexBuffer)}}if(T&&$.length){var Ae=d.useProgram("collisionCircle"),Ne=new v.StructArrayLayout2f1f2i16;Ne.resize(4*q),Ne._trim();for(var Ze=0,He=0,it=$;He<it.length;He+=1)for(var _t=it[He],xt=0;xt<_t.circleArray.length/4;xt++){var bt=4*xt,hn=_t.circleArray[bt+0],at=_t.circleArray[bt+1],qt=_t.circleArray[bt+2],ln=_t.circleArray[bt+3];Ne.emplace(Ze++,hn,at,qt,ln,0),Ne.emplace(Ze++,hn,at,qt,ln,1),Ne.emplace(Ze++,hn,at,qt,ln,2),Ne.emplace(Ze++,hn,at,qt,ln,3)}(!Fd||Fd.length<2*q)&&(Fd=function(Br){var oo=2*Br,fi=new v.StructArrayLayout3ui6;fi.resize(oo),fi._trim();for(var pi=0;pi<oo;pi++){var Zr=6*pi;fi.uint16[Zr+0]=4*pi+0,fi.uint16[Zr+1]=4*pi+1,fi.uint16[Zr+2]=4*pi+2,fi.uint16[Zr+3]=4*pi+2,fi.uint16[Zr+4]=4*pi+3,fi.uint16[Zr+5]=4*pi+0}return fi}(q));for(var Ye=I.createIndexBuffer(Fd,!0),Pt=I.createVertexBuffer(Ne,v.collisionCircleLayout.members,!0),Vt=0,Ot=$;Vt<Ot.length;Vt+=1){var Tt=Ot[Vt],nr=xi(Tt.transform,Tt.invTransform,d.transform);Ae.draw(I,M.TRIANGLES,G.disabled,te.disabled,d.colorModeForRenderPass(),me.disabled,nr,h.id,Pt,Ye,v.SegmentVector.simpleSegment(0,2*Tt.circleOffset,Tt.circleArray.length,Tt.circleArray.length/2),null,d.transform.zoom,null,null,null)}Pt.destroy(),Ye.destroy()}}var Nu=v.identity(new Float32Array(16));function ns(d,f,h,g,w,C){var T=v.getAnchorAlignment(d),I=-(T.horizontalAlign-.5)*f,M=-(T.verticalAlign-.5)*h,L=v.evaluateVariableOffset(d,g);return new v.Point((I/w+L[0])*C,(M/w+L[1])*C)}function Vd(d,f,h,g,w,C,T,I,M,L,$){var q=d.text.placedSymbolArray,j=d.text.dynamicLayoutVertexArray,ne=d.icon.dynamicLayoutVertexArray,J={};j.clear();for(var ae=0;ae<q.length;ae++){var ee=q.get(ae),ie=ee.hidden||!ee.crossTileID||d.allowVerticalPlacement&&!ee.placedOrientation?null:g[ee.crossTileID];if(ie){var pe=new v.Point(ee.anchorX,ee.anchorY),ve=dn(pe,h?I:T),ke=Rd(C.cameraToCenterDistance,ve.signedDistanceFromCamera),Ee=w.evaluateSizeForFeature(d.textSizeData,L,ee)*ke/v.ONE_EM;h&&(Ee*=d.tilePixelRatio/M);for(var Ae=ns(ie.anchor,ie.width,ie.height,ie.textOffset,ie.textBoxScale,Ee),Ne=h?dn(pe.add(Ae),T).point:ve.point.add(f?Ae.rotate(-C.angle):Ae),Ze=d.allowVerticalPlacement&&ee.placedOrientation===v.WritingMode.vertical?Math.PI/2:0,He=0;He<ee.numGlyphs;He++)v.addDynamicAttributes(j,Ne,Ze);$&&ee.associatedIconIndex>=0&&(J[ee.associatedIconIndex]={shiftedAnchor:Ne,angle:Ze})}else So(ee.numGlyphs,j)}if($){ne.clear();for(var it=d.icon.placedSymbolArray,_t=0;_t<it.length;_t++){var xt=it.get(_t);if(xt.hidden)So(xt.numGlyphs,ne);else{var bt=J[_t];if(bt)for(var hn=0;hn<xt.numGlyphs;hn++)v.addDynamicAttributes(ne,bt.shiftedAnchor,bt.angle);else So(xt.numGlyphs,ne)}}d.icon.dynamicLayoutVertexBuffer.updateData(ne)}d.text.dynamicLayoutVertexBuffer.updateData(j)}function Np(d,f,h){return h.iconsInText&&f?"symbolTextAndIcon":d?"symbolSDF":"symbolIcon"}function af(d,f,h,g,w,C,T,I,M,L,$,q){for(var j=d.context,ne=j.gl,J=d.transform,ae="map"===I,ee="map"===M,ie=ae&&"point"!==h.layout.get("symbol-placement"),pe=ae&&!ee&&!ie,ve=!h.layout.get("symbol-sort-key").isConstant(),ke=!1,Ee=d.depthModeForSublayer(0,G.ReadOnly),Ae=h.layout.get("text-variable-anchor"),Ne=[],Ze=0,He=g;Ze<He.length;Ze+=1){var it=He[Ze],_t=f.getTile(it),xt=_t.getBucket(h);if(xt){var bt=w?xt.text:xt.icon;if(bt&&bt.segments.get().length){var hn=bt.programConfigurations.get(h.id),at=w||xt.sdfIcons,qt=w?xt.textSizeData:xt.iconSizeData,ln=ee||0!==J.pitch,Ye=d.useProgram(Np(at,w,xt),hn),Pt=v.evaluateSizeForZoom(qt,J.zoom),Vt=void 0,Ot=[0,0],Tt=void 0,nr=void 0,Br=null,oo=void 0;if(w)Tt=_t.glyphAtlasTexture,nr=ne.LINEAR,Vt=_t.glyphAtlasTexture.size,xt.iconsInText&&(Ot=_t.imageAtlasTexture.size,Br=_t.imageAtlasTexture,oo=ln||d.options.rotating||d.options.zooming||"composite"===qt.kind||"camera"===qt.kind?ne.LINEAR:ne.NEAREST);else{var fi=1!==h.layout.get("icon-size").constantOr(0)||xt.iconsNeedLinear;Tt=_t.imageAtlasTexture,nr=at||d.options.rotating||d.options.zooming||fi||ln?ne.LINEAR:ne.NEAREST,Vt=_t.imageAtlasTexture.size}var pi=Jo(_t,1,d.transform.zoom),Zr=Rr(it.posMatrix,ee,ae,d.transform,pi),ko=bn(it.posMatrix,ee,ae,d.transform,pi),La=Ae&&xt.hasTextData(),go="none"!==h.layout.get("icon-text-fit")&&La&&xt.hasIconData();ie&&Wn(xt,it.posMatrix,d,w,Zr,ko,ee,L);var Me=d.translatePosMatrix(it.posMatrix,_t,C,T),Ft=ie||w&&Ae||go?Nu:Zr,Bt=d.translatePosMatrix(ko,_t,C,T,!0),cn=at&&0!==h.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1),Gt={program:Ye,buffers:bt,uniformValues:at?xt.iconsInText?sf(qt.kind,Pt,pe,ee,d,Me,Ft,Bt,Vt,Ot):Ra(qt.kind,Pt,pe,ee,d,Me,Ft,Bt,w,Vt,!0):rf(qt.kind,Pt,pe,ee,d,Me,Ft,Bt,w,Vt),atlasTexture:Tt,atlasTextureIcon:Br,atlasInterpolation:nr,atlasInterpolationIcon:oo,isSDF:at,hasHalo:cn};if(ve&&xt.canOverlap){ke=!0;for(var Hc=0,oa=bt.segments.get();Hc<oa.length;Hc+=1){var Rs=oa[Hc];Ne.push({segments:new v.SegmentVector([Rs]),sortKey:Rs.sortKey,state:Gt})}}else Ne.push({segments:bt.segments,sortKey:0,state:Gt})}}}ke&&Ne.sort(function(qs,nc){return qs.sortKey-nc.sortKey});for(var $c=0,sa=Ne;$c<sa.length;$c+=1){var qc=sa[$c],Di=qc.state;if(j.activeTexture.set(ne.TEXTURE0),Di.atlasTexture.bind(Di.atlasInterpolation,ne.CLAMP_TO_EDGE),Di.atlasTextureIcon&&(j.activeTexture.set(ne.TEXTURE1),Di.atlasTextureIcon&&Di.atlasTextureIcon.bind(Di.atlasInterpolationIcon,ne.CLAMP_TO_EDGE)),Di.isSDF){var tc=Di.uniformValues;Di.hasHalo&&(tc.u_is_halo=1,Pa(Di.buffers,qc.segments,h,d,Di.program,Ee,$,q,tc)),tc.u_is_halo=0}Pa(Di.buffers,qc.segments,h,d,Di.program,Ee,$,q,Di.uniformValues)}}function Pa(d,f,h,g,w,C,T,I,M){var L=g.context;w.draw(L,L.gl.TRIANGLES,C,T,I,me.disabled,M,h.id,d.layoutVertexBuffer,d.indexBuffer,f,h.paint,g.transform.zoom,d.programConfigurations.get(h.id),d.dynamicLayoutVertexBuffer,d.opacityVertexBuffer)}function zc(d,f,h,g,w,C,T){var I,M,L,$,q,j=d.context.gl,ne=h.paint.get("fill-pattern"),J=ne&&ne.constantOr(1),ae=h.getCrossfadeParameters();T?(M=J&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",I=j.LINES):(M=J?"fillPattern":"fill",I=j.TRIANGLES);for(var ee=0,ie=g;ee<ie.length;ee+=1){var pe=ie[ee],ve=f.getTile(pe);if(!J||ve.patternsLoaded()){var ke=ve.getBucket(h);if(ke){var Ee=ke.programConfigurations.get(h.id),Ae=d.useProgram(M,Ee);J&&(d.context.activeTexture.set(j.TEXTURE0),ve.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),Ee.updatePaintBuffers(ae));var Ne=ne.constantOr(null);if(Ne&&ve.imageAtlas){var Ze=ve.imageAtlas,He=Ze.patternPositions[Ne.to.toString()],it=Ze.patternPositions[Ne.from.toString()];He&&it&&Ee.setConstantPatternPositions(He,it)}var _t=d.translatePosMatrix(pe.posMatrix,ve,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(T){$=ke.indexBuffer2,q=ke.segments2;var xt=[j.drawingBufferWidth,j.drawingBufferHeight];L="fillOutlinePattern"===M&&J?Mg(_t,d,ae,ve,xt):Pu(_t,xt)}else $=ke.indexBuffer,q=ke.segments,L=J?ll(_t,d,ae,ve):Kl(_t);Ae.draw(d.context,I,w,d.stencilModeForClipping(pe),C,me.disabled,L,h.id,ke.layoutVertexBuffer,$,q,h.paint,d.transform.zoom,Ee)}}}}function cl(d,f,h,g,w,C,T){for(var I=d.context,M=I.gl,L=h.paint.get("fill-extrusion-pattern"),$=L.constantOr(1),q=h.getCrossfadeParameters(),j=h.paint.get("fill-extrusion-opacity"),ne=0,J=g;ne<J.length;ne+=1){var ae=J[ne],ee=f.getTile(ae),ie=ee.getBucket(h);if(ie){var pe=ie.programConfigurations.get(h.id),ve=d.useProgram($?"fillExtrusionPattern":"fillExtrusion",pe);$&&(d.context.activeTexture.set(M.TEXTURE0),ee.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),pe.updatePaintBuffers(q));var ke=L.constantOr(null);if(ke&&ee.imageAtlas){var Ee=ee.imageAtlas,Ae=Ee.patternPositions[ke.to.toString()],Ne=Ee.patternPositions[ke.from.toString()];Ae&&Ne&&pe.setConstantPatternPositions(Ae,Ne)}var Ze=d.translatePosMatrix(ae.posMatrix,ee,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),He=h.paint.get("fill-extrusion-vertical-gradient"),it=$?kw(Ze,d,He,j,ae,q,ee):Qh(Ze,d,He,j);ve.draw(I,I.gl.TRIANGLES,w,C,T,me.backCCW,it,h.id,ie.layoutVertexBuffer,ie.indexBuffer,ie.segments,h.paint,d.transform.zoom,pe)}}}function ev(d,f,h,g,w,C){var T=d.context,I=T.gl,M=f.fbo;if(M){var L=d.useProgram("hillshade");T.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,M.colorAttachment.get());var $=function(q,j,ne){var J=ne.paint.get("hillshade-shadow-color"),ae=ne.paint.get("hillshade-highlight-color"),ee=ne.paint.get("hillshade-accent-color"),ie=ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===ne.paint.get("hillshade-illumination-anchor")&&(ie-=q.transform.angle);var pe,ve,ke,Ee=!q.options.moving;return{u_matrix:q.transform.calculatePosMatrix(j.tileID.toUnwrapped(),Ee),u_image:0,u_latrange:(pe=j.tileID,ve=Math.pow(2,pe.canonical.z),ke=pe.canonical.y,[new v.MercatorCoordinate(0,ke/ve).toLngLat().lat,new v.MercatorCoordinate(0,(ke+1)/ve).toLngLat().lat]),u_light:[ne.paint.get("hillshade-exaggeration"),ie],u_shadow:J,u_highlight:ae,u_accent:ee}}(d,f,h);L.draw(T,I.TRIANGLES,g,w,C,me.disabled,$,h.id,d.rasterBoundsBuffer,d.quadTriangleIndexBuffer,d.rasterBoundsSegments)}}function Ss(d,f,h,g,w,C){var ae,ee,ie,pe,T=d.context,I=T.gl,M=f.dem;if(M&&M.data){var L=M.dim,$=M.stride,q=M.getPixels();if(T.activeTexture.set(I.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),f.demTexture=f.demTexture||d.getTileTexture($),f.demTexture){var j=f.demTexture;j.update(q,{premultiply:!1}),j.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else f.demTexture=new v.Texture(T,q,I.RGBA,{premultiply:!1}),f.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);T.activeTexture.set(I.TEXTURE0);var ne=f.fbo;if(!ne){var J=new v.Texture(T,{width:L,height:L,data:null},I.RGBA);J.bind(I.LINEAR,I.CLAMP_TO_EDGE),(ne=f.fbo=T.createFramebuffer(L,L,!0)).colorAttachment.set(J.texture)}T.bindFramebuffer.set(ne.framebuffer),T.viewport.set([0,0,L,L]),d.useProgram("hillshadePrepare").draw(T,I.TRIANGLES,g,w,C,me.disabled,(ae=f.tileID,ie=(ee=M).stride,pe=v.create(),v.ortho(pe,0,v.EXTENT,-v.EXTENT,0,0,1),v.translate(pe,pe,[0,-v.EXTENT,0]),{u_matrix:pe,u_image:1,u_dimension:[ie,ie],u_zoom:ae.overscaledZ,u_unpack:ee.getUnpackVector()}),h.id,d.rasterBoundsBuffer,d.quadTriangleIndexBuffer,d.rasterBoundsSegments),f.needsHillshadePrepare=!1}}function Tr(d,f,h,g,w){var C=g.paint.get("raster-fade-duration");if(C>0){var T=v.browser.now(),I=(T-d.timeAdded)/C,M=f?(T-f.timeAdded)/C:-1,L=h.getSource(),$=w.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),q=!f||Math.abs(f.tileID.overscaledZ-$)>Math.abs(d.tileID.overscaledZ-$),j=q&&d.refreshedUponExpiration?1:v.clamp(q?I:1-M,0,1);return d.refreshedUponExpiration&&I>=1&&(d.refreshedUponExpiration=!1),f?{opacity:1,mix:1-j}:{opacity:j,mix:0}}return{opacity:1,mix:0}}var js=new v.Color(1,0,0,1),lf=new v.Color(0,1,0,1),cf=new v.Color(0,0,1,1),zd=new v.Color(1,0,1,1),Oa=new v.Color(0,1,1,1);function uf(d,f,h,g){Uc(d,0,f+h/2,d.transform.width,h,g)}function df(d,f,h,g){Uc(d,f-h/2,0,h,d.transform.height,g)}function Uc(d,f,h,g,w,C){var T=d.context,I=T.gl;I.enable(I.SCISSOR_TEST),I.scissor(f*v.browser.devicePixelRatio,h*v.browser.devicePixelRatio,g*v.browser.devicePixelRatio,w*v.browser.devicePixelRatio),T.clear({color:C}),I.disable(I.SCISSOR_TEST)}function Lp(d,f,h){var g=d.context,w=g.gl,C=h.posMatrix,T=d.useProgram("debug"),I=G.disabled,M=te.disabled,L=d.colorModeForRenderPass();g.activeTexture.set(w.TEXTURE0),d.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),T.draw(g,w.LINE_STRIP,I,M,L,me.disabled,tf(C,v.Color.red),"$debug",d.debugBuffer,d.tileBorderIndexBuffer,d.debugSegments);var $=f.getTileByID(h.key).latestRawTileData,q=Math.floor(($&&$.byteLength||0)/1024),j=f.getTile(h).tileSize,ne=512/Math.min(j,512)*(h.overscaledZ/d.transform.zoom)*.5,J=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(J+=" => "+h.overscaledZ),function(ae,ee){ae.initDebugOverlayCanvas();var ie=ae.debugOverlayCanvas,pe=ae.context.gl,ve=ae.debugOverlayCanvas.getContext("2d");ve.clearRect(0,0,ie.width,ie.height),ve.shadowColor="white",ve.shadowBlur=2,ve.lineWidth=1.5,ve.strokeStyle="white",ve.textBaseline="top",ve.font="bold 36px Open Sans, sans-serif",ve.fillText(ee,5,5),ve.strokeText(ee,5,5),ae.debugOverlayTexture.update(ie),ae.debugOverlayTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE)}(d,J+" "+q+"kb"),T.draw(g,w.TRIANGLES,I,M,de.alphaBlended,me.disabled,tf(C,v.Color.transparent,ne),"$debug",d.debugBuffer,d.quadTriangleIndexBuffer,d.debugSegments)}var Lu={symbol:function(d,f,h,g,w){if("translucent"===d.renderPass){var C=te.disabled,T=d.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(I,M,L,$,q,j,ne){for(var J=M.transform,ae="map"===q,ee="map"===j,ie=0,pe=I;ie<pe.length;ie+=1){var ve=pe[ie],ke=$.getTile(ve),Ee=ke.getBucket(L);if(Ee&&Ee.text&&Ee.text.segments.get().length){var Ae=v.evaluateSizeForZoom(Ee.textSizeData,J.zoom),Ne=Jo(ke,1,M.transform.zoom),Ze=Rr(ve.posMatrix,ee,ae,M.transform,Ne),He="none"!==L.layout.get("icon-text-fit")&&Ee.hasIconData();if(Ae){var it=Math.pow(2,J.zoom-ke.tileID.overscaledZ);Vd(Ee,ae,ee,ne,v.symbolSize,J,Ze,ve.posMatrix,it,Ae,He)}}}}(g,d,h,f,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),w),0!==h.paint.get("icon-opacity").constantOr(1)&&af(d,f,h,g,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),C,T),0!==h.paint.get("text-opacity").constantOr(1)&&af(d,f,h,g,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),C,T),f.map.showCollisionBoxes&&(Yl(d,f,h,g,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),Yl(d,f,h,g,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))}},circle:function(d,f,h,g){if("translucent"===d.renderPass){var w=h.paint.get("circle-opacity"),C=h.paint.get("circle-stroke-width"),T=h.paint.get("circle-stroke-opacity"),I=!h.layout.get("circle-sort-key").isConstant();if(0!==w.constantOr(1)||0!==C.constantOr(1)&&0!==T.constantOr(1)){for(var M=d.context,L=M.gl,$=d.depthModeForSublayer(0,G.ReadOnly),q=te.disabled,j=d.colorModeForRenderPass(),ne=[],J=0;J<g.length;J++){var ae=g[J],ee=f.getTile(ae),ie=ee.getBucket(h);if(ie){var pe=ie.programConfigurations.get(h.id),ve={programConfiguration:pe,program:d.useProgram("circle",pe),layoutVertexBuffer:ie.layoutVertexBuffer,indexBuffer:ie.indexBuffer,uniformValues:Jh(d,ae,ee,h)};if(I)for(var ke=0,Ee=ie.segments.get();ke<Ee.length;ke+=1){var Ae=Ee[ke];ne.push({segments:new v.SegmentVector([Ae]),sortKey:Ae.sortKey,state:ve})}else ne.push({segments:ie.segments,sortKey:0,state:ve})}}I&&ne.sort(function(_t,xt){return _t.sortKey-xt.sortKey});for(var Ne=0,Ze=ne;Ne<Ze.length;Ne+=1){var He=Ze[Ne],it=He.state;it.program.draw(M,L.TRIANGLES,$,q,j,me.disabled,it.uniformValues,h.id,it.layoutVertexBuffer,it.indexBuffer,He.segments,h.paint,d.transform.zoom,it.programConfiguration)}}}},heatmap:function(d,f,h,g){if(0!==h.paint.get("heatmap-opacity"))if("offscreen"===d.renderPass){var w=d.context,C=w.gl,T=te.disabled,I=new de([C.ONE,C.ONE],v.Color.transparent,[!0,!0,!0,!0]);(function(ne,J,ae){var ee=ne.gl;ne.activeTexture.set(ee.TEXTURE1),ne.viewport.set([0,0,J.width/4,J.height/4]);var ve,ke,Ee,Ae,Ne,ie=ae.heatmapFbo;if(ie)ee.bindTexture(ee.TEXTURE_2D,ie.colorAttachment.get()),ne.bindFramebuffer.set(ie.framebuffer);else{var pe=ee.createTexture();ee.bindTexture(ee.TEXTURE_2D,pe),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_S,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_T,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MIN_FILTER,ee.LINEAR),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MAG_FILTER,ee.LINEAR),Ee=pe,Ae=ie=ae.heatmapFbo=ne.createFramebuffer(J.width/4,J.height/4,!1),(Ne=(ve=ne).gl).texImage2D(Ne.TEXTURE_2D,0,Ne.RGBA,(ke=J).width/4,ke.height/4,0,Ne.RGBA,ve.extRenderToTextureHalfFloat?ve.extTextureHalfFloat.HALF_FLOAT_OES:Ne.UNSIGNED_BYTE,null),Ae.colorAttachment.set(Ee)}})(w,d,h),w.clear({color:v.Color.transparent});for(var M=0;M<g.length;M++){var L=g[M];if(!f.hasRenderableParent(L)){var $=f.getTile(L),q=$.getBucket(h);if(q){var j=q.programConfigurations.get(h.id);d.useProgram("heatmap",j).draw(w,C.TRIANGLES,G.disabled,T,I,me.disabled,Od(L.posMatrix,$,d.transform.zoom,h.paint.get("heatmap-intensity")),h.id,q.layoutVertexBuffer,q.indexBuffer,q.segments,h.paint,d.transform.zoom,j)}}}w.viewport.set([0,0,d.width,d.height])}else"translucent"===d.renderPass&&(d.context.setColorMode(d.colorModeForRenderPass()),function(ne,J){var ae=ne.context,ee=ae.gl,ie=J.heatmapFbo;if(ie){ae.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,ie.colorAttachment.get()),ae.activeTexture.set(ee.TEXTURE1);var pe=J.colorRampTexture;pe||(pe=J.colorRampTexture=new v.Texture(ae,J.colorRamp,ee.RGBA)),pe.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),ne.useProgram("heatmapTexture").draw(ae,ee.TRIANGLES,G.disabled,te.disabled,ne.colorModeForRenderPass(),me.disabled,function(ve,ke){var Ne=v.create();v.ortho(Ne,0,ve.width,ve.height,0,0,1);var Ze=ve.context.gl;return{u_matrix:Ne,u_world:[Ze.drawingBufferWidth,Ze.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ke.paint.get("heatmap-opacity")}}(ne,J),J.id,ne.viewportBuffer,ne.quadTriangleIndexBuffer,ne.viewportSegments,J.paint,ne.transform.zoom)}}(d,h))},line:function(d,f,h,g){if("translucent"===d.renderPass){var w=h.paint.get("line-opacity"),C=h.paint.get("line-width");if(0!==w.constantOr(1)&&0!==C.constantOr(1))for(var T=d.depthModeForSublayer(0,G.ReadOnly),I=d.colorModeForRenderPass(),M=h.paint.get("line-dasharray"),L=h.paint.get("line-pattern"),$=L.constantOr(1),q=h.paint.get("line-gradient"),j=h.getCrossfadeParameters(),ne=$?"linePattern":M?"lineSDF":q?"lineGradient":"line",J=d.context,ae=J.gl,ee=!0,ie=0,pe=g;ie<pe.length;ie+=1){var ve=pe[ie],ke=f.getTile(ve);if(!$||ke.patternsLoaded()){var Ee=ke.getBucket(h);if(Ee){var Ae=Ee.programConfigurations.get(h.id),Ne=d.context.program.get(),Ze=d.useProgram(ne,Ae),He=ee||Ze.program!==Ne,it=L.constantOr(null);if(it&&ke.imageAtlas){var _t=ke.imageAtlas,xt=_t.patternPositions[it.to.toString()],bt=_t.patternPositions[it.from.toString()];xt&&bt&&Ae.setConstantPatternPositions(xt,bt)}var hn=$?hr(d,ke,h,j):M?nf(d,ke,h,M,j):q?Nd(d,ke,h,Ee.lineClipsArray.length):Aa(d,ke,h);if($)J.activeTexture.set(ae.TEXTURE0),ke.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),Ae.updatePaintBuffers(j);else if(M&&(He||d.lineAtlas.dirty))J.activeTexture.set(ae.TEXTURE0),d.lineAtlas.bind(J);else if(q){var at=Ee.gradients[h.id],qt=at.texture;if(h.gradientVersion!==at.version){var ln=256;if(h.stepInterpolant){var Ye=f.getSource().maxzoom,Pt=ve.canonical.z===Ye?Math.ceil(1<<d.transform.maxZoom-ve.canonical.z):1;ln=v.clamp(v.nextPowerOfTwo(Ee.maxLineLength/v.EXTENT*1024*Pt),256,J.maxTextureSize)}at.gradient=v.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:ln,image:at.gradient||void 0,clips:Ee.lineClipsArray}),at.texture?at.texture.update(at.gradient):at.texture=new v.Texture(J,at.gradient,ae.RGBA),at.version=h.gradientVersion,qt=at.texture}J.activeTexture.set(ae.TEXTURE0),qt.bind(h.stepInterpolant?ae.NEAREST:ae.LINEAR,ae.CLAMP_TO_EDGE)}Ze.draw(J,ae.TRIANGLES,T,d.stencilModeForClipping(ve),I,me.disabled,hn,h.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,h.paint,d.transform.zoom,Ae,Ee.layoutVertexBuffer2),ee=!1}}}}},fill:function(d,f,h,g){var w=h.paint.get("fill-color"),C=h.paint.get("fill-opacity");if(0!==C.constantOr(1)){var T=d.colorModeForRenderPass(),I=h.paint.get("fill-pattern"),M=d.opaquePassEnabledForLayer()&&!I.constantOr(1)&&1===w.constantOr(v.Color.transparent).a&&1===C.constantOr(0)?"opaque":"translucent";if(d.renderPass===M){var L=d.depthModeForSublayer(1,"opaque"===d.renderPass?G.ReadWrite:G.ReadOnly);zc(d,f,h,g,L,T,!1)}if("translucent"===d.renderPass&&h.paint.get("fill-antialias")){var $=d.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,G.ReadOnly);zc(d,f,h,g,$,T,!0)}}},"fill-extrusion":function(d,f,h,g){var w=h.paint.get("fill-extrusion-opacity");if(0!==w&&"translucent"===d.renderPass){var C=new G(d.context.gl.LEQUAL,G.ReadWrite,d.depthRangeFor3D);if(1!==w||h.paint.get("fill-extrusion-pattern").constantOr(1))cl(d,f,h,g,C,te.disabled,de.disabled),cl(d,f,h,g,C,d.stencilModeFor3D(),d.colorModeForRenderPass());else{var T=d.colorModeForRenderPass();cl(d,f,h,g,C,te.disabled,T)}}},hillshade:function(d,f,h,g){if("offscreen"===d.renderPass||"translucent"===d.renderPass){for(var w=d.context,C=d.depthModeForSublayer(0,G.ReadOnly),T=d.colorModeForRenderPass(),I="translucent"===d.renderPass?d.stencilConfigForOverlap(g):[{},g],M=I[0],L=0,$=I[1];L<$.length;L+=1){var q=$[L],j=f.getTile(q);j.needsHillshadePrepare&&"offscreen"===d.renderPass?Ss(d,j,h,C,te.disabled,T):"translucent"===d.renderPass&&ev(d,j,h,C,M[q.overscaledZ],T)}w.viewport.set([0,0,d.width,d.height])}},raster:function(d,f,h,g){if("translucent"===d.renderPass&&0!==h.paint.get("raster-opacity")&&g.length)for(var w=d.context,C=w.gl,T=f.getSource(),I=d.useProgram("raster"),M=d.colorModeForRenderPass(),L=T instanceof wa?[{},g]:d.stencilConfigForOverlap(g),$=L[0],q=L[1],j=q[q.length-1].overscaledZ,ne=!d.options.moving,J=0,ae=q;J<ae.length;J+=1){var ee=ae[J],ie=d.depthModeForSublayer(ee.overscaledZ-j,1===h.paint.get("raster-opacity")?G.ReadWrite:G.ReadOnly,C.LESS),pe=f.getTile(ee),ve=d.transform.calculatePosMatrix(ee.toUnwrapped(),ne);pe.registerFadeDuration(h.paint.get("raster-fade-duration"));var ke=f.findLoadedParent(ee,0),Ee=Tr(pe,ke,f,h,d.transform),Ae=void 0,Ne=void 0,Ze="nearest"===h.paint.get("raster-resampling")?C.NEAREST:C.LINEAR;w.activeTexture.set(C.TEXTURE0),pe.texture.bind(Ze,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST),w.activeTexture.set(C.TEXTURE1),ke?(ke.texture.bind(Ze,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST),Ae=Math.pow(2,ke.tileID.overscaledZ-pe.tileID.overscaledZ),Ne=[pe.tileID.canonical.x*Ae%1,pe.tileID.canonical.y*Ae%1]):pe.texture.bind(Ze,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST);var He=Z(ve,Ne||[0,0],Ae||1,Ee,h);T instanceof wa?I.draw(w,C.TRIANGLES,ie,te.disabled,M,me.disabled,He,h.id,T.boundsBuffer,d.quadTriangleIndexBuffer,T.boundsSegments):I.draw(w,C.TRIANGLES,ie,$[ee.overscaledZ],M,me.disabled,He,h.id,d.rasterBoundsBuffer,d.quadTriangleIndexBuffer,d.rasterBoundsSegments)}},background:function(d,f,h){var g=h.paint.get("background-color"),w=h.paint.get("background-opacity");if(0!==w){var C=d.context,T=C.gl,I=d.transform,M=I.tileSize,L=h.paint.get("background-pattern");if(!d.isPatternMissing(L)){var $=!L&&1===g.a&&1===w&&d.opaquePassEnabledForLayer()?"opaque":"translucent";if(d.renderPass===$){var q=te.disabled,j=d.depthModeForSublayer(0,"opaque"===$?G.ReadWrite:G.ReadOnly),ne=d.colorModeForRenderPass(),J=d.useProgram(L?"backgroundPattern":"background"),ae=I.coveringTiles({tileSize:M});L&&(C.activeTexture.set(T.TEXTURE0),d.imageManager.bind(d.context));for(var ee=h.getCrossfadeParameters(),ie=0,pe=ae;ie<pe.length;ie+=1){var ve=pe[ie],ke=d.transform.calculatePosMatrix(ve.toUnwrapped()),Ee=L?Bd(ke,w,d,L,{tileID:ve,tileSize:M},ee):Ma(ke,w,g);J.draw(C,T.TRIANGLES,j,q,ne,me.disabled,Ee,h.id,d.tileExtentBuffer,d.quadTriangleIndexBuffer,d.tileExtentSegments)}}}}},debug:function(d,f,h){for(var g=0;g<h.length;g++)Lp(d,f,h[g])},custom:function(d,f,h){var g=d.context,w=h.implementation;if("offscreen"===d.renderPass){var C=w.prerender;C&&(d.setCustomLayerDefaults(),g.setColorMode(d.colorModeForRenderPass()),C.call(w,g.gl,d.transform.customLayerMatrix()),g.setDirty(),d.setBaseState())}else if("translucent"===d.renderPass){d.setCustomLayerDefaults(),g.setColorMode(d.colorModeForRenderPass()),g.setStencilMode(te.disabled);var T="3d"===w.renderingMode?new G(d.context.gl.LEQUAL,G.ReadWrite,d.depthRangeFor3D):d.depthModeForSublayer(0,G.ReadOnly);g.setDepthMode(T),w.render(g.gl,d.transform.customLayerMatrix()),g.setDirty(),d.setBaseState(),g.bindFramebuffer.set(null)}}},lr=function(d,f){this.context=new K(d),this.transform=f,this._tileTextures={},this.setup(),this.numSublayers=W.maxUnderzooming+W.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ds,this.gpuTimers={}};lr.prototype.resize=function(d,f){if(this.width=d*v.browser.devicePixelRatio,this.height=f*v.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var h=0,g=this.style._order;h<g.length;h+=1)this.style._layers[g[h]].resize()},lr.prototype.setup=function(){var d=this.context,f=new v.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(v.EXTENT,0),f.emplaceBack(0,v.EXTENT),f.emplaceBack(v.EXTENT,v.EXTENT),this.tileExtentBuffer=d.createVertexBuffer(f,Sa.members),this.tileExtentSegments=v.SegmentVector.simpleSegment(0,0,4,2);var h=new v.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(v.EXTENT,0),h.emplaceBack(0,v.EXTENT),h.emplaceBack(v.EXTENT,v.EXTENT),this.debugBuffer=d.createVertexBuffer(h,Sa.members),this.debugSegments=v.SegmentVector.simpleSegment(0,0,4,5);var g=new v.StructArrayLayout4i8;g.emplaceBack(0,0,0,0),g.emplaceBack(v.EXTENT,0,v.EXTENT,0),g.emplaceBack(0,v.EXTENT,0,v.EXTENT),g.emplaceBack(v.EXTENT,v.EXTENT,v.EXTENT,v.EXTENT),this.rasterBoundsBuffer=d.createVertexBuffer(g,Ji.members),this.rasterBoundsSegments=v.SegmentVector.simpleSegment(0,0,4,2);var w=new v.StructArrayLayout2i4;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=d.createVertexBuffer(w,Sa.members),this.viewportSegments=v.SegmentVector.simpleSegment(0,0,4,2);var C=new v.StructArrayLayout1ui2;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=d.createIndexBuffer(C);var T=new v.StructArrayLayout3ui6;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=d.createIndexBuffer(T),this.emptyTexture=new v.Texture(d,{width:1,height:1,data:new Uint8Array([0,0,0,0])},d.gl.RGBA);var I=this.context.gl;this.stencilClearMode=new te({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)},lr.prototype.clearStencil=function(){var d=this.context,f=d.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var h=v.create();v.ortho(h,0,this.width,this.height,0,0,1),v.scale(h,h,[f.drawingBufferWidth,f.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(d,f.TRIANGLES,G.disabled,this.stencilClearMode,de.disabled,me.disabled,Ou(h),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},lr.prototype._renderTileClippingMasks=function(d,f){if(this.currentStencilSource!==d.source&&d.isTileClipped()&&f&&f.length){this.currentStencilSource=d.source;var h=this.context,g=h.gl;this.nextStencilID+f.length>256&&this.clearStencil(),h.setColorMode(de.disabled),h.setDepthMode(G.disabled);var w=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var C=0,T=f;C<T.length;C+=1){var I=T[C],M=this._tileClippingMaskIDs[I.key]=this.nextStencilID++;w.draw(h,g.TRIANGLES,G.disabled,new te({func:g.ALWAYS,mask:0},M,255,g.KEEP,g.KEEP,g.REPLACE),de.disabled,me.disabled,Ou(I.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},lr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var d=this.nextStencilID++,f=this.context.gl;return new te({func:f.NOTEQUAL,mask:255},d,255,f.KEEP,f.KEEP,f.REPLACE)},lr.prototype.stencilModeForClipping=function(d){var f=this.context.gl;return new te({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[d.key],0,f.KEEP,f.KEEP,f.REPLACE)},lr.prototype.stencilConfigForOverlap=function(d){var f,h=this.context.gl,g=d.sort(function(M,L){return L.overscaledZ-M.overscaledZ}),w=g[g.length-1].overscaledZ,C=g[0].overscaledZ-w+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();for(var T={},I=0;I<C;I++)T[I+w]=new te({func:h.GEQUAL,mask:255},I+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=C,[T,g]}return[(f={},f[w]=te.disabled,f),g]},lr.prototype.colorModeForRenderPass=function(){var d=this.context.gl;return this._showOverdrawInspector?new de([d.CONSTANT_COLOR,d.ONE],new v.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?de.unblended:de.alphaBlended},lr.prototype.depthModeForSublayer=function(d,f,h){if(!this.opaquePassEnabledForLayer())return G.disabled;var g=1-((1+this.currentLayer)*this.numSublayers+d)*this.depthEpsilon;return new G(h||this.context.gl.LEQUAL,f,[g,g])},lr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},lr.prototype.render=function(d,f){var h=this;this.style=d,this.options=f,this.lineAtlas=d.lineAtlas,this.imageManager=d.imageManager,this.glyphManager=d.glyphManager,this.symbolFadeChange=d.placement.symbolFadeChange(v.browser.now()),this.imageManager.beginFrame();var g=this.style._order,w=this.style.sourceCaches;for(var C in w){var T=w[C];T.used&&T.prepare(this.context)}var I,M,L={},$={},q={};for(var j in w){var ne=w[j];L[j]=ne.getVisibleCoordinates(),$[j]=L[j].slice().reverse(),q[j]=ne.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var J=0;J<g.length;J++)if(this.style._layers[g[J]].is3D()){this.opaquePassCutoff=J;break}this.renderPass="offscreen";for(var ae=0,ee=g;ae<ee.length;ae+=1){var ie=this.style._layers[ee[ae]];if(ie.hasOffscreenPass()&&!ie.isHidden(this.transform.zoom)){var pe=$[ie.source];("custom"===ie.type||pe.length)&&this.renderLayer(this,w[ie.source],ie,pe)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:f.showOverdrawInspector?v.Color.black:v.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.depthRangeFor3D=[0,1-(d._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){var ve=this.style._layers[g[this.currentLayer]],ke=w[ve.source],Ee=L[ve.source];this._renderTileClippingMasks(ve,Ee),this.renderLayer(this,ke,ve,Ee)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){var Ae=this.style._layers[g[this.currentLayer]],Ne=w[Ae.source],Ze=("symbol"===Ae.type?q:$)[Ae.source];this._renderTileClippingMasks(Ae,L[Ae.source]),this.renderLayer(this,Ne,Ae,Ze)}this.options.showTileBoundaries&&(v.values(this.style._layers).forEach(function(He){He.source&&!He.isHidden(h.transform.zoom)&&(He.source!==(M&&M.id)&&(M=h.style.sourceCaches[He.source]),(!I||I.getSource().maxzoom<M.getSource().maxzoom)&&(I=M))}),I&&Lu.debug(this,I,I.getVisibleCoordinates())),this.options.showPadding&&function(He){var it=He.transform.padding;uf(He,He.transform.height-(it.top||0),3,js),uf(He,it.bottom||0,3,lf),df(He,it.left||0,3,cf),df(He,He.transform.width-(it.right||0),3,zd);var xt,bt,hn,at,_t=He.transform.centerPoint;Uc(xt=He,(bt=_t.x)-1,(hn=He.transform.height-_t.y)-10,2,20,at=Oa),Uc(xt,bt-10,hn-1,20,2,at)}(this),this.context.setDefault()},lr.prototype.renderLayer=function(d,f,h,g){h.isHidden(this.transform.zoom)||("background"===h.type||"custom"===h.type||g.length)&&(this.id=h.id,this.gpuTimingStart(h),Lu[h.type](d,f,h,g,this.style.placement.variableOffsets),this.gpuTimingEnd())},lr.prototype.gpuTimingStart=function(d){if(this.options.gpuTiming){var f=this.context.extTimerQuery,h=this.gpuTimers[d.id];h||(h=this.gpuTimers[d.id]={calls:0,cpuTime:0,query:f.createQueryEXT()}),h.calls++,f.beginQueryEXT(f.TIME_ELAPSED_EXT,h.query)}},lr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}},lr.prototype.collectGpuTimers=function(){var d=this.gpuTimers;return this.gpuTimers={},d},lr.prototype.queryGpuTimers=function(d){var f={};for(var h in d){var g=d[h],w=this.context.extTimerQuery,C=w.getQueryObjectEXT(g.query,w.QUERY_RESULT_EXT)/1e6;w.deleteQueryEXT(g.query),f[h]=C}return f},lr.prototype.translatePosMatrix=function(d,f,h,g,w){if(!h[0]&&!h[1])return d;var C=w?"map"===g?this.transform.angle:0:"viewport"===g?-this.transform.angle:0;if(C){var T=Math.sin(C),I=Math.cos(C);h=[h[0]*I-h[1]*T,h[0]*T+h[1]*I]}var M=[w?h[0]:Jo(f,h[0],this.transform.zoom),w?h[1]:Jo(f,h[1],this.transform.zoom),0],L=new Float32Array(16);return v.translate(L,d,M),L},lr.prototype.saveTileTexture=function(d){var f=this._tileTextures[d.size[0]];f?f.push(d):this._tileTextures[d.size[0]]=[d]},lr.prototype.getTileTexture=function(d){var f=this._tileTextures[d];return f&&f.length>0?f.pop():null},lr.prototype.isPatternMissing=function(d){if(!d)return!1;if(!d.from||!d.to)return!0;var f=this.imageManager.getPattern(d.from.toString()),h=this.imageManager.getPattern(d.to.toString());return!f||!h},lr.prototype.useProgram=function(d,f){this.cache=this.cache||{};var h=""+d+(f?f.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[h]||(this.cache[h]=new Jy(this.context,d,ka[d],f,uo[d],this._showOverdrawInspector)),this.cache[h]},lr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},lr.prototype.setBaseState=function(){var d=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(d.FUNC_ADD)},lr.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=v.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new v.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},lr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Fu=function(d,f){this.points=d,this.planes=f};Fu.fromInvProjectionMatrix=function(d,f,h){var g=Math.pow(2,h),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(T){return v.transformMat4([],T,d)}).map(function(T){return v.scale$1([],T,1/T[3]/f*g)}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(T){var I=v.sub([],w[T[0]],w[T[1]]),M=v.sub([],w[T[2]],w[T[1]]),L=v.normalize([],v.cross([],I,M)),$=-v.dot(L,w[T[1]]);return L.concat($)});return new Fu(w,C)};var jc=function(d,f){this.min=d,this.max=f,this.center=v.scale$2([],v.add([],this.min,this.max),.5)};jc.prototype.quadrant=function(d){for(var f=[d%2==0,d<2],h=v.clone$2(this.min),g=v.clone$2(this.max),w=0;w<f.length;w++)h[w]=f[w]?this.min[w]:this.center[w],g[w]=f[w]?this.center[w]:this.max[w];return g[2]=this.max[2],new jc(h,g)},jc.prototype.distanceX=function(d){return Math.max(Math.min(this.max[0],d[0]),this.min[0])-d[0]},jc.prototype.distanceY=function(d){return Math.max(Math.min(this.max[1],d[1]),this.min[1])-d[1]},jc.prototype.intersects=function(d){for(var f=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],h=!0,g=0;g<d.planes.length;g++){for(var w=d.planes[g],C=0,T=0;T<f.length;T++)C+=v.dot$1(w,f[T])>=0;if(0===C)return 0;C!==f.length&&(h=!1)}if(h)return 2;for(var I=0;I<3;I++){for(var M=Number.MAX_VALUE,L=-Number.MAX_VALUE,$=0;$<d.points.length;$++){var q=d.points[$][I]-this.min[I];M=Math.min(M,q),L=Math.max(L,q)}if(L<0||M>this.max[I]-this.min[I])return 0}return 1};var Na=function(d,f,h,g){if(void 0===d&&(d=0),void 0===f&&(f=0),void 0===h&&(h=0),void 0===g&&(g=0),isNaN(d)||d<0||isNaN(f)||f<0||isNaN(h)||h<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=d,this.bottom=f,this.left=h,this.right=g};Na.prototype.interpolate=function(d,f,h){return null!=f.top&&null!=d.top&&(this.top=v.number(d.top,f.top,h)),null!=f.bottom&&null!=d.bottom&&(this.bottom=v.number(d.bottom,f.bottom,h)),null!=f.left&&null!=d.left&&(this.left=v.number(d.left,f.left,h)),null!=f.right&&null!=d.right&&(this.right=v.number(d.right,f.right,h)),this},Na.prototype.getCenter=function(d,f){var h=v.clamp((this.left+d-this.right)/2,0,d),g=v.clamp((this.top+f-this.bottom)/2,0,f);return new v.Point(h,g)},Na.prototype.equals=function(d){return this.top===d.top&&this.bottom===d.bottom&&this.left===d.left&&this.right===d.right},Na.prototype.clone=function(){return new Na(this.top,this.bottom,this.left,this.right)},Na.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Zn=function(d,f,h,g,w){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===w||w,this._minZoom=d||0,this._maxZoom=f||22,this._minPitch=h??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new v.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Na,this._posMatrixCache={},this._alignedPosMatrixCache={}},Dn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Zn.prototype.clone=function(){var d=new Zn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return d.tileSize=this.tileSize,d.latRange=this.latRange,d.width=this.width,d.height=this.height,d._center=this._center,d.zoom=this.zoom,d.angle=this.angle,d._fov=this._fov,d._pitch=this._pitch,d._unmodified=this._unmodified,d._edgeInsets=this._edgeInsets.clone(),d._calcMatrices(),d},Dn.minZoom.get=function(){return this._minZoom},Dn.minZoom.set=function(d){this._minZoom!==d&&(this._minZoom=d,this.zoom=Math.max(this.zoom,d))},Dn.maxZoom.get=function(){return this._maxZoom},Dn.maxZoom.set=function(d){this._maxZoom!==d&&(this._maxZoom=d,this.zoom=Math.min(this.zoom,d))},Dn.minPitch.get=function(){return this._minPitch},Dn.minPitch.set=function(d){this._minPitch!==d&&(this._minPitch=d,this.pitch=Math.max(this.pitch,d))},Dn.maxPitch.get=function(){return this._maxPitch},Dn.maxPitch.set=function(d){this._maxPitch!==d&&(this._maxPitch=d,this.pitch=Math.min(this.pitch,d))},Dn.renderWorldCopies.get=function(){return this._renderWorldCopies},Dn.renderWorldCopies.set=function(d){void 0===d?d=!0:null===d&&(d=!1),this._renderWorldCopies=d},Dn.worldSize.get=function(){return this.tileSize*this.scale},Dn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Dn.size.get=function(){return new v.Point(this.width,this.height)},Dn.bearing.get=function(){return-this.angle/Math.PI*180},Dn.bearing.set=function(d){var f=-v.wrap(d,-180,180)*Math.PI/180;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=v.create$2(),v.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Dn.pitch.get=function(){return this._pitch/Math.PI*180},Dn.pitch.set=function(d){var f=v.clamp(d,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())},Dn.fov.get=function(){return this._fov/Math.PI*180},Dn.fov.set=function(d){d=Math.max(.01,Math.min(60,d)),this._fov!==d&&(this._unmodified=!1,this._fov=d/180*Math.PI,this._calcMatrices())},Dn.zoom.get=function(){return this._zoom},Dn.zoom.set=function(d){var f=Math.min(Math.max(d,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._zoom=f,this.scale=this.zoomScale(f),this.tileZoom=Math.floor(f),this.zoomFraction=f-this.tileZoom,this._constrain(),this._calcMatrices())},Dn.center.get=function(){return this._center},Dn.center.set=function(d){d.lat===this._center.lat&&d.lng===this._center.lng||(this._unmodified=!1,this._center=d,this._constrain(),this._calcMatrices())},Dn.padding.get=function(){return this._edgeInsets.toJSON()},Dn.padding.set=function(d){this._edgeInsets.equals(d)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,d,1),this._calcMatrices())},Dn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Zn.prototype.isPaddingEqual=function(d){return this._edgeInsets.equals(d)},Zn.prototype.interpolatePadding=function(d,f,h){this._unmodified=!1,this._edgeInsets.interpolate(d,f,h),this._constrain(),this._calcMatrices()},Zn.prototype.coveringZoomLevel=function(d){var f=(d.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/d.tileSize));return Math.max(0,f)},Zn.prototype.getVisibleUnwrappedCoordinates=function(d){var f=[new v.UnwrappedTileID(0,d)];if(this._renderWorldCopies)for(var h=this.pointCoordinate(new v.Point(0,0)),g=this.pointCoordinate(new v.Point(this.width,0)),w=this.pointCoordinate(new v.Point(this.width,this.height)),C=this.pointCoordinate(new v.Point(0,this.height)),T=Math.floor(Math.min(h.x,g.x,w.x,C.x)),I=Math.floor(Math.max(h.x,g.x,w.x,C.x)),M=T-1;M<=I+1;M++)0!==M&&f.push(new v.UnwrappedTileID(M,d));return f},Zn.prototype.coveringTiles=function(d){var f=this.coveringZoomLevel(d),h=f;if(void 0!==d.minzoom&&f<d.minzoom)return[];void 0!==d.maxzoom&&f>d.maxzoom&&(f=d.maxzoom);var g=v.MercatorCoordinate.fromLngLat(this.center),w=Math.pow(2,f),C=[w*g.x,w*g.y,0],T=Fu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f),I=d.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(I=f);var M=function(He){return{aabb:new jc([He*w,0,0],[(He+1)*w,w,0]),zoom:0,x:0,y:0,wrap:He,fullyVisible:!1}},L=[],$=[],q=f,j=d.reparseOverscaled?h:f;if(this._renderWorldCopies)for(var ne=1;ne<=3;ne++)L.push(M(-ne)),L.push(M(ne));for(L.push(M(0));L.length>0;){var J=L.pop(),ae=J.x,ee=J.y,ie=J.fullyVisible;if(!ie){var pe=J.aabb.intersects(T);if(0===pe)continue;ie=2===pe}var ve=J.aabb.distanceX(C),ke=J.aabb.distanceY(C),Ee=Math.max(Math.abs(ve),Math.abs(ke));if(J.zoom===q||Ee>3+(1<<q-J.zoom)-2&&J.zoom>=I)$.push({tileID:new v.OverscaledTileID(J.zoom===q?j:J.zoom,J.wrap,J.zoom,ae,ee),distanceSq:v.sqrLen([C[0]-.5-ae,C[1]-.5-ee])});else for(var Ae=0;Ae<4;Ae++){var Ne=(ae<<1)+Ae%2,Ze=(ee<<1)+(Ae>>1);L.push({aabb:J.aabb.quadrant(Ae),zoom:J.zoom+1,x:Ne,y:Ze,wrap:J.wrap,fullyVisible:ie})}}return $.sort(function(He,it){return He.distanceSq-it.distanceSq}).map(function(He){return He.tileID})},Zn.prototype.resize=function(d,f){this.width=d,this.height=f,this.pixelsToGLUnits=[2/d,-2/f],this._constrain(),this._calcMatrices()},Dn.unmodified.get=function(){return this._unmodified},Zn.prototype.zoomScale=function(d){return Math.pow(2,d)},Zn.prototype.scaleZoom=function(d){return Math.log(d)/Math.LN2},Zn.prototype.project=function(d){var f=v.clamp(d.lat,-this.maxValidLatitude,this.maxValidLatitude);return new v.Point(v.mercatorXfromLng(d.lng)*this.worldSize,v.mercatorYfromLat(f)*this.worldSize)},Zn.prototype.unproject=function(d){return new v.MercatorCoordinate(d.x/this.worldSize,d.y/this.worldSize).toLngLat()},Dn.point.get=function(){return this.project(this.center)},Zn.prototype.setLocationAtPoint=function(d,f){var h=this.pointCoordinate(f),g=this.pointCoordinate(this.centerPoint),w=this.locationCoordinate(d),C=new v.MercatorCoordinate(w.x-(h.x-g.x),w.y-(h.y-g.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())},Zn.prototype.locationPoint=function(d){return this.coordinatePoint(this.locationCoordinate(d))},Zn.prototype.pointLocation=function(d){return this.coordinateLocation(this.pointCoordinate(d))},Zn.prototype.locationCoordinate=function(d){return v.MercatorCoordinate.fromLngLat(d)},Zn.prototype.coordinateLocation=function(d){return d.toLngLat()},Zn.prototype.pointCoordinate=function(d){var f=[d.x,d.y,0,1],h=[d.x,d.y,1,1];v.transformMat4(f,f,this.pixelMatrixInverse),v.transformMat4(h,h,this.pixelMatrixInverse);var g=f[3],w=h[3],C=f[1]/g,T=h[1]/w,I=f[2]/g,M=h[2]/w,L=I===M?0:(0-I)/(M-I);return new v.MercatorCoordinate(v.number(f[0]/g,h[0]/w,L)/this.worldSize,v.number(C,T,L)/this.worldSize)},Zn.prototype.coordinatePoint=function(d){var f=[d.x*this.worldSize,d.y*this.worldSize,0,1];return v.transformMat4(f,f,this.pixelMatrix),new v.Point(f[0]/f[3],f[1]/f[3])},Zn.prototype.getBounds=function(){return(new v.LngLatBounds).extend(this.pointLocation(new v.Point(0,0))).extend(this.pointLocation(new v.Point(this.width,0))).extend(this.pointLocation(new v.Point(this.width,this.height))).extend(this.pointLocation(new v.Point(0,this.height)))},Zn.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new v.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Zn.prototype.setMaxBounds=function(d){d?(this.lngRange=[d.getWest(),d.getEast()],this.latRange=[d.getSouth(),d.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Zn.prototype.calculatePosMatrix=function(d,f){void 0===f&&(f=!1);var h=d.key,g=f?this._alignedPosMatrixCache:this._posMatrixCache;if(g[h])return g[h];var w=d.canonical,C=this.worldSize/this.zoomScale(w.z),T=w.x+Math.pow(2,w.z)*d.wrap,I=v.identity(new Float64Array(16));return v.translate(I,I,[T*C,w.y*C,0]),v.scale(I,I,[C/v.EXTENT,C/v.EXTENT,1]),v.multiply(I,f?this.alignedProjMatrix:this.projMatrix,I),g[h]=new Float32Array(I),g[h]},Zn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Zn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var d,f,h,g,w=-90,C=90,T=-180,I=180,M=this.size,L=this._unmodified;if(this.latRange){var $=this.latRange;w=v.mercatorYfromLat($[1])*this.worldSize,d=(C=v.mercatorYfromLat($[0])*this.worldSize)-w<M.y?M.y/(C-w):0}if(this.lngRange){var q=this.lngRange;T=v.mercatorXfromLng(q[0])*this.worldSize,f=(I=v.mercatorXfromLng(q[1])*this.worldSize)-T<M.x?M.x/(I-T):0}var j=this.point,ne=Math.max(f||0,d||0);if(ne)return this.center=this.unproject(new v.Point(f?(I+T)/2:j.x,d?(C+w)/2:j.y)),this.zoom+=this.scaleZoom(ne),this._unmodified=L,void(this._constraining=!1);if(this.latRange){var J=j.y,ae=M.y/2;J-ae<w&&(g=w+ae),J+ae>C&&(g=C-ae)}if(this.lngRange){var ee=j.x,ie=M.x/2;ee-ie<T&&(h=T+ie),ee+ie>I&&(h=I-ie)}void 0===h&&void 0===g||(this.center=this.unproject(new v.Point(void 0!==h?h:j.x,void 0!==g?g:j.y))),this._unmodified=L,this._constraining=!1}},Zn.prototype._calcMatrices=function(){if(this.height){var d=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var f=Math.PI/2+this._pitch,h=this._fov*(.5+d.y/this.height),g=Math.sin(h)*this.cameraToCenterDistance/Math.sin(v.clamp(Math.PI-f-h,.01,Math.PI-.01)),w=this.point,C=w.x,T=w.y,I=1.01*(Math.cos(Math.PI/2-this._pitch)*g+this.cameraToCenterDistance),M=this.height/50,L=new Float64Array(16);v.perspective(L,this._fov,this.width/this.height,M,I),L[8]=2*-d.x/this.width,L[9]=2*d.y/this.height,v.scale(L,L,[1,-1,1]),v.translate(L,L,[0,0,-this.cameraToCenterDistance]),v.rotateX(L,L,this._pitch),v.rotateZ(L,L,this.angle),v.translate(L,L,[-C,-T,0]),this.mercatorMatrix=v.scale([],L,[this.worldSize,this.worldSize,this.worldSize]),v.scale(L,L,[1,1,v.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=L,this.invProjMatrix=v.invert([],this.projMatrix);var $=this.width%2/2,q=this.height%2/2,j=Math.cos(this.angle),ne=Math.sin(this.angle),J=C-Math.round(C)+j*$+ne*q,ae=T-Math.round(T)+j*q+ne*$,ee=new Float64Array(L);if(v.translate(ee,ee,[J>.5?J-1:J,ae>.5?ae-1:ae,0]),this.alignedProjMatrix=ee,L=v.create(),v.scale(L,L,[this.width/2,-this.height/2,1]),v.translate(L,L,[1,-1,0]),this.labelPlaneMatrix=L,L=v.create(),v.scale(L,L,[1,-1,1]),v.translate(L,L,[-1,-1,0]),v.scale(L,L,[2/this.width,2/this.height,1]),this.glCoordMatrix=L,this.pixelMatrix=v.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(L=v.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=L,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Zn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var d=this.pointCoordinate(new v.Point(0,0)),f=[d.x*this.worldSize,d.y*this.worldSize,0,1];return v.transformMat4(f,f,this.pixelMatrix)[3]/this.cameraToCenterDistance},Zn.prototype.getCameraPoint=function(){var d=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new v.Point(0,d))},Zn.prototype.getCameraQueryGeometry=function(d){var f=this.getCameraPoint();if(1===d.length)return[d[0],f];for(var h=f.x,g=f.y,w=f.x,C=f.y,T=0,I=d;T<I.length;T+=1){var M=I[T];h=Math.min(h,M.x),g=Math.min(g,M.y),w=Math.max(w,M.x),C=Math.max(C,M.y)}return[new v.Point(h,g),new v.Point(w,g),new v.Point(w,C),new v.Point(h,C),new v.Point(h,g)]},Object.defineProperties(Zn.prototype,Dn);var Ho=function(d){var f,h,g,w;this._hashName=d&&encodeURIComponent(d),v.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(f=this._updateHashUnthrottled.bind(this),h=!1,g=null,w=function(){g=null,h&&(f(),g=setTimeout(w,300),h=!1)},function(){return h=!0,g||w(),g})};Ho.prototype.addTo=function(d){return this._map=d,v.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ho.prototype.remove=function(){return v.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ho.prototype.getHashString=function(d){var f=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,g=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,g),C=Math.round(f.lng*w)/w,T=Math.round(f.lat*w)/w,I=this._map.getBearing(),M=this._map.getPitch(),L="";if(L+=d?"/"+C+"/"+T+"/"+h:h+"/"+T+"/"+C,(I||M)&&(L+="/"+Math.round(10*I)/10),M&&(L+="/"+Math.round(M)),this._hashName){var $=this._hashName,q=!1,j=v.window.location.hash.slice(1).split("&").map(function(ne){var J=ne.split("=")[0];return J===$?(q=!0,J+"="+L):ne}).filter(function(ne){return ne});return q||j.push($+"="+L),"#"+j.join("&")}return"#"+L},Ho.prototype._getCurrentHash=function(){var d,f=this,h=v.window.location.hash.replace("#","");return this._hashName?(h.split("&").map(function(g){return g.split("=")}).forEach(function(g){g[0]===f._hashName&&(d=g)}),(d&&d[1]||"").split("/")):h.split("/")},Ho.prototype._onHashChange=function(){var d=this._getCurrentHash();if(d.length>=3&&!d.some(function(h){return isNaN(h)})){var f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:f,pitch:+(d[4]||0)}),!0}return!1},Ho.prototype._updateHashUnthrottled=function(){var d=v.window.location.href.replace(/(#.+)?$/,this.getHashString());try{v.window.history.replaceState(v.window.history.state,null,d)}catch{}};var ta={linearity:.3,easing:v.bezier(0,0,.3,1)},hf=v.extend({deceleration:2500,maxSpeed:1400},ta),ul=v.extend({deceleration:20,maxSpeed:1400},ta),Bu=v.extend({deceleration:1e3,maxSpeed:360},ta),Fp=v.extend({deceleration:1e3,maxSpeed:90},ta),Xl=function(d){this._map=d,this.clear()};function Fr(d,f){(!d.duration||d.duration<f.duration)&&(d.duration=f.duration,d.easing=f.easing)}function na(d,f,h){var g=h.maxSpeed,w=h.linearity,C=h.deceleration,T=v.clamp(d*w/(f/1e3),-g,g),I=Math.abs(T)/(C*w);return{easing:h.easing,duration:1e3*I,amount:T*(I/2)}}Xl.prototype.clear=function(){this._inertiaBuffer=[]},Xl.prototype.record=function(d){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:v.browser.now(),settings:d})},Xl.prototype._drainInertiaBuffer=function(){for(var d=this._inertiaBuffer,f=v.browser.now();d.length>0&&f-d[0].time>160;)d.shift()},Xl.prototype._onMoveEnd=function(d){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var f={zoom:0,bearing:0,pitch:0,pan:new v.Point(0,0),pinchAround:void 0,around:void 0},h=0,g=this._inertiaBuffer;h<g.length;h+=1){var w=g[h].settings;f.zoom+=w.zoomDelta||0,f.bearing+=w.bearingDelta||0,f.pitch+=w.pitchDelta||0,w.panDelta&&f.pan._add(w.panDelta),w.around&&(f.around=w.around),w.pinchAround&&(f.pinchAround=w.pinchAround)}var C=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,T={};if(f.pan.mag()){var I=na(f.pan.mag(),C,v.extend({},hf,d||{}));T.offset=f.pan.mult(I.amount/f.pan.mag()),T.center=this._map.transform.center,Fr(T,I)}if(f.zoom){var M=na(f.zoom,C,ul);T.zoom=this._map.transform.zoom+M.amount,Fr(T,M)}if(f.bearing){var L=na(f.bearing,C,Bu);T.bearing=this._map.transform.bearing+v.clamp(L.amount,-179,179),Fr(T,L)}if(f.pitch){var $=na(f.pitch,C,Fp);T.pitch=this._map.transform.pitch+$.amount,Fr(T,$)}if(T.zoom||T.bearing){var q=void 0===f.pinchAround?f.around:f.pinchAround;T.around=q?this._map.unproject(q):this._map.getCenter()}return this.clear(),v.extend(T,{noMoveStart:!0})}};var Bi=function(d){function f(g,w,C,T){void 0===T&&(T={});var I=Ve.mousePos(w.getCanvasContainer(),C),M=w.unproject(I);d.call(this,g,v.extend({point:I,lngLat:M,originalEvent:C},T)),this._defaultPrevented=!1,this.target=w}d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f;var h={defaultPrevented:{configurable:!0}};return f.prototype.preventDefault=function(){this._defaultPrevented=!0},h.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(f.prototype,h),f}(v.Event),Is=function(d){function f(g,w,C){var T="touchend"===g?C.changedTouches:C.touches,I=Ve.touchPos(w.getCanvasContainer(),T),M=I.map(function(q){return w.unproject(q)}),L=I.reduce(function(q,j,ne,J){return q.add(j.div(J.length))},new v.Point(0,0)),$=w.unproject(L);d.call(this,g,{points:I,point:L,lngLats:M,lngLat:$,originalEvent:C}),this._defaultPrevented=!1}d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f;var h={defaultPrevented:{configurable:!0}};return f.prototype.preventDefault=function(){this._defaultPrevented=!0},h.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(f.prototype,h),f}(v.Event),Pg=function(d){function f(g,w,C){d.call(this,g,{originalEvent:C}),this._defaultPrevented=!1}d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f;var h={defaultPrevented:{configurable:!0}};return f.prototype.preventDefault=function(){this._defaultPrevented=!0},h.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(f.prototype,h),f}(v.Event),Ei=function(d,f){this._map=d,this._clickTolerance=f.clickTolerance};Ei.prototype.reset=function(){delete this._mousedownPos},Ei.prototype.wheel=function(d){return this._firePreventable(new Pg(d.type,this._map,d))},Ei.prototype.mousedown=function(d,f){return this._mousedownPos=f,this._firePreventable(new Bi(d.type,this._map,d))},Ei.prototype.mouseup=function(d){this._map.fire(new Bi(d.type,this._map,d))},Ei.prototype.click=function(d,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||this._map.fire(new Bi(d.type,this._map,d))},Ei.prototype.dblclick=function(d){return this._firePreventable(new Bi(d.type,this._map,d))},Ei.prototype.mouseover=function(d){this._map.fire(new Bi(d.type,this._map,d))},Ei.prototype.mouseout=function(d){this._map.fire(new Bi(d.type,this._map,d))},Ei.prototype.touchstart=function(d){return this._firePreventable(new Is(d.type,this._map,d))},Ei.prototype.touchmove=function(d){this._map.fire(new Is(d.type,this._map,d))},Ei.prototype.touchend=function(d){this._map.fire(new Is(d.type,this._map,d))},Ei.prototype.touchcancel=function(d){this._map.fire(new Is(d.type,this._map,d))},Ei.prototype._firePreventable=function(d){if(this._map.fire(d),d.defaultPrevented)return{}},Ei.prototype.isEnabled=function(){return!0},Ei.prototype.isActive=function(){return!1},Ei.prototype.enable=function(){},Ei.prototype.disable=function(){};var ro=function(d){this._map=d};ro.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ro.prototype.mousemove=function(d){this._map.fire(new Bi(d.type,this._map,d))},ro.prototype.mousedown=function(){this._delayContextMenu=!0},ro.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Bi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ro.prototype.contextmenu=function(d){this._delayContextMenu?this._contextMenuEvent=d:this._map.fire(new Bi(d.type,this._map,d)),this._map.listens("contextmenu")&&d.preventDefault()},ro.prototype.isEnabled=function(){return!0},ro.prototype.isActive=function(){return!1},ro.prototype.enable=function(){},ro.prototype.disable=function(){};var rt=function(d,f){this._map=d,this._el=d.getCanvasContainer(),this._container=d.getContainer(),this._clickTolerance=f.clickTolerance||1};function Ud(d,f){for(var h={},g=0;g<d.length;g++)h[d[g].identifier]=f[g];return h}rt.prototype.isEnabled=function(){return!!this._enabled},rt.prototype.isActive=function(){return!!this._active},rt.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},rt.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},rt.prototype.mousedown=function(d,f){this.isEnabled()&&d.shiftKey&&0===d.button&&(Ve.disableDrag(),this._startPos=this._lastPos=f,this._active=!0)},rt.prototype.mousemoveWindow=function(d,f){if(this._active){var h=f;if(!(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)){var g=this._startPos;this._lastPos=h,this._box||(this._box=Ve.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",d));var w=Math.min(g.x,h.x),C=Math.max(g.x,h.x),T=Math.min(g.y,h.y),I=Math.max(g.y,h.y);Ve.setTransform(this._box,"translate("+w+"px,"+T+"px)"),this._box.style.width=C-w+"px",this._box.style.height=I-T+"px"}}},rt.prototype.mouseupWindow=function(d,f){var h=this;if(this._active&&0===d.button){var g=this._startPos,w=f;if(this.reset(),Ve.suppressClick(),g.x!==w.x||g.y!==w.y)return this._map.fire(new v.Event("boxzoomend",{originalEvent:d})),{cameraAnimation:function(C){return C.fitScreenCoordinates(g,w,h._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",d)}},rt.prototype.keydown=function(d){this._active&&27===d.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",d))},rt.prototype.reset=function(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(Ve.remove(this._box),this._box=null),Ve.enableDrag(),delete this._startPos,delete this._lastPos},rt.prototype._fireEvent=function(d,f){return this._map.fire(new v.Event(d,{originalEvent:f}))};var Vu=function(d){this.reset(),this.numTouches=d.numTouches};Vu.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Vu.prototype.touchstart=function(d,f,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=d.timeStamp),h.length===this.numTouches&&(this.centroid=function(g){for(var w=new v.Point(0,0),C=0,T=g;C<T.length;C+=1)w._add(T[C]);return w.div(g.length)}(f),this.touches=Ud(h,f)))},Vu.prototype.touchmove=function(d,f,h){if(!this.aborted&&this.centroid){var g=Ud(h,f);for(var w in this.touches){var C=g[w];(!C||C.dist(this.touches[w])>30)&&(this.aborted=!0)}}},Vu.prototype.touchend=function(d,f,h){if((!this.centroid||d.timeStamp-this.startTime>500)&&(this.aborted=!0),0===h.length){var g=!this.aborted&&this.centroid;if(this.reset(),g)return g}};var Ql=function(d){this.singleTap=new Vu(d),this.numTaps=d.numTaps,this.reset()};Ql.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ql.prototype.touchstart=function(d,f,h){this.singleTap.touchstart(d,f,h)},Ql.prototype.touchmove=function(d,f,h){this.singleTap.touchmove(d,f,h)},Ql.prototype.touchend=function(d,f,h){var g=this.singleTap.touchend(d,f,h);if(g){var w=d.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(g)<30;if(w&&C||this.reset(),this.count++,this.lastTime=d.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}};var Io=function(){this._zoomIn=new Ql({numTouches:1,numTaps:2}),this._zoomOut=new Ql({numTouches:2,numTaps:1}),this.reset()};Io.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Io.prototype.touchstart=function(d,f,h){this._zoomIn.touchstart(d,f,h),this._zoomOut.touchstart(d,f,h)},Io.prototype.touchmove=function(d,f,h){this._zoomIn.touchmove(d,f,h),this._zoomOut.touchmove(d,f,h)},Io.prototype.touchend=function(d,f,h){var g=this,w=this._zoomIn.touchend(d,f,h),C=this._zoomOut.touchend(d,f,h);return w?(this._active=!0,d.preventDefault(),setTimeout(function(){return g.reset()},0),{cameraAnimation:function(T){return T.easeTo({duration:300,zoom:T.getZoom()+1,around:T.unproject(w)},{originalEvent:d})}}):C?(this._active=!0,d.preventDefault(),setTimeout(function(){return g.reset()},0),{cameraAnimation:function(T){return T.easeTo({duration:300,zoom:T.getZoom()-1,around:T.unproject(C)},{originalEvent:d})}}):void 0},Io.prototype.touchcancel=function(){this.reset()},Io.prototype.enable=function(){this._enabled=!0},Io.prototype.disable=function(){this._enabled=!1,this.reset()},Io.prototype.isEnabled=function(){return this._enabled},Io.prototype.isActive=function(){return this._active};var Vi={0:1,2:2},ho=function(d){this.reset(),this._clickTolerance=d.clickTolerance||1};ho.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ho.prototype._correctButton=function(d,f){return!1},ho.prototype._move=function(d,f){return{}},ho.prototype.mousedown=function(d,f){if(!this._lastPoint){var h=Ve.mouseButton(d);this._correctButton(d,h)&&(this._lastPoint=f,this._eventButton=h)}},ho.prototype.mousemoveWindow=function(d,f){var g,C,h=this._lastPoint;if(h)if(d.preventDefault(),C=Vi[this._eventButton],void 0===(g=d).buttons||(g.buttons&C)!==C)this.reset();else if(this._moved||!(f.dist(h)<this._clickTolerance))return this._moved=!0,this._lastPoint=f,this._move(h,f)},ho.prototype.mouseupWindow=function(d){this._lastPoint&&Ve.mouseButton(d)===this._eventButton&&(this._moved&&Ve.suppressClick(),this.reset())},ho.prototype.enable=function(){this._enabled=!0},ho.prototype.disable=function(){this._enabled=!1,this.reset()},ho.prototype.isEnabled=function(){return this._enabled},ho.prototype.isActive=function(){return this._active};var ct=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.mousedown=function(h,g){d.prototype.mousedown.call(this,h,g),this._lastPoint&&(this._active=!0)},f.prototype._correctButton=function(h,g){return 0===g&&!h.ctrlKey},f.prototype._move=function(h,g){return{around:g,panDelta:g.sub(h)}},f}(ho),Wr=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype._correctButton=function(h,g){return 0===g&&h.ctrlKey||2===g},f.prototype._move=function(h,g){var w=.8*(g.x-h.x);if(w)return this._active=!0,{bearingDelta:w}},f.prototype.contextmenu=function(h){h.preventDefault()},f}(ho),qe=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype._correctButton=function(h,g){return 0===g&&h.ctrlKey||2===g},f.prototype._move=function(h,g){var w=-.5*(g.y-h.y);if(w)return this._active=!0,{pitchDelta:w}},f.prototype.contextmenu=function(h){h.preventDefault()},f}(ho),Rt=function(d){this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset()};Rt.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new v.Point(0,0)},Rt.prototype.touchstart=function(d,f,h){return this._calculateTransform(d,f,h)},Rt.prototype.touchmove=function(d,f,h){if(this._active&&!(h.length<this._minTouches))return d.preventDefault(),this._calculateTransform(d,f,h)},Rt.prototype.touchend=function(d,f,h){this._calculateTransform(d,f,h),this._active&&h.length<this._minTouches&&this.reset()},Rt.prototype.touchcancel=function(){this.reset()},Rt.prototype._calculateTransform=function(d,f,h){h.length>0&&(this._active=!0);var g=Ud(h,f),w=new v.Point(0,0),C=new v.Point(0,0),T=0;for(var I in g){var M=g[I],L=this._touches[I];L&&(w._add(M),C._add(M.sub(L)),T++,g[I]=M)}if(this._touches=g,!(T<this._minTouches)&&C.mag()){var $=C.div(T);if(this._sum._add($),!(this._sum.mag()<this._clickTolerance))return{around:w.div(T),panDelta:$}}},Rt.prototype.enable=function(){this._enabled=!0},Rt.prototype.disable=function(){this._enabled=!1,this.reset()},Rt.prototype.isEnabled=function(){return this._enabled},Rt.prototype.isActive=function(){return this._active};var Ln=function(){this.reset()};function zi(d,f,h){for(var g=0;g<d.length;g++)if(d[g].identifier===h)return f[g]}function Ui(d,f){return Math.log(d/f)/Math.LN2}Ln.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ln.prototype._start=function(d){},Ln.prototype._move=function(d,f,h){return{}},Ln.prototype.touchstart=function(d,f,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([f[0],f[1]]))},Ln.prototype.touchmove=function(d,f,h){if(this._firstTwoTouches){d.preventDefault();var g=this._firstTwoTouches,w=g[1],C=zi(h,f,g[0]),T=zi(h,f,w);if(C&&T){var I=this._aroundCenter?null:C.add(T).div(2);return this._move([C,T],I,d)}}},Ln.prototype.touchend=function(d,f,h){if(this._firstTwoTouches){var g=this._firstTwoTouches,w=g[1],C=zi(h,f,g[0]),T=zi(h,f,w);C&&T||(this._active&&Ve.suppressClick(),this.reset())}},Ln.prototype.touchcancel=function(){this.reset()},Ln.prototype.enable=function(d){this._enabled=!0,this._aroundCenter=!!d&&"center"===d.around},Ln.prototype.disable=function(){this._enabled=!1,this.reset()},Ln.prototype.isEnabled=function(){return this._enabled},Ln.prototype.isActive=function(){return this._active};var dl=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.reset=function(){d.prototype.reset.call(this),delete this._distance,delete this._startDistance},f.prototype._start=function(h){this._startDistance=this._distance=h[0].dist(h[1])},f.prototype._move=function(h,g){var w=this._distance;if(this._distance=h[0].dist(h[1]),this._active||!(Math.abs(Ui(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ui(this._distance,w),pinchAround:g}},f}(Ln);function ji(d,f){return 180*d.angleWith(f)/Math.PI}var kn=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.reset=function(){d.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},f.prototype._start=function(h){this._startVector=this._vector=h[0].sub(h[1]),this._minDiameter=h[0].dist(h[1])},f.prototype._move=function(h,g){var w=this._vector;if(this._vector=h[0].sub(h[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ji(this._vector,w),pinchAround:g}},f.prototype._isBelowThreshold=function(h){this._minDiameter=Math.min(this._minDiameter,h.mag());var g=25/(Math.PI*this._minDiameter)*360,w=ji(h,this._startVector);return Math.abs(w)<g},f}(Ln);function On(d){return Math.abs(d.y)>Math.abs(d.x)}var rs=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.reset=function(){d.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},f.prototype._start=function(h){this._lastPoints=h,On(h[0].sub(h[1]))&&(this._valid=!1)},f.prototype._move=function(h,g,w){var C=h[0].sub(this._lastPoints[0]),T=h[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(C,T,w.timeStamp),this._valid)return this._lastPoints=h,this._active=!0,{pitchDelta:(C.y+T.y)/2*-.5}},f.prototype.gestureBeginsVertically=function(h,g,w){if(void 0!==this._valid)return this._valid;var C=h.mag()>=2,T=g.mag()>=2;if(C||T){if(!C||!T)return void 0===this._firstMove&&(this._firstMove=w),w-this._firstMove<100&&void 0;var I=h.y>0==g.y>0;return On(h)&&On(g)&&I}},f}(Ln),Xt={panStep:100,bearingStep:15,pitchStep:10},fo=function(){var d=Xt;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1};function jd(d){return d*(2-d)}fo.prototype.reset=function(){this._active=!1},fo.prototype.keydown=function(d){var f=this;if(!(d.altKey||d.ctrlKey||d.metaKey)){var h=0,g=0,w=0,C=0,T=0;switch(d.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:d.shiftKey?g=-1:(d.preventDefault(),C=-1);break;case 39:d.shiftKey?g=1:(d.preventDefault(),C=1);break;case 38:d.shiftKey?w=1:(d.preventDefault(),T=-1);break;case 40:d.shiftKey?w=-1:(d.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(g=0,w=0),{cameraAnimation:function(I){var M=I.getZoom();I.easeTo({duration:300,easeId:"keyboardHandler",easing:jd,zoom:h?Math.round(M)+h*(d.shiftKey?2:1):M,bearing:I.getBearing()+g*f._bearingStep,pitch:I.getPitch()+w*f._pitchStep,offset:[-C*f._panStep,-T*f._panStep],center:I.getCenter()},{originalEvent:d})}}}},fo.prototype.enable=function(){this._enabled=!0},fo.prototype.disable=function(){this._enabled=!1,this.reset()},fo.prototype.isEnabled=function(){return this._enabled},fo.prototype.isActive=function(){return this._active},fo.prototype.disableRotation=function(){this._rotationDisabled=!0},fo.prototype.enableRotation=function(){this._rotationDisabled=!1};var tr=function(d,f){this._map=d,this._el=d.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,v.bindAll(["_onTimeout"],this)};tr.prototype.setZoomRate=function(d){this._defaultZoomRate=d},tr.prototype.setWheelZoomRate=function(d){this._wheelZoomRate=d},tr.prototype.isEnabled=function(){return!!this._enabled},tr.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},tr.prototype.isZooming=function(){return!!this._zooming},tr.prototype.enable=function(d){this.isEnabled()||(this._enabled=!0,this._aroundCenter=d&&"center"===d.around)},tr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},tr.prototype.wheel=function(d){if(this.isEnabled()){var f=d.deltaMode===v.window.WheelEvent.DOM_DELTA_LINE?40*d.deltaY:d.deltaY,h=v.browser.now(),g=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,0!==f&&f%4.000244140625==0?this._type="wheel":0!==f&&Math.abs(f)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,d)):this._type||(this._type=Math.abs(g*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),d.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=d,this._delta-=f,this._active||this._start(d)),d.preventDefault()}},tr.prototype._onTimeout=function(d){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},tr.prototype._start=function(d){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var f=Ve.mousePos(this._el,d);this._around=v.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(f)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},tr.prototype.renderFrame=function(){var d=this;if(this._frameId&&(this._frameId=null,this.isActive())){var f=this._map.transform;if(0!==this._delta){var h="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,g=2/(1+Math.exp(-Math.abs(this._delta*h)));this._delta<0&&0!==g&&(g=1/g);var w="number"==typeof this._targetZoom?f.zoomScale(this._targetZoom):f.scale;this._targetZoom=Math.min(f.maxZoom,Math.max(f.minZoom,f.scaleZoom(w*g))),"wheel"===this._type&&(this._startZoom=f.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var C,T="number"==typeof this._targetZoom?this._targetZoom:f.zoom,I=this._startZoom,M=this._easing,L=!1;if("wheel"===this._type&&I&&M){var $=Math.min((v.browser.now()-this._lastWheelEventTime)/200,1),q=M($);C=v.number(I,T,q),$<1?this._frameId||(this._frameId=!0):L=!0}else C=T,L=!0;return this._active=!0,L&&(this._active=!1,this._finishTimeout=setTimeout(function(){d._zooming=!1,d._handler._triggerRenderFrame(),delete d._targetZoom,delete d._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!L,zoomDelta:C-f.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},tr.prototype._smoothOutEasing=function(d){var f=v.ease;if(this._prevEase){var h=this._prevEase,g=(v.browser.now()-h.start)/h.duration,w=h.easing(g+.01)-h.easing(g),C=.27/Math.sqrt(w*w+1e-4)*.01,T=Math.sqrt(.0729-C*C);f=v.bezier(C,T,.25,1)}return this._prevEase={start:v.browser.now(),duration:d,easing:f},f},tr.prototype.reset=function(){this._active=!1};var Ht=function(d,f){this._clickZoom=d,this._tapZoom=f};Ht.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ht.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ht.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ht.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Hi=function(){this.reset()};Hi.prototype.reset=function(){this._active=!1},Hi.prototype.dblclick=function(d,f){return d.preventDefault(),{cameraAnimation:function(h){h.easeTo({duration:300,zoom:h.getZoom()+(d.shiftKey?-1:1),around:h.unproject(f)},{originalEvent:d})}}},Hi.prototype.enable=function(){this._enabled=!0},Hi.prototype.disable=function(){this._enabled=!1,this.reset()},Hi.prototype.isEnabled=function(){return this._enabled},Hi.prototype.isActive=function(){return this._active};var $i=function(){this._tap=new Ql({numTouches:1,numTaps:1}),this.reset()};$i.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},$i.prototype.touchstart=function(d,f,h){this._swipePoint||(this._tapTime&&d.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?h.length>0&&(this._swipePoint=f[0],this._swipeTouch=h[0].identifier):this._tap.touchstart(d,f,h))},$i.prototype.touchmove=function(d,f,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;var g=f[0],w=g.y-this._swipePoint.y;return this._swipePoint=g,d.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(d,f,h)},$i.prototype.touchend=function(d,f,h){this._tapTime?this._swipePoint&&0===h.length&&this.reset():this._tap.touchend(d,f,h)&&(this._tapTime=d.timeStamp)},$i.prototype.touchcancel=function(){this.reset()},$i.prototype.enable=function(){this._enabled=!0},$i.prototype.disable=function(){this._enabled=!1,this.reset()},$i.prototype.isEnabled=function(){return this._enabled},$i.prototype.isActive=function(){return this._active};var ui=function(d,f,h){this._el=d,this._mousePan=f,this._touchPan=h};ui.prototype.enable=function(d){this._inertiaOptions=d||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")},ui.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")},ui.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ui.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var po=function(d,f,h){this._pitchWithRotate=d.pitchWithRotate,this._mouseRotate=f,this._mousePitch=h};po.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},po.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},po.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},po.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ra=function(d,f,h,g){this._el=d,this._touchZoom=f,this._touchRotate=h,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0};ra.prototype.enable=function(d){this._touchZoom.enable(d),this._rotationDisabled||this._touchRotate.enable(d),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")},ra.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")},ra.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ra.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ra.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ra.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var $o=function(d){return d.zoom||d.drag||d.pitch||d.rotate},qo=function(d){function f(){d.apply(this,arguments)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f}(v.Event);function ks(d){return d.panDelta&&d.panDelta.mag()||d.zoomDelta||d.bearingDelta||d.pitchDelta}var Xe=function(d,f){this._map=d,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Xl(d),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(f),v.bindAll(["handleEvent","handleWindowEvent"],this);var h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[v.window.document,"mousemove",{capture:!0}],[v.window.document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[v.window,"blur",void 0]];for(var g=0,w=this._listeners;g<w.length;g+=1){var C=w[g],T=C[0];Ve.addEventListener(T,C[1],T===v.window.document?this.handleWindowEvent:this.handleEvent,C[2])}};Xe.prototype.destroy=function(){for(var d=0,f=this._listeners;d<f.length;d+=1){var h=f[d],g=h[0];Ve.removeEventListener(g,h[1],g===v.window.document?this.handleWindowEvent:this.handleEvent,h[2])}},Xe.prototype._addDefaultHandlers=function(d){var f=this._map,h=f.getCanvasContainer();this._add("mapEvent",new Ei(f,d));var g=f.boxZoom=new rt(f,d);this._add("boxZoom",g);var w=new Io,C=new Hi;f.doubleClickZoom=new Ht(C,w),this._add("tapZoom",w),this._add("clickZoom",C);var T=new $i;this._add("tapDragZoom",T);var I=f.touchPitch=new rs;this._add("touchPitch",I);var M=new Wr(d),L=new qe(d);f.dragRotate=new po(d,M,L),this._add("mouseRotate",M,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]);var $=new ct(d),q=new Rt(d);f.dragPan=new ui(h,$,q),this._add("mousePan",$),this._add("touchPan",q,["touchZoom","touchRotate"]);var j=new kn,ne=new dl;f.touchZoomRotate=new ra(h,ne,j,T),this._add("touchRotate",j,["touchPan","touchZoom"]),this._add("touchZoom",ne,["touchPan","touchRotate"]);var J=f.scrollZoom=new tr(f,this);this._add("scrollZoom",J,["mousePan"]);var ae=f.keyboard=new fo;this._add("keyboard",ae),this._add("blockableMapEvent",new ro(f));for(var ee=0,ie=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ee<ie.length;ee+=1){var pe=ie[ee];d.interactive&&d[pe]&&f[pe].enable(d[pe])}},Xe.prototype._add=function(d,f,h){this._handlers.push({handlerName:d,handler:f,allowed:h}),this._handlersById[d]=f},Xe.prototype.stop=function(d){if(!this._updatingCamera){for(var f=0,h=this._handlers;f<h.length;f+=1)h[f].handler.reset();this._inertia.clear(),this._fireEvents({},{},d),this._changes=[]}},Xe.prototype.isActive=function(){for(var d=0,f=this._handlers;d<f.length;d+=1)if(f[d].handler.isActive())return!0;return!1},Xe.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Xe.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Xe.prototype.isMoving=function(){return!!$o(this._eventsInProgress)||this.isZooming()},Xe.prototype._blockedByActive=function(d,f,h){for(var g in d)if(g!==h&&(!f||f.indexOf(g)<0))return!0;return!1},Xe.prototype.handleWindowEvent=function(d){this.handleEvent(d,d.type+"Window")},Xe.prototype._getMapTouches=function(d){for(var f=[],h=0,g=d;h<g.length;h+=1){var w=g[h];this._el.contains(w.target)&&f.push(w)}return f},Xe.prototype.handleEvent=function(d,f){if("blur"!==d.type){this._updatingCamera=!0;for(var h="renderFrame"===d.type?void 0:d,g={needsRenderFrame:!1},w={},C={},T=d.touches?this._getMapTouches(d.touches):void 0,I=T?Ve.touchPos(this._el,T):Ve.mousePos(this._el,d),M=0,L=this._handlers;M<L.length;M+=1){var $=L[M],q=$.handlerName,j=$.handler,ne=$.allowed;if(j.isEnabled()){var J=void 0;this._blockedByActive(C,ne,q)?j.reset():j[f||d.type]&&(J=j[f||d.type](d,I,T),this.mergeHandlerResult(g,w,J,q,h),J&&J.needsRenderFrame&&this._triggerRenderFrame()),(J||j.isActive())&&(C[q]=j)}}var ae={};for(var ee in this._previousActiveHandlers)C[ee]||(ae[ee]=h);this._previousActiveHandlers=C,(Object.keys(ae).length||ks(g))&&(this._changes.push([g,w,ae]),this._triggerRenderFrame()),(Object.keys(C).length||ks(g))&&this._map._stop(!0),this._updatingCamera=!1;var ie=g.cameraAnimation;ie&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ie(this._map))}else this.stop(!0)},Xe.prototype.mergeHandlerResult=function(d,f,h,g,w){if(h){v.extend(d,h);var C={handlerName:g,originalEvent:h.originalEvent||w};void 0!==h.zoomDelta&&(f.zoom=C),void 0!==h.panDelta&&(f.drag=C),void 0!==h.pitchDelta&&(f.pitch=C),void 0!==h.bearingDelta&&(f.rotate=C)}},Xe.prototype._applyChanges=function(){for(var d={},f={},h={},g=0,w=this._changes;g<w.length;g+=1){var C=w[g],T=C[0],I=C[1],M=C[2];T.panDelta&&(d.panDelta=(d.panDelta||new v.Point(0,0))._add(T.panDelta)),T.zoomDelta&&(d.zoomDelta=(d.zoomDelta||0)+T.zoomDelta),T.bearingDelta&&(d.bearingDelta=(d.bearingDelta||0)+T.bearingDelta),T.pitchDelta&&(d.pitchDelta=(d.pitchDelta||0)+T.pitchDelta),void 0!==T.around&&(d.around=T.around),void 0!==T.pinchAround&&(d.pinchAround=T.pinchAround),T.noInertia&&(d.noInertia=T.noInertia),v.extend(f,I),v.extend(h,M)}this._updateMapTransform(d,f,h),this._changes=[]},Xe.prototype._updateMapTransform=function(d,f,h){var g=this._map,w=g.transform;if(!ks(d))return this._fireEvents(f,h,!0);var C=d.panDelta,T=d.zoomDelta,I=d.bearingDelta,M=d.pitchDelta,L=d.around,$=d.pinchAround;void 0!==$&&(L=$),g._stop(!0),L=L||g.transform.centerPoint;var q=w.pointLocation(C?L.sub(C):L);I&&(w.bearing+=I),M&&(w.pitch+=M),T&&(w.zoom+=T),w.setLocationAtPoint(q,L),this._map._update(),d.noInertia||this._inertia.record(d),this._fireEvents(f,h,!0)},Xe.prototype._fireEvents=function(d,f,h){var g=this,w=$o(this._eventsInProgress),C=$o(d),T={};for(var I in d)this._eventsInProgress[I]||(T[I+"start"]=d[I].originalEvent),this._eventsInProgress[I]=d[I];for(var M in!w&&C&&this._fireEvent("movestart",C.originalEvent),T)this._fireEvent(M,T[M]);for(var L in C&&this._fireEvent("move",C.originalEvent),d)this._fireEvent(L,d[L].originalEvent);var $,q={};for(var j in this._eventsInProgress){var ne=this._eventsInProgress[j],J=ne.handlerName,ae=ne.originalEvent;this._handlersById[J].isActive()||(delete this._eventsInProgress[j],q[j+"end"]=$=f[J]||ae)}for(var ee in q)this._fireEvent(ee,q[ee]);var ie=$o(this._eventsInProgress);if(h&&(w||C)&&!ie){this._updatingCamera=!0;var pe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ve=function(ke){return 0!==ke&&-g._bearingSnap<ke&&ke<g._bearingSnap};pe?(ve(pe.bearing||this._map.getBearing())&&(pe.bearing=0),this._map.easeTo(pe,{originalEvent:$})):(this._map.fire(new v.Event("moveend",{originalEvent:$})),ve(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Xe.prototype._fireEvent=function(d,f){this._map.fire(new v.Event(d,f?{originalEvent:f}:{}))},Xe.prototype._requestFrame=function(){var d=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(f){delete d._frameId,d.handleEvent(new qo("renderFrame",{timeStamp:f})),d._applyChanges()})},Xe.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var It=function(d){function f(h,g){d.call(this),this._moving=!1,this._zooming=!1,this.transform=h,this._bearingSnap=g.bearingSnap,v.bindAll(["_renderFrameCallback"],this)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.getCenter=function(){return new v.LngLat(this.transform.center.lng,this.transform.center.lat)},f.prototype.setCenter=function(h,g){return this.jumpTo({center:h},g)},f.prototype.panBy=function(h,g,w){return h=v.Point.convert(h).mult(-1),this.panTo(this.transform.center,v.extend({offset:h},g),w)},f.prototype.panTo=function(h,g,w){return this.easeTo(v.extend({center:h},g),w)},f.prototype.getZoom=function(){return this.transform.zoom},f.prototype.setZoom=function(h,g){return this.jumpTo({zoom:h},g),this},f.prototype.zoomTo=function(h,g,w){return this.easeTo(v.extend({zoom:h},g),w)},f.prototype.zoomIn=function(h,g){return this.zoomTo(this.getZoom()+1,h,g),this},f.prototype.zoomOut=function(h,g){return this.zoomTo(this.getZoom()-1,h,g),this},f.prototype.getBearing=function(){return this.transform.bearing},f.prototype.setBearing=function(h,g){return this.jumpTo({bearing:h},g),this},f.prototype.getPadding=function(){return this.transform.padding},f.prototype.setPadding=function(h,g){return this.jumpTo({padding:h},g),this},f.prototype.rotateTo=function(h,g,w){return this.easeTo(v.extend({bearing:h},g),w)},f.prototype.resetNorth=function(h,g){return this.rotateTo(0,v.extend({duration:1e3},h),g),this},f.prototype.resetNorthPitch=function(h,g){return this.easeTo(v.extend({bearing:0,pitch:0,duration:1e3},h),g),this},f.prototype.snapToNorth=function(h,g){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(h,g):this},f.prototype.getPitch=function(){return this.transform.pitch},f.prototype.setPitch=function(h,g){return this.jumpTo({pitch:h},g),this},f.prototype.cameraForBounds=function(h,g){h=v.LngLatBounds.convert(h);var w=g&&g.bearing||0;return this._cameraForBoxAndBearing(h.getNorthWest(),h.getSouthEast(),w,g)},f.prototype._cameraForBoxAndBearing=function(h,g,w,C){var T={top:0,bottom:0,right:0,left:0};if("number"==typeof(C=v.extend({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},C)).padding){var I=C.padding;C.padding={top:I,bottom:I,right:I,left:I}}C.padding=v.extend(T,C.padding);var M=this.transform,L=M.padding,$=M.project(v.LngLat.convert(h)),q=M.project(v.LngLat.convert(g)),j=$.rotate(-w*Math.PI/180),ne=q.rotate(-w*Math.PI/180),J=new v.Point(Math.max(j.x,ne.x),Math.max(j.y,ne.y)),ae=new v.Point(Math.min(j.x,ne.x),Math.min(j.y,ne.y)),ee=J.sub(ae),ie=(M.width-(L.left+L.right+C.padding.left+C.padding.right))/ee.x,pe=(M.height-(L.top+L.bottom+C.padding.top+C.padding.bottom))/ee.y;if(!(pe<0||ie<0)){var ve=Math.min(M.scaleZoom(M.scale*Math.min(ie,pe)),C.maxZoom),ke="number"==typeof C.offset.x?new v.Point(C.offset.x,C.offset.y):v.Point.convert(C.offset),Ee=new v.Point((C.padding.left-C.padding.right)/2,(C.padding.top-C.padding.bottom)/2).rotate(w*Math.PI/180),Ae=ke.add(Ee).mult(M.scale/M.zoomScale(ve));return{center:M.unproject($.add(q).div(2).sub(Ae)),zoom:ve,bearing:w}}v.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},f.prototype.fitBounds=function(h,g,w){return this._fitInternal(this.cameraForBounds(h,g),g,w)},f.prototype.fitScreenCoordinates=function(h,g,w,C,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(v.Point.convert(h)),this.transform.pointLocation(v.Point.convert(g)),w,C),C,T)},f.prototype._fitInternal=function(h,g,w){return h?(delete(g=v.extend(h,g)).padding,g.linear?this.easeTo(g,w):this.flyTo(g,w)):this},f.prototype.jumpTo=function(h,g){this.stop();var w=this.transform,C=!1,T=!1,I=!1;return"zoom"in h&&w.zoom!==+h.zoom&&(C=!0,w.zoom=+h.zoom),void 0!==h.center&&(w.center=v.LngLat.convert(h.center)),"bearing"in h&&w.bearing!==+h.bearing&&(T=!0,w.bearing=+h.bearing),"pitch"in h&&w.pitch!==+h.pitch&&(I=!0,w.pitch=+h.pitch),null==h.padding||w.isPaddingEqual(h.padding)||(w.padding=h.padding),this.fire(new v.Event("movestart",g)).fire(new v.Event("move",g)),C&&this.fire(new v.Event("zoomstart",g)).fire(new v.Event("zoom",g)).fire(new v.Event("zoomend",g)),T&&this.fire(new v.Event("rotatestart",g)).fire(new v.Event("rotate",g)).fire(new v.Event("rotateend",g)),I&&this.fire(new v.Event("pitchstart",g)).fire(new v.Event("pitch",g)).fire(new v.Event("pitchend",g)),this.fire(new v.Event("moveend",g))},f.prototype.easeTo=function(h,g){var w=this;this._stop(!1,h.easeId),(!1===(h=v.extend({offset:[0,0],duration:500,easing:v.ease},h)).animate||!h.essential&&v.browser.prefersReducedMotion)&&(h.duration=0);var C=this.transform,T=this.getZoom(),I=this.getBearing(),M=this.getPitch(),L=this.getPadding(),$="zoom"in h?+h.zoom:T,q="bearing"in h?this._normalizeBearing(h.bearing,I):I,j="pitch"in h?+h.pitch:M,ne="padding"in h?h.padding:C.padding,J=v.Point.convert(h.offset),ae=C.centerPoint.add(J),ee=C.pointLocation(ae),ie=v.LngLat.convert(h.center||ee);this._normalizeCenter(ie);var pe,ve,ke=C.project(ee),Ee=C.project(ie).sub(ke),Ae=C.zoomScale($-T);h.around&&(pe=v.LngLat.convert(h.around),ve=C.locationPoint(pe));var Ne={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||$!==T,this._rotating=this._rotating||I!==q,this._pitching=this._pitching||j!==M,this._padding=!C.isPaddingEqual(ne),this._easeId=h.easeId,this._prepareEase(g,h.noMoveStart,Ne),this._ease(function(Ze){if(w._zooming&&(C.zoom=v.number(T,$,Ze)),w._rotating&&(C.bearing=v.number(I,q,Ze)),w._pitching&&(C.pitch=v.number(M,j,Ze)),w._padding&&(C.interpolatePadding(L,ne,Ze),ae=C.centerPoint.add(J)),pe)C.setLocationAtPoint(pe,ve);else{var He=C.zoomScale(C.zoom-T),it=$>T?Math.min(2,Ae):Math.max(.5,Ae),_t=Math.pow(it,1-Ze),xt=C.unproject(ke.add(Ee.mult(Ze*_t)).mult(He));C.setLocationAtPoint(C.renderWorldCopies?xt.wrap():xt,ae)}w._fireMoveEvents(g)},function(Ze){w._afterEase(g,Ze)},h),this},f.prototype._prepareEase=function(h,g,w){void 0===w&&(w={}),this._moving=!0,g||w.moving||this.fire(new v.Event("movestart",h)),this._zooming&&!w.zooming&&this.fire(new v.Event("zoomstart",h)),this._rotating&&!w.rotating&&this.fire(new v.Event("rotatestart",h)),this._pitching&&!w.pitching&&this.fire(new v.Event("pitchstart",h))},f.prototype._fireMoveEvents=function(h){this.fire(new v.Event("move",h)),this._zooming&&this.fire(new v.Event("zoom",h)),this._rotating&&this.fire(new v.Event("rotate",h)),this._pitching&&this.fire(new v.Event("pitch",h))},f.prototype._afterEase=function(h,g){if(!this._easeId||!g||this._easeId!==g){delete this._easeId;var w=this._zooming,C=this._rotating,T=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,w&&this.fire(new v.Event("zoomend",h)),C&&this.fire(new v.Event("rotateend",h)),T&&this.fire(new v.Event("pitchend",h)),this.fire(new v.Event("moveend",h))}},f.prototype.flyTo=function(h,g){var w=this;if(!h.essential&&v.browser.prefersReducedMotion){var C=v.pick(h,["center","zoom","bearing","pitch","around"]);return this.jumpTo(C,g)}this.stop(),h=v.extend({offset:[0,0],speed:1.2,curve:1.42,easing:v.ease},h);var T=this.transform,I=this.getZoom(),M=this.getBearing(),L=this.getPitch(),$=this.getPadding(),q="zoom"in h?v.clamp(+h.zoom,T.minZoom,T.maxZoom):I,j="bearing"in h?this._normalizeBearing(h.bearing,M):M,ne="pitch"in h?+h.pitch:L,J="padding"in h?h.padding:T.padding,ae=T.zoomScale(q-I),ee=v.Point.convert(h.offset),ie=T.centerPoint.add(ee),pe=T.pointLocation(ie),ve=v.LngLat.convert(h.center||pe);this._normalizeCenter(ve);var ke=T.project(pe),Ee=T.project(ve).sub(ke),Ae=h.curve,Ne=Math.max(T.width,T.height),Ze=Ne/ae,He=Ee.mag();if("minZoom"in h){var it=v.clamp(Math.min(h.minZoom,I,q),T.minZoom,T.maxZoom),_t=Ne/T.zoomScale(it-I);Ae=Math.sqrt(_t/He*2)}var xt=Ae*Ae;function bt(Ot){var Tt=(Ze*Ze-Ne*Ne+(Ot?-1:1)*xt*xt*He*He)/(2*(Ot?Ze:Ne)*xt*He);return Math.log(Math.sqrt(Tt*Tt+1)-Tt)}function hn(Ot){return(Math.exp(Ot)-Math.exp(-Ot))/2}function at(Ot){return(Math.exp(Ot)+Math.exp(-Ot))/2}var qt=bt(0),ln=function(Ot){return at(qt)/at(qt+Ae*Ot)},Ye=function(Ot){return Ne*((at(qt)*(hn(Tt=qt+Ae*Ot)/at(Tt))-hn(qt))/xt)/He;var Tt},Pt=(bt(1)-qt)/Ae;if(Math.abs(He)<1e-6||!isFinite(Pt)){if(Math.abs(Ne-Ze)<1e-6)return this.easeTo(h,g);var Vt=Ze<Ne?-1:1;Pt=Math.abs(Math.log(Ze/Ne))/Ae,Ye=function(){return 0},ln=function(Ot){return Math.exp(Vt*Ae*Ot)}}return h.duration="duration"in h?+h.duration:1e3*Pt/("screenSpeed"in h?+h.screenSpeed/Ae:+h.speed),h.maxDuration&&h.duration>h.maxDuration&&(h.duration=0),this._zooming=!0,this._rotating=M!==j,this._pitching=ne!==L,this._padding=!T.isPaddingEqual(J),this._prepareEase(g,!1),this._ease(function(Ot){var Tt=Ot*Pt,nr=1/ln(Tt);T.zoom=1===Ot?q:I+T.scaleZoom(nr),w._rotating&&(T.bearing=v.number(M,j,Ot)),w._pitching&&(T.pitch=v.number(L,ne,Ot)),w._padding&&(T.interpolatePadding($,J,Ot),ie=T.centerPoint.add(ee));var Br=1===Ot?ve:T.unproject(ke.add(Ee.mult(Ye(Tt))).mult(nr));T.setLocationAtPoint(T.renderWorldCopies?Br.wrap():Br,ie),w._fireMoveEvents(g)},function(){return w._afterEase(g)},h),this},f.prototype.isEasing=function(){return!!this._easeFrameId},f.prototype.stop=function(){return this._stop()},f.prototype._stop=function(h,g){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var w=this._onEaseEnd;delete this._onEaseEnd,w.call(this,g)}if(!h){var C=this.handlers;C&&C.stop(!1)}return this},f.prototype._ease=function(h,g,w){!1===w.animate||0===w.duration?(h(1),g()):(this._easeStart=v.browser.now(),this._easeOptions=w,this._onEaseFrame=h,this._onEaseEnd=g,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},f.prototype._renderFrameCallback=function(){var h=Math.min((v.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(h)),h<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},f.prototype._normalizeBearing=function(h,g){h=v.wrap(h,-180,180);var w=Math.abs(h-g);return Math.abs(h-360-g)<w&&(h-=360),Math.abs(h+360-g)<w&&(h+=360),h},f.prototype._normalizeCenter=function(h){var g=this.transform;if(g.renderWorldCopies&&!g.lngRange){var w=h.lng-g.center.lng;h.lng+=w>180?-360:w<-180?360:0}},f}(v.Evented),di=function(d){void 0===d&&(d={}),this.options=d,v.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};di.prototype.getDefaultPosition=function(){return"bottom-right"},di.prototype.onAdd=function(d){var f=this.options&&this.options.compact;return this._map=d,this._container=Ve.create("div","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Ve.create("button","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.type="button",this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Ve.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),f&&this._container.classList.add("maplibregl-compact","mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===f&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},di.prototype.onRemove=function(){Ve.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},di.prototype._setElementTitle=function(d,f){var h=this._map._getUIString("AttributionControl."+f);d.title=h,d.setAttribute("aria-label",h)},di.prototype._toggleAttribution=function(){this._container.classList.contains("maplibregl-compact-show")||this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},di.prototype._updateEditLink=function(){var d=this._editLink;d||(d=this._editLink=this._container.querySelector(".mapbox-improve-map"));var f=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||v.config.ACCESS_TOKEN}];if(d){var h=f.reduce(function(g,w,C){return w.value&&(g+=w.key+"="+w.value+(C<f.length-1?"&":"")),g},"?");d.href=v.config.FEEDBACK_URL+"/"+h+(this._map._hash?this._map._hash.getHashString(!0):""),d.rel="noopener nofollow",this._setElementTitle(d,"MapFeedback")}},di.prototype._updateData=function(d){!d||"metadata"!==d.sourceDataType&&"visibility"!==d.sourceDataType&&"style"!==d.dataType||(this._updateAttributions(),this._updateEditLink())},di.prototype._updateAttributions=function(){if(this._map.style){var d=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?d=d.concat(this.options.customAttribution.map(function(I){return"string"!=typeof I?"":I})):"string"==typeof this.options.customAttribution&&d.push(this.options.customAttribution)),this._map.style.stylesheet){var f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}var h=this._map.style.sourceCaches;for(var g in h){var w=h[g];if(w.used){var C=w.getSource();C.attribution&&d.indexOf(C.attribution)<0&&d.push(C.attribution)}}d.sort(function(I,M){return I.length-M.length});var T=(d=d.filter(function(I,M){for(var L=M+1;L<d.length;L++)if(d[L].indexOf(I)>=0)return!1;return!0})).join(" | ");T!==this._attribHTML&&(this._attribHTML=T,d.length?(this._innerContainer.innerHTML=T,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._editLink=null)}},di.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("maplibregl-compact","mapboxgl-compact"):this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show")};var kt=function(){v.bindAll(["_updateLogo"],this),v.bindAll(["_updateCompact"],this)};kt.prototype.onAdd=function(d){this._map=d,this._container=Ve.create("div","maplibregl-ctrl mapboxgl-ctrl");var f=Ve.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://maplibre.org/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},kt.prototype.onRemove=function(){Ve.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},kt.prototype.getDefaultPosition=function(){return"bottom-left"},kt.prototype._updateLogo=function(d){d&&"metadata"!==d.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},kt.prototype._logoRequired=function(){if(this._map.style){var d=this._map.style.sourceCaches;for(var f in d)if(d[f].getSource().mapbox_logo)return!0;return!1}},kt.prototype._updateCompact=function(){var d=this._container.children;if(d.length){var f=d[0];this._map.getCanvasContainer().offsetWidth<250?f.classList.add("maplibregl-compact","mapboxgl-compact"):f.classList.remove("maplibregl-compact","mapboxgl-compact")}};var ia=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ia.prototype.add=function(d){var f=++this._id;return this._queue.push({callback:d,id:f,cancelled:!1}),f},ia.prototype.remove=function(d){for(var f=this._currentlyRunning,h=0,g=f?this._queue.concat(f):this._queue;h<g.length;h+=1){var w=g[h];if(w.id===d)return void(w.cancelled=!0)}},ia.prototype.run=function(d){void 0===d&&(d=0);var f=this._currentlyRunning=this._queue;this._queue=[];for(var h=0,g=f;h<g.length;h+=1){var w=g[h];if(!w.cancelled&&(w.callback(d),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ia.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var hi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ci=v.window.HTMLImageElement,ff=v.window.HTMLElement,is=v.window.ImageBitmap,jt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},wn=function(d){function f(g){var w=this;if(null!=(g=v.extend({},jt,g)).minZoom&&null!=g.maxZoom&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=g.minPitch&&null!=g.maxPitch&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=g.minPitch&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=g.maxPitch&&g.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var C=new Zn(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies);if(d.call(this,C,g),this._interactive=g.interactive,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=g.collectResourceTiming,this._renderTaskQueue=new ia,this._controls=[],this._mapId=v.uniqueId(),this._locale=v.extend({},hi,g.locale),this._clickTolerance=g.clickTolerance,this._requestManager=new v.RequestManager(g.transformRequest,g.accessToken),"string"==typeof g.container){if(this._container=v.window.document.getElementById(g.container),!this._container)throw new Error("Container '"+g.container+"' not found.")}else{if(!(g.container instanceof ff))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(g.maxBounds&&this.setMaxBounds(g.maxBounds),v.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return w._update(!1)}),this.on("moveend",function(){return w._update(!1)}),this.on("zoom",function(){return w._update(!0)}),void 0!==v.window&&(v.window.addEventListener("online",this._onWindowOnline,!1),v.window.addEventListener("resize",this._onWindowResize,!1),v.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Xe(this,g),this._hash=g.hash&&new Ho("string"==typeof g.hash&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,v.extend({},g.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=g.localIdeographFontFamily,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new di({customAttribution:g.customAttribution})),this.addControl(new kt,g.logoPosition),this.on("style.load",function(){w.transform.unmodified&&w.jumpTo(w.style.stylesheet)}),this.on("data",function(T){w._update("style"===T.dataType),w.fire(new v.Event(T.dataType+"data",T))}),this.on("dataloading",function(T){w.fire(new v.Event(T.dataType+"dataloading",T))})}d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f;var h={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return f.prototype._getMapId=function(){return this._mapId},f.prototype.addControl=function(g,w){if(void 0===w&&(w=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new v.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var C=g.onAdd(this);this._controls.push(g);var T=this._controlPositions[w];return-1!==w.indexOf("bottom")?T.insertBefore(C,T.firstChild):T.appendChild(C),this},f.prototype.removeControl=function(g){if(!g||!g.onRemove)return this.fire(new v.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var w=this._controls.indexOf(g);return w>-1&&this._controls.splice(w,1),g.onRemove(this),this},f.prototype.hasControl=function(g){return this._controls.indexOf(g)>-1},f.prototype.resize=function(g){var w=this._containerDimensions(),C=w[0],T=w[1];this._resizeCanvas(C,T),this.transform.resize(C,T),this.painter.resize(C,T);var I=!this._moving;return I&&(this.stop(),this.fire(new v.Event("movestart",g)).fire(new v.Event("move",g))),this.fire(new v.Event("resize",g)),I&&this.fire(new v.Event("moveend",g)),this},f.prototype.getBounds=function(){return this.transform.getBounds()},f.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},f.prototype.setMaxBounds=function(g){return this.transform.setMaxBounds(v.LngLatBounds.convert(g)),this._update()},f.prototype.setMinZoom=function(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},f.prototype.getMinZoom=function(){return this.transform.minZoom},f.prototype.setMaxZoom=function(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")},f.prototype.getMaxZoom=function(){return this.transform.maxZoom},f.prototype.setMinPitch=function(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},f.prototype.getMinPitch=function(){return this.transform.minPitch},f.prototype.setMaxPitch=function(g){if((g=g??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")},f.prototype.getMaxPitch=function(){return this.transform.maxPitch},f.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},f.prototype.setRenderWorldCopies=function(g){return this.transform.renderWorldCopies=g,this._update()},f.prototype.project=function(g){return this.transform.locationPoint(v.LngLat.convert(g))},f.prototype.unproject=function(g){return this.transform.pointLocation(v.Point.convert(g))},f.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},f.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},f.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},f.prototype._createDelegatedListener=function(g,w,C){var T,I=this;if("mouseenter"===g||"mouseover"===g){var M=!1;return{layer:w,listener:C,delegates:{mousemove:function($){var q=I.getLayer(w)?I.queryRenderedFeatures($.point,{layers:[w]}):[];q.length?M||(M=!0,C.call(I,new Bi(g,I,$.originalEvent,{features:q}))):M=!1},mouseout:function(){M=!1}}}}if("mouseleave"===g||"mouseout"===g){var L=!1;return{layer:w,listener:C,delegates:{mousemove:function($){(I.getLayer(w)?I.queryRenderedFeatures($.point,{layers:[w]}):[]).length?L=!0:L&&(L=!1,C.call(I,new Bi(g,I,$.originalEvent)))},mouseout:function($){L&&(L=!1,C.call(I,new Bi(g,I,$.originalEvent)))}}}}return{layer:w,listener:C,delegates:(T={},T[g]=function($){var q=I.getLayer(w)?I.queryRenderedFeatures($.point,{layers:[w]}):[];q.length&&($.features=q,C.call(I,$),delete $.features)},T)}},f.prototype.on=function(g,w,C){if(void 0===C)return d.prototype.on.call(this,g,w);var T=this._createDelegatedListener(g,w,C);for(var I in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(T),T.delegates)this.on(I,T.delegates[I]);return this},f.prototype.once=function(g,w,C){if(void 0===C)return d.prototype.once.call(this,g,w);var T=this._createDelegatedListener(g,w,C);for(var I in T.delegates)this.once(I,T.delegates[I]);return this},f.prototype.off=function(g,w,C){var T=this;return void 0===C?d.prototype.off.call(this,g,w):(this._delegatedListeners&&this._delegatedListeners[g]&&function(I){for(var M=I[g],L=0;L<M.length;L++){var $=M[L];if($.layer===w&&$.listener===C){for(var q in $.delegates)T.off(q,$.delegates[q]);return M.splice(L,1),T}}}(this._delegatedListeners),this)},f.prototype.queryRenderedFeatures=function(g,w){if(!this.style)return[];var C;if(void 0!==w||void 0===g||g instanceof v.Point||Array.isArray(g)||(w=g,g=void 0),w=w||{},(g=g||[[0,0],[this.transform.width,this.transform.height]])instanceof v.Point||"number"==typeof g[0])C=[v.Point.convert(g)];else{var T=v.Point.convert(g[0]),I=v.Point.convert(g[1]);C=[T,new v.Point(I.x,T.y),I,new v.Point(T.x,I.y),T]}return this.style.queryRenderedFeatures(C,w,this.transform)},f.prototype.querySourceFeatures=function(g,w){return this.style.querySourceFeatures(g,w)},f.prototype.setStyle=function(g,w){return!1!==(w=v.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},w)).diff&&w.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,w),this):(this._localIdeographFontFamily=w.localIdeographFontFamily,this._updateStyle(g,w))},f.prototype.setTransformRequest=function(g){return this._requestManager.setTransformRequest(g),this},f.prototype._getUIString=function(g){var w=this._locale[g];if(null==w)throw new Error("Missing UI string '"+g+"'");return w},f.prototype._updateStyle=function(g,w){return this.style&&(this.style.setEventedParent(null),this.style._remove()),g?(this.style=new Gl(this,w||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof g?this.style.loadURL(g):this.style.loadJSON(g),this):(delete this.style,this)},f.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Gl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},f.prototype._diffStyle=function(g,w){var C=this;if("string"==typeof g){var T=this._requestManager.normalizeStyleURL(g),I=this._requestManager.transformRequest(T,v.ResourceType.Style);v.getJSON(I,function(M,L){M?C.fire(new v.ErrorEvent(M)):L&&C._updateDiff(L,w)})}else"object"==typeof g&&this._updateDiff(g,w)},f.prototype._updateDiff=function(g,w){try{this.style.setState(g)&&this._update(!0)}catch(C){v.warnOnce("Unable to perform style diff: "+(C.message||C.error||C)+".  Rebuilding the style from scratch."),this._updateStyle(g,w)}},f.prototype.getStyle=function(){if(this.style)return this.style.serialize()},f.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():v.warnOnce("There is no style added to the map.")},f.prototype.addSource=function(g,w){return this._lazyInitEmptyStyle(),this.style.addSource(g,w),this._update(!0)},f.prototype.isSourceLoaded=function(g){var w=this.style&&this.style.sourceCaches[g];if(void 0!==w)return w.loaded();this.fire(new v.ErrorEvent(new Error("There is no source with ID '"+g+"'")))},f.prototype.areTilesLoaded=function(){var g=this.style&&this.style.sourceCaches;for(var w in g){var C=g[w]._tiles;for(var T in C){var I=C[T];if("loaded"!==I.state&&"errored"!==I.state)return!1}}return!0},f.prototype.addSourceType=function(g,w,C){return this._lazyInitEmptyStyle(),this.style.addSourceType(g,w,C)},f.prototype.removeSource=function(g){return this.style.removeSource(g),this._update(!0)},f.prototype.getSource=function(g){return this.style.getSource(g)},f.prototype.addImage=function(g,w,C){void 0===C&&(C={});var T=C.pixelRatio;void 0===T&&(T=1);var I=C.sdf;void 0===I&&(I=!1);var M=C.stretchX,L=C.stretchY,$=C.content;if(this._lazyInitEmptyStyle(),w instanceof Ci||is&&w instanceof is){var q=v.browser.getImageData(w);this.style.addImage(g,{data:new v.RGBAImage({width:q.width,height:q.height},q.data),pixelRatio:T,stretchX:M,stretchY:L,content:$,sdf:I,version:0})}else{if(void 0===w.width||void 0===w.height)return this.fire(new v.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var j=w;this.style.addImage(g,{data:new v.RGBAImage({width:w.width,height:w.height},new Uint8Array(w.data)),pixelRatio:T,stretchX:M,stretchY:L,content:$,sdf:I,version:0,userImage:j}),j.onAdd&&j.onAdd(this,g)}},f.prototype.updateImage=function(g,w){var C=this.style.getImage(g);if(!C)return this.fire(new v.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var T=w instanceof Ci||is&&w instanceof is?v.browser.getImageData(w):w,I=T.width,M=T.height,L=T.data;return void 0===I||void 0===M?this.fire(new v.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):I!==C.data.width||M!==C.data.height?this.fire(new v.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(C.data.replace(L,!(w instanceof Ci||is&&w instanceof is)),void this.style.updateImage(g,C))},f.prototype.hasImage=function(g){return g?!!this.style.getImage(g):(this.fire(new v.ErrorEvent(new Error("Missing required image id"))),!1)},f.prototype.removeImage=function(g){this.style.removeImage(g)},f.prototype.loadImage=function(g,w){v.getImage(this._requestManager.transformRequest(g,v.ResourceType.Image),w)},f.prototype.listImages=function(){return this.style.listImages()},f.prototype.addLayer=function(g,w){return this._lazyInitEmptyStyle(),this.style.addLayer(g,w),this._update(!0)},f.prototype.moveLayer=function(g,w){return this.style.moveLayer(g,w),this._update(!0)},f.prototype.removeLayer=function(g){return this.style.removeLayer(g),this._update(!0)},f.prototype.getLayer=function(g){return this.style.getLayer(g)},f.prototype.setLayerZoomRange=function(g,w,C){return this.style.setLayerZoomRange(g,w,C),this._update(!0)},f.prototype.setFilter=function(g,w,C){return void 0===C&&(C={}),this.style.setFilter(g,w,C),this._update(!0)},f.prototype.getFilter=function(g){return this.style.getFilter(g)},f.prototype.setPaintProperty=function(g,w,C,T){return void 0===T&&(T={}),this.style.setPaintProperty(g,w,C,T),this._update(!0)},f.prototype.getPaintProperty=function(g,w){return this.style.getPaintProperty(g,w)},f.prototype.setLayoutProperty=function(g,w,C,T){return void 0===T&&(T={}),this.style.setLayoutProperty(g,w,C,T),this._update(!0)},f.prototype.getLayoutProperty=function(g,w){return this.style.getLayoutProperty(g,w)},f.prototype.setLight=function(g,w){return void 0===w&&(w={}),this._lazyInitEmptyStyle(),this.style.setLight(g,w),this._update(!0)},f.prototype.getLight=function(){return this.style.getLight()},f.prototype.setFeatureState=function(g,w){return this.style.setFeatureState(g,w),this._update()},f.prototype.removeFeatureState=function(g,w){return this.style.removeFeatureState(g,w),this._update()},f.prototype.getFeatureState=function(g){return this.style.getFeatureState(g)},f.prototype.getContainer=function(){return this._container},f.prototype.getCanvasContainer=function(){return this._canvasContainer},f.prototype.getCanvas=function(){return this._canvas},f.prototype._containerDimensions=function(){var g=0,w=0;return this._container&&(g=this._container.clientWidth||400,w=this._container.clientHeight||300),[g,w]},f.prototype._setupContainer=function(){var g=this._container;g.classList.add("maplibregl-map","mapboxgl-map");var w=this._canvasContainer=Ve.create("div","maplibregl-canvas-container mapboxgl-canvas-container",g);this._interactive&&w.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=Ve.create("canvas","maplibregl-canvas mapboxgl-canvas",w),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var C=this._containerDimensions();this._resizeCanvas(C[0],C[1]);var T=this._controlContainer=Ve.create("div","maplibregl-control-container mapboxgl-control-container",g),I=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(M){I[M]=Ve.create("div","maplibregl-ctrl-"+M+" mapboxgl-ctrl-"+M,T)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},f.prototype._resizeCanvas=function(g,w){var C=v.browser.devicePixelRatio||1;this._canvas.width=C*g,this._canvas.height=C*w,this._canvas.style.width=g+"px",this._canvas.style.height=w+"px"},f.prototype._setupPainter=function(){var g=v.extend({},jo.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),w=this._canvas.getContext("webgl",g)||this._canvas.getContext("experimental-webgl",g);w?(this.painter=new lr(w,this.transform),v.webpSupported.testSupport(w)):this.fire(new v.ErrorEvent(new Error("Failed to initialize WebGL")))},f.prototype._contextLost=function(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new v.Event("webglcontextlost",{originalEvent:g}))},f.prototype._contextRestored=function(g){this._setupPainter(),this.resize(),this._update(),this.fire(new v.Event("webglcontextrestored",{originalEvent:g}))},f.prototype._onMapScroll=function(g){if(g.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},f.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},f.prototype._update=function(g){return this.style?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this},f.prototype._requestRenderFrame=function(g){return this._update(),this._renderTaskQueue.add(g)},f.prototype._cancelRenderFrame=function(g){this._renderTaskQueue.remove(g)},f.prototype._render=function(g){var w,C=this,T=0,I=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(w=I.createQueryEXT(),I.beginQueryEXT(I.TIME_ELAPSED_EXT,w),T=v.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),!this._removed){var M=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var L=this.transform.zoom,$=v.browser.now();this.style.zoomHistory.update(L,$);var q=new v.EvaluationParameters(L,{now:$,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),j=q.crossFadingFactor();1===j&&j===this._crossFadingFactor||(M=!0,this._crossFadingFactor=j),this.style.update(q)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new v.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new v.Event("load"))),this.style&&(this.style.hasTransitions()||M)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ne=v.browser.now()-T;I.endQueryEXT(I.TIME_ELAPSED_EXT,w),setTimeout(function(){var ee=I.getQueryObjectEXT(w,I.QUERY_RESULT_EXT)/1e6;I.deleteQueryEXT(w),C.fire(new v.Event("gpu-timing-frame",{cpuTime:ne,gpuTime:ee}))},50)}if(this.listens("gpu-timing-layer")){var J=this.painter.collectGpuTimers();setTimeout(function(){var ee=C.painter.queryGpuTimers(J);C.fire(new v.Event("gpu-timing-layer",{layerTimes:ee}))},50)}var ae=this._sourcesDirty||this._styleDirty||this._placementDirty;return ae||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new v.Event("idle")),!this._loaded||this._fullyLoaded||ae||(this._fullyLoaded=!0),this}},f.prototype.remove=function(){this._hash&&this._hash.remove();for(var g=0,w=this._controls;g<w.length;g+=1)w[g].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==v.window&&(v.window.removeEventListener("resize",this._onWindowResize,!1),v.window.removeEventListener("orientationchange",this._onWindowResize,!1),v.window.removeEventListener("online",this._onWindowOnline,!1));var C=this.painter.context.gl.getExtension("WEBGL_lose_context");C&&C.loseContext(),mo(this._canvasContainer),mo(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),this._removed=!0,this.fire(new v.Event("remove"))},f.prototype.triggerRepaint=function(){var g=this;this.style&&!this._frame&&(this._frame=v.browser.frame(function(w){g._frame=null,g._render(w)}))},f.prototype._onWindowOnline=function(){this._update()},f.prototype._onWindowResize=function(g){this._trackResize&&this.resize({originalEvent:g})._update()},h.showTileBoundaries.get=function(){return!!this._showTileBoundaries},h.showTileBoundaries.set=function(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())},h.showPadding.get=function(){return!!this._showPadding},h.showPadding.set=function(g){this._showPadding!==g&&(this._showPadding=g,this._update())},h.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},h.showCollisionBoxes.set=function(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())},h.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},h.showOverdrawInspector.set=function(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())},h.repaint.get=function(){return!!this._repaint},h.repaint.set=function(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())},h.vertices.get=function(){return!!this._vertices},h.vertices.set=function(g){this._vertices=g,this._update()},f.prototype._setCacheLimits=function(g,w){v.setCacheLimits(g,w)},h.version.get=function(){return v.version},Object.defineProperties(f.prototype,h),f}(It);function mo(d){d.parentNode&&d.parentNode.removeChild(d)}var zu={showCompass:!0,showZoom:!0,visualizePitch:!1},io=function(d){var f=this;this.options=v.extend({},zu,d),this._container=Ve.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(h){return h.preventDefault()}),this.options.showZoom&&(v.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",function(h){return f._map.zoomIn({},{originalEvent:h})}),Ve.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",function(h){return f._map.zoomOut({},{originalEvent:h})}),Ve.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(v.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",function(h){f.options.visualizePitch?f._map.resetNorthPitch({},{originalEvent:h}):f._map.resetNorth({},{originalEvent:h})}),this._compassIcon=Ve.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};io.prototype._updateZoomButtons=function(){var d=this._map.getZoom(),f=d===this._map.getMaxZoom(),h=d===this._map.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())},io.prototype._rotateCompassArrow=function(){var d=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=d},io.prototype.onAdd=function(d){return this._map=d,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new qi(this._map,this._compass,this.options.visualizePitch)),this._container},io.prototype.onRemove=function(){Ve.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},io.prototype._createButton=function(d,f){var h=Ve.create("button",d,this._container);return h.type="button",h.addEventListener("click",f),h},io.prototype._setButtonTitle=function(d,f){var h=this._map._getUIString("NavigationControl."+f);d.title=h,d.setAttribute("aria-label",h)};var qi=function(d,f,h){void 0===h&&(h=!1),this._clickTolerance=10,this.element=f,this.mouseRotate=new Wr({clickTolerance:d.dragRotate._mouseRotate._clickTolerance}),this.map=d,h&&(this.mousePitch=new qe({clickTolerance:d.dragRotate._mousePitch._clickTolerance})),v.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),Ve.addEventListener(f,"mousedown",this.mousedown),Ve.addEventListener(f,"touchstart",this.touchstart,{passive:!1}),Ve.addEventListener(f,"touchmove",this.touchmove),Ve.addEventListener(f,"touchend",this.touchend),Ve.addEventListener(f,"touchcancel",this.reset)};function os(d,f,h){if(d=new v.LngLat(d.lng,d.lat),f){var g=new v.LngLat(d.lng-360,d.lat),w=new v.LngLat(d.lng+360,d.lat),C=h.locationPoint(d).distSqr(f);h.locationPoint(g).distSqr(f)<C?d=g:h.locationPoint(w).distSqr(f)<C&&(d=w)}for(;Math.abs(d.lng-h.center.lng)>180;){var T=h.locationPoint(d);if(T.x>=0&&T.y>=0&&T.x<=h.width&&T.y<=h.height)break;d.lng>h.center.lng?d.lng-=360:d.lng+=360}return d}qi.prototype.down=function(d,f){this.mouseRotate.mousedown(d,f),this.mousePitch&&this.mousePitch.mousedown(d,f),Ve.disableDrag()},qi.prototype.move=function(d,f){var h=this.map,g=this.mouseRotate.mousemoveWindow(d,f);if(g&&g.bearingDelta&&h.setBearing(h.getBearing()+g.bearingDelta),this.mousePitch){var w=this.mousePitch.mousemoveWindow(d,f);w&&w.pitchDelta&&h.setPitch(h.getPitch()+w.pitchDelta)}},qi.prototype.off=function(){var d=this.element;Ve.removeEventListener(d,"mousedown",this.mousedown),Ve.removeEventListener(d,"touchstart",this.touchstart,{passive:!1}),Ve.removeEventListener(d,"touchmove",this.touchmove),Ve.removeEventListener(d,"touchend",this.touchend),Ve.removeEventListener(d,"touchcancel",this.reset),this.offTemp()},qi.prototype.offTemp=function(){Ve.enableDrag(),Ve.removeEventListener(v.window,"mousemove",this.mousemove),Ve.removeEventListener(v.window,"mouseup",this.mouseup)},qi.prototype.mousedown=function(d){this.down(v.extend({},d,{ctrlKey:!0,preventDefault:function(){return d.preventDefault()}}),Ve.mousePos(this.element,d)),Ve.addEventListener(v.window,"mousemove",this.mousemove),Ve.addEventListener(v.window,"mouseup",this.mouseup)},qi.prototype.mousemove=function(d){this.move(d,Ve.mousePos(this.element,d))},qi.prototype.mouseup=function(d){this.mouseRotate.mouseupWindow(d),this.mousePitch&&this.mousePitch.mouseupWindow(d),this.offTemp()},qi.prototype.touchstart=function(d){1!==d.targetTouches.length?this.reset():(this._startPos=this._lastPos=Ve.touchPos(this.element,d.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return d.preventDefault()}},this._startPos))},qi.prototype.touchmove=function(d){1!==d.targetTouches.length?this.reset():(this._lastPos=Ve.touchPos(this.element,d.targetTouches)[0],this.move({preventDefault:function(){return d.preventDefault()}},this._lastPos))},qi.prototype.touchend=function(d){0===d.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},qi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ss={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Jl(d,f,h){var g=d.classList;for(var w in ss)g.remove("maplibregl-"+h+"-anchor-"+w,"mapboxgl-"+h+"-anchor-"+w);g.add("maplibregl-"+h+"-anchor-"+f,"mapboxgl-"+h+"-anchor-"+f)}var Hd,As=function(d){function f(h,g){if(d.call(this),(h instanceof v.window.HTMLElement||g)&&(h=v.extend({element:h},g)),v.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=h&&h.anchor||"center",this._color=h&&h.color||"#3FB1CE",this._scale=h&&h.scale||1,this._draggable=h&&h.draggable||!1,this._clickTolerance=h&&h.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=h&&h.rotation||0,this._rotationAlignment=h&&h.rotationAlignment||"auto",this._pitchAlignment=h&&h.pitchAlignment&&"auto"!==h.pitchAlignment?h.pitchAlignment:this._rotationAlignment,h&&h.element)this._element=h.element,this._offset=v.Point.convert(h&&h.offset||[0,0]);else{this._defaultMarker=!0,this._element=Ve.create("div"),this._element.setAttribute("aria-label","Map marker");var w=Ve.createNS("http://www.w3.org/2000/svg","svg");w.setAttributeNS(null,"display","block"),w.setAttributeNS(null,"height","41px"),w.setAttributeNS(null,"width","27px"),w.setAttributeNS(null,"viewBox","0 0 27 41");var C=Ve.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"stroke","none"),C.setAttributeNS(null,"stroke-width","1"),C.setAttributeNS(null,"fill","none"),C.setAttributeNS(null,"fill-rule","evenodd");var T=Ve.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");var I=Ve.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");for(var M=0,L=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];M<L.length;M+=1){var $=L[M],q=Ve.createNS("http://www.w3.org/2000/svg","ellipse");q.setAttributeNS(null,"opacity","0.04"),q.setAttributeNS(null,"cx","10.5"),q.setAttributeNS(null,"cy","5.80029008"),q.setAttributeNS(null,"rx",$.rx),q.setAttributeNS(null,"ry",$.ry),I.appendChild(q)}var j=Ve.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill",this._color);var ne=Ve.createNS("http://www.w3.org/2000/svg","path");ne.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),j.appendChild(ne);var J=Ve.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"opacity","0.25"),J.setAttributeNS(null,"fill","#000000");var ae=Ve.createNS("http://www.w3.org/2000/svg","path");ae.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),J.appendChild(ae);var ee=Ve.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");var ie=Ve.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");var pe=Ve.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#000000"),pe.setAttributeNS(null,"opacity","0.25"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962");var ve=Ve.createNS("http://www.w3.org/2000/svg","circle");ve.setAttributeNS(null,"fill","#FFFFFF"),ve.setAttributeNS(null,"cx","5.5"),ve.setAttributeNS(null,"cy","5.5"),ve.setAttributeNS(null,"r","5.4999962"),ie.appendChild(pe),ie.appendChild(ve),T.appendChild(I),T.appendChild(j),T.appendChild(J),T.appendChild(ee),T.appendChild(ie),w.appendChild(T),w.setAttributeNS(null,"height",41*this._scale+"px"),w.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(w),this._offset=v.Point.convert(h&&h.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",function(ke){ke.preventDefault()}),this._element.addEventListener("mousedown",function(ke){ke.preventDefault()}),Jl(this._element,this._anchor,"marker"),this._popup=null}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.addTo=function(h){return this.remove(),this._map=h,h.getCanvasContainer().appendChild(this._element),h.on("move",this._update),h.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},f.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Ve.remove(this._element),this._popup&&this._popup.remove(),this},f.prototype.getLngLat=function(){return this._lngLat},f.prototype.setLngLat=function(h){return this._lngLat=v.LngLat.convert(h),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},f.prototype.getElement=function(){return this._element},f.prototype.setPopup=function(h){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),h){if(!("offset"in h.options)){var g=Math.sqrt(Math.pow(13.5,2)/2);h.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(24.6+g)],"bottom-right":[-g,-1*(24.6+g)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=h,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},f.prototype._onKeyPress=function(h){var g=h.code,w=h.charCode||h.keyCode;"Space"!==g&&"Enter"!==g&&32!==w&&13!==w||this.togglePopup()},f.prototype._onMapClick=function(h){var g=h.originalEvent.target,w=this._element;this._popup&&(g===w||w.contains(g))&&this.togglePopup()},f.prototype.getPopup=function(){return this._popup},f.prototype.togglePopup=function(){var h=this._popup;return h?(h.isOpen()?h.remove():h.addTo(this._map),this):this},f.prototype._update=function(h){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=os(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var g="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?g="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(g="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var w="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?w="rotateX(0deg)":"map"===this._pitchAlignment&&(w="rotateX("+this._map.getPitch()+"deg)"),h&&"moveend"!==h.type||(this._pos=this._pos.round()),Ve.setTransform(this._element,ss[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+w+" "+g)}},f.prototype.getOffset=function(){return this._offset},f.prototype.setOffset=function(h){return this._offset=v.Point.convert(h),this._update(),this},f.prototype._onMove=function(h){if(!this._isDragging){var g=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new v.Event("dragstart"))),this.fire(new v.Event("drag")))},f.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new v.Event("dragend")),this._state="inactive"},f.prototype._addDragHandler=function(h){this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},f.prototype.setDraggable=function(h){return this._draggable=!!h,this._map&&(h?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},f.prototype.isDraggable=function(){return this._draggable},f.prototype.setRotation=function(h){return this._rotation=h||0,this._update(),this},f.prototype.getRotation=function(){return this._rotation},f.prototype.setRotationAlignment=function(h){return this._rotationAlignment=h||"auto",this._update(),this},f.prototype.getRotationAlignment=function(){return this._rotationAlignment},f.prototype.setPitchAlignment=function(h){return this._pitchAlignment=h&&"auto"!==h?h:this._rotationAlignment,this._update(),this},f.prototype.getPitchAlignment=function(){return this._pitchAlignment},f}(v.Evented),pf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},mf=0,ec=!1,Uu=function(d){function f(h){d.call(this),this.options=v.extend({},pf,h),v.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.onAdd=function(h){var g;return this._map=h,this._container=Ve.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),g=this._setupUI,void 0!==Hd?g(Hd):void 0!==v.window.navigator.permissions?v.window.navigator.permissions.query({name:"geolocation"}).then(function(w){g(Hd="denied"!==w.state)}):g(Hd=!!v.window.navigator.geolocation),this._container},f.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(v.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Ve.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,mf=0,ec=!1},f.prototype._isOutOfMapMaxBounds=function(h){var g=this._map.getMaxBounds(),w=h.coords;return g&&(w.longitude<g.getWest()||w.longitude>g.getEast()||w.latitude<g.getSouth()||w.latitude>g.getNorth())},f.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}},f.prototype._onSuccess=function(h){if(this._map){if(this._isOutOfMapMaxBounds(h))return this._setErrorState(),this.fire(new v.Event("outofmaxbounds",h)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=h,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(h),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(h),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new v.Event("geolocate",h)),this._finish()}},f.prototype._updateCamera=function(h){var g=new v.LngLat(h.coords.longitude,h.coords.latitude),w=h.coords.accuracy,C=this._map.getBearing(),T=v.extend({bearing:C},this.options.fitBoundsOptions);this._map.fitBounds(g.toBounds(w),T,{geolocateSource:!0})},f.prototype._updateMarker=function(h){if(h){var g=new v.LngLat(h.coords.longitude,h.coords.latitude);this._accuracyCircleMarker.setLngLat(g).addTo(this._map),this._userLocationDotMarker.setLngLat(g).addTo(this._map),this._accuracy=h.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},f.prototype._updateCircleRadius=function(){var h=this._map._container.clientHeight/2,g=this._map.unproject([0,h]),w=this._map.unproject([1,h]),C=g.distanceTo(w),T=Math.ceil(2*this._accuracy/C);this._circleElement.style.width=T+"px",this._circleElement.style.height=T+"px"},f.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},f.prototype._onError=function(h){if(this._map){if(this.options.trackUserLocation)if(1===h.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var g=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===h.code&&ec)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new v.Event("error",h)),this._finish()}},f.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},f.prototype._setupUI=function(h){var g=this;if(this._container.addEventListener("contextmenu",function(T){return T.preventDefault()}),this._geolocateButton=Ve.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),Ve.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===h){v.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var w=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w)}else{var C=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=C,this._geolocateButton.setAttribute("aria-label",C)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Ve.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new As(this._dotElement),this._circleElement=Ve.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new As({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(T){T.geolocateSource||"ACTIVE_LOCK"!==g._watchState||T.originalEvent&&"resize"===T.originalEvent.type||(g._watchState="BACKGROUND",g._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),g._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),g.fire(new v.Event("trackuserlocationend")))})},f.prototype.trigger=function(){if(!this._setup)return v.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new v.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":mf--,ec=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new v.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new v.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var h;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++mf>1?(h={maximumAge:6e5,timeout:0},ec=!0):(h=this.options.positionOptions,ec=!1),this._geolocationWatchID=v.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,h)}}else v.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},f.prototype._clearWatch=function(){v.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},f}(v.Evented),Og={maxWidth:100,unit:"metric"},Hs=function(d){this.options=v.extend({},Og,d),v.bindAll(["_onMove","setUnit"],this)};function Bp(d,f,h){var g=h&&h.maxWidth||100,w=d._container.clientHeight/2,C=d.unproject([0,w]),T=d.unproject([g,w]),I=C.distanceTo(T);if(h&&"imperial"===h.unit){var M=3.2808*I;M>5280?ju(f,g,M/5280,d._getUIString("ScaleControl.Miles")):ju(f,g,M,d._getUIString("ScaleControl.Feet"))}else h&&"nautical"===h.unit?ju(f,g,I/1852,d._getUIString("ScaleControl.NauticalMiles")):I>=1e3?ju(f,g,I/1e3,d._getUIString("ScaleControl.Kilometers")):ju(f,g,I,d._getUIString("ScaleControl.Meters"))}function ju(d,f,h,g){var w,C,T,M,L,I=(w=h,(C=Math.pow(10,(""+Math.floor(w)).length-1))*(T=(T=w/C)>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:(M=T,L=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10)),Math.round(M*L)/L)));d.style.width=f*(I/h)+"px",d.innerHTML=I+"&nbsp;"+g}Hs.prototype.getDefaultPosition=function(){return"bottom-left"},Hs.prototype._onMove=function(){Bp(this._map,this._container,this.options)},Hs.prototype.onAdd=function(d){return this._map=d,this._container=Ve.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",d.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Hs.prototype.onRemove=function(){Ve.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Hs.prototype.setUnit=function(d){this.options.unit=d,Bp(this._map,this._container,this.options)};var $s=function(d){this._fullscreen=!1,d&&d.container&&(d.container instanceof v.window.HTMLElement?this._container=d.container:v.warnOnce("Full screen control 'container' must be a DOM element.")),v.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in v.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in v.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in v.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in v.window.document&&(this._fullscreenchange="MSFullscreenChange")};$s.prototype.onAdd=function(d){return this._map=d,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ve.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",v.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},$s.prototype.onRemove=function(){Ve.remove(this._controlContainer),this._map=null,v.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},$s.prototype._checkFullscreenSupport=function(){return!!(v.window.document.fullscreenEnabled||v.window.document.mozFullScreenEnabled||v.window.document.msFullscreenEnabled||v.window.document.webkitFullscreenEnabled)},$s.prototype._setupUI=function(){var d=this._fullscreenButton=Ve.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);Ve.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",d).setAttribute("aria-hidden",!0),d.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),v.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},$s.prototype._updateTitle=function(){var d=this._getTitle();this._fullscreenButton.setAttribute("aria-label",d),this._fullscreenButton.title=d},$s.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},$s.prototype._isFullscreen=function(){return this._fullscreen},$s.prototype._changeIcon=function(){(v.window.document.fullscreenElement||v.window.document.mozFullScreenElement||v.window.document.webkitFullscreenElement||v.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},$s.prototype._onClickFullscreen=function(){this._isFullscreen()?v.window.document.exitFullscreen?v.window.document.exitFullscreen():v.window.document.mozCancelFullScreen?v.window.document.mozCancelFullScreen():v.window.document.msExitFullscreen?v.window.document.msExitFullscreen():v.window.document.webkitCancelFullScreen&&v.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ng={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Vp=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),gf=function(d){function f(h){d.call(this),this.options=v.extend(Object.create(Ng),h),v.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return d&&(f.__proto__=d),(f.prototype=Object.create(d&&d.prototype)).constructor=f,f.prototype.addTo=function(h){return this._map&&this.remove(),this._map=h,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new v.Event("open")),this},f.prototype.isOpen=function(){return!!this._map},f.prototype.remove=function(){return this._content&&Ve.remove(this._content),this._container&&(Ve.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new v.Event("close")),this},f.prototype.getLngLat=function(){return this._lngLat},f.prototype.setLngLat=function(h){return this._lngLat=v.LngLat.convert(h),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this},f.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this},f.prototype.getElement=function(){return this._container},f.prototype.setText=function(h){return this.setDOMContent(v.window.document.createTextNode(h))},f.prototype.setHTML=function(h){var g,w=v.window.document.createDocumentFragment(),C=v.window.document.createElement("body");for(C.innerHTML=h;g=C.firstChild;)w.appendChild(g);return this.setDOMContent(w)},f.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},f.prototype.setMaxWidth=function(h){return this.options.maxWidth=h,this._update(),this},f.prototype.setDOMContent=function(h){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Ve.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(h),this._createCloseButton(),this._update(),this._focusFirstElement(),this},f.prototype.addClassName=function(h){this._container&&this._container.classList.add(h)},f.prototype.removeClassName=function(h){this._container&&this._container.classList.remove(h)},f.prototype.setOffset=function(h){return this.options.offset=h,this._update(),this},f.prototype.toggleClassName=function(h){if(this._container)return this._container.classList.toggle(h)},f.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=Ve.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},f.prototype._onMouseUp=function(h){this._update(h.point)},f.prototype._onMouseMove=function(h){this._update(h.point)},f.prototype._onDrag=function(h){this._update(h.point)},f.prototype._update=function(h){var g=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=Ve.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=Ve.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(q){return g._container.classList.add(q)}),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=os(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||h)){var w=this._pos=this._trackPointer&&h?h:this._map.project(this._lngLat),C=this.options.anchor,T=function q(j){if(j){if("number"==typeof j){var ne=Math.round(Math.sqrt(.5*Math.pow(j,2)));return{center:new v.Point(0,0),top:new v.Point(0,j),"top-left":new v.Point(ne,ne),"top-right":new v.Point(-ne,ne),bottom:new v.Point(0,-j),"bottom-left":new v.Point(ne,-ne),"bottom-right":new v.Point(-ne,-ne),left:new v.Point(j,0),right:new v.Point(-j,0)}}if(j instanceof v.Point||Array.isArray(j)){var J=v.Point.convert(j);return{center:J,top:J,"top-left":J,"top-right":J,bottom:J,"bottom-left":J,"bottom-right":J,left:J,right:J}}return{center:v.Point.convert(j.center||[0,0]),top:v.Point.convert(j.top||[0,0]),"top-left":v.Point.convert(j["top-left"]||[0,0]),"top-right":v.Point.convert(j["top-right"]||[0,0]),bottom:v.Point.convert(j.bottom||[0,0]),"bottom-left":v.Point.convert(j["bottom-left"]||[0,0]),"bottom-right":v.Point.convert(j["bottom-right"]||[0,0]),left:v.Point.convert(j.left||[0,0]),right:v.Point.convert(j.right||[0,0])}}return q(new v.Point(0,0))}(this.options.offset);if(!C){var I,M=this._container.offsetWidth,L=this._container.offsetHeight;I=w.y+T.bottom.y<L?["top"]:w.y>this._map.transform.height-L?["bottom"]:[],w.x<M/2?I.push("left"):w.x>this._map.transform.width-M/2&&I.push("right"),C=0===I.length?"bottom":I.join("-")}var $=w.add(T[C]).round();Ve.setTransform(this._container,ss[C]+" translate("+$.x+"px,"+$.y+"px)"),Jl(this._container,C,"popup")}},f.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var h=this._container.querySelector(Vp);h&&h.focus()}},f.prototype._onClose=function(){this.remove()},f}(v.Evented),zp={version:v.version,supported:jo,setRTLTextPlugin:v.setRTLTextPlugin,getRTLTextPluginStatus:v.getRTLTextPluginStatus,Map:wn,NavigationControl:io,GeolocateControl:Uu,AttributionControl:di,ScaleControl:Hs,FullscreenControl:$s,Popup:gf,Marker:As,Style:Gl,LngLat:v.LngLat,LngLatBounds:v.LngLatBounds,Point:v.Point,MercatorCoordinate:v.MercatorCoordinate,Evented:v.Evented,config:v.config,prewarm:function(){gt().acquire(Ce)},clearPrewarmedResources:function(){var d=st;d&&(d.isPreloaded()&&1===d.numActive()?(d.release(Ce),st=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return v.config.ACCESS_TOKEN},set accessToken(d){v.config.ACCESS_TOKEN=d},get baseApiUrl(){return v.config.API_URL},set baseApiUrl(d){v.config.API_URL=d},get workerCount(){return je.workerCount},set workerCount(d){je.workerCount=d},get maxParallelImageRequests(){return v.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(d){v.config.MAX_PARALLEL_IMAGE_REQUESTS=d},clearStorage:function(d){v.clearTileCache(d)},workerUrl:"",addProtocol:function(d,f){v.config.REGISTERED_PROTOCOLS[d]=f},removeProtocol:function(d){delete v.config.REGISTERED_PROTOCOLS[d]}};return zp}),Xi}()},680(Wy,$h,Sd){"use strict";let Xi=null,Id=!1,v=1;const Ve=Symbol("SIGNAL");function vt(e){const n=Xi;return Xi=e,n}const Ol={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Co(e){if(Id)throw new Error("");if(null===Xi)return;Xi.consumerOnSignalRead(e);const n=Xi.producersTail;if(void 0!==n&&n.producer===e)return;let t;const r=Xi.recomputing;if(r&&(t=void 0!==n?n.nextProducer:Xi.producers,void 0!==t&&t.producer===e))return Xi.producersTail=t,void(t.lastReadVersion=e.version);const i=e.consumersTail;if(void 0!==i&&i.consumer===Xi&&(!r||function ws(e,n){const t=n.producersTail;if(void 0!==t){let r=n.producers;do{if(r===e)return!0;if(r===t)break;r=r.nextProducer}while(void 0!==r)}return!1}(i,Xi)))return;const o=ur(Xi),a={producer:e,consumer:Xi,nextProducer:t,prevConsumer:i,lastReadVersion:e.version,nextConsumer:void 0};Xi.producersTail=a,void 0!==n?n.nextProducer=a:Xi.producers=a,o&&Fs(e,a)}function Qi(e){if((!ur(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==v)){if(!e.producerMustRecompute(e)&&!Ni(e))return void tl(e);e.producerRecomputeValue(e),tl(e)}}function wu(e){if(void 0===e.consumers)return;const n=Id;Id=!0;try{for(let t=e.consumers;void 0!==t;t=t.nextConsumer){const r=t.consumer;r.dirty||qh(r)}}finally{Id=n}}function Oi(){return!1!==Xi?.consumerAllowSignalWrites}function qh(e){e.dirty=!0,wu(e),e.consumerMarkedDirty?.(e)}function tl(e){e.dirty=!1,e.lastCleanEpoch=v}function Xo(e){return e&&function xu(e){e.producersTail=void 0,e.recomputing=!0}(e),vt(e)}function va(e,n){vt(n),e&&function Ac(e){e.recomputing=!1;const n=e.producersTail;let t=void 0!==n?n.nextProducer:e.producers;if(void 0!==t){if(ur(e))do{t=Nl(t)}while(void 0!==t);void 0!==n?n.nextProducer=void 0:e.producers=void 0}}(e)}function Ni(e){for(let n=e.producers;void 0!==n;n=n.nextProducer){const t=n.producer,r=n.lastReadVersion;if(r!==t.version||(Qi(t),r!==t.version))return!0}return!1}function bs(e){if(ur(e)){let n=e.producers;for(;void 0!==n;)n=Nl(n)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function Fs(e,n){const t=e.consumersTail,r=ur(e);if(void 0!==t?(n.nextConsumer=t.nextConsumer,t.nextConsumer=n):(n.nextConsumer=void 0,e.consumers=n),n.prevConsumer=t,e.consumersTail=n,!r)for(let i=e.producers;void 0!==i;i=i.nextProducer)Fs(i.producer,i)}function Nl(e){const n=e.producer,t=e.nextProducer,r=e.nextConsumer,i=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,void 0!==r?r.prevConsumer=i:n.consumersTail=i,void 0!==i)i.nextConsumer=r;else if(n.consumers=r,!ur(n)){let o=n.producers;for(;void 0!==o;)o=Nl(o)}return t}function ur(e){return e.consumerIsAlwaysLive||void 0!==e.consumers}function Ll(e,n){return Object.is(e,n)}const ba=Symbol("UNSET"),xs=Symbol("COMPUTING"),Ji=Symbol("ERRORED"),wa={...Ol,value:ba,dirty:!0,error:null,equal:Ll,kind:"computed",producerMustRecompute:e=>e.value===ba||e.value===xs,producerRecomputeValue(e){if(e.value===xs)throw new Error("");const n=e.value;e.value=xs;const t=Xo(e);let r,i=!1;try{r=e.computation(),vt(null),i=n!==ba&&n!==Ji&&r!==Ji&&e.equal(n,r)}catch(o){r=Ji,e.error=o}finally{va(e,t)}i?e.value=n:(e.value=r,e.version++)}};let Fl=function Rc(){throw new Error};function nl(e){Fl(e)}function rl(e,n){const t=Object.create(Ea);t.value=e,void 0!==n&&(t.equal=n);const r=()=>function xa(e){return Co(e),e.value}(t);return r[Ve]=t,[r,a=>il(t,a),a=>function Bs(e,n){Oi()||nl(e),il(e,n(e.value))}(t,a)]}function il(e,n){Oi()||nl(e),e.equal(e.value,n)||(e.value=n,function To(e){e.version++,function kc(){v++}(),wu(e)}(e))}const Ea={...Ol,equal:Ll,value:void 0,kind:"signal"},Ip={...Ol,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"};function dr(e){return"function"==typeof e}function Qo(e){const t=e(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const ol=Qo(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function sl(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class Gn{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(dr(r))try{r()}catch(o){n=o instanceof ol?o.errors:[o]}const{_teardowns:i}=this;if(i){this._teardowns=null;for(const o of i)try{zs(o)}catch(a){n=n??[],a instanceof ol?n=[...n,...a.errors]:n.push(a)}}if(n)throw new ol(n)}}add(n){var t;if(n&&n!==this)if(this.closed)zs(n);else{if(n instanceof Gn){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._teardowns=null!==(t=this._teardowns)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&sl(t,n)}remove(n){const{_teardowns:t}=this;t&&sl(t,n),n instanceof Gn&&n._removeParent(this)}}Gn.EMPTY=(()=>{const e=new Gn;return e.closed=!0,e})();const Es=Gn.EMPTY;function Bl(e){return e instanceof Gn||e&&"closed"in e&&dr(e.remove)&&dr(e.add)&&dr(e.unsubscribe)}function zs(e){dr(e)?e():e.unsubscribe()}const Ca={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Mc={setTimeout(...e){const{delegate:n}=Mc;return(n?.setTimeout||setTimeout)(...e)},clearTimeout(e){const{delegate:n}=Mc;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Cu(e){Mc.setTimeout(()=>{const{onUnhandledError:n}=Ca;if(!n)throw e;n(e)})}function Da(){}const Du=Pc("C",void 0,void 0);function Pc(e,n,t){return{kind:e,value:n,error:t}}let Cs=null;function Vl(e){if(Ca.useDeprecatedSynchronousErrorHandling){const n=!Cs;if(n&&(Cs={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:r}=Cs;if(Cs=null,t)throw r}}else e()}class Su extends Gn{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Bl(n)&&n.add(this)):this.destination=Oc}static create(n,t,r){return new Ad(n,t,r)}next(n){this.isStopped?Ta(function Tu(e){return Pc("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?Ta(function Gh(e){return Pc("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Ta(Du,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Ad extends Su{constructor(n,t,r){let i;if(super(),dr(n))i=n;else if(n){let o;({next:i,error:t,complete:r}=n),this&&Ca.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe()):o=n,i=i?.bind(o),t=t?.bind(o),r=r?.bind(o)}this.destination={next:i?al(i):Da,error:al(t??zl),complete:r?al(r):Da}}}function al(e,n){return(...t)=>{try{e(...t)}catch(r){Ca.useDeprecatedSynchronousErrorHandling?function kd(e){Ca.useDeprecatedSynchronousErrorHandling&&Cs&&(Cs.errorThrown=!0,Cs.error=e)}(r):Cu(r)}}}function zl(e){throw e}function Ta(e,n){const{onStoppedNotification:t}=Ca;t&&Mc.setTimeout(()=>t(e,n))}const Oc={closed:!0,next:Da,error:zl,complete:Da},Ul="function"==typeof Symbol&&Symbol.observable||"@@observable";function er(e){return e}function z(e){return 0===e.length?er:1===e.length?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}let U=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function de(e){return e&&e instanceof Su||function te(e){return e&&dr(e.next)&&dr(e.error)&&dr(e.complete)}(e)&&Bl(e)}(t)?t:new Ad(t,r,i);return Vl(()=>{const{operator:a,source:c}=this;o.add(a?a.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=G(r))((i,o)=>{let a;a=this.subscribe(c=>{try{t(c)}catch(p){o(p),a?.unsubscribe()}},o,i)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Ul](){return this}pipe(...t){return z(t)(this)}toPromise(t){return new(t=G(t))((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return e.create=n=>new e(n),e})();function G(e){var n;return null!==(n=e??Ca.Promise)&&void 0!==n?n:Promise}const me=Qo(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ze,K=(()=>{class e extends U{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new W(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new me}next(t){Vl(()=>{if(this._throwIfClosed(),!this.isStopped){const r=this.observers.slice();for(const i of r)i.next(t)}})}error(t){Vl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Vl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?Es:(o.push(t),new Gn(()=>sl(o,t)))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new U;return t.source=this,t}}return e.create=(n,t)=>new W(n,t),e})();class W extends K{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,n)}error(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==r?r:Es}}class re extends K{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}function Ke(){return ze}function Ce(e){const n=ze;return ze=e,n}const st=Symbol("NotFound");function gt(e){return e===st||"\u0275NotFound"===e?.name}Error;const Kt="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class se extends Error{code;constructor(n,t){super(Lt(n,t)),this.code=n}}function Lt(e,n){return`${function ar(e){return`NG0${Math.abs(e)}`}(e)}${n?": "+n:""}`}const tn=globalThis;function dt(e){for(let n in e)if(e[n]===dt)return n;throw Error("")}function Rr(e,n){for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function bn(e){if("string"==typeof e)return e;if(Array.isArray(e))return`[${e.map(bn).join(", ")}]`;if(null==e)return""+e;const n=e.overriddenName||e.name;if(n)return`${n}`;const t=e.toString();if(null==t)return""+t;const r=t.indexOf("\n");return r>=0?t.slice(0,r):t}function dn(e,n){return e?n?`${e} ${n}`:e:n||""}const vn=dt({__forward_ref__:dt});function Wn(e){return e.__forward_ref__=Wn,e.toString=function(){return bn(this())},e}function fn(e){return ei(e)?e():e}function ei(e){return"function"==typeof e&&e.hasOwnProperty(vn)&&e.__forward_ref__===Wn}function Ue(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Lr(e){return{providers:e.providers||[],imports:e.imports||[]}}function Wh(e){return function Ky(e,n){return e.hasOwnProperty(n)&&e[n]||null}(e,Fc)}function Lc(e){return e&&e.hasOwnProperty(Bc)?e[Bc]:null}const Fc=dt({\u0275prov:dt}),Bc=dt({\u0275inj:dt});class Le{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(n,t){this._desc=n,this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ue({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Md(e){return e&&!!e.\u0275providers}const Kh=dt({\u0275cmp:dt}),Mp=dt({\u0275dir:dt}),Pp=dt({\u0275pipe:dt}),Op=dt({\u0275mod:dt}),Wl=dt({\u0275fac:dt}),Pd=dt({__NG_ELEMENT_ID__:dt}),Au=dt({__NG_ENV_ID__:dt});function ts(e){return Ia(e),e[Op]||null}function nn(e){return Ia(e),e[Kh]||null}function ti(e){return Ia(e),e[Mp]||null}function no(e){return Ia(e),e[Pp]||null}function Ia(e,n){if(null==e)throw new se(-919,!1)}function Yt(e){return"string"==typeof e?e:null==e?"":String(e)}const Xh=dt({ngErrorCode:dt}),pr=dt({ngErrorMessage:dt}),ka=dt({ngTokenPath:dt});function Mu(e,n){return ll("",-200,n)}function Qh(e,n){throw new se(-201,!1)}function ll(e,n,t){const r=new se(n,e);return r[Xh]=n,r[pr]=e,t&&(r[ka]=t),r}let Jh;function ef(){return Jh}function xi(e){const n=Jh;return Jh=e,n}function tf(e,n,t){const r=Wh(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:8&t?null:void 0!==n?n:void Qh()}const Aa={};class hr{injector;constructor(n){this.injector=n}retrieve(n,t){const r=Ld(t)||0;try{return this.injector.get(n,8&r?null:Aa,r)}catch(i){if(gt(i))return i;throw i}}}function nf(e,n=0){const t=Ke();if(void 0===t)throw new se(-203,!1);if(null===t)return tf(e,void 0,n);{const r=function Fd(e){return{optional:!!(8&e),host:!!(1&e),self:!!(2&e),skipSelf:!!(4&e)}}(n),i=t.retrieve(e,r);if(gt(i)){if(r.optional)return null;throw i}return i}}function wt(e,n=0){return(ef()||nf)(fn(e),n)}function Z(e,n){return wt(e,Ld(n))}function Ld(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function rf(e){const n=[];for(let t=0;t<e.length;t++){const r=fn(e[t]);if(Array.isArray(r)){if(0===r.length)throw new se(900,!1);let i,o=0;for(let a=0;a<r.length;a++){const c=r[a],p=sf(c);"number"==typeof p?-1===p?i=c.token:o|=p:i=c}n.push(wt(i,o))}else n.push(wt(r))}return n}function sf(e){return e.__NG_DI_FLAG__}function Ma(e,n){return e.hasOwnProperty(Wl)?e[Wl]:null}function Yl(e,n){e.forEach(t=>Array.isArray(t)?Yl(t,n):n(t))}function Nu(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function ns(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Pa(e,n,t){let r=cl(e,n);return r>=0?e[1|r]=t:(r=~r,function af(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(1===i)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;)e[i]=e[i-2],i--;e[n]=t,e[n+1]=r}}(e,r,n,t)),r}function zc(e,n){const t=cl(e,n);if(t>=0)return e[1|t]}function cl(e,n){return function ev(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){const o=r+(i-r>>1),a=e[o<<t];if(n===a)return o<<t;a>n?i=o:r=o+1}return~(i<<t)}(e,n,1)}const Ss={},Tr=[],js=new Le(""),lf=new Le("",-1),cf=new Le("");class zd{get(n,t=Aa){if(t===Aa){const i=ll("",-201);throw i.name="\u0275NotFound",i}return t}}function Oa(e){return{\u0275providers:e}}function df(...e){return{\u0275providers:Uc(0,e),\u0275fromNgModule:!0}}function Uc(e,...n){const t=[],r=new Set;let i;const o=a=>{t.push(a)};return Yl(n,a=>{const c=a;Lu(c,o,[],r)&&(i||=[],i.push(c))}),void 0!==i&&Lp(i,o),t}function Lp(e,n){for(let t=0;t<e.length;t++){const{ngModule:r,providers:i}=e[t];Fu(i,o=>{n(o,r)})}}function Lu(e,n,t,r){if(!(e=fn(e)))return!1;let i=null,o=Lc(e);const a=!o&&nn(e);if(o||a){if(a&&!a.standalone)return!1;i=e}else{const p=e.ngModule;if(o=Lc(p),!o)return!1;i=p}const c=r.has(i);if(a){if(c)return!1;if(r.add(i),a.dependencies){const p="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const _ of p)Lu(_,n,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!c){let _;r.add(i),Yl(o.imports,x=>{Lu(x,n,t,r)&&(_||=[],_.push(x))}),void 0!==_&&Lp(_,n)}if(!c){const _=Ma(i)||(()=>new i);n({provide:i,useFactory:_,deps:Tr},i),n({provide:cf,useValue:i,multi:!0},i),n({provide:js,useValue:()=>wt(i),multi:!0},i)}const p=o.providers;if(null!=p&&!c){const _=e;Fu(p,x=>{n(x,_)})}}}return i!==e&&void 0!==e.providers}function Fu(e,n){for(let t of e)Md(t)&&(t=t.\u0275providers),Array.isArray(t)?Fu(t,n):n(t)}const jc=dt({provide:String,useValue:dt});function Na(e){return null!==e&&"object"==typeof e&&jc in e}function Ho(e){return"function"==typeof e}const hf=new Le(""),ul={},Bu={};let Fp;function Xl(){return void 0===Fp&&(Fp=new zd),Fp}class Fr{}class na extends Fr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Io(n,a=>this.processProvider(a)),this.records.set(lf,rt(void 0,this)),i.has("environment")&&this.records.set(Fr,rt(void 0,this));const o=this.records.get(hf);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(cf,Tr,{self:!0}))}retrieve(n,t){const r=Ld(t)||0;try{return this.get(n,Aa,r)}catch(i){if(gt(i))return i;throw i}}destroy(){ro(this),this._destroyed=!0;const n=vt(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),vt(n)}}onDestroy(n){return ro(this),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){ro(this);const t=Ce(this),r=xi(void 0);try{return n()}finally{Ce(t),xi(r)}}get(n,t=Aa,r){if(ro(this),n.hasOwnProperty(Au))return n[Au](this);const i=Ld(r),a=Ce(this),c=xi(void 0);try{if(!(4&i)){let _=this.records.get(n);if(void 0===_){const x=function Ql(e){return"function"==typeof e||"object"==typeof e&&"InjectionToken"===e.ngMetadataName}(n)&&Wh(n);_=x&&this.injectableDefInScope(x)?rt(Bi(n),ul):null,this.records.set(n,_)}if(null!=_)return this.hydrate(n,_,i)}return(2&i?Xl():this.parent).get(n,t=8&i&&t===Aa?null:t)}catch(p){const _=function Pu(e){return e[Xh]}(p);throw-200===_||-201===_?new se(_,null):p}finally{xi(c),Ce(a)}}resolveInjectorInitializers(){const n=vt(null),t=Ce(this),r=xi(void 0);try{const o=this.get(js,Tr,{self:!0});for(const a of o)a()}finally{Ce(t),xi(r),vt(n)}}toString(){const n=[],t=this.records;for(const r of t.keys())n.push(bn(r));return`R3Injector[${n.join(", ")}]`}processProvider(n){let t=Ho(n=fn(n))?n:fn(n&&n.provide);const r=function Pg(e){return Na(e)?rt(void 0,e.useValue):rt(Ei(e),ul)}(n);if(!Ho(n)&&!0===n.multi){let i=this.records.get(t);i||(i=rt(void 0,ul,!0),i.factory=()=>rf(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t,r){const i=vt(null);try{if(t.value===Bu)throw Mu(bn(n));return t.value===ul&&(t.value=Bu,t.value=t.factory(void 0,r)),"object"==typeof t.value&&t.value&&function Vu(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{vt(i)}}injectableDefInScope(n){if(!n.providedIn)return!1;const t=fn(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){const t=this._onDestroyHooks.indexOf(n);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Bi(e){const n=Wh(e),t=null!==n?n.factory:Ma(e);if(null!==t)return t;if(e instanceof Le)throw new se(204,!1);if(e instanceof Function)return function Is(e){if(e.length>0)throw new se(204,!1);const t=function Ap(e){return(e?.[Fc]??null)||null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new se(204,!1)}function Ei(e,n,t){let r;if(Ho(e)){const i=fn(e);return Ma(i)||Bi(i)}if(Na(e))r=()=>fn(e.useValue);else if(function Dn(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...rf(e.deps||[]));else if(function Zn(e){return!(!e||!e.useExisting)}(e))r=(i,o)=>wt(fn(e.useExisting),void 0!==o&&8&o?8:void 0);else{const i=fn(e&&(e.useClass||e.provide));if(!function Ud(e){return!!e.deps}(e))return Ma(i)||Bi(i);r=()=>new i(...rf(e.deps))}return r}function ro(e){if(e.destroyed)throw new se(205,!1)}function rt(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function Io(e,n){for(const t of e)Array.isArray(t)?Io(t,n):t&&Md(t)?Io(t.\u0275providers,n):n(t)}function Vi(e,n){let t;e instanceof na?(ro(e),t=e):t=new hr(e);const i=Ce(t),o=xi(void 0);try{return n()}finally{Ce(i),xi(o)}}function wn(e){return Array.isArray(e)&&"object"==typeof e[1]}function mo(e){return Array.isArray(e)&&!0===e[1]}function zu(e){return!!(4&e.flags)}function io(e){return e.componentOffset>-1}function qi(e){return!(1&~e.flags)}function os(e){return!!e.template}function ss(e){return!!(512&e[2])}function As(e){return!(256&~e[2])}function L(e){for(;Array.isArray(e);)e=e[0];return e}function q(e,n){return L(n[e])}function j(e,n){return L(n[e.index])}function J(e,n){return e.data[n]}function ie(e,n){const t=n[e];return wn(t)?t:t[0]}function ve(e){return!(128&~e[2])}function Ee(e,n){return null==n?null:e[n]}function Ae(e){e[17]=0}function Ne(e){1024&e[2]||(e[2]|=1024,ve(e)&&_t(e))}function He(e){return!!(9216&e[2]||e[24]?.dirty)}function it(e){e[10].changeDetectionScheduler?.notify(8),64&e[2]&&(e[2]|=1024),He(e)&&_t(e)}function _t(e){e[10].changeDetectionScheduler?.notify(0);let n=hn(e);for(;null!==n&&!(8192&n[2])&&(n[2]|=8192,ve(n));)n=hn(n)}function xt(e,n){if(As(e))throw new se(911,!1);null===e[21]&&(e[21]=[]),e[21].push(n)}function hn(e){const n=e[3];return mo(n)?n[3]:n}function at(e){return e[7]??=[]}function qt(e){return e.cleanup??=[]}const Ye={lFrame:Mw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Ot=!1;function Br(){Ye.lFrame.elementDepthCount--}function oo(){return Ye.bindingsEnabled}function fi(){return null!==Ye.skipHydrationRootTNode}function pi(e){return Ye.skipHydrationRootTNode===e}function go(){Ye.skipHydrationRootTNode=null}function Me(){return Ye.lFrame.lView}function Ft(){return Ye.lFrame.tView}function Bt(e){return Ye.lFrame.contextLView=e,e[8]}function cn(e){return Ye.lFrame.contextLView=null,e}function Gt(){let e=Hc();for(;null!==e&&64===e.type;)e=e.parent;return e}function Hc(){return Ye.lFrame.currentTNode}function Rs(e,n){const t=Ye.lFrame;t.currentTNode=e,t.isParent=n}function $c(){return Ye.lFrame.isParent}function sa(){Ye.lFrame.isParent=!1}function nc(){return Ot}function Sr(e){const n=Ot;return Ot=e,n}function Nn(){const e=Ye.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function Mr(){return Ye.lFrame.bindingIndex}function Gi(){return Ye.lFrame.bindingIndex++}function hl(e){const n=Ye.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function Lg(e,n){const t=Ye.lFrame;t.bindingIndex=t.bindingRootIndex=e,Gc(n)}function Gc(e){Ye.lFrame.currentDirectiveIndex=e}function Up(){return Ye.lFrame.currentQueryIndex}function rc(e){Ye.lFrame.currentQueryIndex=e}function as(e){const n=e[1];return 2===n.type?n.declTNode:1===n.type?e[5]:null}function Aw(e,n,t){if(4&t){let i=n,o=e;for(;!(i=i.parent,null!==i||1&t||(i=as(o),null===i||(o=o[14],10&i.type))););if(null===i)return!1;n=i,e=o}const r=Ye.lFrame=Rw();return r.currentTNode=n,r.lView=e,!0}function Bg(e){const n=Rw(),t=e[1];Ye.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function Rw(){const e=Ye.lFrame,n=null===e?null:e.child;return null===n?Mw(e):n}function Mw(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function Pw(){const e=Ye.lFrame;return Ye.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Ow=Pw;function jp(){const e=Pw();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function so(){return Ye.lFrame.selectedIndex}function $u(e){Ye.lFrame.selectedIndex=e}function Ao(){const e=Ye.lFrame;return J(e.tView,e.selectedIndex)}function ls(){Ye.lFrame.currentNamespace="svg"}function Hp(){!function cT(){Ye.lFrame.currentNamespace=null}()}let Nw=!0;function Vg(){return Nw}function $p(e){Nw=e}function zg(e,n=null,t=null,r){const i=Lw(e,n,t,r);return i.resolveInjectorInitializers(),i}function Lw(e,n=null,t=null,r,i=new Set){const o=[t||Tr,df(e)];return r=r||("object"==typeof e?void 0:bn(e)),new na(o,n||Xl(),r||null,i)}class Tn{static THROW_IF_NOT_FOUND=Aa;static NULL=new zd;static create(n,t){if(Array.isArray(n))return zg({name:""},t,n,"");{const r=n.name??"";return zg({name:r},n.parent,n.providers,r)}}static \u0275prov=Ue({token:Tn,providedIn:"any",factory:()=>wt(lf)});static __NG_ELEMENT_ID__=-1}const Un=new Le("");let rr=(()=>class e{static __NG_ELEMENT_ID__=Fw;static __NG_ENV_ID__=t=>t})();class qp extends rr{_lView;constructor(n){super(),this._lView=n}get destroyed(){return As(this._lView)}onDestroy(n){const t=this._lView;return xt(t,n),()=>function bt(e,n){if(null===e[21])return;const t=e[21].indexOf(n);-1!==t&&e[21].splice(t,1)}(t,n)}}function Fw(){return new qp(Me())}const Gp=!1,Ug=new Le("");let Fa=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new re(!1);debugTaskTracker=Z(Ug,{optional:!0});get hasPendingTasks(){return!this.destroyed&&this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new U(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),this.debugTaskTracker?.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.debugTaskTracker?.remove(t),0===this.pendingTasks.size&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Ue({token:e,providedIn:"root",factory:()=>new e})}return e})();const jn=class Bw extends K{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(n=!1){super(),this.__isAsync=n,function ho(){return void 0!==ef()||null!=Ke()}()&&(this.destroyRef=Z(rr,{optional:!0})??void 0,this.pendingTasks=Z(Fa,{optional:!0})??void 0)}emit(n){const t=vt(null);try{super.next(n)}finally{vt(t)}}subscribe(n,t,r){let i=n,o=t||(()=>null),a=r;if(n&&"object"==typeof n){const p=n;i=p.next?.bind(p),o=p.error?.bind(p),a=p.complete?.bind(p)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),a&&(a=this.wrapInTimeout(a)));const c=super.subscribe({next:i,error:o,complete:a});return n instanceof Gn&&n.add(c),c}wrapInTimeout(n){return t=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{n(t)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function qu(...e){}function jg(e){let n,t;function r(){e=qu;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==n&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{e(),r()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{e(),r()})),()=>r()}function tv(e){return queueMicrotask(()=>e()),()=>{e=qu}}const Gd="isAngularZone",Hg=Gd+"_ID";let nv=0;class Jt{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new jn(!1);onMicrotaskEmpty=new jn(!1);onStable=new jn(!1);onError=new jn(!1);constructor(n){const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Gp}=n;if(typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();const a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!i&&r,a.shouldCoalesceRunChangeDetection=i,a.callbackScheduled=!1,a.scheduleInRootZone=o,function dT(e){const n=()=>{!function fl(e){function n(){jg(()=>{e.callbackScheduled=!1,iv(e),e.isCheckStableRunning=!0,Wp(e),e.isCheckStableRunning=!1})}e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,e.scheduleInRootZone?Zone.root.run(()=>{n()}):e._outer.run(()=>{n()}),iv(e))}(e)},t=nv++;e._inner=e._inner.fork({name:"angular",properties:{[Gd]:!0,[Hg]:t,[Hg+t]:!0},onInvokeTask:(r,i,o,a,c,p)=>{if(function yf(e){return jw(e,"__ignore_ng_zone__")}(p))return r.invokeTask(o,a,c,p);try{return Vw(e),r.invokeTask(o,a,c,p)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||e.shouldCoalesceRunChangeDetection)&&n(),zw(e)}},onInvoke:(r,i,o,a,c,p,_)=>{try{return Vw(e),r.invoke(o,a,c,p,_)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!function hT(e){return jw(e,"__scheduler_tick__")}(p)&&n(),zw(e)}},onHasTask:(r,i,o,a)=>{r.hasTask(o,a),i===o&&("microTask"==a.change?(e._hasPendingMicrotasks=a.microTask,iv(e),Wp(e)):"macroTask"==a.change&&(e.hasPendingMacrotasks=a.macroTask))},onHandleError:(r,i,o,a)=>(r.handleError(o,a),e.runOutsideAngular(()=>e.onError.emit(a)),!1)})}(a)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(Gd)}static assertInAngularZone(){if(!Jt.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(Jt.isInAngularZone())throw new se(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){const o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,n,rv,qu,qu);try{return o.runTask(a,t,r)}finally{o.cancelTask(a)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const rv={};function Wp(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function iv(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&!0===e.callbackScheduled)}function Vw(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function zw(e){e._nesting--,Wp(e)}class Uw{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new jn;onMicrotaskEmpty=new jn;onStable=new jn;onError=new jn;run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}}function jw(e,n){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0]?.data?.[n]}class vf{_console=console;handleError(n){this._console.error("ERROR",n)}}const pl=new Le("",{factory:()=>{const e=Z(Jt),n=Z(Fr);let t;return r=>{e.runOutsideAngular(()=>{n.destroyed&&!t?setTimeout(()=>{throw r}):(t??=n.get(vf),t.handleError(r))})}}}),Hw={provide:js,useValue:()=>{Z(vf,{optional:!0})},multi:!0};function cs(e,n){const[t,r,i]=rl(e,n?.equal),o=t;return o.set=r,o.update=i,o.asReadonly=Wd.bind(o),o}function Wd(){const e=this[Ve];if(void 0===e.readonlyFn){const n=()=>this();n[Ve]=e,e.readonlyFn=n}return e.readonlyFn}let ov=(()=>class e{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=pT})();function pT(){return new ov(Me(),Gt())}class bf{}const Gu=new Le("",{factory:()=>!0}),$w=new Le("");let sv=(()=>{class e{internalPendingTasks=Z(Fa);scheduler=Z(bf);errorHandler=Z(pl);add(){const t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){const r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=Ue({token:e,providedIn:"root",factory:()=>new e})}return e})(),qw=(()=>{class e{static \u0275prov=Ue({token:e,providedIn:"root",factory:()=>new gT})}return e})();class gT{dirtyEffectCount=0;queues=new Map;add(n){this.enqueue(n),this.schedule(n)}schedule(n){n.dirty&&this.dirtyEffectCount++}remove(n){const r=this.queues.get(n.zone);r.has(n)&&(r.delete(n),n.dirty&&this.dirtyEffectCount--)}enqueue(n){const t=n.zone;this.queues.has(t)||this.queues.set(t,new Set);const r=this.queues.get(t);r.has(n)||r.add(n)}flush(){for(;this.dirtyEffectCount>0;){let n=!1;for(const[t,r]of this.queues)n||=null===t?this.flushQueue(r):t.run(()=>this.flushQueue(r));n||(this.dirtyEffectCount=0)}}flushQueue(n){let t=!1;for(const r of n)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}}function mr(e){return function Vs(e){const n=vt(null);try{return e()}finally{vt(n)}}(e)}function Xw(e,n,t,r,i,o,a){try{var c=e[o](a),p=c.value}catch(_){return void t(_)}c.done?n(p):Promise.resolve(p).then(r,i)}function _e(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var o=e.apply(n,t);function a(p){Xw(o,r,i,a,c,"next",p)}function c(p){Xw(o,r,i,a,c,"throw",p)}a(void 0)})}}function Ro(e){return n=>{if(function yT(e){return dr(e?.lift)}(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}class ni extends Su{constructor(n,t,r,i,o){super(n),this.onFinalize=o,this._next=t?function(a){try{t(a)}catch(c){n.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){n.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}function cr(e,n){return Ro((t,r)=>{let i=0;t.subscribe(new ni(r,o=>{r.next(e.call(n,o,i++))}))})}function oc(e){return{toString:e}.toString()}function Ef(e,n,t,r){null!==n?n.applyValueToInputSignal(n,r):e[t]=r}class Gs{previousValue;currentValue;firstChange;constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}const Mo=(()=>{const e=()=>_o;return e.ngInherit=!0,e})();function _o(e){return e.type.prototype.ngOnChanges&&(e.setInput=Gg),qg}function qg(){const e=av(this),n=e?.current;if(n){const t=e.previous;if(t===Ss)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function Gg(e,n,t,r,i){const o=this.declaredInputs[r],a=av(e)||function tx(e,n){return e[us]=n}(e,{previous:Ss,current:null}),c=a.current||(a.current={}),p=a.previous,_=p[o];c[o]=new Gs(_&&_.currentValue,t,p===Ss),Ef(e,n,i,t)}const us="__ngSimpleChanges__";function av(e){return e[us]||null}const Yd=[],fr=function(e,n=null,t){for(let r=0;r<Yd.length;r++)(0,Yd[r])(e,n,t)};var yt=function(e){return e[e.TemplateCreateStart=0]="TemplateCreateStart",e[e.TemplateCreateEnd=1]="TemplateCreateEnd",e[e.TemplateUpdateStart=2]="TemplateUpdateStart",e[e.TemplateUpdateEnd=3]="TemplateUpdateEnd",e[e.LifecycleHookStart=4]="LifecycleHookStart",e[e.LifecycleHookEnd=5]="LifecycleHookEnd",e[e.OutputStart=6]="OutputStart",e[e.OutputEnd=7]="OutputEnd",e[e.BootstrapApplicationStart=8]="BootstrapApplicationStart",e[e.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",e[e.BootstrapComponentStart=10]="BootstrapComponentStart",e[e.BootstrapComponentEnd=11]="BootstrapComponentEnd",e[e.ChangeDetectionStart=12]="ChangeDetectionStart",e[e.ChangeDetectionEnd=13]="ChangeDetectionEnd",e[e.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",e[e.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",e[e.AfterRenderHooksStart=16]="AfterRenderHooksStart",e[e.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",e[e.ComponentStart=18]="ComponentStart",e[e.ComponentEnd=19]="ComponentEnd",e[e.DeferBlockStateStart=20]="DeferBlockStateStart",e[e.DeferBlockStateEnd=21]="DeferBlockStateEnd",e[e.DynamicComponentStart=22]="DynamicComponentStart",e[e.DynamicComponentEnd=23]="DynamicComponentEnd",e[e.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",e[e.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",e}(yt||{});function Wg(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const o=e.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:p,ngAfterViewChecked:_,ngOnDestroy:x}=o;a&&(e.contentHooks??=[]).push(-t,a),c&&((e.contentHooks??=[]).push(t,c),(e.contentCheckHooks??=[]).push(t,c)),p&&(e.viewHooks??=[]).push(-t,p),_&&((e.viewHooks??=[]).push(t,_),(e.viewCheckHooks??=[]).push(t,_)),null!=x&&(e.destroyHooks??=[]).push(t,x)}}function Kp(e,n,t){dv(e,n,3,t)}function Yp(e,n,t,r){(3&e[2])===t&&dv(e,n,t,r)}function uv(e,n){let t=e[2];(3&t)===n&&(t&=16383,t+=1,e[2]=t)}function dv(e,n,t,r){const o=r??-1,a=n.length-1;let c=0;for(let p=void 0!==r?65535&e[17]:0;p<a;p++)if("number"==typeof n[p+1]){if(c=n[p],null!=r&&c>=r)break}else n[p]<0&&(e[17]+=65536),(c<o||-1==o)&&(rx(e,t,n,p),e[17]=(4294901760&e[17])+p+2),p++}function hv(e,n){fr(yt.LifecycleHookStart,e,n);const t=vt(null);try{n.call(e)}finally{vt(t),fr(yt.LifecycleHookEnd,e,n)}}function rx(e,n,t,r){const i=t[r]<0,o=t[r+1],c=e[i?-t[r]:t[r]];i?e[2]>>14<e[17]>>16&&(3&e[2])===n&&(e[2]+=16384,hv(c,o)):hv(c,o)}class Xp{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(n,t,r,i){this.factory=n,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}}function Yu(e){return 3===e||4===e||6===e}function ox(e){return 64===e.charCodeAt(0)}function Df(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const i=n[r];"number"==typeof i?t=i:0===t||sx(e,t,i,0,-1===t||2===t?n[++r]:null)}}return e}function sx(e,n,t,r,i){let o=0,a=e.length;if(-1===n)a=-1;else for(;o<e.length;){const c=e[o++];if("number"==typeof c){if(c===n){a=-1;break}if(c>n){a=o-1;break}}}for(;o<e.length;){const c=e[o];if("number"==typeof c)break;if(c===t)return void(null!==i&&(e[o+1]=i));o++,null!==i&&o++}-1!==a&&(e.splice(a,0,n),o=a+1),e.splice(o++,0,t),null!==i&&e.splice(o++,0,i)}function Xu(e){return-1!==e}function Qd(e){return 32767&e}function Jd(e,n){let t=function ax(e){return e>>16}(e),r=n;for(;t>0;)r=r[14],t--;return r}let Yg=!0;function Qp(e){const n=Yg;return Yg=e,n}let Xg=0;const Va={};function Zc(e,n){const t=Kn(e,n);if(-1!==t)return t;const r=n[1];r.firstCreatePass&&(e.injectorIndex=n.length,eh(r.data,e),eh(n,null),eh(r.blueprint,null));const i=Qg(e,n),o=e.injectorIndex;if(Xu(i)){const a=Qd(i),c=Jd(i,n),p=c[1].data;for(let _=0;_<8;_++)n[o+_]=c[a+_]|p[a+_]}return n[o+8]=i,o}function eh(e,n){e.push(0,0,0,0,0,0,0,0,n)}function Kn(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Qg(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;null!==i;){if(r=vv(i),null===r)return-1;if(t++,i=i[14],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Jp(e,n,t){!function kT(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Pd)&&(r=t[Pd]),null==r&&(r=t[Pd]=Xg++);const i=255&r;n.data[e+(i>>5)]|=1<<i}(e,n,t)}function ux(e,n,t){if(8&t||void 0!==e)return e;Qh()}function dx(e,n,t,r){if(8&t&&void 0===r&&(r=null),!(3&t)){const i=e[9],o=xi(void 0);try{return i?i.get(n,r,8&t):tf(n,r,8&t)}finally{xi(o)}}return ux(r,0,t)}function hx(e,n,t,r=0,i){if(null!==e){if(2048&n[2]&&!(2&r)){const a=function Er(e,n,t,r,i){let o=e,a=n;for(;null!==o&&null!==a&&2048&a[2]&&!ss(a);){const c=fx(o,a,t,2|r,Va);if(c!==Va)return c;let p=o.parent;if(!p){const _=a[20];if(_){const x=_.get(t,Va,r);if(x!==Va)return x}p=vv(a),a=a[14]}o=p}return i}(e,n,t,r,Va);if(a!==Va)return a}const o=fx(e,n,t,r,Va);if(o!==Va)return o}return dx(n,t,r,i)}function fx(e,n,t,r,i){const o=function px(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Pd)?e[Pd]:void 0;return"number"==typeof n?n>=0?255&n:If:n}(t);if("function"==typeof o){if(!Aw(n,e,r))return 1&r?ux(i,0,r):dx(n,t,r,i);try{let a;if(a=o(r),null!=a||8&r)return a;Qh()}finally{Ow()}}else if("number"==typeof o){let a=null,c=Kn(e,n),p=-1,_=1&r?n[15][5]:null;for((-1===c||4&r)&&(p=-1===c?Qg(e,n):n[c+8],-1!==p&&yv(r,!1)?(a=n[1],c=Qd(p),n=Jd(p,n)):c=-1);-1!==c;){const x=n[1];if(_v(o,c,x.data)){const D=AT(c,n,t,a,r,_);if(D!==Va)return D}p=n[c+8],-1!==p&&yv(r,n[1].data[c+8]===_)&&_v(o,c,n)?(a=x,c=Qd(p),n=Jd(p,n)):c=-1}}return i}function AT(e,n,t,r,i,o){const a=n[1],c=a.data[e+8],x=Jg(c,a,t,null==r?io(c)&&Yg:r!=a&&!!(3&c.type),1&i&&o===c);return null!==x?Sf(n,a,x,c,i):Va}function Jg(e,n,t,r,i){const o=e.providerIndexes,a=n.data,c=1048575&o,p=e.directiveStart,x=o>>20,A=i?c+x:e.directiveEnd;for(let O=r?c:c+x;O<A;O++){const B=a[O];if(O<p&&t===B||O>=p&&B.type===t)return O}if(i){const O=a[p];if(O&&os(O)&&O.type===t)return p}return null}function Sf(e,n,t,r,i){let o=e[t];const a=n.data;if(o instanceof Xp){const c=o;if(c.resolving)throw Mu();const p=Qp(c.canSeeViewProviders);c.resolving=!0;const D=c.injectImpl?xi(c.injectImpl):null;Aw(e,r,0);try{o=e[t]=c.factory(void 0,i,a,e,r),n.firstCreatePass&&t>=r.directiveStart&&function Cf(e,n,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){const a=_o(n);(t.preOrderHooks??=[]).push(e,a),(t.preOrderCheckHooks??=[]).push(e,a)}i&&(t.preOrderHooks??=[]).push(0-e,i),o&&((t.preOrderHooks??=[]).push(e,o),(t.preOrderCheckHooks??=[]).push(e,o))}(t,a[t],n)}finally{null!==D&&xi(D),Qp(p),c.resolving=!1,Ow()}}return o}function _v(e,n,t){return!!(t[n+(e>>5)]&1<<e)}function yv(e,n){return!(2&e||1&e&&n)}class ri{_tNode;_lView;constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return hx(this._tNode,this._lView,n,Ld(r),t)}}function If(){return new ri(Gt(),Me())}function Vr(e){return oc(()=>{const n=e.prototype.constructor,t=n[Wl]||Kr(n),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const o=i[Wl]||Kr(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Kr(e){return ei(e)?()=>{const n=Kr(fn(e));return n&&n()}:Ma(e)}function vv(e){const n=e[1],t=n.type;return 2===t?n.declTNode:1===t?e[5]:null}function kf(e){return function Tf(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(Yu(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===n)return t[i+1];i+=2}}}return null}(Gt(),e)}function Yc(){return nh(Gt(),Me())}function nh(e,n){return new Pr(j(e,n))}let Pr=(()=>class e{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Yc})();function _x(e){return e instanceof Pr?e.nativeElement:e}function Wi(){return this._results[Symbol.iterator]()}class Ju{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new K}constructor(n=!1){this._emitDistinctChangesOnly=n}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){this.dirty=!1;const r=function uo(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Bd(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Wi}function m(e){return!(128&~e.flags)}var E=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(E||{});const S=new Map;let k=0;function V(e){S.delete(e[19])}const ye="__ngContext__";function ge(e,n){wn(n)?(e[ye]=n[19],function P(e){S.set(e[19],e)}(n)):e[ye]=n}function Qt(e){return Ct(e[12])}function xn(e){return Ct(e[4])}function Ct(e){for(;null!==e&&!mo(e);)e=e[4];return e}let yo;const yr=new Le("",{factory:()=>bo}),bo="ng",gl=new Le(""),ds=new Le("",{providedIn:"platform",factory:()=>"unknown"}),la=new Le(""),Nr=new Le("",{factory:()=>Z(Un).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),om=new Le("",{factory:()=>!1}),cm=new Le("");function ch(e){return!(32&~e.flags)}function _2(e,n){const t=e.contentQueries;if(null!==t){const r=vt(null);try{for(let i=0;i<t.length;i+=2){const a=t[i+1];if(-1!==a){const c=e.data[a];rc(t[i]),c.contentQueries(2,n[a],a)}}}finally{vt(r)}}}function VT(e,n,t){rc(0);const r=vt(null);try{n(e,t)}finally{vt(r)}}function zT(e,n,t){if(zu(n)){const r=vt(null);try{const o=n.directiveEnd;for(let a=n.directiveStart;a<o;a++){const c=e.data[a];c.contentQueries&&c.contentQueries(1,t[a],a)}}finally{vt(r)}}}var pc=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e[e.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",e}(pc||{});let Ox,Nx;function x_(e){return function w2(){if(void 0===Ox&&(Ox=null,tn.trustedTypes))try{Ox=tn.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ox}()?.createHTML(e)||e}function C2(e){return function HT(){if(void 0===Nx&&(Nx=null,tn.trustedTypes))try{Nx=tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Nx}()?.createScriptURL(e)||e}class fm{changingThisBreaksApplicationSecurity;constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Kt})`}}class SW extends fm{getTypeName(){return"HTML"}}class IW extends fm{getTypeName(){return"Style"}}class kW extends fm{getTypeName(){return"Script"}}class AW extends fm{getTypeName(){return"URL"}}class RW extends fm{getTypeName(){return"ResourceURL"}}function yl(e){return e instanceof fm?e.changingThisBreaksApplicationSecurity:e}function nd(e,n){const t=function MW(e){return e instanceof fm&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${Kt})`)}return t===n}class BW{inertDocumentHelper;constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const t=(new window.DOMParser).parseFromString(x_(n),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(n):(t.firstChild?.remove(),t)}catch{return null}}}class VW{defaultDoc;inertDocument;constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const t=this.inertDocument.createElement("template");return t.innerHTML=x_(n),t}}const UW=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Lx(e){return(e=String(e)).match(UW)?e:"unsafe:"+e}function fh(e){const n={};for(const t of e.split(","))n[t]=!0;return n}function Pv(...e){const n={};for(const t of e)for(const r in t)t.hasOwnProperty(r)&&(n[r]=!0);return n}const T2=fh("area,br,col,hr,img,wbr"),S2=fh("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),I2=fh("rp,rt"),$T=Pv(T2,Pv(S2,fh("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pv(I2,fh("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Pv(I2,S2)),qT=fh("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),k2=Pv(qT,fh("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),fh("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),jW=fh("script,style,template");class HW{sanitizedSomething=!1;buf=[];sanitizeChildren(n){let t=n.firstChild,r=!0,i=[];for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)i.push(t),t=GW(t);else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=qW(t);if(o){t=o;break}t=i.pop()}return this.buf.join("")}startElement(n){const t=A2(n).toLowerCase();if(!$T.hasOwnProperty(t))return this.sanitizedSomething=!0,!jW.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=n.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),a=o.name,c=a.toLowerCase();if(!k2.hasOwnProperty(c)){this.sanitizedSomething=!0;continue}let p=o.value;qT[c]&&(p=Lx(p)),this.buf.push(" ",a,'="',M2(p),'"')}return this.buf.push(">"),!0}endElement(n){const t=A2(n).toLowerCase();$T.hasOwnProperty(t)&&!T2.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(n){this.buf.push(M2(n))}}function qW(e){const n=e.nextSibling;if(n&&e!==n.previousSibling)throw R2(n);return n}function GW(e){const n=e.firstChild;if(n&&function $W(e,n){return(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(e,n))throw R2(n);return n}function A2(e){const n=e.nodeName;return"string"==typeof n?n:"FORM"}function R2(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}const WW=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ZW=/([^\#-~ |!])/g;function M2(e){return e.replace(/&/g,"&amp;").replace(WW,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(ZW,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Fx;function P2(e,n){let t=null;try{Fx=Fx||function D2(e){const n=new VW(e);return function zW(){try{return!!(new window.DOMParser).parseFromString(x_(""),"text/html")}catch{return!1}}()?new BW(n):n}(e);let r=n?String(n):"";t=Fx.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=Fx.getInertBodyElement(r)}while(r!==o);return x_((new HW).sanitizeChildren(GT(t)||t))}finally{if(t){const r=GT(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function GT(e){return"content"in e&&function KW(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}function Bx(e,n,t){return e.createElement(n,t)}function pm(e,n,t,r,i){e.insertBefore(n,t,r,i)}function L2(e,n,t){e.appendChild(n,t)}function F2(e,n,t,r,i){null!==r?pm(e,n,t,r,i):L2(e,n,t)}function Ov(e,n,t,r){e.removeChild(null,n,t,r)}function V2(e,n,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&function Kg(e,n,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],a=t[r++],c=t[r++];e.setAttribute(n,a,c,o)}else{const o=i,a=t[++r];ox(o)?e.setProperty(n,o,a):e.setAttribute(n,o,a),r++}}}(e,n,r),null!==i&&function e7(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}(e,n,i),null!==o&&function JW(e,n,t){e.setAttribute(n,"style",t)}(e,n,o)}var vl=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(vl||{});function bl(e){const n=Nv();return n?n.sanitize(vl.URL,e)||"":nd(e,"URL")?yl(e):Lx(Yt(e))}function z2(e){const n=Nv();if(n)return C2(n.sanitize(vl.RESOURCE_URL,e)||"");if(nd(e,"ResourceURL"))return C2(yl(e));throw new se(904,!1)}const a7=new Set(["embed","frame","iframe","media","script"]),l7=new Set(["base","link","script"]);function U2(e,n,t){return function c7(e,n){return"src"===n&&a7.has(e)||"href"===n&&l7.has(e)||"xlink:href"===n&&"script"===e?z2:bl}(n,t)(e)}function Nv(){const e=Me();return e&&e[10].sanitizer}function rd(e){return e instanceof Function?e():e}function b7(e,n,t){let r=e.length;for(;;){const i=e.indexOf(n,t);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=n.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}t=i+1}}const G2="ng-template";function w7(e,n,t,r){let i=0;if(r){for(;i<n.length&&"string"==typeof n[i];i+=2)if("class"===n[i]&&-1!==b7(n[i+1].toLowerCase(),t,0))return!0}else if(KT(e))return!1;if(i=n.indexOf(1,i),i>-1){let o;for(;++i<n.length&&"string"==typeof(o=n[i]);)if(o.toLowerCase()===t)return!0}return!1}function KT(e){return 4===e.type&&e.value!==G2}function x7(e,n,t){return n===(4!==e.type||t?e.value:G2)}function E7(e,n,t){let r=4;const i=e.attrs,o=null!==i?function T7(e){for(let n=0;n<e.length;n++)if(Yu(e[n]))return n;return e.length}(i):0;let a=!1;for(let c=0;c<n.length;c++){const p=n[c];if("number"!=typeof p){if(!a)if(4&r){if(r=2|1&r,""!==p&&!x7(e,p,t)||""===p&&1===n.length){if(nu(r))return!1;a=!0}}else if(8&r){if(null===i||!w7(e,i,p,t)){if(nu(r))return!1;a=!0}}else{const _=n[++c],x=C7(p,i,KT(e),t);if(-1===x){if(nu(r))return!1;a=!0;continue}if(""!==_){let D;if(D=x>o?"":i[x+1].toLowerCase(),2&r&&_!==D){if(nu(r))return!1;a=!0}}}}else{if(!a&&!nu(r)&&!nu(p))return!1;if(a&&nu(p))continue;a=!1,r=p|1&r}}return nu(r)||a}function nu(e){return!(1&e)}function C7(e,n,t,r){if(null===n)return-1;let i=0;if(r||!t){let o=!1;for(;i<n.length;){const a=n[i];if(a===e)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){let c=n[++i];for(;"string"==typeof c;)c=n[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function S7(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function W2(e,n,t=!1){for(let r=0;r<n.length;r++)if(E7(e,n[r],t))return!0;return!1}function I7(e,n){e:for(let t=0;t<n.length;t++){const r=n[t];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function Z2(e,n){return e?":not("+n.trim()+")":n}function k7(e){let n=e[0],t=1,r=2,i="",o=!1;for(;t<e.length;){let a=e[t];if("string"==typeof a)if(2&r){const c=e[++t];i+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!nu(a)&&(n+=Z2(o,i),i=""),r=a,o=o||!nu(r);t++}return""!==i&&(n+=Z2(o,i)),n}const kr={};function YT(e,n,t,r,i,o,a,c,p,_,x){const D=27+r,A=D+i,O=function M7(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:kr);return t}(D,A),B="function"==typeof _?_():_;return O[1]={type:e,blueprint:O,template:t,queries:null,viewQuery:c,declTNode:n,data:O.slice().fill(null,D),bindingStartIndex:D,expandoStartIndex:A,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:p,consts:B,incompleteFirstPass:!1,ssrId:x}}function zx(e,n,t,r,i,o,a,c,p,_,x){const D=n.blueprint.slice();return D[0]=i,D[2]=1228|r,(null!==_||e&&2048&e[2])&&(D[2]|=2048),Ae(D),D[3]=D[14]=e,D[8]=t,D[10]=a||e&&e[10],D[11]=c||e&&e[11],D[9]=p||e&&e[9]||null,D[5]=o,D[19]=function R(){return k++}(),D[6]=x,D[20]=_,D[15]=2==n.type?e[15]:D,D}function XT(e){let n=16;return e.signals?n=4096:e.onPush&&(n=64),n}function Lv(e,n,t,r){if(0===t)return-1;const i=n.length;for(let o=0;o<t;o++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function QT(e,n){return e[12]?e[13][4]=n:e[12]=n,e[13]=n,n}function Te(e=1){Y2(Ft(),Me(),so()+e,!1)}function Y2(e,n,t,r){if(!r)if(3&~n[2]){const o=e.preOrderHooks;null!==o&&Yp(n,o,0,t)}else{const o=e.preOrderCheckHooks;null!==o&&Kp(n,o,t)}$u(t)}var Ux=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Ux||{});function mm(e,n,t,r){const i=vt(null);try{const[o,a,c]=e.inputs[t];let p=null;0!==(a&Ux.SignalBased)&&(p=n[o][Ve]),null!==p&&void 0!==p.transformFn?r=p.transformFn(r):null!==c&&(r=c.call(n,r)),null!==e.setInput?e.setInput(n,p,r,t,o):Ef(n,p,o,r)}finally{vt(i)}}var qf=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(qf||{});function eS(e,n){return undefined(e,n)}const gm=new Set;var tS=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(tS||{});const D_=new Le(""),eL=new Set;function Wo(e){eL.has(e)||(eL.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}let tL=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=Ue({token:e,providedIn:"root",factory:()=>new e})}return e})();const nL=[0,1,2,3];let V7=(()=>{class e{ngZone=Z(Jt);scheduler=Z(bf);errorHandler=Z(vf,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Z(D_,{optional:!0})}execute(){const t=this.sequences.size>0;t&&fr(yt.AfterRenderHooksStart),this.executing=!0;for(const r of nL)for(const i of this.sequences)if(!i.erroredOrDestroyed&&i.hooks[r])try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>(0,i.hooks[r])(i.pipelinedValue),i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(const r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(const r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&fr(yt.AfterRenderHooksEnd)}register(t){const{view:r}=t;void 0!==r?((r[25]??=[]).push(t),_t(r),r[2]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(tS.AFTER_NEXT_RENDER,t):t()}static \u0275prov=Ue({token:e,providedIn:"root",factory:()=>new e})}return e})();class rL{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(n,t,r,i,o,a=null){this.impl=n,this.hooks=t,this.view=r,this.once=i,this.snapshot=a,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();const n=this.view?.[25];n&&(this.view[25]=n.filter(t=>t!==this))}}function ru(e,n){const t=n?.injector??Z(Tn);return Wo("NgAfterNextRender"),function iL(e,n,t,r){const i=n.get(tL);i.impl??=n.get(V7);const o=n.get(D_,null,{optional:!0}),a=!0!==t?.manualCleanup?n.get(rr):null,c=n.get(ov,null,{optional:!0}),p=new rL(i.impl,function U7(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}(e),c?.view,r,a,o?.snapshot(null));return i.impl.register(p),p}(e,t,n,!0)}const Hx=new Le("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:Z(Fr)})});function oL(e,n,t){const r=e.get(Hx);if(Array.isArray(n))for(const i of n)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(n),t?.detachedLeaveAnimationFns?.push(n);r.scheduler&&r.scheduler(e)}function sL(e,n,t,r){const i=e?.[26]?.enter;null!==n&&i&&i.has(t.index)&&function nS(e,n){for(const[t,r]of n)oL(e,r.animateFns)}(r,i)}function T_(e,n,t,r,i,o,a,c){if(null!=i){let p,_=!1;mo(i)?p=i:wn(i)&&(_=!0,i=i[0]);const x=L(i);0===e&&null!==r?(sL(c,r,o,t),null==a?L2(n,r,x):pm(n,r,x,a||null,!0)):1===e&&null!==r?(sL(c,r,o,t),pm(n,r,x,a||null,!0)):2===e?cL(c,o,t,D=>{Ov(n,x,_,D)}):3===e&&cL(c,o,t,()=>{n.destroyNode(x)}),null!=p&&function Y7(e,n,t,r,i,o,a){const c=r[7];c!==L(r)&&T_(n,e,t,o,c,i,a);for(let _=10;_<r.length;_++){const x=r[_];Gx(x[1],x,e,n,o,c)}}(n,e,t,p,o,r,a)}}function lL(e,n){n[10].changeDetectionScheduler?.notify(9),Gx(e,n,n[11],2,null,null)}function rS(e,n){const t=e[9],r=t.indexOf(n);t.splice(r,1)}function Fv(e,n){if(As(n))return;const t=n[11];t.destroyNode&&Gx(e,n,t,3,null,null),function q7(e){let n=e[12];if(!n)return iS(e[1],e);for(;n;){let t=null;if(wn(n))t=n[12];else{const r=n[10];r&&(t=r)}if(!t){for(;n&&!n[4]&&n!==e;)wn(n)&&iS(n[1],n),n=n[3];null===n&&(n=e),wn(n)&&iS(n[1],n),t=n&&n[4]}n=t}}(n)}function iS(e,n){if(As(n))return;const t=vt(null);try{n[2]&=-129,n[2]|=256,n[24]&&bs(n[24]),function Z7(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const i=n[t[r]];if(!(i instanceof Xp)){const o=t[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){const c=i[o[a]],p=o[a+1];fr(yt.LifecycleHookStart,c,p);try{p.call(c)}finally{fr(yt.LifecycleHookEnd,c,p)}}else{fr(yt.LifecycleHookStart,i,o);try{o.call(i)}finally{fr(yt.LifecycleHookEnd,i,o)}}}}}(e,n),function W7(e,n){const t=e.cleanup,r=n[7];if(null!==t)for(let a=0;a<t.length-1;a+=2)if("string"==typeof t[a]){const c=t[a+3];c>=0?r[c]():r[-c].unsubscribe(),a+=2}else t[a].call(r[t[a+1]]);null!==r&&(n[7]=null);const i=n[21];if(null!==i){n[21]=null;for(let a=0;a<i.length;a++)(0,i[a])()}const o=n[23];if(null!==o){n[23]=null;for(const a of o)a.destroy()}}(e,n),1===n[1].type&&n[11].destroy();const r=n[16];if(null!==r&&mo(n[3])){r!==n[3]&&rS(r,n);const i=n[18];null!==i&&i.detachView(e)}V(n)}finally{vt(t)}}function cL(e,n,t,r){const i=e?.[26];if(null==i||null==i.leave||!i.leave.has(n.index))return r(!1);e&&gm.add(e[19]),oL(t,()=>{if(i.leave&&i.leave.has(n.index)){const a=i.leave.get(n.index),c=[];if(a){for(let p=0;p<a.animateFns.length;p++){const _=a.animateFns[p],{promise:x}=_();c.push(x)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),function G7(e,n){const t=e[26]?.running;t?t.then(()=>{e[26].running=void 0,gm.delete(e[19]),n(!0)}):n(!1)}(e,r)}else e&&gm.delete(e[19]),r(!1)},i)}function oS(e,n,t){return function uL(e,n,t){let r=n;for(;null!==r&&168&r.type;)r=(n=r).parent;if(null===r)return t[0];if(io(r)){const{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===pc.None||i===pc.Emulated)return null}return j(r,t)}(e,n.parent,t)}function dL(e,n,t){return fL(e,n,t)}let fL=function hL(e,n,t){return 40&e.type?j(e,t):null};function aS(e,n,t,r){const i=oS(e,r,n),o=n[11],c=dL(r.parent||n[5],r,n);if(null!=i)if(Array.isArray(t))for(let p=0;p<t.length;p++)F2(o,i,t[p],c,!1);else F2(o,i,t,c,!1)}function _m(e,n){if(null!==n){const t=n.type;if(3&t)return j(n,e);if(4&t)return qx(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return _m(e,r);{const i=e[n.index];return mo(i)?qx(-1,i):L(i)}}if(128&t)return _m(e,n.next);if(32&t)return eS(n,e)()||L(e[n.index]);{const r=mL(e,n);return null!==r?Array.isArray(r)?r[0]:_m(hn(e[15]),r):_m(e,n.next)}}return null}function mL(e,n){return null!==n?e[15][5].projection[n.projection]:null}function qx(e,n){const t=10+e+1;if(t<n.length){const r=n[t],i=r[1].firstChild;if(null!==i)return _m(r,i)}return n[7]}function lS(e,n,t,r,i,o,a){for(;null!=t;){const c=r[9];if(128===t.type){t=t.next;continue}const p=r[t.index],_=t.type;if(a&&0===n&&(p&&ge(L(p),r),t.flags|=2),!ch(t))if(8&_)lS(e,n,t.child,r,i,o,!1),T_(n,e,c,i,p,t,o,r);else if(32&_){const x=eS(t,r);let D;for(;D=x();)T_(n,e,c,i,D,t,o,r);T_(n,e,c,i,p,t,o,r)}else 16&_?gL(e,n,r,t,i,o):T_(n,e,c,i,p,t,o,r);t=a?t.projectionNext:t.next}}function Gx(e,n,t,r,i,o){lS(t,r,e.firstChild,n,i,o,!1)}function gL(e,n,t,r,i,o){const a=t[15],p=a[5].projection[r.projection];if(Array.isArray(p))for(let _=0;_<p.length;_++)T_(n,e,t[9],i,p[_],r,o,t);else{let _=p;const x=a[3];m(r)&&(_.flags|=128),lS(e,n,_,x,i,o,!0)}}function _L(e,n,t,r,i){const o=so(),a=2&r;try{$u(-1),a&&n.length>27&&Y2(e,n,27,!1),fr(a?yt.TemplateUpdateStart:yt.TemplateCreateStart,i,t),t(r,i)}finally{$u(o),fr(a?yt.TemplateUpdateEnd:yt.TemplateCreateEnd,i,t)}}function Wx(e,n,t){(function n9(e,n,t){const r=t.directiveStart,i=t.directiveEnd;io(t)&&function P7(e,n,t){const r=j(n,e),i=function K2(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=YT(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}(t),o=e[10].rendererFactory,a=QT(e,zx(e,i,null,XT(t),r,n,null,o.createRenderer(r,t),null,null,null));e[n.index]=a}(n,t,e.data[r+t.componentOffset]),e.firstCreatePass||Zc(t,n);const o=t.initialInputs;for(let a=r;a<i;a++){const c=e.data[a],p=Sf(n,e,a,t);ge(p,n),null!==o&&s9(0,a-r,p,c,0,o),os(c)&&(ie(t.index,n)[8]=Sf(n,e,a,t))}})(e,n,t),!(64&~t.flags)&&function r9(e,n,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,a=function qd(){return Ye.lFrame.currentDirectiveIndex}();try{$u(o);for(let c=r;c<i;c++){const p=e.data[c],_=n[c];Gc(c),(null!==p.hostBindings||0!==p.hostVars||null!==p.hostAttrs)&&i9(p,_)}}finally{$u(-1),Gc(a)}}(e,n,t)}function S_(e,n,t=j){const r=n.localNames;if(null!==r){let i=n.index+1;for(let o=0;o<r.length;o+=2){const a=r[o+1],c=-1===a?t(n,e):e[a];e[i++]=c}}}let yL=()=>null;function Zx(e,n,t,r,i,o){Qx(e,n[1],n,t,r)?io(e)&&function vL(e,n){const t=ie(n,e);16&t[2]||(t[2]|=64)}(n,e.index):(3&e.type&&(t=function t9(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(t)),cS(e,n,t,r,i,o))}function cS(e,n,t,r,i,o){if(3&e.type){const a=j(e,n);r=null!=o?o(r,e.value||"",t):r,i.setProperty(a,t,r)}}function i9(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function uS(e,n){const t=e.directiveRegistry;let r=null;if(t)for(let i=0;i<t.length;i++){const o=t[i];W2(n,o.selectors,!1)&&(r??=[],os(o)?r.unshift(o):r.push(o))}return r}function s9(e,n,t,r,i,o){const a=o[n];if(null!==a)for(let c=0;c<a.length;c+=2)mm(r,t,a[c],a[c+1])}function Yx(e,n,t,r,i){const o=27+t,a=n[1],c=i(a,n,e,r,t);n[o]=c,Rs(e,!0);const p=2===e.type;return p?(V2(n[11],c,e),(0===function Tt(){return Ye.lFrame.elementDepthCount}()||qi(e))&&ge(c,n),function nr(){Ye.lFrame.elementDepthCount++}()):ge(c,n),Vg()&&(!p||!ch(e))&&aS(a,n,c,e),e}function Xx(e){let n=e;return $c()?sa():(n=n.parent,Rs(n,!1)),n}function Qx(e,n,t,r,i){const o=e.inputs?.[r],a=e.hostDirectiveInputs?.[r];let c=!1;if(a)for(let p=0;p<a.length;p+=2){const _=a[p];mm(n.data[_],t[_],a[p+1],i),c=!0}if(o)for(const p of o)mm(n.data[p],t[p],r,i),c=!0;return c}function l9(e,n){const t=ie(n,e),r=t[1];!function c9(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}(r,t);const i=t[0];null!==i&&null===t[6]&&(t[6]=null),fr(yt.ComponentStart);try{Jx(r,t,t[8])}finally{fr(yt.ComponentEnd,t[8])}}function Jx(e,n,t){Bg(n);try{const r=e.viewQuery;null!==r&&VT(1,r,t);const i=e.template;null!==i&&_L(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),n[18]?.finishViewCreation(e),e.staticContentQueries&&_2(e,n),e.staticViewQueries&&VT(2,e.viewQuery,t);const o=e.components;null!==o&&function u9(e,n){for(let t=0;t<n.length;t++)l9(e,n[t])}(n,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[2]&=-5,jp()}}function I_(e,n,t,r){const i=vt(null);try{const o=n.tView,p=zx(e,o,t,4096&e[2]?4096:16,null,n,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);p[16]=e[n.index];const x=e[18];return null!==x&&(p[18]=x.createEmbeddedView(o)),Jx(o,p,t),p}finally{vt(i)}}function ym(e,n){return!n||null===n.firstChild||m(e)}function Bv(e,n,t,r,i=!1){for(;null!==t;){if(128===t.type){t=i?t.projectionNext:t.next;continue}const o=n[t.index];null!==o&&r.push(L(o)),mo(o)&&d9(o,r);const a=t.type;if(8&a)Bv(e,n,t.child,r);else if(32&a){const c=eS(t,n);let p;for(;p=c();)r.push(p)}else if(16&a){const c=mL(n,t);if(Array.isArray(c))r.push(...c);else{const p=hn(n[15]);Bv(p[1],p,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function d9(e,n){for(let t=10;t<e.length;t++){const r=e[t],i=r[1].firstChild;null!==i&&Bv(r[1],r,i,n)}e[7]!==e[0]&&n.push(e[7])}function xL(e){if(null!==e[25]){for(const n of e[25])n.impl.addSequence(n);e[25].length=0}}let EL=[];const m9={...Ol,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{_t(e.lView)},consumerOnSignalRead(){this.lView[24]=this}},_9={...Ol,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let n=hn(e.lView);for(;n&&!CL(n[1]);)n=hn(n);n&&Ne(n)},consumerOnSignalRead(){this.lView[24]=this}};function CL(e){return 2!==e.type}function DL(e){if(null===e[23])return;let n=!0;for(;n;){let t=!1;for(const r of e[23])r.dirty&&(t=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));n=t&&!!(8192&e[2])}}function eE(e,n=0){const r=e[10].rendererFactory;r.begin?.();try{!function v9(e,n){const t=nc();try{Sr(!0),hS(e,n);let r=0;for(;He(e);){if(100===r)throw new se(103,!1);r++,hS(e,1)}}finally{Sr(t)}}(e,n)}finally{r.end?.()}}function TL(e,n,t,r){if(As(n))return;const i=n[2];Bg(n);let c=!0,p=null,_=null;CL(e)?(_=function h9(e){return e[24]??function f9(e){const n=EL.pop()??Object.create(m9);return n.lView=e,n}(e)}(n),p=Xo(_)):null===function Ut(){return Xi}()?(c=!1,_=function g9(e){const n=e[24]??Object.create(_9);return n.lView=e,n}(n),p=Xo(_)):n[24]&&(bs(n[24]),n[24]=null);try{Ae(n),function Hu(e){return Ye.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&_L(e,n,t,2,r);const x=!(3&~i);if(x){const O=e.preOrderCheckHooks;null!==O&&Kp(n,O,null)}else{const O=e.preOrderHooks;null!==O&&Yp(n,O,0,null),uv(n,0)}if(function b9(e){for(let n=Qt(e);null!==n;n=xn(n)){if(!(2&n[2]))continue;const t=n[9];for(let r=0;r<t.length;r++)Ne(t[r])}}(n),DL(n),SL(n,0),null!==e.contentQueries&&_2(e,n),x){const O=e.contentCheckHooks;null!==O&&Kp(n,O)}else{const O=e.contentHooks;null!==O&&Yp(n,O,1),uv(n,1)}!function x9(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)$u(~i);else{const o=i,a=t[++r],c=t[++r];Lg(a,o);const p=n[o];fr(yt.HostBindingsUpdateStart,p);try{c(2,p)}finally{fr(yt.HostBindingsUpdateEnd,p)}}}}finally{$u(-1)}}(e,n);const D=e.components;null!==D&&kL(n,D,0);const A=e.viewQuery;if(null!==A&&VT(2,A,r),x){const O=e.viewCheckHooks;null!==O&&Kp(n,O)}else{const O=e.viewHooks;null!==O&&Yp(n,O,2),uv(n,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[22]){for(const O of n[22])O();n[22]=null}xL(n),n[2]&=-73}catch(x){throw _t(n),x}finally{null!==_&&(va(_,p),c&&function p9(e){e.lView[24]!==e&&(e.lView=null,EL.push(e))}(_)),jp()}}function SL(e,n){for(let t=Qt(e);null!==t;t=xn(t))for(let r=10;r<t.length;r++)IL(t[r],n)}function w9(e,n,t){fr(yt.ComponentStart);const r=ie(n,e);try{IL(r,t)}finally{fr(yt.ComponentEnd,r[8])}}function IL(e,n){ve(e)&&hS(e,n)}function hS(e,n){const r=e[1],i=e[2],o=e[24];let a=!!(0===n&&16&i);if(a||=!!(64&i&&0===n),a||=!!(1024&i),a||=!(!o?.dirty||!Ni(o)),a||=!1,o&&(o.dirty=!1),e[2]&=-9217,a)TL(r,e,r.template,e[8]);else if(8192&i){const c=vt(null);try{DL(e),SL(e,1);const p=r.components;null!==p&&kL(e,p,1),xL(e)}finally{vt(c)}}}function kL(e,n,t){for(let r=0;r<n.length;r++)w9(e,n[r],t)}function k_(e,n){const t=nc()?64:1088;for(e[10].changeDetectionScheduler?.notify(n);e;){e[2]|=t;const r=hn(e);if(ss(e)&&!r)return e;e=r}return null}function AL(e,n,t,r){return[e,!0,0,n,null,r,null,t,null,null]}function RL(e,n){const t=10+n;if(t<e.length)return e[t]}function A_(e,n,t,r=!0){const i=n[1];if(function E9(e,n,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=n),r<o-10?(n[4]=t[i],Nu(t,10+r,n)):(t.push(n),n[4]=null),n[3]=t;const a=n[16];null!==a&&t!==a&&ML(a,n);const c=n[18];null!==c&&c.insertView(e),it(n),n[2]|=128}(i,n,e,t),r){const a=qx(t,e),c=n[11],p=c.parentNode(e[7]);null!==p&&function $7(e,n,t,r,i,o){r[0]=i,r[5]=n,Gx(e,r,t,1,i,o)}(i,e[5],c,n,p,a)}const o=n[6];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function fS(e,n){const t=Vv(e,n);return void 0!==t&&Fv(t[1],t),t}function Vv(e,n){if(e.length<=10)return;const t=10+n,r=e[t];if(r){const i=r[16];null!==i&&i!==e&&rS(i,r),n>0&&(e[t-1][4]=r[4]);const o=ns(e,10+n);!function aL(e,n){lL(e,n),n[0]=null,n[5]=null}(r[1],r);const a=o[18];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function ML(e,n){const t=e[9],r=n[3];(wn(r)||n[15]!==r[3][15])&&(e[2]|=2),null===t?e[9]=[n]:t.push(n)}class zv{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){const n=this._lView,t=n[1];return Bv(t,n,t.firstChild,[])}constructor(n,t){this._lView=n,this._cdRefInjectingView=t}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return As(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(mo(n)){const t=n[8],r=t?t.indexOf(this):-1;r>-1&&(Vv(n,r),ns(t,r))}this._attachedToViewContainer=!1}Fv(this._lView[1],this._lView)}onDestroy(n){xt(this._lView,n)}markForCheck(){k_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){it(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,eE(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const n=ss(this._lView),t=this._lView[16];null!==t&&!n&&rS(t,this._lView),lL(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=n;const t=ss(this._lView),r=this._lView[16];null!==r&&!t&&ML(r,this._lView),it(this._lView)}}let wl=(()=>class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=C9;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){const o=I_(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new zv(o)}})();function C9(){return tE(Gt(),Me())}function tE(e,n){return 4&e.type?new wl(n,e,nh(e,n)):null}function vm(e,n,t,r,i){let o=e.data[n];if(null===o)o=function _S(e,n,t,r,i){const o=Hc(),a=$c(),p=e.data[n]=function P9(e,n,t,r,i,o){let a=n?n.injectorIndex:-1,c=0;return fi()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,t,n,r,i);return function M9(e,n,t,r){null===e.firstChild&&(e.firstChild=n),null!==t&&(r?null==t.child&&null!==n.parent&&(t.child=n):null===t.next&&(t.next=n,n.prev=t))}(e,p,o,a),p}(e,n,t,r,i),function _f(){return Ye.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const a=function oa(){const e=Ye.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();o.injectorIndex=null===a?-1:a.injectorIndex}return Rs(o,!0),o}function XL(e,n){let t=0,r=e.firstChild;if(r){const i=e.data.r;for(;t<i;){const o=r.nextSibling;Ov(n,r,!1),r=o,t++}}}let mZ=class{},rF=class{};class gZ{resolveComponentFactory(n){throw new se(917,!1)}}let cE=class{static NULL=new gZ};class xl{}let ja=(()=>class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>function _Z(){const e=Me(),t=ie(Gt().index,e);return(wn(t)?t:e)[11]}()})(),yZ=(()=>{class e{static \u0275prov=Ue({token:e,providedIn:"root",factory:()=>null})}return e})();const DS={};class M_{injector;parentInjector;constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){const i=this.injector.get(n,DS,r);return i!==DS||t===DS?i:this.parentInjector.get(n,t,r)}}function dE(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,o=0;if(null!==n)for(let a=0;a<n.length;a++){const c=n[a];"number"==typeof c?o=c:1==o?i=dn(i,c):2==o&&(r=dn(r,c+": "+n[++a]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}function Re(e,n=0){const t=Me();return null===t?wt(e,n):hx(Gt(),t,fn(e),n)}function sF(e,n,t,r,i){const o=null===r?null:{"":-1},a=i(e,t);if(null!==a){let c=a,p=null,_=null;for(const x of a)if(null!==x.resolveHostDirectives){[c,p,_]=x.resolveHostDirectives(a);break}!function CZ(e,n,t,r,i,o,a){const c=r.length;let p=null;for(let A=0;A<c;A++){const O=r[A];null===p&&os(O)&&(p=O,EZ(e,t,A)),Jp(Zc(t,n),e,O.type)}(function AZ(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n})(t,e.data.length,c),p?.viewProvidersResolver&&p.viewProvidersResolver(p);for(let A=0;A<c;A++){const O=r[A];O.providersResolver&&O.providersResolver(O)}let _=!1,x=!1,D=Lv(e,n,c,null);c>0&&(t.directiveToIndex=new Map);for(let A=0;A<c;A++){const O=r[A];if(t.mergedAttrs=Df(t.mergedAttrs,O.hostAttrs),TZ(e,t,n,D,O),kZ(D,O,i),null!==a&&a.has(O)){const[Q,oe]=a.get(O);t.directiveToIndex.set(O.type,[D,Q+t.directiveStart,oe+t.directiveStart])}else(null===o||!o.has(O))&&t.directiveToIndex.set(O.type,D);null!==O.contentQueries&&(t.flags|=4),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(t.flags|=64);const B=O.type.prototype;!_&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),_=!0),!x&&(B.ngOnChanges||B.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),x=!0),D++}!function DZ(e,n,t){for(let r=n.directiveStart;r<n.directiveEnd;r++){const i=e.data[r];if(null!==t&&t.has(i)){const o=t.get(i);lF(0,n,o,r),lF(1,n,o,r),uF(n,r,!0)}else aF(0,n,i,r),aF(1,n,i,r),uF(n,r,!1)}}(e,t,o)}(e,n,t,c,o,p,_)}null!==o&&null!==r&&function xZ(e,n,t){const r=e.localNames=[];for(let i=0;i<n.length;i+=2){const o=t[n[i+1]];if(null==o)throw new se(-301,!1);r.push(n[i],o)}}(t,r,o)}function EZ(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function aF(e,n,t,r){const i=0===e?t.inputs:t.outputs;for(const o in i)if(i.hasOwnProperty(o)){let a;a=0===e?n.inputs??={}:n.outputs??={},a[o]??=[],a[o].push(r),cF(n,o)}}function lF(e,n,t,r){const i=0===e?t.inputs:t.outputs;for(const o in i)if(i.hasOwnProperty(o)){const a=i[o];let c;c=0===e?n.hostDirectiveInputs??={}:n.hostDirectiveOutputs??={},c[a]??=[],c[a].push(r,o),cF(n,a)}}function cF(e,n){"class"===n?e.flags|=8:"style"===n&&(e.flags|=16)}function uF(e,n,t){const{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(null===r||!t&&null===i||t&&null===o||KT(e))return e.initialInputs??=[],void e.initialInputs.push(null);let a=null,c=0;for(;c<r.length;){const p=r[c];if(0!==p)if(5!==p){if("number"==typeof p)break;if(!t&&i.hasOwnProperty(p)){const _=i[p];for(const x of _)if(x===n){a??=[],a.push(p,r[c+1]);break}}else if(t&&o.hasOwnProperty(p)){const _=o[p];for(let x=0;x<_.length;x+=2)if(_[x]===n){a??=[],a.push(_[x+1],r[c+1]);break}}c+=2}else c+=2;else c+=4}e.initialInputs??=[],e.initialInputs.push(a)}function TZ(e,n,t,r,i){e.data[r]=i;const o=i.factory||(i.factory=Ma(i.type)),a=new Xp(o,os(i),Re,null);e.blueprint[r]=a,t[r]=a,function SZ(e,n,t,r,i){const o=i.hostBindings;if(o){let a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);const c=~n.index;(function IZ(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(a)!=c&&a.push(c),a.push(t,r,o)}}(e,n,r,Lv(e,t,i.hostVars,kr),i)}function kZ(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;os(n)&&(t[""]=e)}}function TS(e,n,t,r,i,o,a,c){const p=n[1],_=p.consts,D=vm(p,e,t,r,Ee(_,a));return o&&sF(p,n,D,Ee(_,c),i),D.mergedAttrs=Df(D.mergedAttrs,D.attrs),null!==D.attrs&&dE(D,D.attrs,!1),null!==D.mergedAttrs&&dE(D,D.mergedAttrs,!0),null!==p.queries&&p.queries.elementStart(p,D),D}function SS(e,n){Wg(e,n),zu(n)&&e.queries.elementEnd(n)}function id(e,n,t){return e[n]=t}function ii(e,n,t){return t!==kr&&(!Object.is(e[n],t)&&(e[n]=t,!0))}function xm(e,n,t,r){const i=ii(e,n,t);return ii(e,n+1,r)||i}function ph(e,n,t){return function r(i){k_(io(e)?ie(e.index,n):n,5);const a=n[8];let c=fF(n,a,t,i),p=r.__ngNextListenerFn__;for(;p;)c=fF(n,a,p,i)&&c,p=p.__ngNextListenerFn__;return c}}function fF(e,n,t,r){const i=vt(null);try{return fr(yt.OutputStart,n,t),!1!==t(r)}catch(o){return function dS(e,n){const t=e[9];if(!t)return;let r;try{r=t.get(pl,null)}catch{r=null}r?.(n)}(e,o),!1}finally{fr(yt.OutputEnd,n,t),vt(i)}}function pE(e,n,t,r,i,o,a,c){const p=qi(e);let _=!1,x=null;if(!r&&p&&(x=function NZ(e,n,t,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const a=i[o];if(a===t&&i[o+1]===r){const c=n[7],p=i[o+2];return c&&c.length>p?c[p]:null}"string"==typeof a&&(o+=2)}return null}(n,t,o,e.index)),null!==x)(x.__ngLastListenerFn__||x).__ngNextListenerFn__=a,x.__ngLastListenerFn__=a,_=!0;else{const D=j(e,t),A=r?r(D):D,O=i.listen(A,o,c);(function OZ(e){return e.startsWith("animation")||e.startsWith("transition")})(o)||pF(r?Q=>r(L(Q[e.index])):e.index,n,t,o,c,O,!1)}return _}function pF(e,n,t,r,i,o,a){const c=n.firstCreatePass?qt(n):null,p=at(t),_=p.length;p.push(i,o),c&&c.push(r,e,_,(_+1)*(a?-1:1))}function P_(e,n,t,r,i,o){const c=n[1],D=n[t][c.data[t].outputs[r]].subscribe(o);pF(e.index,c,n,i,o,D,!0)}const mh=Symbol("BINDING");class _F extends cE{ngModule;constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=nn(n);return new Xv(t,this.ngModule)}}class Xv extends rF{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function HZ(e){return Object.keys(e).map(n=>{const[t,r,i]=e[n],o={propName:t,templateName:n,isSignal:0!==(r&Ux.SignalBased)};return i&&(o.transform=i),o})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function $Z(e){return Object.keys(e).map(n=>({propName:e[n],templateName:n}))}(this.componentDef.outputs),this.cachedOutputs}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function A7(e){return e.map(k7).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors??[],this.isBoundToModule=!!t}create(n,t,r,i,o,a){fr(yt.DynamicComponentStart);const c=vt(null);try{const p=this.componentDef,_=function KZ(e,n,t,r){const i=e?["ng-version","21.1.2"]:function R7(e){const n=[],t=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&n.push(o,e[++r]):8===i&&t.push(o);else{if(!nu(i))break;i=o}r++}return t.length&&n.push(1,...t),n}(n.selectors[0]);let o=null,a=null,c=0;if(t)for(const x of t)c+=x[mh].requiredVars,x.create&&(x.targetIdx=0,(o??=[]).push(x)),x.update&&(x.targetIdx=0,(a??=[]).push(x));if(r)for(let x=0;x<r.length;x++){const D=r[x];if("function"!=typeof D)for(const A of D.bindings){c+=A[mh].requiredVars;const O=x+1;A.create&&(A.targetIdx=O,(o??=[]).push(A)),A.update&&(A.targetIdx=O,(a??=[]).push(A))}}const p=[n];if(r)for(const x of r){const A=ti("function"==typeof x?x:x.type);p.push(A)}return YT(0,null,function YZ(e,n){return e||n?t=>{if(1&t&&e)for(const r of e)r.create();if(2&t&&n)for(const r of n)r.update()}:null}(o,a),1,c,p,null,null,null,[i],null)}(r,p,a,o),x=function qZ(e,n,t){let r=n instanceof Fr?n:n?.injector;return r&&null!==e.getStandaloneInjector&&(r=e.getStandaloneInjector(r)||r),r?new M_(t,r):t}(p,i||this.ngModule,n),D=function GZ(e){const n=e.get(xl,null);if(null===n)throw new se(407,!1);return{rendererFactory:n,sanitizer:e.get(yZ,null),changeDetectionScheduler:e.get(bf,null),ngReflect:!1}}(x),A=D.rendererFactory.createRenderer(null,p),O=r?function Q7(e,n,t,r){const o=r.get(om,!1)||t===pc.ShadowDom||t===pc.ExperimentalIsolatedShadowDom,a=e.selectRootElement(n,o);return function J7(e){yL(e)}(a),a}(A,r,p.encapsulation,x):function WZ(e,n){const t=function ZZ(e){return(e.selectors[0][0]||"div").toLowerCase()}(e);return Bx(n,t,"svg"===t?"svg":"math"===t?"math":null)}(p,A),B=a?.some(yF)||o?.some(be=>"function"!=typeof be&&be.bindings.some(yF)),Q=zx(null,_,null,512|XT(p),null,null,D,A,x,null,null);Q[27]=O,Bg(Q);let oe=null;try{const be=TS(27,Q,2,"#host",()=>_.directiveRegistry,!0,0);V2(A,O,be),ge(O,Q),Wx(_,Q,be),zT(_,be,Q),SS(_,be),void 0!==t&&function QZ(e,n,t){const r=e.projection=[];for(let i=0;i<n.length;i++){const o=t[i];r.push(null!=o&&o.length?Array.from(o):null)}}(be,this.ngContentSelectors,t),oe=ie(be.index,Q),Q[8]=oe[8],Jx(_,Q,null)}catch(be){throw null!==oe&&V(oe),V(Q),be}finally{fr(yt.DynamicComponentEnd),jp()}return new XZ(this.componentType,Q,!!B)}finally{vt(c)}}}function yF(e){const n=e[mh].kind;return"input"===n||"twoWay"===n}class XZ extends mZ{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(n,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=J(t[1],27),this.location=nh(this._tNode,t),this.instance=ie(this._tNode.index,t)[8],this.hostView=this.changeDetectorRef=new zv(t,void 0),this.componentType=n}setInput(n,t){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;const i=this._rootLView;Qx(r,i[1],i,n,t),this.previousInputValues.set(n,t),k_(ie(r.index,i),1)}get injector(){return new ri(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}let El=(()=>class e{static __NG_ELEMENT_ID__=JZ})();function JZ(){return wF(Gt(),Me())}const eK=El,vF=class extends eK{_lContainer;_hostTNode;_hostLView;constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return nh(this._hostTNode,this._hostLView)}get injector(){return new ri(this._hostTNode,this._hostLView)}get parentInjector(){const n=Qg(this._hostTNode,this._hostLView);if(Xu(n)){const t=Jd(n,this._hostLView),r=Qd(n);return new ri(t[1].data[r+8],t)}return new ri(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=bF(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const c=n.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(c,i,ym(this._hostTNode,null)),c}createComponent(n,t,r,i,o,a,c){const p=n&&!function Zu(e){return"function"==typeof e}(n);let _;if(p)_=t;else{const oe=t||{};_=oe.index,r=oe.injector,i=oe.projectableNodes,o=oe.environmentInjector||oe.ngModuleRef,a=oe.directives,c=oe.bindings}const x=p?n:new Xv(nn(n)),D=r||this.parentInjector;if(!o&&null==x.ngModule){const be=(p?D:this.parentInjector).get(Fr,null);be&&(o=be)}nn(x.componentType??{});const Q=x.create(D,i,null,o,a,c);return this.insertImpl(Q.hostView,_,ym(this._hostTNode,null)),Q}insert(n,t){return this.insertImpl(n,t,!0)}insertImpl(n,t,r){const i=n._lView;if(function ke(e){return mo(e[3])}(i)){const c=this.indexOf(n);if(-1!==c)this.detach(c);else{const p=i[3],_=new vF(p,p[5],p[3]);_.detach(_.indexOf(n))}}const o=this._adjustIndex(t),a=this._lContainer;return A_(a,i,o,r),n.attachToViewContainerRef(),Nu(kS(a),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=bF(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=Vv(this._lContainer,t);r&&(ns(kS(this._lContainer),t),Fv(r[1],r))}detach(n){const t=this._adjustIndex(n,-1),r=Vv(this._lContainer,t);return r&&null!=ns(kS(this._lContainer),t)?new zv(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function bF(e){return e[8]}function kS(e){return e[8]||(e[8]=[])}function wF(e,n){let t;const r=n[e.index];return mo(r)?t=r:(t=AL(r,n,null,e),n[e.index]=t,QT(n,t)),xF(t,n,e,r),new vF(t,e,n)}let xF=function CF(e,n,t,r){if(e[7])return;let i;i=8&t.type?L(r):function tK(e,n){const t=e[11],r=t.createComment(""),i=j(n,e),o=t.parentNode(i);return pm(t,o,r,t.nextSibling(i),!1),r}(n,t),e[7]=i};class RS{queryList;matches=null;constructor(n){this.queryList=n}clone(){return new RS(this.queryList)}setDirty(){this.queryList.setDirty()}}class MS{queries;constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const r=null!==n.contentQueries?n.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const a=t.getByIndex(o);i.push(this.queries[a.indexInDeclarationView].clone())}return new MS(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==FS(n,t).matches&&this.queries[t].setDirty()}}class DF{flags;read;predicate;constructor(n,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof n?function lK(e){return e.split(",").map(n=>n.trim())}(n):n}}class PS{queries;constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(n,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new PS(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class OS{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(n,t=-1){this.metadata=n,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new OS(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(n,t,iK(t,o)),this.matchTNodeWithReadOption(n,t,Jg(t,n,o,!1,!1))}else r===wl?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,Jg(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Pr||i===El||i===wl&&4&t.type)this.addMatch(t.index,-2);else{const o=Jg(t,n,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function iK(e,n){const t=e.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1];return null}function sK(e,n,t,r){return-1===t?function oK(e,n){return 11&e.type?nh(e,n):4&e.type?tE(e,n):null}(n,e):-2===t?function aK(e,n,t){return t===Pr?nh(n,e):t===wl?tE(n,e):t===El?wF(n,e):void 0}(e,n,r):Sf(e,e[1],t,n)}function TF(e,n,t,r){const i=n[18].queries[r];if(null===i.matches){const o=e.data,a=t.matches,c=[];for(let p=0;null!==a&&p<a.length;p+=2){const _=a[p];c.push(_<0?null:sK(n,o[_],a[p+1],t.metadata.read))}i.matches=c}return i.matches}function NS(e,n,t,r){const i=e.queries.getByIndex(t),o=i.matches;if(null!==o){const a=TF(e,n,i,t);for(let c=0;c<o.length;c+=2){const p=o[c];if(p>0)r.push(a[c/2]);else{const _=o[c+1],x=n[-p];for(let D=10;D<x.length;D++){const A=x[D];A[16]===A[3]&&NS(A[1],A,_,r)}if(null!==x[9]){const D=x[9];for(let A=0;A<D.length;A++){const O=D[A];NS(O[1],O,_,r)}}}}}return r}function SF(e,n,t){const r=new Ju(!(4&~t));return function ln(e,n,t,r){const i=at(n);i.push(t),e.firstCreatePass&&qt(e).push(r,i.length-1)}(e,n,r,r.destroy),(n[18]??=new MS).queries.push(new RS(r))-1}function AF(e,n,t){null===e.queries&&(e.queries=new PS),e.queries.track(new OS(n,t))}function FS(e,n){return e.queries.getByIndex(n)}function RF(e,n){const t=e[1],r=FS(t,n);return r.crossesNgTemplate?NS(t,e,n,[]):TF(t,e,r,n)}let gh=class{},FF=class{};class jS extends gh{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new _F(this);constructor(n,t,r,i=!0){super(),this.ngModuleType=n,this._parent=t;const o=ts(n);this._bootstrapComponents=rd(o.bootstrap),this._r3Injector=Lw(n,t,[{provide:gh,useValue:this},{provide:cE,useValue:this.componentFactoryResolver},...r],bn(n),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class BF extends FF{moduleType;constructor(n){super(),this.moduleType=n}create(n){return new jS(this.moduleType,n,[])}}class VF extends gh{injector;componentFactoryResolver=new _F(this);instance=null;constructor(n){super();const t=new na([...n.providers,{provide:gh,useValue:this},{provide:cE,useValue:this.componentFactoryResolver}],n.parent||Xl(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function mE(e,n,t=null){return new VF({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}let _K=(()=>{class e{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=Uc(0,t.type),i=r.length>0?mE([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Ue({token:e,providedIn:"environment",factory:()=>new e(wt(Fr))})}return e})();function vr(e){return oc(()=>{const n=UF(e),t={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===E.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:n.standalone?i=>i.get(_K).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||pc.Emulated,styles:e.styles||Tr,_:null,schemas:e.schemas||null,tView:null,id:""};n.standalone&&Wo("NgStandalone"),jF(t);const r=e.dependencies;return t.directiveDefs=gE(r,zF),t.pipeDefs=gE(r,no),t.id=function wK(e){let n=0;const r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,"function"==typeof e.consts?"":e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(const o of r.join("|"))n=Math.imul(31,n)+o.charCodeAt(0)|0;return n+=2147483648,"c"+n}(t),t})}function zF(e){return nn(e)||ti(e)}function wo(e){return oc(()=>({type:e.type,bootstrap:e.bootstrap||Tr,declarations:e.declarations||Tr,imports:e.imports||Tr,exports:e.exports||Tr,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function yK(e,n){if(null==e)return Ss;const t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];let o,a,c,p;Array.isArray(i)?(c=i[0],o=i[1],a=i[2]??o,p=i[3]||null):(o=i,a=i,c=Ux.None,p=null),t[o]=[r,c,p],n[o]=a}return t}function vK(e){if(null==e)return Ss;const n={};for(const t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}function At(e){return oc(()=>{const n=UF(e);return jF(n),n})}function Ha(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:e.standalone??!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function UF(e){const n={};return{type:e.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputConfig:e.inputs||Ss,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:!0===e.signals,selectors:e.selectors||Tr,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:yK(e.inputs,n),outputs:vK(e.outputs),debugInfo:null}}function jF(e){e.features?.forEach(n=>n(e))}function gE(e,n){return e?()=>{const t="function"==typeof e?e():e,r=[];for(const i of t){const o=n(i);null!==o&&r.push(o)}return r}:null}function $n(e){let n=function CK(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const r=[e];for(;n;){let i;if(os(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new se(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);const a=e;a.inputs=$S(e.inputs),a.declaredInputs=$S(e.declaredInputs),a.outputs=$S(e.outputs);const c=i.hostBindings;c&&kK(e,c);const p=i.viewQuery,_=i.contentQueries;if(p&&SK(e,p),_&&IK(e,_),DK(e,i),Rr(e.outputs,i.outputs),os(i)&&i.data.animation){const x=e.data;x.animation=(x.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let a=0;a<o.length;a++){const c=o[a];c&&c.ngInherit&&c(e),c===$n&&(t=!1)}}n=Object.getPrototypeOf(n)}!function TK(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=Df(i.hostAttrs,t=Df(t,i.hostAttrs))}}(r)}function DK(e,n){for(const t in n.inputs){if(!n.inputs.hasOwnProperty(t)||e.inputs.hasOwnProperty(t))continue;const r=n.inputs[t];void 0!==r&&(e.inputs[t]=r,e.declaredInputs[t]=n.declaredInputs[t])}}function $S(e){return e===Ss?{}:e===Tr?[]:e}function SK(e,n){const t=e.viewQuery;e.viewQuery=t?(r,i)=>{n(r,i),t(r,i)}:n}function IK(e,n){const t=e.contentQueries;e.contentQueries=t?(r,i,o)=>{n(r,i,o),t(r,i,o)}:n}function kK(e,n){const t=e.hostBindings;e.hostBindings=t?(r,i)=>{n(r,i),t(r,i)}:n}function ZF(e,n,t,r,i,o,a,c){if(t.firstCreatePass){e.mergedAttrs=Df(e.mergedAttrs,e.attrs);const x=e.tView=YT(2,e,i,o,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);null!==t.queries&&(t.queries.template(t,e),x.queries=t.queries.embeddedTView(e))}c&&(e.flags|=c),Rs(e,!1);const p=YF(t,n,e,r);Vg()&&aS(t,n,p,e),ge(p,n);const _=AL(p,n,p,e);n[r+27]=_,QT(n,_)}function Cm(e,n,t,r,i,o,a,c,p,_,x){const D=t+27;let A;if(n.firstCreatePass){if(A=vm(n,D,4,a||null,c||null),null!=_){const O=Ee(n.consts,_);A.localNames=[];for(let B=0;B<O.length;B+=2)A.localNames.push(O[B],-1)}}else A=n.data[D];return ZF(A,e,n,t,r,i,o,p),null!=_&&S_(e,A,x),A}function Jv(e,n,t,r,i,o,a,c){const p=Me(),_=Ft();return function AK(e,n,t,r,i,o,a,c,p,_,x){const D=t+27;let A;n.firstCreatePass?(A=vm(n,D,4,a||null,c||null),oo()&&sF(n,e,A,Ee(n.consts,_),uS),Wg(n,A)):A=n.data[D],ZF(A,e,n,t,r,i,o,p),qi(A)&&Wx(n,e,A),null!=_&&S_(e,A,x)}(p,_,e,n,t,r,i,Ee(_.consts,o),void 0,a,c),Jv}let YF=function XF(e,n,t,r){return $p(!0),n[11].createComment("")};let uB=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function fB(e){return function hB(e){return"function"==typeof e&&void 0!==e[Ve]}(e)&&"function"==typeof e.set}const IB=new Le("");function ib(e){return!!e&&"function"==typeof e.then}function AB(e){return!!e&&"function"==typeof e.subscribe}const RB=new Le("");function JS(e){return Oa([{provide:RB,multi:!0,useValue:e}])}let MB=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=Z(RB,{optional:!0})??[];injector=Z(Tn);constructor(){}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const o=Vi(this.injector,i);if(ib(o))t.push(o);else if(AB(o)){const a=new Promise((c,p)=>{o.subscribe({complete:c,error:p})});t.push(a)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const eI=new Le("");let Cl=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Z(pl);afterRenderManager=Z(tL);zonelessEnabled=Z(Gu);rootEffectScheduler=Z(qw);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new K;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=Z(Fa);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(cr(t=>!t))}constructor(){Z(D_,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=Z(Fr);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Tn.NULL){return this._injector.get(Jt).run(()=>{fr(yt.BootstrapComponentStart);const a=t instanceof rF;if(!this._injector.get(MB).done)throw new se(405,"");let p;p=a?t:this._injector.get(cE).resolveComponentFactory(t),this.componentTypes.push(p.componentType);const _=function zY(e){return e.isBoundToModule}(p)?void 0:this._injector.get(gh),D=p.create(i,[],r||p.selector,_),A=D.location.nativeElement,O=D.injector.get(IB,null);return O?.registerApplication(A),D.onDestroy(()=>{this.detachView(D.hostView),CE(this.components,D),O?.unregisterApplication(A)}),this._loadComponent(D),fr(yt.BootstrapComponentEnd,D),D})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){fr(yt.ChangeDetectionStart),null!==this.tracingSnapshot?this.tracingSnapshot.run(tS.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw fr(yt.ChangeDetectionEnd),new se(101,!1);const t=vt(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,vt(t),this.afterTick.next(),fr(yt.ChangeDetectionEnd)}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xl,null,{optional:!0}));let t=0;for(;0!==this.dirtyFlags&&t++<10;){fr(yt.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{fr(yt.ChangeDetectionSyncEnd)}}}synchronizeOnce(){16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews)(r||He(i))&&(eE(i,r&&!this.zonelessEnabled?0:1),t=!0);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>He(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;CE(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(eI,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>CE(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new se(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function CE(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function Ws(e,n,t,r){const i=Me();return ii(i,Gi(),n)&&(Ft(),function o9(e,n,t,r,i,o){const a=j(e,n);!function Kx(e,n,t,r,i,o,a){if(null==o)e.removeAttribute(n,i,t);else{const c=null==a?Yt(o):a(o,r||"",i);e.setAttribute(n,i,c,t)}}(n[11],a,o,e.value,t,r,i)}(Ao(),i,e,n,t,r)),Ws}typeof document<"u"&&document;Object.keys({disabled:"disabled",disabledReasons:"disabledReasons",dirty:"dirty",errors:"errors",hidden:"hidden",invalid:"invalid",max:"max",maxLength:"maxLength",min:"min",minLength:"minLength",name:"name",pattern:"pattern",pending:"pending",readonly:"readonly",required:"required",touched:"touched"});class hQ{destroy(n){}updateValue(n,t){}swap(n,t){const r=Math.min(n,t),i=Math.max(n,t),o=this.detach(i);if(i-r>1){const a=this.detach(r);this.attach(r,o),this.attach(i,a)}else this.attach(r,o)}move(n,t){this.attach(t,this.detach(n))}}function mI(e,n,t,r,i){return e===t&&Object.is(n,r)?1:Object.is(i(e,n),i(t,r))?-1:0}function gI(e,n,t,r){return!(void 0===n||!n.has(r)||(e.attach(t,n.get(r)),n.delete(r),0))}function nV(e,n,t,r,i){if(gI(e,n,r,t(r,i)))e.updateValue(r,i);else{const o=e.create(r,i);e.attach(r,o)}}function rV(e,n,t,r){const i=new Set;for(let o=n;o<=t;o++)i.add(r(o,e.at(o)));return i}class iV{kvMap=new Map;_vMap=void 0;has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;const t=this.kvMap.get(n);return void 0!==this._vMap&&this._vMap.has(t)?(this.kvMap.set(n,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,t){if(this.kvMap.has(n)){let r=this.kvMap.get(n);void 0===this._vMap&&(this._vMap=new Map);const i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(n,t)}forEach(n){for(let[t,r]of this.kvMap)if(n(r,t),void 0!==this._vMap){const i=this._vMap;for(;i.has(r);)r=i.get(r),n(r,t)}}}function mn(e,n,t,r,i,o,a,c){Wo("NgControlFlow");const p=Me(),_=Ft();return Cm(p,_,e,n,t,r,i,Ee(_.consts,o),256,a,c),_I}function _I(e,n,t,r,i,o,a,c){Wo("NgControlFlow");const p=Me(),_=Ft();return Cm(p,_,e,n,t,r,i,Ee(_.consts,o),512,a,c),_I}function gn(e,n){Wo("NgControlFlow");const t=Me(),r=Gi(),i=t[r]!==kr?t[r]:-1,o=-1!==i?NE(t,27+i):void 0;if(ii(t,r,e)){const c=vt(null);try{if(void 0!==o&&fS(o,0),-1!==e){const p=27+e,_=NE(t,p),x=vI(t[1],p),D=null;A_(_,I_(t,x,n,{dehydratedView:D}),0,ym(x,D))}}finally{vt(c)}}else if(void 0!==o){const c=RL(o,0);void 0!==c&&(c[8]=n)}}class pQ{lContainer;$implicit;$index;constructor(n,t,r){this.lContainer=n,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-10}}function yI(e){return e}function iu(e,n){return n}class mQ{hasEmptyBlock;trackByFn;liveCollection;constructor(n,t,r){this.hasEmptyBlock=n,this.trackByFn=t,this.liveCollection=r}}function ki(e,n,t,r,i,o,a,c,p,_,x,D,A){Wo("NgControlFlow");const O=Me(),B=Ft(),Q=void 0!==p,oe=Me(),be=c?a.bind(oe[15][8]):a,xe=new mQ(Q,be);oe[27+e]=xe,Cm(O,B,e+1,n,t,r,i,Ee(B.consts,o),256),Q&&Cm(O,B,e+2,p,_,x,D,Ee(B.consts,A),512)}class gQ extends hQ{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(n,t,r){super(),this.lContainer=n,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-10}at(n){return this.getLView(n)[8].$implicit}attach(n,t){const r=t[6];this.needsIndexUpdate||=n!==this.length,A_(this.lContainer,t,n,ym(this.templateTNode,r)),function _Q(e,n){if(e.length<=10)return;const r=e[10+n],i=r?r[26]:void 0;r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0&&(function j7(e,n){const t=e.get(Hx);if(n.detachedLeaveAnimationFns){for(const r of n.detachedLeaveAnimationFns)t.queue.delete(r);n.detachedLeaveAnimationFns=void 0}}(r[9],i),gm.delete(r[19]),i.detachedLeaveAnimationFns=void 0)}(this.lContainer,n)}detach(n){return this.needsIndexUpdate||=n!==this.length-1,function yQ(e,n){if(e.length<=10)return;const r=e[10+n],i=r?r[26]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}(this.lContainer,n),function vQ(e,n){return Vv(e,n)}(this.lContainer,n)}create(n,t){return I_(this.hostLView,this.templateTNode,new pQ(this.lContainer,t,n),{dehydratedView:null})}destroy(n){Fv(n[1],n)}updateValue(n,t){this.getLView(n)[8].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[8].$index=n}getLView(n){return function bQ(e,n){return RL(e,n)}(this.lContainer,n)}}function Ai(e){const n=vt(null),t=so();try{const r=Me(),i=r[1],o=r[t],a=t+1,c=NE(r,a);if(void 0===o.liveCollection){const _=vI(i,a);o.liveCollection=new gQ(c,r,_)}else o.liveCollection.reset();const p=o.liveCollection;if(function fQ(e,n,t,r){let i,o,a=0,c=e.length-1;if(Array.isArray(n)){vt(r);let _=n.length-1;for(vt(null);a<=c&&a<=_;){const x=e.at(a),D=n[a],A=mI(a,x,a,D,t);if(0!==A){A<0&&e.updateValue(a,D),a++;continue}const O=e.at(c),B=n[_],Q=mI(c,O,_,B,t);if(0!==Q){Q<0&&e.updateValue(c,B),c--,_--;continue}const oe=t(a,x),be=t(c,O),xe=t(a,D);if(Object.is(xe,be)){const $e=t(_,B);Object.is($e,oe)?(e.swap(a,c),e.updateValue(c,B),_--,c--):e.move(c,a),e.updateValue(a,D),a++;continue}if(i??=new iV,o??=rV(e,a,c,t),gI(e,i,a,xe))e.updateValue(a,D),a++,c++;else if(o.has(xe))i.set(oe,e.detach(a)),c--;else{const $e=e.create(a,n[a]);e.attach(a,$e),a++,c++}}for(;a<=_;)nV(e,i,t,a,n[a]),a++}else if(null!=n){vt(r);const _=n[Symbol.iterator]();vt(null);let x=_.next();for(;!x.done&&a<=c;){const D=e.at(a),A=x.value,O=mI(a,D,a,A,t);if(0!==O)O<0&&e.updateValue(a,A),a++,x=_.next();else{i??=new iV,o??=rV(e,a,c,t);const B=t(a,A);if(gI(e,i,a,B))e.updateValue(a,A),a++,c++,x=_.next();else if(o.has(B)){const Q=t(a,D);i.set(Q,e.detach(a)),c--}else e.attach(a,e.create(a,A)),a++,c++,x=_.next()}}for(;!x.done;)nV(e,i,t,e.length,x.value),x=_.next()}for(;a<=c;)e.destroy(e.detach(c--));i?.forEach(_=>{e.destroy(_)})}(p,e,o.trackByFn,n),p.updateIndexes(),o.hasEmptyBlock){const _=Gi(),x=0===p.length;if(ii(r,_,x)){const D=t+2,A=NE(r,D);if(x){const O=vI(i,D),B=null;A_(A,I_(r,O,void 0,{dehydratedView:B}),0,ym(O,B))}else i.firstUpdatePass&&function sE(e){const n=e[6]??[],r=e[3][11],i=[];for(const o of n)void 0!==o.data.di?i.push(o):XL(o,r);e[6]=i}(A),fS(A,0)}}}finally{vt(n)}}function NE(e,n){return e[n]}function vI(e,n){return J(e,n)}function Bn(e,n,t){const r=Me();return ii(r,Gi(),n)&&(Ft(),Zx(Ao(),r,e,n,r[11],t)),Bn}function bI(e,n,t,r,i){Qx(n,e,t,i?"class":"style",r)}function ce(e,n,t,r){const i=Me(),o=i[1],a=e+27,c=o.firstCreatePass?TS(a,i,2,n,uS,oo(),t,r):o.data[a];if(Yx(c,i,e,n,wI),qi(c)){const p=i[1];Wx(p,i,c),zT(p,c,i)}return null!=r&&S_(i,c),ce}function he(){const e=Ft(),t=Xx(Gt());return e.firstCreatePass&&SS(e,t),pi(t)&&go(),Br(),null!=t.classesWithoutHost&&function Zg(e){return!!(8&e.flags)}(t)&&bI(e,t,Me(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function ix(e){return!!(16&e.flags)}(t)&&bI(e,t,Me(),t.stylesWithoutHost,!1),he}function rn(e,n,t,r){return ce(e,n,t,r),he(),rn}function $t(e,n,t,r){const i=Me(),o=i[1],a=e+27,c=o.firstCreatePass?function dF(e,n,t,r,i,o){const a=n.consts,p=vm(n,e,t,r,Ee(a,i));if(p.mergedAttrs=Df(p.mergedAttrs,p.attrs),null!=o){const _=Ee(a,o);p.localNames=[];for(let x=0;x<_.length;x+=2)p.localNames.push(_[x],-1)}return null!==p.attrs&&dE(p,p.attrs,!1),null!==p.mergedAttrs&&dE(p,p.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,p),p}(a,o,2,n,t,r):o.data[a];return Yx(c,i,e,n,wI),null!=r&&S_(i,c),$t}function zt(){return pi(Xx(Gt()))&&go(),Br(),zt}function od(e,n,t,r){return $t(e,n,t,r),zt(),od}let wI=(e,n,t,r,i)=>($p(!0),Bx(n[11],r,function uT(){return Ye.lFrame.currentNamespace}()));function Hr(){return Me()}function sb(e,n,t){const r=Me();return ii(r,Gi(),n)&&(Ft(),cS(Ao(),r,e,n,r[11],t)),sb}const ab=void 0;var CQ=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ab,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ab,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202fa","h:mm:ss\u202fa","h:mm:ss\u202fa z","h:mm:ss\u202fa zzzz"],["{1}, {0}",ab,ab,ab],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function EQ(e){const n=Math.floor(Math.abs(e)),t=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===t?1:5}];let H_={};function ua(e){const n=function TQ(e){return e.toLowerCase().replace(/_/g,"-")}(e);let t=uV(n);if(t)return t;const r=n.split("-")[0];if(t=uV(r),t)return t;if("en"===r)return CQ;throw new se(701,!1)}function uV(e){return e in H_||(H_[e]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[e]),H_[e]}var gi=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(gi||{});const FE="en-US";let dV=FE;function Nt(e,n,t){const r=Me(),i=Ft(),o=Gt();return SI(i,r,r[11],o,e,n,t),Nt}function da(e,n,t){const r=Me(),i=Ft(),o=Gt();return(3&o.type||t)&&pE(o,i,r,t,r[11],e,n,ph(o,r,n)),da}function SI(e,n,t,r,i,o,a){let c=!0,p=null;if((3&r.type||a)&&(p??=ph(r,n,o),pE(r,e,n,a,t,i,o,p)&&(c=!1)),c){const _=r.outputs?.[i],x=r.hostDirectiveOutputs?.[i];if(x&&x.length)for(let D=0;D<x.length;D+=2){const A=x[D],O=x[D+1];p??=ph(r,n,o),P_(r,n,A,O,i,p)}if(_&&_.length)for(const D of _)p??=ph(r,n,o),P_(r,n,D,i,i,p)}}function Qe(e=1){return function aT(e){return(Ye.lFrame.contextLView=function Ze(e,n){for(;e>0;)n=n[14],e--;return n}(e,Ye.lFrame.contextLView))[8]}(e)}function fJ(e,n){let t=null;const r=function D7(e){const n=e.attrs;if(null!=n){const t=n.indexOf(5);if(!(1&t))return n[t+1]}return null}(e);for(let i=0;i<n.length;i++){const o=n[i];if("*"!==o){if(null===r?W2(e,o,!0):I7(r,o))return i}else t=i}return t}function UE(e,n=0,t,r,i,o){const a=Me(),c=Ft(),p=r?e+1:null;null!==p&&Cm(a,c,p,r,i,o,null,t);const _=vm(c,27+e,16,null,t||null);null===_.projection&&(_.projection=n),sa();const D=!a[6]||fi();null===a[15][5].projection[_.projection]&&null!==p?function pJ(e,n,t){const r=27+t,i=n.data[r],o=e[r];A_(o,I_(e,i,void 0,{dehydratedView:null}),0,ym(i,null))}(a,c,p):D&&!ch(_)&&function K7(e,n,t){gL(n[11],0,n,t,oS(e,t,n),dL(t.parent||n[5],t,n))}(c,a,_)}function II(e,n,t,r){return function kF(e,n,t,r){const i=Ft();if(i.firstCreatePass){const o=Gt();AF(i,new DF(n,t,r),o.index),function cK(e,n){const t=e.contentQueries||(e.contentQueries=[]);n!==(t.length?t[t.length-1]:-1)&&t.push(e.queries.length-1,n)}(i,e),!(2&~t)&&(i.staticContentQueries=!0)}return SF(i,Me(),t)}(e,n,t,r),II}function Mm(e,n,t){return function IF(e,n,t){const r=Ft();return r.firstCreatePass&&(AF(r,new DF(e,n,t),-1),!(2&~n)&&(r.staticViewQueries=!0)),SF(r,Me(),n)}(e,n,t),Mm}function Kf(e){const n=Me(),t=Ft(),r=Up();rc(r+1);const i=FS(t,r);if(e.dirty&&function pe(e){return!(4&~e[2])}(n)===!(2&~i.metadata.flags)){if(null===i.matches)e.reset([]);else{const o=RF(n,r);e.reset(o,_x),e.notifyOnChanges()}return!0}return!1}function Yf(){return function LS(e,n){return e[18].queries[n].queryList}(Me(),Up())}function jE(e,n){return e<<17|n<<2}function Pm(e){return e>>17&32767}function kI(e){return 2|e}function $_(e){return(131068&e)>>2}function AI(e,n){return-131069&e|n<<2}function RI(e){return 1|e}function PV(e,n,t,r){const i=e[t+1],o=null===n;let a=r?Pm(i):$_(i),c=!1;for(;0!==a&&(!1===c||o);){const _=e[a+1];xJ(e[a],n)&&(c=!0,e[a+1]=r?RI(_):kI(_)),a=r?Pm(_):$_(_)}c&&(e[t+1]=r?kI(i):RI(i))}function xJ(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&cl(e,n)>=0}const Zo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function OV(e){return e.substring(Zo.key,Zo.keyEnd)}function NV(e,n){const t=Zo.textEnd;return t===n?-1:(n=Zo.keyEnd=function TJ(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}(e,Zo.key=n,t),q_(e,n,t))}function q_(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function G_(e,n,t){return zV(e,n,t,!1),G_}function Dl(e,n){return zV(e,n,null,!0),Dl}function MI(e){!function UV(e,n,t,r){const i=Ft(),o=hl(2);i.firstUpdatePass&&HV(i,null,o,r);const a=Me();if(t!==kr&&ii(a,o,t)){const c=i.data[so()];if(WV(c,r)&&!jV(i,o)){let p=r?c.classesWithoutHost:c.stylesWithoutHost;null!==p&&(t=dn(p,t||"")),bI(i,c,a,t,r)}else!function BJ(e,n,t,r,i,o,a,c){i===kr&&(i=Tr);let p=0,_=0,x=0<i.length?i[0]:null,D=0<o.length?o[0]:null;for(;null!==x||null!==D;){const A=p<i.length?i[p+1]:void 0,O=_<o.length?o[_+1]:void 0;let Q,B=null;x===D?(p+=2,_+=2,A!==O&&(B=D,Q=O)):null===D||null!==x&&x<D?(p+=2,B=x):(_+=2,B=D,Q=O),null!==B&&qV(e,n,t,r,B,Q,a,c),x=p<i.length?i[p]:null,D=_<o.length?o[_]:null}}(i,c,a,a[11],a[o+1],a[o+1]=function LJ(e,n,t){if(null==t||""===t)return Tr;const r=[],i=yl(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if(i instanceof Set)for(const o of i)e(r,o,!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else"string"==typeof i&&n(r,i);return r}(e,n,t),r,o)}}(FJ,RJ,e,!0)}function RJ(e,n){for(let t=function CJ(e){return function FV(e){Zo.key=0,Zo.keyEnd=0,Zo.value=0,Zo.valueEnd=0,Zo.textEnd=e.length}(e),NV(e,q_(e,0,Zo.textEnd))}(n);t>=0;t=NV(n,t))Pa(e,OV(n),!0)}function zV(e,n,t,r){const i=Me(),o=Ft(),a=hl(2);o.firstUpdatePass&&HV(o,e,a,r),n!==kr&&ii(i,a,n)&&qV(o,o.data[so()],i,i[11],e,i[a+1]=function VJ(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=bn(yl(e)))),e}(n,t),r,a)}function jV(e,n){return n>=e.expandoStartIndex}function HV(e,n,t,r){const i=e.data;if(null===i[t+1]){const o=i[so()],a=jV(e,t);WV(o,r)&&null===n&&!a&&(n=!1),n=function MJ(e,n,t,r){const i=function Fg(e){const n=Ye.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let o=r?n.residualClasses:n.residualStyles;if(null===i)0===(r?n.classBindings:n.styleBindings)&&(t=fb(t=PI(null,e,n,t,r),n.attrs,r),o=null);else{const a=n.directiveStylingLast;if(-1===a||e[a]!==i)if(t=PI(i,e,n,t,r),null===o){let p=function PJ(e,n,t){const r=t?n.classBindings:n.styleBindings;if(0!==$_(r))return e[Pm(r)]}(e,n,r);void 0!==p&&Array.isArray(p)&&(p=PI(null,e,n,p[1],r),p=fb(p,n.attrs,r),function OJ(e,n,t,r){e[Pm(t?n.classBindings:n.styleBindings)]=r}(e,n,r,p))}else o=function NJ(e,n,t){let r;const i=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<i;o++)r=fb(r,e[o].hostAttrs,t);return fb(r,n.attrs,t)}(e,n,r)}return void 0!==o&&(r?n.residualClasses=o:n.residualStyles=o),t}(i,o,n,r),function bJ(e,n,t,r,i,o){let a=o?n.classBindings:n.styleBindings,c=Pm(a),p=$_(a);e[r]=t;let x,_=!1;if(Array.isArray(t)?(x=t[1],(null===x||cl(t,x)>0)&&(_=!0)):x=t,i)if(0!==p){const A=Pm(e[c+1]);e[r+1]=jE(A,c),0!==A&&(e[A+1]=AI(e[A+1],r)),e[c+1]=function yJ(e,n){return 131071&e|n<<17}(e[c+1],r)}else e[r+1]=jE(c,0),0!==c&&(e[c+1]=AI(e[c+1],r)),c=r;else e[r+1]=jE(p,0),0===c?c=r:e[p+1]=AI(e[p+1],r),p=r;_&&(e[r+1]=kI(e[r+1])),PV(e,x,r,!0),PV(e,x,r,!1),function wJ(e,n,t,r,i){const o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof n&&cl(o,n)>=0&&(t[r+1]=RI(t[r+1]))}(n,x,e,r,o),a=jE(c,p),o?n.classBindings=a:n.styleBindings=a}(i,o,n,t,a,r)}}function PI(e,n,t,r,i){let o=null;const a=t.directiveEnd;let c=t.directiveStylingLast;for(-1===c?c=t.directiveStart:c++;c<a&&(o=n[c],r=fb(r,o.hostAttrs,i),o!==e);)c++;return null!==e&&(t.directiveStylingLast=c),r}function fb(e,n,t){const r=t?1:2;let i=-1;if(null!==n)for(let o=0;o<n.length;o++){const a=n[o];"number"==typeof a?i=a:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Pa(e,a,!!t||n[++o]))}return void 0===e?null:e}function FJ(e,n,t){const r=String(n);""!==r&&!r.includes(" ")&&Pa(e,r,t)}function qV(e,n,t,r,i,o,a,c){if(!(3&n.type))return;const p=e.data,_=p[c+1],x=function vJ(e){return!(1&~e)}(_)?GV(p,n,t,i,$_(_),a):void 0;HE(x)||(HE(o)||function _J(e){return!(2&~e)}(_)&&(o=GV(p,null,t,i,c,a)),function X7(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:qf.DashCase;null==i?e.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=qf.Important),e.setStyle(t,r,i,o))}}(r,a,q(so(),t),i,o))}function GV(e,n,t,r,i,o){const a=null===n;let c;for(;i>0;){const p=e[i],_=Array.isArray(p),x=_?p[1]:p,D=null===x;let A=t[i+1];A===kr&&(A=D?Tr:void 0);let O=D?zc(A,r):x===r?A:void 0;if(_&&!HE(O)&&(O=zc(p,r)),HE(O)&&(c=O,a))return c;const B=e[i+1];i=a?Pm(B):$_(B)}if(null!==n){let p=o?n.residualClasses:n.residualStyles;null!=p&&(c=zc(p,r))}return c}function HE(e){return void 0!==e}function WV(e,n){return!!(e.flags&(n?8:16))}function fe(e,n=""){const t=Me(),r=Ft(),i=e+27,o=r.firstCreatePass?vm(r,i,1,n,null):r.data[i],a=ZV(r,t,o,n);t[i]=a,Vg()&&aS(r,t,a,o),Rs(o,!1)}let ZV=(e,n,t,r)=>($p(!0),function WT(e,n){return e.createText(n)}(n[11],r));function QV(e,n,t,r,i,o,a,c=""){const _=function fE(e,n,t,r,i){const o=xm(e,n,t,r);return ii(e,n+2,i)||o}(e,Mr(),t,i,a);return hl(3),_?n+Yt(t)+r+Yt(i)+o+Yt(a)+c:kr}function on(e){return Ko("",e),on}function Ko(e,n,t){const r=Me(),i=function YV(e,n,t,r=""){return ii(e,Gi(),t)?n+Yt(t)+r:kr}(r,e,n,t);return i!==kr&&_h(r,so(),i),Ko}function pb(e,n,t,r,i){const o=Me(),a=function XV(e,n,t,r,i,o=""){const c=xm(e,Mr(),t,i);return hl(2),c?n+Yt(t)+r+Yt(i)+o:kr}(o,e,n,t,r,i);return a!==kr&&_h(o,so(),a),pb}function OI(e,n,t,r,i,o,a){const c=Me(),p=QV(c,e,n,t,r,i,o,a);return p!==kr&&_h(c,so(),p),OI}function _h(e,n,t){const r=q(n,e);!function N2(e,n,t){e.setValue(n,t)}(e[11],r,t)}function Om(e,n,t){fB(n)&&(n=n());const r=Me();return ii(r,Gi(),n)&&(Ft(),Zx(Ao(),r,e,n,r[11],t)),Om}function W_(e,n){const t=fB(e);return t&&e.set(n),t}function Nm(e,n){const t=Me(),r=Ft(),i=Gt();return SI(r,t,t[11],i,e,n),Nm}function fz(e,n,t){const r=Ft();r.firstCreatePass&&pz(n,r.data,r.blueprint,os(e),t)}function pz(e,n,t,r,i){if(e=fn(e),Array.isArray(e))for(let o=0;o<e.length;o++)pz(e[o],n,t,r,i);else{const o=Ft(),a=Me(),c=Gt();let p=Ho(e)?e:fn(e.provide);const _=Ei(e),x=1048575&c.providerIndexes,D=c.directiveStart,A=c.providerIndexes>>20;if(Ho(e)||!e.multi){const O=new Xp(_,i,Re,null),B=LI(p,n,i?x:x+A,D);-1===B?(Jp(Zc(c,a),o,p),NI(o,e,n.length),n.push(p),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(O),a.push(O)):(t[B]=O,a[B]=O)}else{const O=LI(p,n,x+A,D),B=LI(p,n,x,x+A),oe=B>=0&&t[B];if(i&&!oe||!i&&!(O>=0&&t[O])){Jp(Zc(c,a),o,p);const be=function tee(e,n,t,r,i){const a=new Xp(e,t,Re,null);return a.multi=[],a.index=n,a.componentProviders=0,mz(a,i,r&&!t),a}(i?eee:JJ,t.length,i,r,_);!i&&oe&&(t[B].providerFactory=be),NI(o,e,n.length,0),n.push(p),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(be),a.push(be)}else NI(o,e,O>-1?O:B,mz(t[i?B:O],_,!i&&r));!i&&r&&oe&&t[B].componentProviders++}}}function NI(e,n,t,r){const i=Ho(n),o=function ta(e){return!!e.useClass}(n);if(i||o){const p=(o?fn(n.useClass):n).prototype.ngOnDestroy;if(p){const _=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){const x=_.indexOf(t);-1===x?_.push(t,[r,p]):_[x+1].push(r,p)}else _.push(t,p)}}}function mz(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function LI(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function JJ(e,n,t,r,i){return FI(this.multi,[])}function eee(e,n,t,r,i){const o=this.multi;let a;if(this.providerFactory){const c=this.providerFactory.componentProviders,p=Sf(r,r[1],this.providerFactory.index,i);a=p.slice(0,c),FI(o,a);for(let _=c;_<p.length;_++)a.push(p[_])}else a=[],FI(o,a);return a}function FI(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function Cr(e,n){return t=>{t.providersResolver=(r,i)=>fz(r,i?i(e):e,!1),n&&(t.viewProvidersResolver=(r,i)=>fz(r,i?i(n):n,!0))}}function wz(e,n,t,r,i,o,a,c,p){const _=n+t;return function mc(e,n,t,r,i,o){const a=xm(e,n,t,r);return xm(e,n+2,i,o)||a}(e,_,i,o,a,c)?id(e,_+4,p?r.call(p,i,o,a,c):r(i,o,a,c)):function mb(e,n){const t=e[n];return t===kr?void 0:t}(e,_+4)}function Lm(e,n){const t=Ft();let r;const i=e+27;t.firstCreatePass?(r=function pee(e,n){if(n)for(let t=n.length-1;t>=0;t--){const r=n[t];if(e===r.name)return r}}(n,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const o=r.factory||(r.factory=Ma(r.type)),c=xi(Re);try{const p=Qp(!1),_=o();return Qp(p),function ee(e,n,t,r){t>=e.data.length&&(e.data[t]=null,e.blueprint[t]=null),n[t]=r}(t,Me(),i,_),_}finally{xi(c)}}function Fm(e,n,t,r,i,o){const a=e+27,c=Me(),p=function ae(e,n){return e[n]}(c,a);return function gb(e,n){return e[1].data[n].pure}(c,a)?wz(c,Nn(),n,p.transform,t,r,i,o,p):p.transform(t,r,i,o)}class Wee{ngModuleFactory;componentFactories;constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let Zee=(()=>{class e{compileModuleSync(t){return new BF(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=rd(ts(t).declarations).reduce((a,c)=>{const p=nn(c);return p&&a.push(new Xv(p)),a},[]);return new Wee(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Yee=(()=>{class e{applicationErrorHandler=Z(pl);appRef=Z(Cl);taskService=Z(Fa);ngZone=Z(Jt);zonelessEnabled=Z(Gu);tracing=Z(D_,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Gn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Hg):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Z($w,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{const t=this.taskService.add();this.runningTick||(this.cleanup(),this.zonelessEnabled&&!this.appRef.includeAllTestViews)?(this.switchToMicrotaskScheduler(),this.taskService.remove(t)):this.taskService.remove(t)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{const t=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})})}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 0:case 6:case 13:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 12:this.appRef.dirtyFlags|=16;break;case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?tv:jg;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Hg+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(t),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const yh=new Le("",{factory:()=>Z(yh,{optional:!0,skipSelf:!0})||function Xee(){return typeof $localize<"u"&&$localize.locale||FE}()}),KE=Symbol("InputSignalNode#UNSET"),qz={...Ea,transformFn:void 0,applyValueToInputSignal(e,n){il(e,n)}};function Gz(e,n){const t=Object.create(qz);function r(){if(Co(t),t.value===KE)throw new se(-950,null);return t.value}return t.value=e,t.transformFn=n?.transform,r[Ve]=t,r}class ste{attributeName;constructor(n){this.attributeName=n}__NG_ELEMENT_ID__=()=>kf(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}}function Wz(e,n){return Gz(e,n)}const lte=(Wz.required=function ate(e){return Gz(KE,e)},Wz);let ute=(()=>{class e{zone=Z(Jt);changeDetectionScheduler=Z(bf);applicationRef=Z(Cl);applicationErrorHandler=Z(pl);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const dte=new Le("",{factory:()=>!1});function Xz(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}let pte=(()=>{class e{subscription=new Gn;initialized=!1;zone=Z(Jt);pendingTasks=Z(Fa);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Jt.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Jt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const YE=new Le(""),yte=new Le("");function yb(e){return!e.moduleRef}let Y_=null;let vh=(()=>class e{static __NG_ELEMENT_ID__=Fte})();function Fte(e){return function Bte(e,n,t){if(io(e)&&!t){const r=ie(e.index,n);return new zv(r,r)}return 175&e.type?new zv(n[15],n):null}(Gt(),Me(),!(16&~e))}function Wte(e){const{rootComponent:n,appProviders:t,platformProviders:r,platformRef:i}=e;fr(yt.BootstrapApplicationStart);try{const o=i?.injector??function Ete(e=[]){if(Y_)return Y_;const n=function rU(e=[],n){return Tn.create({name:n,providers:[{provide:hf,useValue:"platform"},{provide:YE,useValue:new Set([()=>Y_=null])},...e]})}(e);return Y_=n,function VY(){!function Sp(e){Fl=e}(()=>{throw new se(600,"")})}(),function iU(e){const n=e.get(gl,null);Vi(e,()=>{n?.forEach(t=>t())})}(n),n}(r),a=[[{provide:bf,useExisting:Yee},{provide:Jt,useClass:Uw},{provide:Gu,useValue:!0}],Hw,...t||[]];return function Jz(e){const n=yb(e)?e.r3Injector:e.moduleRef.injector,t=n.get(Jt);return t.run(()=>{yb(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();const r=n.get(pl);let i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),yb(e)){const o=()=>n.destroy(),a=e.platformInjector.get(YE);a.add(o),n.onDestroy(()=>{i.unsubscribe(),a.delete(o)})}else{const o=()=>e.moduleRef.destroy(),a=e.platformInjector.get(YE);a.add(o),e.moduleRef.onDestroy(()=>{CE(e.allPlatformModules,e.moduleRef),i.unsubscribe(),a.delete(o)})}return function bte(e,n,t){try{const r=t();return ib(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e(r)),r}}(r,t,()=>{const o=n.get(Fa),a=o.add(),c=n.get(MB);return c.runInitializers(),c.donePromise.then(()=>{if(function AQ(e){"string"==typeof e&&(dV=e.toLowerCase().replace(/_/g,"-"))}(n.get(yh,FE)||FE),!n.get(yte,!0))return yb(e)?n.get(Cl):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(yb(e)){const x=n.get(Cl);return void 0!==e.rootComponent&&x.bootstrap(e.rootComponent),x}return e.moduleRef}).finally(()=>{o.remove(a)})})})}({r3Injector:new VF({providers:a,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:o,rootComponent:n})}catch(o){return Promise.reject(o)}finally{fr(yt.BootstrapApplicationEnd)}}function hs(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function CU(e,n=NaN){return isNaN(parseFloat(e))||isNaN(Number(e))?n:Number(e)}function IU(e,n){const t=nn(e),r=n.elementInjector||Xl();return new Xv(t).create(r,n.projectableNodes,n.hostElement,n.environmentInjector,n.directives,n.bindings)}let kU=null;function Qf(){return kU}class dne{}let nC=(()=>{class e{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:()=>Z(fne),providedIn:"platform"})}return e})();const hne=new Le("");let fne=(()=>{class e extends nC{_location;_history;_doc=Z(Un);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Qf().getBaseHref(this._doc)}onPopState(t){const r=Qf().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Qf().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function AU(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}class RU{}function YI(e,n,t){return function DQ(e,n,t){"string"!=typeof n&&(t=n,n=e[gi.LocaleId]),n=n.toLowerCase().replace(/_/g,"-"),H_[n]=e,t&&(H_[n][gi.ExtraData]=t)}(e,n,t)}const MU="browser";let PU=(()=>{class e{static \u0275prov=Ue({token:e,providedIn:"root",factory:()=>new gne(Z(Un),window)})}return e})();class gne{document;window;offset=()=>[0,0];constructor(n,t){this.document=n,this.window=t}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n,t){this.window.scrollTo({...t,left:n[0],top:n[1]})}scrollToAnchor(n,t){const r=function _ne(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const a=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(a)return a}i=r.nextNode()}}return null}(this.document,n);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(n){try{this.window.history.scrollRestoration=n}catch{console.warn(Lt(2400,!1))}}scrollToElement(n,t){const r=n.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo({...t,left:i-a[0],top:o-a[1]})}}class $U{_doc;constructor(n){this._doc=n}manager}let ek=(()=>{class e extends $U{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(wt(Un))};static \u0275prov=Ue({token:e,factory:e.\u0275fac})}return e})();const tk=new Le("");let qU=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(a=>{a.manager=this});const i=t.filter(a=>!(a instanceof ek));this._plugins=i.slice().reverse();const o=t.find(a=>a instanceof ek);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new se(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||e)(wt(tk),wt(Jt))};static \u0275prov=Ue({token:e,factory:e.\u0275fac})}return e})();const nk="ng-app-id";function GU(e){for(const n of e)n.remove()}function WU(e,n){const t=n.createElement("style");return t.textContent=e,t}function rk(e,n){const t=n.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),t}let ZU=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,function qne(e,n,t,r){const i=e.head?.querySelectorAll(`style[${nk}="${n}"],link[${nk}="${n}"]`);if(i)for(const o of i)o.removeAttribute(nk),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(const i of t)this.addUsage(i,this.inline,WU);r?.forEach(i=>this.addUsage(i,this.external,rk))}removeStyles(t,r){for(const i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){const o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,i(t,this.doc)))})}removeUsage(t,r){const i=r.get(t);i&&(i.usage--,i.usage<=0&&(GU(i.elements),r.delete(t)))}ngOnDestroy(){for(const[,{elements:t}]of[...this.inline,...this.external])GU(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(const[r,{elements:i}]of this.inline)i.push(this.addElement(t,WU(r,this.doc)));for(const[r,{elements:i}]of this.external)i.push(this.addElement(t,rk(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||e)(wt(Un),wt(yr),wt(Nr,8),wt(ds))};static \u0275prov=Ue({token:e,factory:e.\u0275fac})}return e})();const ik={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ok=/%COMP%/g,Xne=new Le("",{factory:()=>!0});function YU(e,n){return n.map(t=>t.replace(ok,e))}let sk=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,o,a,c,p=null,_=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.ngZone=c,this.nonce=p,this.tracingService=_,this.defaultRenderer=new ak(t,a,c,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof JU?i.applyToHost(t):i instanceof lk&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const a=this.doc,c=this.ngZone,p=this.eventManager,_=this.sharedStylesHost,x=this.removeStylesOnCompDestroy,D=this.tracingService;switch(r.encapsulation){case pc.Emulated:o=new JU(p,_,r,this.appId,x,a,c,D);break;case pc.ShadowDom:return new QU(p,t,r,a,c,this.nonce,D,_);case pc.ExperimentalIsolatedShadowDom:return new QU(p,t,r,a,c,this.nonce,D);default:o=new lk(p,_,r,x,a,c,D)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||e)(wt(qU),wt(ZU),wt(yr),wt(Xne),wt(Un),wt(Jt),wt(Nr),wt(D_,8))};static \u0275prov=Ue({token:e,factory:e.\u0275fac})}return e})();class ak{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,t,r,i){this.eventManager=n,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(n,t){return t?this.doc.createElementNS(ik[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(XU(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(XU(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){t.remove()}selectRootElement(n,t){let r="string"==typeof n?this.doc.querySelector(n):n;if(!r)throw new se(-5104,!1);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;const o=ik[i];o?n.setAttributeNS(o,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const i=ik[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(qf.DashCase|qf.Important)?n.style.setProperty(t,r,i&qf.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&qf.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){null!=n&&(n[t]=r)}setValue(n,t){n.nodeValue=t}listen(n,t,r,i){if("string"==typeof n&&!(n=Qf().getGlobalEventTarget(this.doc,n)))throw new se(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(n,t,o)),this.eventManager.addEventListener(n,t,o,i)}decoratePreventDefault(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&t.preventDefault()}}}function XU(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class QU extends ak{hostEl;sharedStylesHost;shadowRoot;constructor(n,t,r,i,o,a,c,p){super(n,i,o,c),this.hostEl=t,this.sharedStylesHost=p,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let _=r.styles;_=YU(r.id,_);for(const D of _){const A=document.createElement("style");a&&A.setAttribute("nonce",a),A.textContent=D,this.shadowRoot.appendChild(A)}const x=r.getExternalStyles?.();if(x)for(const D of x){const A=rk(D,i);a&&A.setAttribute("nonce",a),this.shadowRoot.appendChild(A)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(null,t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}}class lk extends ak{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,t,r,i,o,a,c,p){super(n,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let _=r.styles;this.styles=p?YU(p,_):_,this.styleUrls=r.getExternalStyles?.(p)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&0===gm.size&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class JU extends lk{contentAttr;hostAttr;constructor(n,t,r,i,o,a,c,p){const _=i+"-"+r.id;super(n,t,r,o,a,c,p,_),this.contentAttr=function Qne(e){return"_ngcontent-%COMP%".replace(ok,e)}(_),this.hostAttr=function Jne(e){return"_nghost-%COMP%".replace(ok,e)}(_)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}class ck extends dne{supportsDOMEvents=!0;static makeCurrent(){!function une(e){kU??=e}(new ck)}onAndCancel(n,t,r,i){return n.addEventListener(t,r,i),()=>{n.removeEventListener(t,r,i)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.remove()}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function tre(){return Eb=Eb||document.head.querySelector("base"),Eb?Eb.getAttribute("href"):null}();return null==t?null:function nre(e){return new URL(e,document.baseURI).pathname}(t)}resetBaseElement(){Eb=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return AU(document.cookie,n)}}let Eb=null,ire=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac})}return e})();const e3=["alt","control","meta","shift"],ore={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sre={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};function uk(){return(uk=_e(function*(e,n,t){return Wte({rootComponent:e,...t3(n,t)})})).apply(this,arguments)}function t3(e,n){return{platformRef:n?.platformRef,appProviders:[...pre,...e?.providers??[]],platformProviders:hre}}const hre=[{provide:ds,useValue:MU},{provide:gl,useValue:function cre(){ck.makeCurrent()},multi:!0},{provide:Un,useFactory:function dre(){return function vo(e){yo=e}(document),document}}],pre=[{provide:hf,useValue:"root"},{provide:vf,useFactory:function ure(){return new vf}},{provide:tk,useClass:ek,multi:!0},{provide:tk,useClass:(()=>{class e extends $U{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,i,o){const a=e.parseEventName(r),c=e.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qf().onAndCancel(t,a.domEventName,c,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),e3.forEach(_=>{const x=r.indexOf(_);x>-1&&(r.splice(x,1),a+=_+".")}),a+=o,0!=r.length||0===o.length)return null;const p={};return p.domEventName=i,p.fullKey=a,p}static matchEventFullKeyCode(t,r){let i=ore[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),e3.forEach(a=>{a!==i&&(0,sre[a])(t)&&(o+=a+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{e.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static \u0275fac=function(r){return new(r||e)(wt(Un))};static \u0275prov=Ue({token:e,factory:e.\u0275fac})}return e})(),multi:!0},sk,ZU,qU,{provide:xl,useExisting:sk},{provide:RU,useClass:ire},[]];var _n=function(e){return e[e.State=0]="State",e[e.Transition=1]="Transition",e[e.Sequence=2]="Sequence",e[e.Group=3]="Group",e[e.Animate=4]="Animate",e[e.Keyframes=5]="Keyframes",e[e.Style=6]="Style",e[e.Trigger=7]="Trigger",e[e.Reference=8]="Reference",e[e.AnimateChild=9]="AnimateChild",e[e.AnimateRef=10]="AnimateRef",e[e.Query=11]="Query",e[e.Stagger=12]="Stagger",e}(_n||{});const bh="*";function n3(e){return{type:_n.Style,styles:e,offset:null}}class Cb{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(n=0,t=0){this.totalTime=n+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class r3{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(n){this.players=n;let t=0,r=0,i=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++t==o&&this._onFinish()}),a.onDestroy(()=>{++r==o&&this._onDestroy()}),a.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((a,c)=>Math.max(a,c.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const t=n*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const n=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function i3(e){return new se(3e3,!1)}function Dre(e){return new se(3002,!1)}function Jf(e){switch(e.length){case 0:return new Cb;case 1:return e[0];default:return new r3(e)}}function o3(e,n,t=new Map,r=new Map){const i=[],o=[];let a=-1,c=null;if(n.forEach(p=>{const _=p.get("offset"),x=_==a,D=x&&c||new Map;p.forEach((A,O)=>{let B=O,Q=A;if("offset"!==O)switch(B=e.normalizePropertyName(B,i),Q){case"!":Q=t.get(O);break;case bh:Q=r.get(O);break;default:Q=e.normalizeStyleValue(O,B,Q,i)}D.set(B,Q)}),x||o.push(D),c=D,a=_}),i.length)throw function Lre(){return new se(3502,!1)}();return o}function pk(e,n,t,r){switch(n){case"start":e.onStart(()=>r(t&&mk(t,"start",e)));break;case"done":e.onDone(()=>r(t&&mk(t,"done",e)));break;case"destroy":e.onDestroy(()=>r(t&&mk(t,"destroy",e)))}}function mk(e,n,t){const o=gk(e.element,e.triggerName,e.fromState,e.toState,n||e.phaseName,t.totalTime??e.totalTime,!!t.disabled),a=e._data;return null!=a&&(o._data=a),o}function gk(e,n,t,r,i="",o=0,a){return{element:e,triggerName:n,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!a}}function Tl(e,n,t){let r=e.get(n);return r||e.set(n,r=t),r}function s3(e){const n=e.indexOf(":");return[e.substring(1,n),e.slice(n+1)]}const Zre=typeof document>"u"?null:document.documentElement;function _k(e){const n=e.parentNode||e.host||null;return n===Zre?null:n}let Vm=null,a3=!1;function l3(e,n){for(;n;){if(n===e)return!0;n=_k(n)}return!1}function c3(e,n,t){if(t)return Array.from(e.querySelectorAll(n));const r=e.querySelector(n);return r?[r]:[]}const d3="ng-enter",yk="ng-leave",aC="ng-trigger",lC=".ng-trigger",h3="ng-animating",vk=".ng-animating";function wh(e){if("number"==typeof e)return e;const n=e.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:bk(parseFloat(n[1]),n[2])}function bk(e,n){return"s"===n?1e3*e:e}function cC(e,n,t){return e.hasOwnProperty("duration")?e:function tie(e,n,t){let r,i=0,o="";if("string"==typeof e){const a=e.match(eie);if(null===a)return n.push(i3()),{duration:0,delay:0,easing:""};r=bk(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(i=bk(parseFloat(c),a[4]));const p=a[5];p&&(o=p)}else r=e;if(!t){let a=!1,c=n.length;r<0&&(n.push(function gre(){return new se(3100,!1)}()),a=!0),i<0&&(n.push(function _re(){return new se(3101,!1)}()),a=!0),a&&n.splice(c,0,i3())}return{duration:r,delay:i,easing:o}}(e,n,t)}const eie=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function sd(e,n,t){n.forEach((r,i)=>{const o=xk(i);t&&!t.has(i)&&t.set(i,e.style[o]),e.style[o]=r})}function zm(e,n){n.forEach((t,r)=>{const i=xk(r);e.style[i]=""})}function Db(e){return Array.isArray(e)?1==e.length?e[0]:function mre(e,n=null){return{type:_n.Sequence,steps:e,options:n}}(e):e}const wk=new RegExp("{{\\s*(.+?)\\s*}}","g");function f3(e){let n=[];if("string"==typeof e){let t;for(;t=wk.exec(e);)n.push(t[1]);wk.lastIndex=0}return n}function Tb(e,n,t){const r=`${e}`,i=r.replace(wk,(o,a)=>{let c=n[a];return null==c&&(t.push(function vre(){return new se(3003,!1)}()),c=""),c.toString()});return i==r?e:i}const iie=/-+([a-z0-9])/g;function xk(e){return e.replace(iie,(...n)=>n[1].toUpperCase())}function Sl(e,n,t){switch(n.type){case _n.Trigger:return e.visitTrigger(n,t);case _n.State:return e.visitState(n,t);case _n.Transition:return e.visitTransition(n,t);case _n.Sequence:return e.visitSequence(n,t);case _n.Group:return e.visitGroup(n,t);case _n.Animate:return e.visitAnimate(n,t);case _n.Keyframes:return e.visitKeyframes(n,t);case _n.Style:return e.visitStyle(n,t);case _n.Reference:return e.visitReference(n,t);case _n.AnimateChild:return e.visitAnimateChild(n,t);case _n.AnimateRef:return e.visitAnimateRef(n,t);case _n.Query:return e.visitQuery(n,t);case _n.Stagger:return e.visitStagger(n,t);default:throw function bre(){return new se(3004,!1)}()}}function Ek(e,n){return window.getComputedStyle(e)[n]}let Ck=(()=>{class e{validateStyleProperty(t){return function Yre(e){Vm||(Vm=function Xre(){return typeof document<"u"?document.body:null}()||{},a3=!!Vm.style&&"WebkitAppearance"in Vm.style);let n=!0;return Vm.style&&!function Kre(e){return"ebkit"==e.substring(1,6)}(e)&&(n=e in Vm.style,!n&&a3&&(n="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in Vm.style)),n}(t)}containsElement(t,r){return l3(t,r)}getParentElement(t){return _k(t)}query(t,r,i){return c3(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,a,c=[],p){return new Cb(i,o)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac})}return e})();class Dk{static NOOP=new Ck}class Tk{}const lie=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class p3 extends Tk{normalizePropertyName(n,t){return xk(n)}normalizeStyleValue(n,t,r,i){let o="";const a=r.toString().trim();if(lie.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const c=r.match(/^[+-]?[\d\.]+([a-z]*)$/);c&&0==c[1].length&&i.push(function wre(){return new se(3005,!1)}())}return a+o}}const dC=new Set(["true","1"]),hC=new Set(["false","0"]);function m3(e,n){const t=dC.has(e)||hC.has(e),r=dC.has(n)||hC.has(n);return(i,o)=>{let a="*"==e||e==i,c="*"==n||n==o;return!a&&t&&"boolean"==typeof i&&(a=i?dC.has(e):hC.has(e)),!c&&r&&"boolean"==typeof o&&(c=o?dC.has(n):hC.has(n)),a&&c}}const hie=new RegExp("s*:selfs*,?","g");function Ik(e,n,t,r){return new fie(e).build(n,t,r)}class fie{_driver;constructor(n){this._driver=n}build(n,t,r){const i=new gie(t);return this._resetContextStyleTimingState(i),Sl(this,Db(n),i)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],a=[];return"@"==n.name.charAt(0)&&t.errors.push(function xre(){return new se(3006,!1)}()),n.definitions.forEach(c=>{if(this._resetContextStyleTimingState(t),c.type==_n.State){const p=c,_=p.name;_.toString().split(/\s*,\s*/).forEach(x=>{p.name=x,o.push(this.visitState(p,t))}),p.name=_}else if(c.type==_n.Transition){const p=this.visitTransition(c,t);r+=p.queryCount,i+=p.depCount,a.push(p)}else t.errors.push(function Ere(){return new se(3007,!1)}())}),{type:_n.Trigger,name:n.name,states:o,transitions:a,queryCount:r,depCount:i,options:null}}visitState(n,t){const r=this.visitStyle(n.styles,t),i=n.options&&n.options.params||null;if(r.containsDynamicStyles){const o=new Set,a=i||{};r.styles.forEach(c=>{c instanceof Map&&c.forEach(p=>{f3(p).forEach(_=>{a.hasOwnProperty(_)||o.add(_)})})}),o.size&&t.errors.push(function Cre(){return new se(3008,!1)}(0,o.values()))}return{type:_n.State,name:n.name,style:r,options:i?{params:i}:null}}visitTransition(n,t){t.queryCount=0,t.depCount=0;const r=Sl(this,Db(n.animation),t),i=function cie(e,n){const t=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(r=>function uie(e,n,t){if(":"==e[0]){const p=function die(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return n.push(function Ore(){return new se(3016,!1)}()),"* => *"}}(e,t);if("function"==typeof p)return void n.push(p);e=p}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Pre(){return new se(3015,!1)}()),n;const i=r[1],o=r[2],a=r[3];n.push(m3(i,a)),"<"==o[0]&&("*"!=i||"*"!=a)&&n.push(m3(a,i))}(r,t,n)):t.push(e),t}(n.expr,t.errors);return{type:_n.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Um(n.options)}}visitSequence(n,t){return{type:_n.Sequence,steps:n.steps.map(r=>Sl(this,r,t)),options:Um(n.options)}}visitGroup(n,t){const r=t.currentTime;let i=0;const o=n.steps.map(a=>{t.currentTime=r;const c=Sl(this,a,t);return i=Math.max(i,t.currentTime),c});return t.currentTime=i,{type:_n.Group,steps:o,options:Um(n.options)}}visitAnimate(n,t){const r=function yie(e,n){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return kk(cC(e,n).duration,0,"");const t=e;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=kk(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=cC(t,n);return kk(i.duration,i.delay,i.easing)}(n.timings,t.errors);t.currentAnimateTimings=r;let i,o=n.styles?n.styles:n3({});if(o.type==_n.Keyframes)i=this.visitKeyframes(o,t);else{let a=n.styles,c=!1;if(!a){c=!0;const _={};r.easing&&(_.easing=r.easing),a=n3(_)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(a,t);p.isEmptyStep=c,i=p}return t.currentAnimateTimings=null,{type:_n.Animate,timings:r,style:i,options:null}}visitStyle(n,t){const r=this._makeStyleAst(n,t);return this._validateStyleAst(r,t),r}_makeStyleAst(n,t){const r=[],i=Array.isArray(n.styles)?n.styles:[n.styles];for(let c of i)"string"==typeof c?c===bh?r.push(c):t.errors.push(Dre()):r.push(new Map(Object.entries(c)));let o=!1,a=null;return r.forEach(c=>{if(c instanceof Map&&(c.has("easing")&&(a=c.get("easing"),c.delete("easing")),!o))for(let p of c.values())if(p.toString().indexOf("{{")>=0){o=!0;break}}),{type:_n.Style,styles:r,easing:a,offset:n.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(n,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),n.styles.forEach(a=>{"string"!=typeof a&&a.forEach((c,p)=>{const _=t.collectedStyles.get(t.currentQuerySelector),x=_.get(p);let D=!0;x&&(o!=i&&o>=x.startTime&&i<=x.endTime&&(t.errors.push(function Tre(){return new se(3010,!1)}()),D=!1),o=x.startTime),D&&_.set(p,{startTime:o,endTime:i}),t.options&&function rie(e,n,t){const r=n.params||{},i=f3(e);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function yre(){return new se(3001,!1)}())})}(c,t.options,t.errors)})})}visitKeyframes(n,t){const r={type:_n.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Sre(){return new se(3011,!1)}()),r;let o=0;const a=[];let c=!1,p=!1,_=0;const x=n.steps.map(be=>{const xe=this._makeStyleAst(be,t);let $e=null!=xe.offset?xe.offset:function _ie(e){if("string"==typeof e)return null;let n=null;if(Array.isArray(e))e.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;n=parseFloat(r.get("offset")),r.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const t=e;n=parseFloat(t.get("offset")),t.delete("offset")}return n}(xe.styles),De=0;return null!=$e&&(o++,De=xe.offset=$e),p=p||De<0||De>1,c=c||De<_,_=De,a.push(De),xe});p&&t.errors.push(function Ire(){return new se(3012,!1)}()),c&&t.errors.push(function kre(){return new se(3200,!1)}());const D=n.steps.length;let A=0;o>0&&o<D?t.errors.push(function Are(){return new se(3202,!1)}()):0==o&&(A=1/(D-1));const O=D-1,B=t.currentTime,Q=t.currentAnimateTimings,oe=Q.duration;return x.forEach((be,xe)=>{const $e=A>0?xe==O?1:A*xe:a[xe],De=$e*oe;t.currentTime=B+Q.delay+De,Q.duration=De,this._validateStyleAst(be,t),be.offset=$e,r.styles.push(be)}),r}visitReference(n,t){return{type:_n.Reference,animation:Sl(this,Db(n.animation),t),options:Um(n.options)}}visitAnimateChild(n,t){return t.depCount++,{type:_n.AnimateChild,options:Um(n.options)}}visitAnimateRef(n,t){return{type:_n.AnimateRef,animation:this.visitReference(n.animation,t),options:Um(n.options)}}visitQuery(n,t){const r=t.currentQuerySelector,i=n.options||{};t.queryCount++,t.currentQuery=n;const[o,a]=function pie(e){const n=!!e.split(/\s*,\s*/).find(t=>":self"==t);return n&&(e=e.replace(hie,"")),e=e.replace(/@\*/g,lC).replace(/@\w+/g,t=>lC+"-"+t.slice(1)).replace(/:animating/g,vk),[e,n]}(n.selector);t.currentQuerySelector=r.length?r+" "+o:o,Tl(t.collectedStyles,t.currentQuerySelector,new Map);const c=Sl(this,Db(n.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:_n.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:a,animation:c,originalSelector:n.selector,options:Um(n.options)}}visitStagger(n,t){t.currentQuery||t.errors.push(function Rre(){return new se(3013,!1)}());const r="full"===n.timings?{duration:0,delay:0,easing:"full"}:cC(n.timings,t.errors,!0);return{type:_n.Stagger,animation:Sl(this,Db(n.animation),t),timings:r,options:null}}}class gie{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(n){this.errors=n}}function Um(e){return e?(e={...e}).params&&(e.params=function mie(e){return e?{...e}:null}(e.params)):e={},e}function kk(e,n,t){return{duration:e,delay:n,easing:t}}function Ak(e,n,t,r,i,o,a=null,c=!1){return{type:1,element:e,keyframes:n,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:a,subTimeline:c}}class fC{_map=new Map;get(n){return this._map.get(n)||[]}append(n,t){let r=this._map.get(n);r||this._map.set(n,r=[]),r.push(...t)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const wie=new RegExp(":enter","g"),Eie=new RegExp(":leave","g");function Rk(e,n,t,r,i,o=new Map,a=new Map,c,p,_=[]){return(new Cie).buildKeyframes(e,n,t,r,i,o,a,c,p,_)}class Cie{buildKeyframes(n,t,r,i,o,a,c,p,_,x=[]){_=_||new fC;const D=new Mk(n,t,_,i,o,x,[]);D.options=p;const A=p.delay?wh(p.delay):0;D.currentTimeline.delayNextStep(A),D.currentTimeline.setStyles([a],null,D.errors,p),Sl(this,r,D);const O=D.timelines.filter(B=>B.containsAnimation());if(O.length&&c.size){let B;for(let Q=O.length-1;Q>=0;Q--){const oe=O[Q];if(oe.element===t){B=oe;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([c],null,D.errors,p)}return O.length?O.map(B=>B.buildKeyframes()):[Ak(t,[],[],[],0,A,"",!1)]}visitTrigger(n,t){}visitState(n,t){}visitTransition(n,t){}visitAnimateChild(n,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(n.options),o=t.currentTimeline.currentTime,a=this._visitSubInstructions(r,i,i.options);o!=a&&t.transformIntoNewTimeline(a)}t.previousNode=n}visitAnimateRef(n,t){const r=t.createSubContext(n.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],t,r),this.visitReference(n.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=n}_applyAnimationRefDelays(n,t,r){for(const i of n){const o=i?.delay;if(o){const a="number"==typeof o?o:wh(Tb(o,i?.params??{},t.errors));r.delayNextStep(a)}}}_visitSubInstructions(n,t,r){let o=t.currentTimeline.currentTime;const a=null!=r.duration?wh(r.duration):null,c=null!=r.delay?wh(r.delay):null;return 0!==a&&n.forEach(p=>{const _=t.appendInstructionToTimeline(p,a,c);o=Math.max(o,_.duration+_.delay)}),o}visitReference(n,t){t.updateOptions(n.options,!0),Sl(this,n.animation,t),t.previousNode=n}visitSequence(n,t){const r=t.subContextCount;let i=t;const o=n.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){i.previousNode.type==_n.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=pC);const a=wh(o.delay);i.delayNextStep(a)}n.steps.length&&(n.steps.forEach(a=>Sl(this,a,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=n}visitGroup(n,t){const r=[];let i=t.currentTimeline.currentTime;const o=n.options&&n.options.delay?wh(n.options.delay):0;n.steps.forEach(a=>{const c=t.createSubContext(n.options);o&&c.delayNextStep(o),Sl(this,a,c),i=Math.max(i,c.currentTimeline.currentTime),r.push(c.currentTimeline)}),r.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(i),t.previousNode=n}_visitTiming(n,t){if(n.dynamic){const r=n.strValue;return cC(t.params?Tb(r,t.params,t.errors):r,t.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,t){const r=t.currentAnimateTimings=this._visitTiming(n.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=n.style;o.type==_n.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=n}visitStyle(n,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||n.easing;n.isEmptyStep?r.applyEmptyStep(o):r.setStyles(n.styles,o,t.errors,t.options),t.previousNode=n}visitKeyframes(n,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,c=t.createSubContext().currentTimeline;c.easing=r.easing,n.styles.forEach(p=>{c.forwardTime((p.offset||0)*o),c.setStyles(p.styles,p.easing,t.errors,t.options),c.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(c),t.transformIntoNewTimeline(i+o),t.previousNode=n}visitQuery(n,t){const r=t.currentTimeline.currentTime,i=n.options||{},o=i.delay?wh(i.delay):0;o&&(t.previousNode.type===_n.Style||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=pC);let a=r;const c=t.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=c.length;let p=null;c.forEach((_,x)=>{t.currentQueryIndex=x;const D=t.createSubContext(n.options,_);o&&D.delayNextStep(o),_===t.element&&(p=D.currentTimeline),Sl(this,n.animation,D),D.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=n}visitStagger(n,t){const r=t.parentContext,i=t.currentTimeline,o=n.timings,a=Math.abs(o.duration),c=a*(t.currentQueryTotal-1);let p=a*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":p=c-p;break;case"full":p=r.currentStaggerTime}const x=t.currentTimeline;p&&x.delayNextStep(p);const D=x.currentTime;Sl(this,n.animation,t),t.previousNode=n,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const pC={};class Mk{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=pC;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(n,t,r,i,o,a,c,p){this._driver=n,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=a,this.timelines=c,this.currentTimeline=p||new mC(this._driver,t,0),c.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,t){if(!n)return;const r=n;let i=this.options;null!=r.duration&&(i.duration=wh(r.duration)),null!=r.delay&&(i.delay=wh(r.delay));const o=r.params;if(o){let a=i.params;a||(a=this.options.params={}),Object.keys(o).forEach(c=>{(!t||!a.hasOwnProperty(c))&&(a[c]=Tb(o[c],a,this.errors))})}}_copyOptions(){const n={};if(this.options){const t=this.options.params;if(t){const r=n.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return n}createSubContext(n=null,t,r){const i=t||this.element,o=new Mk(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(n),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(n){return this.previousNode=pC,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,t,r){const i={duration:t??n.duration,delay:this.currentTimeline.currentTime+(r??0)+n.delay,easing:""},o=new Die(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,i,n.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,t,r,i,o,a){let c=[];if(i&&c.push(this.element),n.length>0){n=(n=n.replace(wie,"."+this._enterClassName)).replace(Eie,"."+this._leaveClassName);let _=this._driver.query(this.element,n,1!=r);0!==r&&(_=r<0?_.slice(_.length+r,_.length):_.slice(0,r)),c.push(..._)}return!o&&0==c.length&&a.push(function Mre(){return new se(3014,!1)}()),c}}class mC{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(n,t,r,i){this._driver=n,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+n),t&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,t){return this.applyStylesToKeyframe(),new mC(this._driver,n,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,t){this._localTimelineStyles.set(n,t),this._globalTimelineStyles.set(n,t),this._styleSummary.set(n,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||bh),this._currentKeyframe.set(t,bh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},a=function Tie(e,n){const t=new Map;let r;return e.forEach(i=>{if("*"===i){r??=n.keys();for(let o of r)t.set(o,bh)}else for(let[o,a]of i)t.set(o,a)}),t}(n,this._globalTimelineStyles);for(let[c,p]of a){const _=Tb(p,o,r);this._pendingStyles.set(c,_),this._localTimelineStyles.has(c)||this._backFill.set(c,this._globalTimelineStyles.get(c)??bh),this._updateStyle(c,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,t)=>{this._currentKeyframe.set(t,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,n)}))}snapshotCurrentStyles(){for(let[n,t]of this._localTimelineStyles)this._pendingStyles.set(n,t),this._updateStyle(n,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let t in this._currentKeyframe)n.push(t);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((c,p)=>{const _=new Map([...this._backFill,...c]);_.forEach((x,D)=>{"!"===x?n.add(D):x===bh&&t.add(D)}),r||_.set("offset",p/this.duration),i.push(_)});const o=[...n.values()],a=[...t.values()];if(r){const c=i[0],p=new Map(c);c.set("offset",0),p.set("offset",1),i=[c,p]}return Ak(this.element,i,o,a,this.duration,this.startTime,this.easing,!1)}}class Die extends mC{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(n,t,r,i,o,a,c=!1){super(n,t,a.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=c,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],a=r+t,c=t/a,p=new Map(n[0]);p.set("offset",0),o.push(p);const _=new Map(n[0]);_.set("offset",y3(c)),o.push(_);const x=n.length-1;for(let D=1;D<=x;D++){let A=new Map(n[D]);const O=A.get("offset");A.set("offset",y3((t+O*r)/a)),o.push(A)}r=a,t=0,i="",n=o}return Ak(this.element,n,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function y3(e,n=3){const t=Math.pow(10,n-1);return Math.round(e*t)/t}function v3(e,n,t,r,i,o,a,c,p,_,x,D,A){return{type:0,element:e,triggerName:n,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:a,timelines:c,queriedElements:p,preStyleProps:_,postStyleProps:x,totalTime:D,errors:A}}const Pk={};class b3{_triggerName;ast;_stateStyles;constructor(n,t,r){this._triggerName=n,this.ast=t,this._stateStyles=r}match(n,t,r,i){return function Sie(e,n,t,r,i){return e.some(o=>o(n,t,r,i))}(this.ast.matchers,n,t,r,i)}buildStyles(n,t,r){let i=this._stateStyles.get("*");return void 0!==n&&(i=this._stateStyles.get(n?.toString())||i),i?i.buildStyles(t,r):new Map}build(n,t,r,i,o,a,c,p,_,x){const D=[],A=this.ast.options&&this.ast.options.params||Pk,B=this.buildStyles(r,c&&c.params||Pk,D),Q=p&&p.params||Pk,oe=this.buildStyles(i,Q,D),be=new Set,xe=new Map,$e=new Map,De="void"===i,we={params:w3(Q,A),delay:this.ast.options?.delay},Fe=x?[]:Rk(n,t,this.ast.animation,o,a,B,oe,we,_,D);let We=0;return Fe.forEach(ht=>{We=Math.max(ht.duration+ht.delay,We)}),D.length?v3(t,this._triggerName,r,i,De,B,oe,[],[],xe,$e,We,D):(Fe.forEach(ht=>{const en=ht.element,sn=Tl(xe,en,new Set);ht.preStyleProps.forEach(vi=>sn.add(vi));const Pi=Tl($e,en,new Set);ht.postStyleProps.forEach(vi=>Pi.add(vi)),en!==t&&be.add(en)}),v3(t,this._triggerName,r,i,De,B,oe,Fe,[...be.values()],xe,$e,We))}}function w3(e,n){const t={...n};return Object.entries(e).forEach(([r,i])=>{null!=i&&(t[r]=i)}),t}class Iie{styles;defaultParams;normalizer;constructor(n,t,r){this.styles=n,this.defaultParams=t,this.normalizer=r}buildStyles(n,t){const r=new Map,i=w3(n,this.defaultParams);return this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{a&&(a=Tb(a,i,t));const p=this.normalizer.normalizePropertyName(c,t);a=this.normalizer.normalizeStyleValue(c,p,a,t),r.set(c,a)})}),r}}class Aie{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(n,t,r){this.name=n,this.ast=t,this._normalizer=r,t.states.forEach(i=>{this.states.set(i.name,new Iie(i.style,i.options&&i.options.params||{},r))}),x3(this.states,"true","1"),x3(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new b3(n,i,this.states))}),this.fallbackTransition=function Rie(e,n){return new b3(e,{type:_n.Transition,animation:{type:_n.Sequence,steps:[],options:null},matchers:[(a,c)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,t,r,i){return this.transitionFactories.find(a=>a.match(n,t,r,i))||null}matchStyles(n,t,r){return this.fallbackTransition.buildStyles(n,t,r)}}function x3(e,n,t){e.has(n)?e.has(t)||e.set(t,e.get(n)):e.has(t)&&e.set(n,e.get(t))}const Mie=new fC;class Pie{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(n,t,r){this.bodyNode=n,this._driver=t,this._normalizer=r}register(n,t){const r=[],o=Ik(this._driver,t,r,[]);if(r.length)throw function Fre(){return new se(3503,!1)}();this._animations.set(n,o)}_buildPlayer(n,t,r){const i=n.element,o=o3(this._normalizer,n.keyframes,t,r);return this._driver.animate(i,o,n.duration,n.delay,n.easing,[],!0)}create(n,t,r={}){const i=[],o=this._animations.get(n);let a;const c=new Map;if(o?(a=Rk(this._driver,t,o,d3,yk,new Map,new Map,r,Mie,i),a.forEach(x=>{const D=Tl(c,x.element,new Map);x.postStyleProps.forEach(A=>D.set(A,null))})):(i.push(function Bre(){return new se(3300,!1)}()),a=[]),i.length)throw function Vre(){return new se(3504,!1)}();c.forEach((x,D)=>{x.forEach((A,O)=>{x.set(O,this._driver.computeStyle(D,O,bh))})});const _=Jf(a.map(x=>{const D=c.get(x.element);return this._buildPlayer(x,new Map,D)}));return this._playersById.set(n,_),_.onDestroy(()=>this.destroy(n)),this.players.push(_),_}destroy(n){const t=this._getPlayer(n);t.destroy(),this._playersById.delete(n);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(n){const t=this._playersById.get(n);if(!t)throw function zre(){return new se(3301,!1)}();return t}listen(n,t,r,i){const o=gk(t,"","","");return pk(this._getPlayer(n),r,o,i),()=>{}}command(n,t,r,i){if("register"==r)return void this.register(n,i[0]);if("create"==r)return void this.create(n,t,i[0]||{});const o=this._getPlayer(n);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(n)}}}const E3="ng-animate-queued",Ok="ng-animate-disabled",Bie=[],C3={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Vie={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ou="__ng_removed";class Nk{namespaceId;value;options;get params(){return this.options.params}constructor(n,t=""){this.namespaceId=t;const r=n&&n.hasOwnProperty("value");if(this.value=function Hie(e){return e??null}(r?n.value:n),r){const{value:o,...a}=n;this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const t=n.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Sb="void",Lk=new Nk(Sb);class zie{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(n,t,r){this.id=n,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+n,gc(t,this._hostClassName)}listen(n,t,r,i){if(!this._triggers.has(t))throw function Ure(){return new se(3302,!1)}();if(null==r||0==r.length)throw function jre(){return new se(3303,!1)}();if(!function $ie(e){return"start"==e||"done"==e}(r))throw function Hre(){return new se(3400,!1)}();const o=Tl(this._elementListeners,n,[]),a={name:t,phase:r,callback:i};o.push(a);const c=Tl(this._engine.statesByElement,n,new Map);return c.has(t)||(gc(n,aC),gc(n,aC+"-"+t),c.set(t,Lk)),()=>{this._engine.afterFlush(()=>{const p=o.indexOf(a);p>=0&&o.splice(p,1),this._triggers.has(t)||c.delete(t)})}}register(n,t){return!this._triggers.has(n)&&(this._triggers.set(n,t),!0)}_getTrigger(n){const t=this._triggers.get(n);if(!t)throw function $re(){return new se(3401,!1)}();return t}trigger(n,t,r,i=!0){const o=this._getTrigger(t),a=new Fk(this.id,t,n);let c=this._engine.statesByElement.get(n);c||(gc(n,aC),gc(n,aC+"-"+t),this._engine.statesByElement.set(n,c=new Map));let p=c.get(t);const _=new Nk(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&_.absorbOptions(p.options),c.set(t,_),p||(p=Lk),_.value!==Sb&&p.value===_.value){if(!function Wie(e,n){const t=Object.keys(e),r=Object.keys(n);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!n.hasOwnProperty(o)||e[o]!==n[o])return!1}return!0}(p.params,_.params)){const Q=[],oe=o.matchStyles(p.value,p.params,Q),be=o.matchStyles(_.value,_.params,Q);Q.length?this._engine.reportError(Q):this._engine.afterFlush(()=>{zm(n,oe),sd(n,be)})}return}const A=Tl(this._engine.playersByElement,n,[]);A.forEach(Q=>{Q.namespaceId==this.id&&Q.triggerName==t&&Q.queued&&Q.destroy()});let O=o.matchTransition(p.value,_.value,n,_.params),B=!1;if(!O){if(!i)return;O=o.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:t,transition:O,fromState:p,toState:_,player:a,isFallbackTransition:B}),B||(gc(n,E3),a.onStart(()=>{X_(n,E3)})),a.onDone(()=>{let Q=this.players.indexOf(a);Q>=0&&this.players.splice(Q,1);const oe=this._engine.playersByElement.get(n);if(oe){let be=oe.indexOf(a);be>=0&&oe.splice(be,1)}}),this.players.push(a),A.push(a),a}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(t=>t.delete(n)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const t=this._engine.playersByElement.get(n);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,t){const r=this._engine.driver.query(n,lC,!0);r.forEach(i=>{if(i[ou])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(a=>a.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(n,t,r,i){const o=this._engine.statesByElement.get(n),a=new Map;if(o){const c=[];if(o.forEach((p,_)=>{if(a.set(_,p.value),this._triggers.has(_)){const x=this.trigger(n,_,Sb,i);x&&c.push(x)}}),c.length)return this._engine.markElementAsRemoved(this.id,n,!0,t,a),r&&Jf(c).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const t=this._elementListeners.get(n),r=this._engine.statesByElement.get(n);if(t&&r){const i=new Set;t.forEach(o=>{const a=o.name;if(i.has(a))return;i.add(a);const p=this._triggers.get(a).fallbackTransition,_=r.get(a)||Lk,x=new Nk(Sb),D=new Fk(this.id,a,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:a,transition:p,fromState:_,toState:x,player:D,isFallbackTransition:!0})})}}removeNode(n,t){const r=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,t),this.triggerLeaveAnimation(n,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(n):[];if(o&&o.length)i=!0;else{let a=n;for(;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(n),i)r.markElementAsRemoved(this.id,n,!1,t);else{const o=n[ou];(!o||o===C3)&&(r.afterFlush(()=>this.clearElementCache(n)),r.destroyInnerAnimations(n),r._onRemovalComplete(n,t))}}insertNode(n,t){gc(n,this._hostClassName)}drainQueuedTransitions(n){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,a=this._elementListeners.get(o);a&&a.forEach(c=>{if(c.name==r.triggerName){const p=gk(o,r.triggerName,r.fromState.value,r.toState.value);p._data=n,pk(r.player,c.phase,p,c.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,a=i.transition.ast.depCount;return 0==o||0==a?o-a:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(n){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}}class Uie{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(n,t)=>{};_onRemovalComplete(n,t){this.onRemovalComplete(n,t)}constructor(n,t,r){this.bodyNode=n,this.driver=t,this._normalizer=r}get queuedPlayers(){const n=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&n.push(r)})}),n}createNamespace(n,t){const r=new zie(n,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[n]=r}_balanceNamespaceList(n,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let a=!1,c=this.driver.getParentElement(t);for(;c;){const p=i.get(c);if(p){const _=r.indexOf(p);r.splice(_+1,0,n),a=!0;break}c=this.driver.getParentElement(c)}a||r.unshift(n)}else r.push(n);return i.set(t,n),n}register(n,t){let r=this._namespaceLookup[n];return r||(r=this.createNamespace(n,t)),r}registerTrigger(n,t,r){let i=this._namespaceLookup[n];i&&i.register(t,r)&&this.totalAnimations++}destroy(n,t){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(n);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const t=new Set,r=this.statesByElement.get(n);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(n,t,r,i){if(gC(t)){const o=this._fetchNamespace(n);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(n,t,r,i){if(!gC(t))return;const o=t[ou];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(n){const a=this._fetchNamespace(n);a&&a.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,t){t?this.disabledNodes.has(n)||(this.disabledNodes.add(n),gc(n,Ok)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),X_(n,Ok))}removeNode(n,t,r){if(gC(t)){const i=n?this._fetchNamespace(n):null;i?i.removeNode(t,r):this.markElementAsRemoved(n,t,!1,r);const o=this.namespacesByHostElement.get(t);o&&o.id!==n&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(n,t,r,i,o){this.collectedLeaveElements.push(t),t[ou]={namespaceId:n,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(n,t,r,i,o){return gC(t)?this._fetchNamespace(n).listen(t,r,i,o):()=>{}}_buildInstruction(n,t,r,i,o){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,r,i,n.fromState.options,n.toState.options,t,o)}destroyInnerAnimations(n){let t=this.driver.query(n,lC,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(n,vk,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(n){const t=this.playersByElement.get(n);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(n){const t=this.playersByQueriedElement.get(n);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Jf(this.players).onDone(()=>n());n()})}processLeaveNode(n){const t=n[ou];if(t&&t.setForRemoval){if(n[ou]=C3,t.namespaceId){this.destroyInnerAnimations(n);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(n)}this._onRemovalComplete(n,t.setForRemoval)}n.classList?.contains(Ok)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(n=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)gc(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,n)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Jf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(n){throw function qre(){return new se(3402,!1)}()}_flushAnimations(n,t){const r=new fC,i=[],o=new Map,a=[],c=new Map,p=new Map,_=new Map,x=new Set;this.disabledNodes.forEach(St=>{x.add(St);const Wt=this.driver.query(St,".ng-animate-queued",!0);for(let an=0;an<Wt.length;an++)x.add(Wt[an])});const D=this.bodyNode,A=Array.from(this.statesByElement.keys()),O=S3(A,this.collectedEnterElements),B=new Map;let Q=0;O.forEach((St,Wt)=>{const an=d3+Q++;B.set(Wt,an),St.forEach(sr=>gc(sr,an))});const oe=[],be=new Set,xe=new Set;for(let St=0;St<this.collectedLeaveElements.length;St++){const Wt=this.collectedLeaveElements[St],an=Wt[ou];an&&an.setForRemoval&&(oe.push(Wt),be.add(Wt),an.hasAnimation?this.driver.query(Wt,".ng-star-inserted",!0).forEach(sr=>be.add(sr)):xe.add(Wt))}const $e=new Map,De=S3(A,Array.from(be));De.forEach((St,Wt)=>{const an=yk+Q++;$e.set(Wt,an),St.forEach(sr=>gc(sr,an))}),n.push(()=>{O.forEach((St,Wt)=>{const an=B.get(Wt);St.forEach(sr=>X_(sr,an))}),De.forEach((St,Wt)=>{const an=$e.get(Wt);St.forEach(sr=>X_(sr,an))}),oe.forEach(St=>{this.processLeaveNode(St)})});const we=[],Fe=[];for(let St=this._namespaceList.length-1;St>=0;St--)this._namespaceList[St].drainQueuedTransitions(t).forEach(an=>{const sr=an.player,Uo=an.element;if(we.push(sr),this.collectedEnterElements.length){const Qn=Uo[ou];if(Qn&&Qn.setForMove){if(Qn.previousTriggersValues&&Qn.previousTriggersValues.has(an.triggerName)){const Xs=Qn.previousTriggersValues.get(an.triggerName),vs=this.statesByElement.get(an.element);if(vs&&vs.has(an.triggerName)){const Sg=vs.get(an.triggerName);Sg.value=Xs,vs.set(an.triggerName,Sg)}}return void sr.destroy()}}const Pl=!D||!this.driver.containsElement(D,Uo),ys=$e.get(Uo),bu=B.get(Uo),bi=this._buildInstruction(an,r,bu,ys,Pl);if(bi.errors&&bi.errors.length)return void Fe.push(bi);if(Pl)return sr.onStart(()=>zm(Uo,bi.fromStyles)),sr.onDestroy(()=>sd(Uo,bi.toStyles)),void i.push(sr);if(an.isFallbackTransition)return sr.onStart(()=>zm(Uo,bi.fromStyles)),sr.onDestroy(()=>sd(Uo,bi.toStyles)),void i.push(sr);const sT=[];bi.timelines.forEach(Qn=>{Qn.stretchStartingKeyframe=!0,this.disabledNodes.has(Qn.element)||sT.push(Qn)}),bi.timelines=sT,r.append(Uo,bi.timelines),a.push({instruction:bi,player:sr,element:Uo}),bi.queriedElements.forEach(Qn=>Tl(c,Qn,[]).push(sr)),bi.preStyleProps.forEach((Qn,Xs)=>{if(Qn.size){let vs=p.get(Xs);vs||p.set(Xs,vs=new Set),Qn.forEach((Sg,l2)=>vs.add(l2))}}),bi.postStyleProps.forEach((Qn,Xs)=>{let vs=_.get(Xs);vs||_.set(Xs,vs=new Set),Qn.forEach((Sg,l2)=>vs.add(l2))})});if(Fe.length){const St=[];Fe.forEach(Wt=>{St.push(function Gre(){return new se(3505,!1)}())}),we.forEach(Wt=>Wt.destroy()),this.reportError(St)}const We=new Map,ht=new Map;a.forEach(St=>{const Wt=St.element;r.has(Wt)&&(ht.set(Wt,Wt),this._beforeAnimationBuild(St.player.namespaceId,St.instruction,We))}),i.forEach(St=>{const Wt=St.element;this._getPreviousPlayers(Wt,!1,St.namespaceId,St.triggerName,null).forEach(sr=>{Tl(We,Wt,[]).push(sr),sr.destroy()})});const en=oe.filter(St=>k3(St,p,_)),sn=new Map;T3(sn,this.driver,xe,_,bh).forEach(St=>{k3(St,p,_)&&en.push(St)});const vi=new Map;O.forEach((St,Wt)=>{T3(vi,this.driver,new Set(St),p,"!")}),en.forEach(St=>{const Wt=sn.get(St),an=vi.get(St);sn.set(St,new Map([...Wt?.entries()??[],...an?.entries()??[]]))});const Ja=[],Td=[],Dw={};a.forEach(St=>{const{element:Wt,player:an,instruction:sr}=St;if(r.has(Wt)){if(x.has(Wt))return an.onDestroy(()=>sd(Wt,sr.toStyles)),an.disabled=!0,an.overrideTotalTime(sr.totalTime),void i.push(an);let Uo=Dw;if(ht.size>1){let ys=Wt;const bu=[];for(;ys=ys.parentNode;){const bi=ht.get(ys);if(bi){Uo=bi;break}bu.push(ys)}bu.forEach(bi=>ht.set(bi,Uo))}const Pl=this._buildAnimation(an.namespaceId,sr,We,o,vi,sn);if(an.setRealPlayer(Pl),Uo===Dw)Ja.push(an);else{const ys=this.playersByElement.get(Uo);ys&&ys.length&&(an.parentPlayer=Jf(ys)),i.push(an)}}else zm(Wt,sr.fromStyles),an.onDestroy(()=>sd(Wt,sr.toStyles)),Td.push(an),x.has(Wt)&&i.push(an)}),Td.forEach(St=>{const Wt=o.get(St.element);if(Wt&&Wt.length){const an=Jf(Wt);St.setRealPlayer(an)}}),i.forEach(St=>{St.parentPlayer?St.syncPlayerEvents(St.parentPlayer):St.destroy()});for(let St=0;St<oe.length;St++){const Wt=oe[St],an=Wt[ou];if(X_(Wt,yk),an&&an.hasAnimation)continue;let sr=[];if(c.size){let Pl=c.get(Wt);Pl&&Pl.length&&sr.push(...Pl);let ys=this.driver.query(Wt,vk,!0);for(let bu=0;bu<ys.length;bu++){let bi=c.get(ys[bu]);bi&&bi.length&&sr.push(...bi)}}const Uo=sr.filter(Pl=>!Pl.destroyed);Uo.length?qie(this,Wt,Uo):this.processLeaveNode(Wt)}return oe.length=0,Ja.forEach(St=>{this.players.push(St),St.onDone(()=>{St.destroy();const Wt=this.players.indexOf(St);this.players.splice(Wt,1)}),St.play()}),Ja}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,t,r,i,o){let a=[];if(t){const c=this.playersByQueriedElement.get(n);c&&(a=c)}else{const c=this.playersByElement.get(n);if(c){const p=!o||o==Sb;c.forEach(_=>{_.queued||!p&&_.triggerName!=i||a.push(_)})}}return(r||i)&&(a=a.filter(c=>!(r&&r!=c.namespaceId||i&&i!=c.triggerName))),a}_beforeAnimationBuild(n,t,r){const o=t.element,a=t.isRemovalTransition?void 0:n,c=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const _=p.element,x=_!==o,D=Tl(r,_,[]);this._getPreviousPlayers(_,x,a,c,t.toState).forEach(O=>{const B=O.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),O.destroy(),D.push(O)})}zm(o,t.fromStyles)}_buildAnimation(n,t,r,i,o,a){const c=t.triggerName,p=t.element,_=[],x=new Set,D=new Set,A=t.timelines.map(B=>{const Q=B.element;x.add(Q);const oe=Q[ou];if(oe&&oe.removedBeforeQueried)return new Cb(B.duration,B.delay);const be=Q!==p,xe=function Gie(e){const n=[];return I3(e,n),n}((r.get(Q)||Bie).map(We=>We.getRealPlayer())).filter(We=>!!We.element&&We.element===Q),$e=o.get(Q),De=a.get(Q),we=o3(this._normalizer,B.keyframes,$e,De),Fe=this._buildPlayer(B,we,xe);if(B.subTimeline&&i&&D.add(Q),be){const We=new Fk(n,c,Q);We.setRealPlayer(Fe),_.push(We)}return Fe});_.forEach(B=>{Tl(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function jie(e,n,t){let r=e.get(n);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&e.delete(n)}return r}(this.playersByQueriedElement,B.element,B))}),x.forEach(B=>gc(B,h3));const O=Jf(A);return O.onDestroy(()=>{x.forEach(B=>X_(B,h3)),sd(p,t.toStyles)}),D.forEach(B=>{Tl(i,B,[]).push(O)}),O}_buildPlayer(n,t,r){return t.length>0?this.driver.animate(n.element,t,n.duration,n.delay,n.easing,r):new Cb(n.duration,n.delay)}}class Fk{namespaceId;triggerName;element;_player=new Cb;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(n,t,r){this.namespaceId=n,this.triggerName=t,this.element=r}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>pk(n,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const t=this._player;t.triggerCallback&&n.onStart(()=>t.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,t){Tl(this._queuedCallbacks,n,[]).push(t)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const t=this._player;t.triggerCallback&&t.triggerCallback(n)}}function gC(e){return e&&1===e.nodeType}function D3(e,n){const t=e.style.display;return e.style.display=n??"none",t}function T3(e,n,t,r,i){const o=[];t.forEach(p=>o.push(D3(p)));const a=[];r.forEach((p,_)=>{const x=new Map;p.forEach(D=>{const A=n.computeStyle(_,D,i);x.set(D,A),(!A||0==A.length)&&(_[ou]=Vie,a.push(_))}),e.set(_,x)});let c=0;return t.forEach(p=>D3(p,o[c++])),a}function S3(e,n){const t=new Map;if(e.forEach(c=>t.set(c,[])),0==n.length)return t;const i=new Set(n),o=new Map;function a(c){if(!c)return 1;let p=o.get(c);if(p)return p;const _=c.parentNode;return p=t.has(_)?_:i.has(_)?1:a(_),o.set(c,p),p}return n.forEach(c=>{const p=a(c);1!==p&&t.get(p).push(c)}),t}function gc(e,n){e.classList?.add(n)}function X_(e,n){e.classList?.remove(n)}function qie(e,n,t){Jf(t).onDone(()=>e.processLeaveNode(n))}function I3(e,n){for(let t=0;t<e.length;t++){const r=e[t];r instanceof r3?I3(r.players,n):n.push(r)}}function k3(e,n,t){const r=t.get(e);if(!r)return!1;let i=n.get(e);return i?r.forEach(o=>i.add(o)):n.set(e,r),t.delete(e),!0}class Ib{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(n,t)=>{};constructor(n,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new Uie(n.body,t,r),this._timelineEngine=new Pie(n.body,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(n,t,r,i,o){const a=n+"-"+i;let c=this._triggerCache[a];if(!c){const p=[],x=Ik(this._driver,o,p,[]);if(p.length)throw function Nre(){return new se(3404,!1)}();c=function kie(e,n,t){return new Aie(e,n,t)}(i,x,this._normalizer),this._triggerCache[a]=c}this._transitionEngine.registerTrigger(t,i,c)}register(n,t){this._transitionEngine.register(n,t)}destroy(n,t){this._transitionEngine.destroy(n,t)}onInsert(n,t,r,i){this._transitionEngine.insertNode(n,t,r,i)}onRemove(n,t,r){this._transitionEngine.removeNode(n,t,r)}disableAnimations(n,t){this._transitionEngine.markElementAsDisabled(n,t)}process(n,t,r,i){if("@"==r.charAt(0)){const[o,a]=s3(r);this._timelineEngine.command(o,t,a,i)}else this._transitionEngine.trigger(n,t,r,i)}listen(n,t,r,i,o){if("@"==r.charAt(0)){const[a,c]=s3(r);return this._timelineEngine.listen(a,t,c,o)}return this._transitionEngine.listen(n,t,r,i,o)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}}let Kie=(()=>{class e{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let o=e.initialStylesByElement.get(t);o||e.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&sd(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(sd(this._element,this._initialStyles),this._endStyles&&(sd(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(zm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(zm(this._element,this._endStyles),this._endStyles=null),sd(this._element,this._initialStyles),this._state=3)}}return e})();function Bk(e){let n=null;return e.forEach((t,r)=>{(function Yie(e){return"display"===e||"position"===e})(r)&&(n=n||new Map,n.set(r,t))}),n}class A3{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(n,t,r,i){this.element=n,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;const n=this.keyframes,t=this._triggerWebAnimation(this.element,n,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=n.length?n[n.length-1]:new Map;const r=()=>this._onFinish();return t.addEventListener("finish",r),this.onDestroy(()=>{t.removeEventListener("finish",r)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(n){const t=[];return n.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(n,t,r){const i=this._convertKeyframesToObject(t);try{return n.animate(i,r)}catch{return null}}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){const n=this._buildPlayer();n&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),n.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=n*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&n.set(i,this._finished?r:Ek(this.element,i))}),this.currentSnapshot=n}triggerCallback(n){const t="start"===n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class R3{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}containsElement(n,t){return l3(n,t)}getParentElement(n){return _k(n)}query(n,t,r){return c3(n,t,r)}computeStyle(n,t,r){return Ek(n,t)}animate(n,t,r,i,o,a=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(p.easing=o);const _=new Map,x=a.filter(O=>O instanceof A3);(function oie(e,n){return 0===e||0===n})(r,i)&&x.forEach(O=>{O.currentSnapshot.forEach((B,Q)=>_.set(Q,B))});let D=function nie(e){return e.length?e[0]instanceof Map?e:e.map(n=>new Map(Object.entries(n))):[]}(t).map(O=>new Map(O));D=function sie(e,n,t){if(t.size&&n.length){let r=n[0],i=[];if(t.forEach((o,a)=>{r.has(a)||i.push(a),r.set(a,o)}),i.length)for(let o=1;o<n.length;o++){let a=n[o];i.forEach(c=>a.set(c,Ek(e,c)))}}return n}(n,D,_);const A=function Zie(e,n){let t=null,r=null;return Array.isArray(n)&&n.length?(t=Bk(n[0]),n.length>1&&(r=Bk(n[n.length-1]))):n instanceof Map&&(t=Bk(n)),t||r?new Kie(e,t,r):null}(n,D);return new A3(n,D,p,A)}}const M3="@.disabled";class P3{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(n,t,r,i){this.namespaceId=n,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,t){return this.delegate.createElement(n,t)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,t){this.delegate.appendChild(n,t),this.engine.onInsert(this.namespaceId,t,n,!1)}insertBefore(n,t,r,i=!0){this.delegate.insertBefore(n,t,r),this.engine.onInsert(this.namespaceId,t,n,i)}removeChild(n,t,r,i){i?this.delegate.removeChild(n,t,r,i):this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(n,t){return this.delegate.selectRootElement(n,t)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,t,r,i){this.delegate.setAttribute(n,t,r,i)}removeAttribute(n,t,r){this.delegate.removeAttribute(n,t,r)}addClass(n,t){this.delegate.addClass(n,t)}removeClass(n,t){this.delegate.removeClass(n,t)}setStyle(n,t,r,i){this.delegate.setStyle(n,t,r,i)}removeStyle(n,t,r){this.delegate.removeStyle(n,t,r)}setProperty(n,t,r){"@"==t.charAt(0)&&t==M3?this.disableAnimations(n,!!r):this.delegate.setProperty(n,t,r)}setValue(n,t){this.delegate.setValue(n,t)}listen(n,t,r,i){return this.delegate.listen(n,t,r,i)}disableAnimations(n,t){this.engine.disableAnimations(n,t)}}class Xie extends P3{factory;constructor(n,t,r,i,o){super(t,r,i,o),this.factory=n,this.namespaceId=t}setProperty(n,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==M3?this.disableAnimations(n,r=void 0===r||!!r):this.engine.process(this.namespaceId,n,t.slice(1),r):this.delegate.setProperty(n,t,r)}listen(n,t,r,i){if("@"==t.charAt(0)){const o=function Qie(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(n);let a=t.slice(1),c="";return"@"!=a.charAt(0)&&([a,c]=function Jie(e){const n=e.indexOf(".");return[e.substring(0,n),e.slice(n+1)]}(a)),this.engine.listen(this.namespaceId,o,a,c,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(n,t,r,i)}}class eoe{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(n,t,r){this.delegate=n,this.engine=t,this._zone=r,t.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(n,t){const i=this.delegate.createRenderer(n,t);if(!n||!t?.data?.animation){const _=this._rendererCache;let x=_.get(i);return x||(x=new P3("",i,this.engine,()=>_.delete(i)),_.set(i,x)),x}const o=t.id,a=t.id+"-"+this._currentId;this._currentId++,this.engine.register(a,n);const c=_=>{Array.isArray(_)?_.forEach(c):this.engine.registerTrigger(o,a,n,_.name,_)};return t.data.animation.forEach(c),new Xie(this,a,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,t,r){if(n>=0&&n<this._microtaskId)return void this._zone.run(()=>t(r));const i=this._animationCallbacksBuffer;0==i.length&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{const[a,c]=o;a(c)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(n){this.engine.flush(),this.delegate.componentReplaced?.(n)}}const ooe=[{provide:Dk,useFactory:()=>new R3},{provide:la,useFactory:()=>"BrowserAnimations"},...[{provide:Tk,useFactory:function noe(){return new p3}},{provide:Ib,useClass:(()=>{class e extends Ib{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||e)(wt(Un),wt(Dk),wt(Tk))};static \u0275prov=Ue({token:e,factory:e.\u0275fac})}return e})()},{provide:xl,useFactory:function roe(){return new eoe(Z(sk),Z(Ib),Z(Jt))}}]];function Vk(e,n){return e?n?e.endsWith("/")?n.startsWith("/")?e+n.slice(1):e+n:n.startsWith("/")?e+n:`${e}/${n}`:e:n}function N3(e){const n=e.search(/#|\?|$/);return"/"===e[n-1]?e.slice(0,n-1)+e.slice(n):e}function xh(e){return e&&"?"!==e[0]?`?${e}`:e}let jm=(()=>{class e{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:()=>Z(F3),providedIn:"root"})}return e})();const L3=new Le("");let F3=(()=>{class e extends jm{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Z(Un).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Vk(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+xh(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const a=this.prepareExternalUrl(i+xh(o));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){const a=this.prepareExternalUrl(i+xh(o));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||e)(wt(nC),wt(L3,8))};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Q_=(()=>{class e{_subject=new K;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function coe(e){if(new RegExp("^(https?:)?//").test(e)){const[,t]=e.split(/\/\/[^\/]+/);return t}return e}(N3(B3(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+xh(r))}normalize(t){return e.stripTrailingSlash(function loe(e,n){if(!e||!n.startsWith(e))return n;const t=n.substring(e.length);return""===t||["/",";","?","#"].includes(t[0])?t:n}(this._basePath,B3(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xh(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xh(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=xh;static joinWithSlash=Vk;static stripTrailingSlash=N3;static \u0275fac=function(r){return new(r||e)(wt(jm))};static \u0275prov=Ue({token:e,factory:()=>function aoe(){return new Q_(wt(jm))}(),providedIn:"root"})}return e})();function B3(e){return e.replace(/\/index.html$/,"")}let uoe=(()=>{class e extends jm{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Vk(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){const a=this.prepareExternalUrl(i+xh(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){const a=this.prepareExternalUrl(i+xh(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||e)(wt(nC),wt(L3,8))};static \u0275prov=Ue({token:e,factory:e.\u0275fac})}return e})();var ha=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}(ha||{}),Xr=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}(Xr||{}),Il=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}(Il||{});function vC(e,n){return yc(ua(e)[gi.DateFormat],n)}function bC(e,n){return yc(ua(e)[gi.TimeFormat],n)}function wC(e,n){return yc(ua(e)[gi.DateTimeFormat],n)}function _c(e,n){const t=ua(e),r=t[gi.NumberSymbols][n];if(typeof r>"u"){if(12===n)return t[gi.NumberSymbols][0];if(13===n)return t[gi.NumberSymbols][1]}return r}function z3(e){if(!e[gi.ExtraData])throw new se(2303,!1)}function yc(e,n){for(let t=n;t>-1;t--)if(typeof e[t]<"u")return e[t];throw new se(2304,!1)}function Uk(e){const[n,t]=e.split(":");return{hours:+n,minutes:+t}}const Coe=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,xC={},Doe=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Toe(e,n,t,r){let i=function Noe(e){if(H3(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[i,o=1,a=1]=e.split("-").map(c=>+c);return EC(i,o-1,a)}const t=parseFloat(e);if(!isNaN(e-t))return new Date(t);let r;if(r=e.match(Coe))return function Loe(e){const n=new Date(0);let t=0,r=0;const i=e[8]?n.setUTCFullYear:n.setFullYear,o=e[8]?n.setUTCHours:n.setHours;e[9]&&(t=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(n,Number(e[1]),Number(e[2])-1,Number(e[3]));const a=Number(e[4]||0)-t,c=Number(e[5]||0)-r,p=Number(e[6]||0),_=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return o.call(n,a,c,p,_),n}(r)}const n=new Date(e);if(!H3(n))throw new se(2311,!1);return n}(e);n=Eh(t,n)||n;let c,a=[];for(;n;){if(c=Doe.exec(n),!c){a.push(n);break}{a=a.concat(c.slice(1));const x=a.pop();if(!x)break;n=x}}let p=i.getTimezoneOffset();r&&(p=j3(r,p),i=function Ooe(e,n){const i=e.getTimezoneOffset();return function Poe(e,n){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+n),e}(e,-1*(j3(n,i)-i))}(i,r));let _="";return a.forEach(x=>{const D=function Moe(e){if(Hk[e])return Hk[e];let n;switch(e){case"G":case"GG":case"GGG":n=oi(3,Xr.Abbreviated);break;case"GGGG":n=oi(3,Xr.Wide);break;case"GGGGG":n=oi(3,Xr.Narrow);break;case"y":n=Lo(0,1,0,!1,!0);break;case"yy":n=Lo(0,2,0,!0,!0);break;case"yyy":n=Lo(0,3,0,!1,!0);break;case"yyyy":n=Lo(0,4,0,!1,!0);break;case"Y":n=SC(1);break;case"YY":n=SC(2,!0);break;case"YYY":n=SC(3);break;case"YYYY":n=SC(4);break;case"M":case"L":n=Lo(1,1,1);break;case"MM":case"LL":n=Lo(1,2,1);break;case"MMM":n=oi(2,Xr.Abbreviated);break;case"MMMM":n=oi(2,Xr.Wide);break;case"MMMMM":n=oi(2,Xr.Narrow);break;case"LLL":n=oi(2,Xr.Abbreviated,ha.Standalone);break;case"LLLL":n=oi(2,Xr.Wide,ha.Standalone);break;case"LLLLL":n=oi(2,Xr.Narrow,ha.Standalone);break;case"w":n=jk(1);break;case"ww":n=jk(2);break;case"W":n=jk(1,!0);break;case"d":n=Lo(2,1);break;case"dd":n=Lo(2,2);break;case"c":case"cc":n=Lo(7,1);break;case"ccc":n=oi(1,Xr.Abbreviated,ha.Standalone);break;case"cccc":n=oi(1,Xr.Wide,ha.Standalone);break;case"ccccc":n=oi(1,Xr.Narrow,ha.Standalone);break;case"cccccc":n=oi(1,Xr.Short,ha.Standalone);break;case"E":case"EE":case"EEE":n=oi(1,Xr.Abbreviated);break;case"EEEE":n=oi(1,Xr.Wide);break;case"EEEEE":n=oi(1,Xr.Narrow);break;case"EEEEEE":n=oi(1,Xr.Short);break;case"a":case"aa":case"aaa":n=oi(0,Xr.Abbreviated);break;case"aaaa":n=oi(0,Xr.Wide);break;case"aaaaa":n=oi(0,Xr.Narrow);break;case"b":case"bb":case"bbb":n=oi(0,Xr.Abbreviated,ha.Standalone,!0);break;case"bbbb":n=oi(0,Xr.Wide,ha.Standalone,!0);break;case"bbbbb":n=oi(0,Xr.Narrow,ha.Standalone,!0);break;case"B":case"BB":case"BBB":n=oi(0,Xr.Abbreviated,ha.Format,!0);break;case"BBBB":n=oi(0,Xr.Wide,ha.Format,!0);break;case"BBBBB":n=oi(0,Xr.Narrow,ha.Format,!0);break;case"h":n=Lo(3,1,-12);break;case"hh":n=Lo(3,2,-12);break;case"H":n=Lo(3,1);break;case"HH":n=Lo(3,2);break;case"m":n=Lo(4,1);break;case"mm":n=Lo(4,2);break;case"s":n=Lo(5,1);break;case"ss":n=Lo(5,2);break;case"S":n=Lo(6,1);break;case"SS":n=Lo(6,2);break;case"SSS":n=Lo(6,3);break;case"Z":case"ZZ":case"ZZZ":n=DC(0);break;case"ZZZZZ":n=DC(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=DC(1);break;case"OOOO":case"ZZZZ":case"zzzz":n=DC(2);break;default:return null}return Hk[e]=n,n}(x);_+=D?D(i,t,p):"''"===x?"'":x.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),_}function EC(e,n,t){const r=new Date(0);return r.setFullYear(e,n,t),r.setHours(0,0,0),r}function Eh(e,n){const t=function hoe(e){return ua(e)[gi.LocaleId]}(e);if(xC[t]??={},xC[t][n])return xC[t][n];let r="";switch(n){case"shortDate":r=vC(e,Il.Short);break;case"mediumDate":r=vC(e,Il.Medium);break;case"longDate":r=vC(e,Il.Long);break;case"fullDate":r=vC(e,Il.Full);break;case"shortTime":r=bC(e,Il.Short);break;case"mediumTime":r=bC(e,Il.Medium);break;case"longTime":r=bC(e,Il.Long);break;case"fullTime":r=bC(e,Il.Full);break;case"short":const i=Eh(e,"shortTime"),o=Eh(e,"shortDate");r=CC(wC(e,Il.Short),[i,o]);break;case"medium":const a=Eh(e,"mediumTime"),c=Eh(e,"mediumDate");r=CC(wC(e,Il.Medium),[a,c]);break;case"long":const p=Eh(e,"longTime"),_=Eh(e,"longDate");r=CC(wC(e,Il.Long),[p,_]);break;case"full":const x=Eh(e,"fullTime"),D=Eh(e,"fullDate");r=CC(wC(e,Il.Full),[x,D])}return r&&(xC[t][n]=r),r}function CC(e,n){return n&&(e=e.replace(/\{([^}]+)}/g,function(t,r){return null!=n&&r in n?n[r]:t})),e}function su(e,n,t="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=1-e:(e=-e,o=t));let a=String(e);for(;a.length<n;)a="0"+a;return r&&(a=a.slice(a.length-n)),o+a}function Lo(e,n,t=0,r=!1,i=!1){return function(o,a){let c=function Ioe(e,n){switch(e){case 0:return n.getFullYear();case 1:return n.getMonth();case 2:return n.getDate();case 3:return n.getHours();case 4:return n.getMinutes();case 5:return n.getSeconds();case 6:return n.getMilliseconds();case 7:return n.getDay();default:throw new se(2301,!1)}}(e,o);if((t>0||c>-t)&&(c+=t),3===e)0===c&&-12===t&&(c=12);else if(6===e)return function Soe(e,n){return su(e,3).substring(0,n)}(c,n);const p=_c(a,5);return su(c,n,p,r,i)}}function oi(e,n,t=ha.Format,r=!1){return function(i,o){return function koe(e,n,t,r,i,o){switch(t){case 2:return function moe(e,n,t){const r=ua(e),o=yc([r[gi.MonthsFormat],r[gi.MonthsStandalone]],n);return yc(o,t)}(n,i,r)[e.getMonth()];case 1:return function poe(e,n,t){const r=ua(e),o=yc([r[gi.DaysFormat],r[gi.DaysStandalone]],n);return yc(o,t)}(n,i,r)[e.getDay()];case 0:const a=e.getHours(),c=e.getMinutes();if(o){const _=function voe(e){const n=ua(e);return z3(n),(n[gi.ExtraData][2]||[]).map(r=>"string"==typeof r?Uk(r):[Uk(r[0]),Uk(r[1])])}(n),x=function boe(e,n,t){const r=ua(e);z3(r);const o=yc([r[gi.ExtraData][0],r[gi.ExtraData][1]],n)||[];return yc(o,t)||[]}(n,i,r),D=_.findIndex(A=>{if(Array.isArray(A)){const[O,B]=A,Q=a>=O.hours&&c>=O.minutes,oe=a<B.hours||a===B.hours&&c<B.minutes;if(O.hours<B.hours){if(Q&&oe)return!0}else if(Q||oe)return!0}else if(A.hours===a&&A.minutes===c)return!0;return!1});if(-1!==D)return x[D]}return function foe(e,n,t){const r=ua(e),o=yc([r[gi.DayPeriodsFormat],r[gi.DayPeriodsStandalone]],n);return yc(o,t)}(n,i,r)[a<12?0:1];case 3:return function goe(e,n){return yc(ua(e)[gi.Eras],n)}(n,r)[e.getFullYear()<=0?0:1];default:throw new se(2302,!1)}}(i,o,e,n,t,r)}}function DC(e){return function(n,t,r){const i=-1*r,o=_c(t,5),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case 0:return(i>=0?"+":"")+su(a,2,o)+su(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+su(a,1,o);case 2:return"GMT"+(i>=0?"+":"")+su(a,2,o)+":"+su(Math.abs(i%60),2,o);case 3:return 0===r?"Z":(i>=0?"+":"")+su(a,2,o)+":"+su(Math.abs(i%60),2,o);default:throw new se(2310,!1)}}}function U3(e){const n=e.getDay(),t=0===n?-3:4-n;return EC(e.getFullYear(),e.getMonth(),e.getDate()+t)}function jk(e,n=!1){return function(t,r){let i;if(n){const o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,a=t.getDate();i=1+Math.floor((a+o)/7)}else{const o=U3(t),a=function Roe(e){const n=EC(e,0,1).getDay();return EC(e,0,1+(n<=4?4:11)-n)}(o.getFullYear()),c=o.getTime()-a.getTime();i=1+Math.round(c/6048e5)}return su(i,e,_c(r,5))}}function SC(e,n=!1){return function(t,r){return su(U3(t).getFullYear(),e,_c(r,5),n)}}const Hk={};function j3(e,n){e=e.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(t)?n:t}function H3(e){return e instanceof Date&&!isNaN(e.valueOf())}const Kk=/\s+/,W3=[];let Z3=(()=>{class e{_ngEl;_renderer;initialClasses=W3;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=null!=t?t.trim().split(Kk):W3}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Kk):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Kk).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||e)(Re(Pr),Re(ja))};static \u0275dir=At({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return e})();const hse=new Le(""),fse=new Le("");let Ab=(()=>{class e{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(null==t||""===t||t!=t)return null;try{return Toe(t,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(a){throw function au(e,n){return new se(2100,!1)}()}}static \u0275fac=function(r){return new(r||e)(Re(yh,16),Re(hse,24),Re(fse,24))};static \u0275pipe=Ha({name:"date",type:e,pure:!0})}return e})(),ey=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({})}return e})();function vc(e,n){return function Eu(e,n){const t=Object.create(wa);t.computation=e,void 0!==n&&(t.equal=n);const r=()=>{if(Qi(t),Co(t),t.value===Ji)throw t.error;return t.value};return r[Ve]=t,r}(e,n?.equal)}function ij(e){return!!e&&(e instanceof U||dr(e.lift)&&dr(e.subscribe))}function Hm(e){return this instanceof Hm?(this.v=e,this):new Hm(e)}function Bse(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function aj(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(a){return new Promise(function(c,p){!function i(o,a,c,p){Promise.resolve(p).then(function(_){o({value:_,done:c})},a)}(c,p,(a=e[o](a)).done,a.value)})}}}Error,Error;const lj=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function cj(e){return dr(e?.then)}function uj(e){return dr(e[Ul])}function dj(e){return Symbol.asyncIterator&&dr(e?.[Symbol.asyncIterator])}function hj(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const fj=function zse(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function pj(e){return dr(e?.[fj])}function mj(e){return function Fse(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,n||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(A){r[A]&&(i[A]=function(O){return new Promise(function(B,Q){o.push([A,O,B,Q])>1||c(A,O)})})}function c(A,O){try{!function p(A){A.value instanceof Hm?Promise.resolve(A.value.v).then(_,x):D(o[0][2],A)}(r[A](O))}catch(B){D(o[0][3],B)}}function _(A){c("next",A)}function x(A){c("throw",A)}function D(A,O){A(O),o.shift(),o.length&&c(o[0][0],o[0][1])}}(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:r,done:i}=yield Hm(t.read());if(i)return yield Hm(void 0);yield yield Hm(r)}}finally{t.releaseLock()}})}function gj(e){return dr(e?.getReader)}function bc(e){if(e instanceof U)return e;if(null!=e){if(uj(e))return function Use(e){return new U(n=>{const t=e[Ul]();if(dr(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(lj(e))return function jse(e){return new U(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(cj(e))return function Hse(e){return new U(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,Cu)})}(e);if(dj(e))return _j(e);if(pj(e))return function $se(e){return new U(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(gj(e))return function qse(e){return _j(mj(e))}(e)}throw hj(e)}function _j(e){return new U(n=>{(function Gse(e,n){var t,r,i,o;return function Nse(e,n,t,r){return new(t||(t=Promise))(function(o,a){function c(x){try{_(r.next(x))}catch(D){a(D)}}function p(x){try{_(r.throw(x))}catch(D){a(D)}}function _(x){x.done?o(x.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(x.value).then(c,p)}_((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Bse(e);!(r=yield t.next()).done;)if(n.next(r.value),n.closed)return}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Ch(e,n,t,r=0,i=!1){const o=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function yj(e,n=0){return Ro((t,r)=>{t.subscribe(new ni(r,i=>Ch(r,e,()=>r.next(i),n),()=>Ch(r,e,()=>r.complete(),n),i=>Ch(r,e,()=>r.error(i),n)))})}function vj(e,n=0){return Ro((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function bj(e,n){if(!e)throw new Error("Iterable cannot be null");return new U(t=>{Ch(t,n,()=>{const r=e[Symbol.asyncIterator]();Ch(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function fs(e,n){return n?function Qse(e,n){if(null!=e){if(uj(e))return function Wse(e,n){return bc(e).pipe(vj(n),yj(n))}(e,n);if(lj(e))return function Kse(e,n){return new U(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}(e,n);if(cj(e))return function Zse(e,n){return bc(e).pipe(vj(n),yj(n))}(e,n);if(dj(e))return bj(e,n);if(pj(e))return function Yse(e,n){return new U(t=>{let r;return Ch(t,n,()=>{r=e[fj](),Ch(t,n,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){return void t.error(a)}o?t.complete():t.next(i)},0,!0)}),()=>dr(r?.return)&&r.return()})}(e,n);if(gj(e))return function Xse(e,n){return bj(mj(e),n)}(e,n)}throw hj(e)}(e,n):bc(e)}function wj(e){return e&&dr(e.schedule)}function nA(e){return e[e.length-1]}function xj(e){return dr(nA(e))?e.pop():void 0}function Rb(e){return wj(nA(e))?e.pop():void 0}function An(...e){return fs(e,Rb(e))}const{isArray:eae}=Array,{getPrototypeOf:tae,prototype:nae,keys:rae}=Object;function Ej(e){if(1===e.length){const n=e[0];if(eae(n))return{args:n,keys:null};if(function iae(e){return e&&"object"==typeof e&&tae(e)===nae}(n)){const t=rae(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}const{isArray:oae}=Array;function Cj(e){return cr(n=>function sae(e,n){return oae(n)?e(...n):e(n)}(e,n))}function Dj(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}function rA(...e){const n=Rb(e),t=xj(e),{args:r,keys:i}=Ej(e);if(0===r.length)return fs([],n);const o=new U(function aae(e,n,t=er){return r=>{Tj(n,()=>{const{length:i}=e,o=new Array(i);let a=i,c=i;for(let p=0;p<i;p++)Tj(n,()=>{const _=fs(e[p],n);let x=!1;_.subscribe(new ni(r,D=>{o[p]=D,x||(x=!0,c--),c||r.next(t(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,n,i?a=>Dj(i,a):er));return t?o.pipe(Cj(t)):o}function Tj(e,n,t){e?Ch(t,e,n):n()}const iA=Qo(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function wc(e,n,t=1/0){return dr(n)?wc((r,i)=>cr((o,a)=>n(r,o,i,a))(bc(e(r,i))),t):("number"==typeof n&&(t=n),Ro((r,i)=>function lae(e,n,t,r,i,o,a,c){const p=[];let _=0,x=0,D=!1;const A=()=>{D&&!p.length&&!_&&n.complete()},O=Q=>_<r?B(Q):p.push(Q),B=Q=>{o&&n.next(Q),_++;let oe=!1;bc(t(Q,x++)).subscribe(new ni(n,be=>{i?.(be),o?O(be):n.next(be)},()=>{oe=!0},void 0,()=>{if(oe)try{for(_--;p.length&&_<r;){const be=p.shift();a?Ch(n,a,()=>B(be)):B(be)}A()}catch(be){n.error(be)}}))};return e.subscribe(new ni(n,O,()=>{D=!0,A()})),()=>{c?.()}}(r,i,e,t)))}function ty(e=1/0){return wc(er,e)}function kC(...e){return function cae(){return ty(1)}()(fs(e,Rb(e)))}function Mb(e){return new U(n=>{bc(e()).subscribe(n)})}const fa=new U(e=>e.complete());function Ps(e,n){return Ro((t,r)=>{let i=0;t.subscribe(new ni(r,o=>e.call(n,o,i++)&&r.next(o)))})}function Os(e){return e<=0?()=>fa:Ro((n,t)=>{let r=0;n.subscribe(new ni(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function fae(e=pae){return Ro((n,t)=>{let r=!1;n.subscribe(new ni(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function pae(){return new iA}function $m(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Ps((i,o)=>e(i,o,r)):er,Os(1),t?function hae(e){return Ro((n,t)=>{let r=!1;n.subscribe(new ni(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}(n):fae(()=>new iA))}function Wa(e,n){return Ro((t,r)=>{let i=null,o=0,a=!1;const c=()=>a&&!i&&r.complete();t.subscribe(new ni(r,p=>{i?.unsubscribe();let _=0;const x=o++;bc(e(p,x)).subscribe(i=new ni(r,D=>r.next(n?n(p,D,x,_++):D),()=>{i=null,c()}))},()=>{a=!0,c()}))})}function ny(...e){const n=Rb(e);return Ro((t,r)=>{(n?kC(e,t,n):kC(e,t)).subscribe(r)})}function ad(e){return Ro((n,t)=>{bc(e).subscribe(new ni(t,()=>t.complete(),Da)),!t.closed&&n.subscribe(t)})}function AC(e,n){return dr(n)?wc(e,n,1):wc(e,1)}function Dh(e,n,t){const r=dr(e)||n||t?{next:e,error:n,complete:t}:e;return r?Ro((i,o)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let c=!0;i.subscribe(new ni(o,p=>{var _;null===(_=r.next)||void 0===_||_.call(r,p),o.next(p)},()=>{var p;c=!1,null===(p=r.complete)||void 0===p||p.call(r),o.complete()},p=>{var _;c=!1,null===(_=r.error)||void 0===_||_.call(r,p),o.error(p)},()=>{var p,_;c&&(null===(p=r.unsubscribe)||void 0===p||p.call(r)),null===(_=r.finalize)||void 0===_||_.call(r)}))}):er}function Sj(e){return e<=0?()=>fa:Ro((n,t)=>{let r=[];n.subscribe(new ni(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function oA(e){return Ro((n,t)=>{let o,r=null,i=!1;r=n.subscribe(new ni(t,void 0,void 0,a=>{o=bc(e(a,oA(e)(n))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Ij(e){return Ro((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}let mae=(()=>{class e{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||e)(wt(Un))};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Rj=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:function(r){let i=null;return i=r?new(r||e):wt(vae),i},providedIn:"root"})}return e})(),vae=(()=>{class e extends Rj{_doc;constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case vl.NONE:return r;case vl.HTML:return nd(r,"HTML")?yl(r):P2(this._doc,String(r)).toString();case vl.STYLE:return nd(r,"Style")?yl(r):r;case vl.SCRIPT:if(nd(r,"Script"))return yl(r);throw new se(5200,!1);case vl.URL:return nd(r,"URL")?yl(r):Lx(String(r));case vl.RESOURCE_URL:if(nd(r,"ResourceURL"))return yl(r);throw new se(5201,!1);default:throw new se(5202,!1)}}bypassSecurityTrustHtml(t){return function PW(e){return new SW(e)}(t)}bypassSecurityTrustStyle(t){return function OW(e){return new IW(e)}(t)}bypassSecurityTrustScript(t){return function NW(e){return new kW(e)}(t)}bypassSecurityTrustUrl(t){return function LW(e){return new AW(e)}(t)}bypassSecurityTrustResourceUrl(t){return function FW(e){return new RW(e)}(t)}static \u0275fac=function(r){return new(r||e)(wt(Un))};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Rn="primary",Ob=Symbol("RouteTitle");class bae{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ry(e){return new bae(e)}function sA(e,n,t){for(let r=0;r<e.length;r++){const i=e[r],o=n[r];if(":"===i[0])t[i.substring(1)]=o;else if(i!==o.path)return!1}return!0}function wae(e,n,t){const r=t.path.split("/"),i=r.indexOf("**");if(-1===i){if(r.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||r.length<e.length))return null;const p={},_=e.slice(0,r.length);return sA(r,_,p)?{consumed:_,posParams:p}:null}if(i!==r.lastIndexOf("**"))return null;const o=r.slice(0,i),a=r.slice(i+1);if(o.length+a.length>e.length||"full"===t.pathMatch&&n.hasChildren()&&"**"!==t.path)return null;const c={};return sA(o,e.slice(0,o.length),c)&&sA(a,e.slice(e.length-a.length),c)?{consumed:e,posParams:c}:null}function RC(e){return new Promise((n,t)=>{e.pipe($m()).subscribe({next:r=>n(r),error:r=>t(r)})})}function ld(e,n){const t=e?aA(e):void 0,r=n?aA(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Mj(e[i],n[i]))return!1;return!0}function aA(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Mj(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),r=[...n].sort();return t.every((i,o)=>r[o]===i)}return e===n}function qm(e){return ij(e)?e:ib(e)?fs(Promise.resolve(e)):An(e)}function Pj(e){return ij(e)?RC(e):Promise.resolve(e)}const Cae={exact:function Nj(e,n,t){if(!Gm(e.segments,n.segments)||!MC(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!Nj(e.children[r],n.children[r],t))return!1;return!0},subset:Lj},Oj={exact:function Tae(e,n){return ld(e,n)},subset:function Sae(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>Mj(e[t],n[t]))},ignored:()=>!0};function lA(e,n,t){return Cae[t.paths](e.root,n.root,t.matrixParams)&&Oj[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function Lj(e,n,t){return Fj(e,n,n.segments,t)}function Fj(e,n,t,r){if(e.segments.length>t.length){const i=e.segments.slice(0,t.length);return!(!Gm(i,t)||n.hasChildren()||!MC(i,t,r))}if(e.segments.length===t.length){if(!Gm(e.segments,t)||!MC(e.segments,t,r))return!1;for(const i in n.children)if(!e.children[i]||!Lj(e.children[i],n.children[i],r))return!1;return!0}{const i=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!!(Gm(e.segments,i)&&MC(e.segments,i,r)&&e.children[Rn])&&Fj(e.children[Rn],n,o,r)}}function MC(e,n,t){return n.every((r,i)=>Oj[t](e[i].parameters,r.parameters))}class cd{root;queryParams;fragment;_queryParamMap;constructor(n=new qr([],{}),t={},r=null){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ry(this.queryParams),this._queryParamMap}toString(){return Aae.serialize(this)}}class qr{segments;children;parent=null;constructor(n,t){this.segments=n,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return PC(this)}}class Nb{path;parameters;_parameterMap;constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap??=ry(this.parameters),this._parameterMap}toString(){return zj(this)}}function Gm(e,n){return e.length===n.length&&e.every((t,r)=>t.path===n[r].path)}let Lb=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:()=>new Fb,providedIn:"root"})}return e})();class Fb{parse(n){const t=new Uae(n);return new cd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${Bb(n.root,!0)}`,r=function Pae(e){const n=Object.entries(e).map(([t,r])=>Array.isArray(r)?r.map(i=>`${OC(t)}=${OC(i)}`).join("&"):`${OC(t)}=${OC(r)}`).filter(t=>t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${r}${"string"==typeof n.fragment?`#${function Rae(e){return encodeURI(e)}(n.fragment)}`:""}`}}const Aae=new Fb;function PC(e){return e.segments.map(n=>zj(n)).join("/")}function Bb(e,n){if(!e.hasChildren())return PC(e);if(n){const t=e.children[Rn]?Bb(e.children[Rn],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==Rn&&r.push(`${i}:${Bb(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function kae(e,n){let t=[];return Object.entries(e.children).forEach(([r,i])=>{r===Rn&&(t=t.concat(n(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==Rn&&(t=t.concat(n(i,r)))}),t}(e,(r,i)=>i===Rn?[Bb(e.children[Rn],!1)]:[`${i}:${Bb(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Rn]?`${PC(e)}/${t[0]}`:`${PC(e)}/(${t.join("//")})`}}function Bj(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function OC(e){return Bj(e).replace(/%3B/gi,";")}function cA(e){return Bj(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function NC(e){return decodeURIComponent(e)}function Vj(e){return NC(e.replace(/\+/g,"%20"))}function zj(e){return`${cA(e.path)}${function Mae(e){return Object.entries(e).map(([n,t])=>`;${cA(n)}=${cA(t)}`).join("")}(e.parameters)}`}const Oae=/^[^\/()?;#]+/;function uA(e){const n=e.match(Oae);return n?n[0]:""}const Nae=/^[^\/()?;=#]+/,Fae=/^[^=?&#]+/,Vae=/^[^&#]+/;class Uae{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qr([],{}):new qr([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[Rn]=new qr(n,t)),r}parseSegment(){const n=uA(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new se(4009,!1);return this.capture(n),new Nb(NC(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=function Lae(e){const n=e.match(Nae);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=uA(this.remaining);i&&(r=i,this.capture(r))}n[NC(t)]=NC(r)}parseQueryParam(n){const t=function Bae(e){const n=e.match(Fae);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=function zae(e){const n=e.match(Vae);return n?n[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const i=Vj(t),o=Vj(r);if(n.hasOwnProperty(i)){let a=n[i];Array.isArray(a)||(a=[a],n[i]=a),a.push(o)}else n[i]=o}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=uA(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new se(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=Rn);const a=this.parseChildren();t[o??Rn]=1===Object.keys(a).length&&a[Rn]?a[Rn]:new qr([],a),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new se(4011,!1)}}function Uj(e){return e.segments.length>0?new qr([],{[Rn]:e}):e}function jj(e){const n={};for(const[r,i]of Object.entries(e.children)){const o=jj(i);if(r===Rn&&0===o.segments.length&&o.hasChildren())for(const[a,c]of Object.entries(o.children))n[a]=c;else(o.segments.length>0||o.hasChildren())&&(n[r]=o)}return function jae(e){if(1===e.numberOfChildren&&e.children[Rn]){const n=e.children[Rn];return new qr(e.segments.concat(n.segments),n.children)}return e}(new qr(e.segments,n))}function Wm(e){return e instanceof cd}function Hj(e){let n;const i=Uj(function t(o){const a={};for(const p of o.children){const _=t(p);a[p.outlet]=_}const c=new qr(o.url,a);return o===e&&(n=c),c}(e.root));return n??i}function $j(e,n,t,r,i){let o=e;for(;o.parent;)o=o.parent;if(0===n.length)return dA(o,o,o,t,r,i);const a=function $ae(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Wj(!0,0,e);let n=0,t=!1;const r=e.reduce((i,o,a)=>{if("object"==typeof o&&null!=o){if(o.outlets){const c={};return Object.entries(o.outlets).forEach(([p,_])=>{c[p]="string"==typeof _?_.split("/"):_}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===a?(o.split("/").forEach((c,p)=>{0==p&&"."===c||(0==p&&""===c?t=!0:".."===c?n++:""!=c&&i.push(c))}),i):[...i,o]},[]);return new Wj(t,n,r)}(n);if(a.toRoot())return dA(o,o,new qr([],{}),t,r,i);const c=function qae(e,n,t){if(e.isAbsolute)return new FC(n,!0,0);if(!t)return new FC(n,!1,NaN);if(null===t.parent)return new FC(t,!0,0);const r=LC(e.commands[0])?0:1;return function Gae(e,n,t){let r=e,i=n,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new se(4005,!1);i=r.segments.length}return new FC(r,!1,i-o)}(t,t.segments.length-1+r,e.numberOfDoubleDots)}(a,o,e),p=c.processChildren?zb(c.segmentGroup,c.index,a.commands):Zj(c.segmentGroup,c.index,a.commands);return dA(o,c.segmentGroup,p,t,r,i)}function LC(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Vb(e){return"object"==typeof e&&null!=e&&e.outlets}function qj(e,n,t){e||="\u0275";const r=new cd;return r.queryParams={[e]:n},t.parse(t.serialize(r)).queryParams[e]}function dA(e,n,t,r,i,o){const a={};for(const[_,x]of Object.entries(r??{}))a[_]=Array.isArray(x)?x.map(D=>qj(_,D,o)):qj(_,x,o);let c;c=e===n?t:Gj(e,n,t);const p=Uj(jj(c));return new cd(p,a,i)}function Gj(e,n,t){const r={};return Object.entries(e.children).forEach(([i,o])=>{r[i]=o===n?t:Gj(o,n,t)}),new qr(e.segments,r)}class Wj{isAbsolute;numberOfDoubleDots;commands;constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&LC(r[0]))throw new se(4003,!1);const i=r.find(Vb);if(i&&i!==function Eae(e){return e.length>0?e[e.length-1]:null}(r))throw new se(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class FC{segmentGroup;processChildren;index;constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}}function Zj(e,n,t){if(e??=new qr([],{}),0===e.segments.length&&e.hasChildren())return zb(e,n,t);const r=function Zae(e,n,t){let r=0,i=n;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return o;const a=e.segments[i],c=t[r];if(Vb(c))break;const p=`${c}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!Yj(p,_,a))return o;r+=2}else{if(!Yj(p,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new qr(e.segments.slice(0,r.pathIndex),{});return o.children[Rn]=new qr(e.segments.slice(r.pathIndex),e.children),zb(o,0,i)}return r.match&&0===i.length?new qr(e.segments,{}):r.match&&!e.hasChildren()?hA(e,n,t):r.match?zb(e,0,i):hA(e,n,t)}function zb(e,n,t){if(0===t.length)return new qr(e.segments,{});{const r=function Wae(e){return Vb(e[0])?e[0].outlets:{[Rn]:e}}(t),i={};if(Object.keys(r).some(o=>o!==Rn)&&e.children[Rn]&&1===e.numberOfChildren&&0===e.children[Rn].segments.length){const o=zb(e.children[Rn],n,t);return new qr(e.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{"string"==typeof a&&(a=[a]),null!==a&&(i[o]=Zj(e.children[o],n,a))}),Object.entries(e.children).forEach(([o,a])=>{void 0===r[o]&&(i[o]=a)}),new qr(e.segments,i)}}function hA(e,n,t){const r=e.segments.slice(0,n);let i=0;for(;i<t.length;){const o=t[i];if(Vb(o)){const p=Kae(o.outlets);return new qr(r,p)}if(0===i&&LC(t[0])){r.push(new Nb(e.segments[n].path,Kj(t[0]))),i++;continue}const a=Vb(o)?o.outlets[Rn]:`${o}`,c=i<t.length-1?t[i+1]:null;a&&c&&LC(c)?(r.push(new Nb(a,Kj(c))),i+=2):(r.push(new Nb(a,{})),i++)}return new qr(r,{})}function Kae(e){const n={};return Object.entries(e).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(n[t]=hA(new qr([],{}),0,r))}),n}function Kj(e){const n={};return Object.entries(e).forEach(([t,r])=>n[t]=`${r}`),n}function Yj(e,n,t){return e==t.path&&ld(n,t.parameters)}const Ub="imperative";var or=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(or||{});class ud{id;url;constructor(n,t){this.id=n,this.url=t}}class BC extends ud{type=or.NavigationStart;navigationTrigger;restoredState;constructor(n,t,r="imperative",i=null){super(n,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Th extends ud{urlAfterRedirects;type=or.NavigationEnd;constructor(n,t,r){super(n,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Za=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e}(Za||{}),VC=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(VC||{});class tp extends ud{reason;code;type=or.NavigationCancel;constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class iy extends ud{reason;code;type=or.NavigationSkipped;constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i}}class fA extends ud{error;target;type=or.NavigationError;constructor(n,t,r,i){super(n,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Xj extends ud{urlAfterRedirects;state;type=or.RoutesRecognized;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xae extends ud{urlAfterRedirects;state;type=or.GuardsCheckStart;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qae extends ud{urlAfterRedirects;state;shouldActivate;type=or.GuardsCheckEnd;constructor(n,t,r,i,o){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Jae extends ud{urlAfterRedirects;state;type=or.ResolveStart;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ele extends ud{urlAfterRedirects;state;type=or.ResolveEnd;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tle{route;type=or.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nle{route;type=or.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rle{snapshot;type=or.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ile{snapshot;type=or.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ole{snapshot;type=or.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sle{snapshot;type=or.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qj{routerEvent;position;anchor;scrollBehavior;type=or.Scroll;constructor(n,t,r,i){this.routerEvent=n,this.position=t,this.anchor=r,this.scrollBehavior=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class pA{}class zC{url;navigationBehaviorOptions;constructor(n,t){this.url=n,this.navigationBehaviorOptions=t}}class lle{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new jb(this.rootInjector)}}let jb=(()=>{class e{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new lle(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||e)(wt(Fr))};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class Jj{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=mA(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){const t=mA(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=gA(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return gA(n,this._root).map(t=>t.value)}}function mA(e,n){if(e===n.value)return n;for(const t of n.children){const r=mA(e,t);if(r)return r}return null}function gA(e,n){if(e===n.value)return[n];for(const t of n.children){const r=gA(e,t);if(r.length)return r.unshift(n),r}return[]}class lu{value;children;constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function oy(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class e4 extends Jj{snapshot;constructor(n,t){super(n),this.snapshot=t,_A(this,n)}toString(){return this.snapshot.toString()}}function t4(e,n){const t=function cle(e,n){const a=new jC([],{},{},"",{},Rn,e,null,{},n);return new n4("",new lu(a,[]))}(e,n),r=new re([new Nb("",{})]),i=new re({}),o=new re({}),a=new re({}),c=new re(""),p=new Zm(r,i,a,c,o,Rn,e,t.root);return p.snapshot=t.root,new e4(new lu(p,[]),t)}class Zm{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,t,r,i,o,a,c,p){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=c,this._futureSnapshot=p,this.title=this.dataSubject?.pipe(cr(_=>_[Ob]))??An(void 0),this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(cr(n=>ry(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(cr(n=>ry(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function UC(e,n,t="emptyOnly"){let r;const{routeConfig:i}=e;return r=null===n||"always"!==t&&""!==i?.path&&(n.component||n.routeConfig?.loadComponent)?{params:{...e.params},data:{...e.data},resolve:{...e.data,...e._resolvedData??{}}}:{params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.data,...i?.data,...e._resolvedData}},i&&i4(i)&&(r.resolve[Ob]=i.title),r}class jC{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[Ob]}constructor(n,t,r,i,o,a,c,p,_,x){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=c,this.routeConfig=p,this._resolve=_,this._environmentInjector=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ry(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ry(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class n4 extends Jj{url;constructor(n,t){super(t),this.url=n,_A(this,t)}toString(){return r4(this._root)}}function _A(e,n){n.value._routerState=e,n.children.forEach(t=>_A(e,t))}function r4(e){const n=e.children.length>0?` { ${e.children.map(r4).join(", ")} } `:"";return`${e.value}${n}`}function yA(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,ld(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),ld(n.params,t.params)||e.paramsSubject.next(t.params),function xae(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!ld(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.urlSubject.next(t.url),ld(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function vA(e,n){const t=ld(e.params,n.params)&&function Iae(e,n){return Gm(e,n)&&e.every((t,r)=>ld(t.parameters,n[r].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||vA(e.parent,n.parent))}function i4(e){return"string"==typeof e.title||null===e.title}const ule=new Le("");let bA=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Rn;activateEvents=new jn;deactivateEvents=new jn;attachEvents=new jn;detachEvents=new jn;routerOutletData=lte();parentContexts=Z(jb);location=Z(El);changeDetector=Z(vh);inputBinder=Z(HC,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new se(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new se(4013,!1);this._activatedRoute=t;const i=this.location,a=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,p=new dle(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(a,{index:i.length,injector:p,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=At({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Mo]})}return e})();class dle{route;childContexts;parent;outletData;constructor(n,t,r,i){this.route=n,this.childContexts=t,this.parent=r,this.outletData=i}get(n,t){return n===Zm?this.route:n===jb?this.childContexts:n===ule?this.outletData:this.parent.get(n,t)}}const HC=new Le("");let o4=(()=>{class e{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=rA([r.queryParams,r.params,r.data]).pipe(Wa(([o,a,c],p)=>(c={...o,...a,...c},0===p?An(c):Promise.resolve(c)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const a=function cne(e){const n=nn(e);if(!n)return null;const t=new Xv(n);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(r.component);if(a)for(const{templateName:c}of a.inputs)t.activatedComponentRef.setInput(c,o[c]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac})}return e})(),s4=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=vr({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){1&r&&rn(0,"router-outlet")},dependencies:[bA],encapsulation:2})}return e})();function wA(e){const n=e.children&&e.children.map(wA),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==Rn&&(t.component=s4),t}function Hb(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=n.value;const i=function fle(e,n,t){return n.children.map(r=>{for(const i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Hb(e,r,i);return Hb(e,r)})}(e,n,t);return new lu(r,i)}{if(e.shouldAttach(n.value)){const o=e.retrieve(n.value);if(null!==o){const a=o.route;return a.value._futureSnapshot=n.value,a.children=n.children.map(c=>Hb(e,c)),a}}const r=function ple(e){return new Zm(new re(e.url),new re(e.params),new re(e.queryParams),new re(e.fragment),new re(e.data),e.outlet,e.component,e)}(n.value),i=n.children.map(o=>Hb(e,o));return new lu(r,i)}}class xA{redirectTo;navigationBehaviorOptions;constructor(n,t){this.redirectTo=n,this.navigationBehaviorOptions=t}}const a4="ngNavigationCancelingError";function $C(e,n){const{redirectTo:t,navigationBehaviorOptions:r}=Wm(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=l4(!1,Za.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function l4(e,n){const t=new Error(`NavigationCancelingError: ${e||""}`);return t[a4]=!0,t.cancellationCode=n,t}function c4(e){return!!e&&e[a4]}class gle{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,t,r,i,o){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(n){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),yA(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){const i=oy(t);n.children.forEach(o=>{const a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(i===o)if(i.component){const a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(n,t,a.children)}else this.deactivateChildRoutes(n,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=oy(n);for(const a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){const a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:a,route:n,contexts:c})}}deactivateRouteAndOutlet(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=oy(n);for(const a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,t,r){const i=oy(t);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new sle(o.value.snapshot))}),n.children.length&&this.forwardEvent(new ile(n.value.snapshot))}activateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(yA(i),i===o)if(i.component){const a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,a.children)}else this.activateChildRoutes(n,t,r);else if(i.component){const a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),yA(c.route.value),this.activateChildRoutes(n,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(n,null,a.children)}else this.activateChildRoutes(n,null,r)}}class u4{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class qC{component;route;constructor(n,t){this.component=n,this.route=t}}function _le(e,n,t){const r=e._root;return $b(r,n?n._root:null,t,[r.value])}function sy(e,n){const t=Symbol(),r=n.get(e,t);return r===t?"function"!=typeof e||function kg(e){return null!==Wh(e)}(e)?n.get(e):e:r}function $b(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=oy(n);return e.children.forEach(a=>{(function vle(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,a=n?n.value:null,c=t?t.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const p=function ble(e,n,t){if("function"==typeof t)return Vi(n._environmentInjector,()=>t(e,n));switch(t){case"pathParamsChange":return!Gm(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Gm(e.url,n.url)||!ld(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vA(e,n)||!ld(e.queryParams,n.queryParams);default:return!vA(e,n)}}(a,o,o.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new u4(r)):(o.data=a.data,o._resolvedData=a._resolvedData),$b(e,n,o.component?c?c.children:null:t,r,i),p&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new qC(c.outlet.component,a))}else a&&qb(n,c,i),i.canActivateChecks.push(new u4(r)),$b(e,null,o.component?c?c.children:null:t,r,i)})(a,o[a.value.outlet],t,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,c])=>qb(c,t.getContext(a),i)),i}function qb(e,n,t){const r=oy(e),i=e.value;Object.entries(r).forEach(([o,a])=>{qb(a,i.component?n?n.children.getContext(o):null:n,t)}),t.canDeactivateChecks.push(new qC(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}function Gb(e){return"function"==typeof e}function d4(e){return e instanceof iA||"EmptyError"===e?.name}const GC=Symbol("INITIAL_VALUE");function ay(){return Wa(e=>rA(e.map(n=>n.pipe(Os(1),ny(GC)))).pipe(cr(n=>{for(const t of n)if(!0!==t){if(t===GC)return GC;if(!1===t||Sle(t))return t}return!0}),Ps(n=>n!==GC),Os(1)))}function Sle(e){return Wm(e)||e instanceof xA}function h4(e){return e.aborted?An(void 0).pipe(Os(1)):new U(n=>{const t=()=>{n.next(),n.complete()};return e.addEventListener("abort",t),()=>e.removeEventListener("abort",t)})}function f4(e){return ad(h4(e))}function p4(e){return function F(...e){return z(e)}(Dh(n=>{if("boolean"!=typeof n)throw $C(0,n)}),cr(n=>!0===n))}class Sh extends Error{segmentGroup;constructor(n){super(),this.segmentGroup=n||null,Object.setPrototypeOf(this,Sh.prototype)}}class Wb extends Error{urlTree;constructor(n){super(),this.urlTree=n,Object.setPrototypeOf(this,Wb.prototype)}}function Ble(e){throw new se(4e3,!1)}class zle{urlSerializer;urlTree;constructor(n,t){this.urlSerializer=n,this.urlTree=t}lineralizeSegments(n,t){return _e(function*(){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return r;if(i.numberOfChildren>1||!i.children[Rn])throw Ble();i=i.children[Rn]}})()}applyRedirectCommands(n,t,r,i,o){var a=this;return _e(function*(){const c=yield function Ule(e,n,t){if("string"==typeof e)return Promise.resolve(e);const r=e,{queryParams:i,fragment:o,routeConfig:a,url:c,outlet:p,params:_,data:x,title:D,paramMap:A,queryParamMap:O}=n;return RC(qm(Vi(t,()=>r({params:_,data:x,queryParams:i,fragment:o,routeConfig:a,url:c,outlet:p,title:D,paramMap:A,queryParamMap:O}))))}(t,i,o);if(c instanceof cd)throw new Wb(c);const p=a.applyRedirectCreateUrlTree(c,a.urlSerializer.parse(c),n,r);if("/"===c[0])throw new Wb(p);return p})()}applyRedirectCreateUrlTree(n,t,r,i){const o=this.createSegmentGroup(n,t.root,r,i);return new cd(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const r={};return Object.entries(n).forEach(([i,o])=>{if("string"==typeof o&&":"===o[0]){const c=o.substring(1);r[i]=t[c]}else r[i]=o}),r}createSegmentGroup(n,t,r,i){const o=this.createSegments(n,t.segments,r,i);let a={};return Object.entries(t.children).forEach(([c,p])=>{a[c]=this.createSegmentGroup(n,p,r,i)}),new qr(o,a)}createSegments(n,t,r,i){return t.map(o=>":"===o.path[0]?this.findPosParam(n,o,i):this.findOrReturn(o,r))}findPosParam(n,t,r){const i=r[t.path.substring(1)];if(!i)throw new se(4001,!1);return i}findOrReturn(n,t){let r=0;for(const i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}}function cu(e){return e.outlet||Rn}function Gle(e,n){const t=e.filter(r=>cu(r)===n);return t.push(...e.filter(r=>cu(r)!==n)),t}const EA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Wle(e,n,t,r,i,o){const a=m4(e,n,t);return a.matched?(r=function jle(e,n){return e.providers&&!e._injector&&(e._injector=mE(e.providers,n,`Route: ${e.path}`)),e._injector??n}(n,r),function Fle(e,n,t,r,i){const o=n.canMatch;return o&&0!==o.length?An(o.map(c=>{const p=sy(c,e);return qm(function Tle(e){return e&&Gb(e.canMatch)}(p)?p.canMatch(n,t):Vi(e,()=>p(n,t))).pipe(f4(i))})).pipe(ay(),p4()):An(!0)}(r,n,t,0,o).pipe(cr(c=>!0===c?a:{...EA}))):An(a)}function m4(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...EA}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(n.matcher||wae)(t,e,n);if(!i)return{...EA};const o={};Object.entries(i.posParams??{}).forEach(([c,p])=>{o[c]=p.path});const a=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function g4(e,n,t,r){return t.length>0&&function Yle(e,n,t){return t.some(r=>WC(e,n,r)&&cu(r)!==Rn)}(e,t,r)?{segmentGroup:new qr(n,Kle(r,new qr(t,e.children))),slicedSegments:[]}:0===t.length&&function Xle(e,n,t){return t.some(r=>WC(e,n,r))}(e,t,r)?{segmentGroup:new qr(e.segments,Zle(e,t,r,e.children)),slicedSegments:t}:{segmentGroup:new qr(e.segments,e.children),slicedSegments:t}}function Zle(e,n,t,r){const i={};for(const o of t)if(WC(e,n,o)&&!r[cu(o)]){const a=new qr([],{});i[cu(o)]=a}return{...r,...i}}function Kle(e,n){const t={};t[Rn]=n;for(const r of e)if(""===r.path&&cu(r)!==Rn){const i=new qr([],{});t[cu(r)]=i}return t}function WC(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}class Jle{}function CA(){return(CA=_e(function*(e,n,t,r,i,o,a="emptyOnly",c){return new nce(e,n,t,r,i,a,o,c).recognize()})).apply(this,arguments)}class nce{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,t,r,i,o,a,c,p){this.injector=n,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.abortSignal=p,this.applyRedirects=new zle(this.urlSerializer,this.urlTree)}noMatchError(n){return new se(4002,`'${n.segmentGroup}'`)}recognize(){var n=this;return _e(function*(){const t=g4(n.urlTree.root,[],[],n.config).segmentGroup,{children:r,rootSnapshot:i}=yield n.match(t),o=new lu(i,r),a=new n4("",o),c=function Hae(e,n,t=null,r=null,i=new Fb){return $j(Hj(e),n,t,r,i)}(i,[],n.urlTree.queryParams,n.urlTree.fragment);return c.queryParams=n.urlTree.queryParams,a.url=n.urlSerializer.serialize(c),{state:a,tree:c}})()}match(n){var t=this;return _e(function*(){const r=new jC([],Object.freeze({}),Object.freeze({...t.urlTree.queryParams}),t.urlTree.fragment,Object.freeze({}),Rn,t.rootComponentType,null,{},t.injector);try{return{children:yield t.processSegmentGroup(t.injector,t.config,n,Rn,r),rootSnapshot:r}}catch(i){if(i instanceof Wb)return t.urlTree=i.urlTree,t.match(i.urlTree.root);throw i instanceof Sh?t.noMatchError(i):i}})()}processSegmentGroup(n,t,r,i,o){var a=this;return _e(function*(){if(0===r.segments.length&&r.hasChildren())return a.processChildren(n,t,r,o);const c=yield a.processSegment(n,t,r,r.segments,i,!0,o);return c instanceof lu?[c]:[]})()}processChildren(n,t,r,i){var o=this;return _e(function*(){const a=[];for(const _ of Object.keys(r.children))"primary"===_?a.unshift(_):a.push(_);let c=[];for(const _ of a){const x=r.children[_],D=Gle(t,_),A=yield o.processSegmentGroup(n,D,x,_,i);c.push(...A)}const p=_4(c);return function rce(e){e.sort((n,t)=>n.value.outlet===Rn?-1:t.value.outlet===Rn?1:n.value.outlet.localeCompare(t.value.outlet))}(p),p})()}processSegment(n,t,r,i,o,a,c){var p=this;return _e(function*(){for(const _ of t)try{return yield p.processSegmentAgainstRoute(_._injector??n,t,_,r,i,o,a,c)}catch(x){if(x instanceof Sh||d4(x))continue;throw x}if(function Qle(e,n,t){return 0===n.length&&!e.children[t]}(r,i,o))return new Jle;throw new Sh(r)})()}processSegmentAgainstRoute(n,t,r,i,o,a,c,p){var _=this;return _e(function*(){if(cu(r)!==a&&(a===Rn||!WC(i,o,r)))throw new Sh(i);if(void 0===r.redirectTo)return _.matchSegmentAgainstRoute(n,i,r,o,a,p);if(_.allowRedirects&&c)return _.expandSegmentAgainstRouteUsingRedirect(n,i,t,r,o,a,p);throw new Sh(i)})()}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,a,c){var p=this;return _e(function*(){const{matched:_,parameters:x,consumedSegments:D,positionalParamSegments:A,remainingSegments:O}=m4(t,i,o);if(!_)throw new Sh(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(p.absoluteRedirectCount++,p.absoluteRedirectCount>31&&(p.allowRedirects=!1));const B=new jC(o,x,Object.freeze({...p.urlTree.queryParams}),p.urlTree.fragment,y4(i),cu(i),i.component??i._loadedComponent??null,i,v4(i),n),Q=UC(B,c,p.paramsInheritanceStrategy);if(B.params=Object.freeze(Q.params),B.data=Object.freeze(Q.data),p.abortSignal.aborted)throw new Error(p.abortSignal.reason);const oe=yield p.applyRedirects.applyRedirectCommands(D,i.redirectTo,A,B,n),be=yield p.applyRedirects.lineralizeSegments(i,oe);return p.processSegment(n,r,t,be.concat(O),a,!1,c)})()}matchSegmentAgainstRoute(n,t,r,i,o,a){var c=this;return _e(function*(){if(c.abortSignal.aborted)throw new Error(c.abortSignal.reason);const p=yield RC(Wle(t,r,i,n,0,c.abortSignal));if("**"===r.path&&(t.children={}),!p?.matched)throw new Sh(t);n=r._injector??n;const{routes:_}=yield c.getChildConfig(n,r,i),x=r._loadedInjector??n,{parameters:D,consumedSegments:A,remainingSegments:O}=p,B=new jC(A,D,Object.freeze({...c.urlTree.queryParams}),c.urlTree.fragment,y4(r),cu(r),r.component??r._loadedComponent??null,r,v4(r),n),Q=UC(B,a,c.paramsInheritanceStrategy);B.params=Object.freeze(Q.params),B.data=Object.freeze(Q.data);const{segmentGroup:oe,slicedSegments:be}=g4(t,A,O,_);if(0===be.length&&oe.hasChildren()){const De=yield c.processChildren(x,_,oe,B);return new lu(B,De)}if(0===_.length&&0===be.length)return new lu(B,[]);const xe=cu(r)===o,$e=yield c.processSegment(x,_,oe,be,xe?Rn:o,!0,B);return new lu(B,$e instanceof lu?[$e]:[])})()}getChildConfig(n,t,r){var i=this;return _e(function*(){if(t.children)return{routes:t.children,injector:n};if(t.loadChildren){if(void 0!==t._loadedRoutes){const a=t._loadedNgModuleFactory;return a&&!t._loadedInjector&&(t._loadedInjector=a.create(n).injector),{routes:t._loadedRoutes,injector:t._loadedInjector}}if(i.abortSignal.aborted)throw new Error(i.abortSignal.reason);if(yield RC(function Lle(e,n,t,r,i){const o=n.canLoad;return void 0===o||0===o.length?An(!0):An(o.map(c=>{const p=sy(c,e),x=qm(function xle(e){return e&&Gb(e.canLoad)}(p)?p.canLoad(n,t):Vi(e,()=>p(n,t)));return i?x.pipe(f4(i)):x})).pipe(ay(),p4())}(n,t,r,0,i.abortSignal))){const a=yield i.configLoader.loadChildren(n,t);return t._loadedRoutes=a.routes,t._loadedInjector=a.injector,t._loadedNgModuleFactory=a.factory,a}throw function Vle(){throw l4(!1,Za.GuardRejected)}()}return{routes:[],injector:n}})()}}function ice(e){const n=e.value.routeConfig;return n&&""===n.path}function _4(e){const n=[],t=new Set;for(const r of e){if(!ice(r)){n.push(r);continue}const i=n.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):n.push(r)}for(const r of t){const i=_4(r.children);n.push(new lu(r.value,i))}return n.filter(r=>!t.has(r))}function y4(e){return e.data||{}}function v4(e){return e.resolve||{}}function b4(e){const n=e.children.map(t=>b4(t)).flat();return[e,...n]}function w4(e){return Wa(n=>{const t=e(n);return t?fs(t).pipe(cr(()=>n)):An(n)})}let x4=(()=>{class e{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Rn);return r}getResolvedTitleForRoute(t){return t.data[Ob]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:()=>Z(uce),providedIn:"root"})}return e})(),uce=(()=>{class e extends x4{title;constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(wt(mae))};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const ly=new Le("",{factory:()=>({})}),Zb=new Le("");let DA=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Z(Zee);loadComponent(t,r){var i=this;return _e(function*(){if(i.componentLoaders.get(r))return i.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);i.onLoadStartListener&&i.onLoadStartListener(r);const o=_e(function*(){try{const a=yield Pj(Vi(t,()=>r.loadComponent())),c=yield C4(E4(a));return i.onLoadEndListener&&i.onLoadEndListener(r),r._loadedComponent=c,c}finally{i.componentLoaders.delete(r)}})();return i.componentLoaders.set(r,o),o})()}loadChildren(t,r){var i=this;if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=_e(function*(){try{const a=yield function dce(e,n,t,r){return TA.apply(this,arguments)}(r,i.compiler,t,i.onLoadEndListener);return r._loadedRoutes=a.routes,r._loadedInjector=a.injector,r._loadedNgModuleFactory=a.factory,a}finally{i.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function TA(){return(TA=_e(function*(e,n,t,r){const i=yield Pj(Vi(t,()=>e.loadChildren())),o=yield C4(E4(i));let a;a=o instanceof FF||Array.isArray(o)?o:yield n.compileModuleAsync(o),r&&r(e);let c,p,x;return Array.isArray(a)?p=a:(c=a.create(t).injector,x=a,p=c.get(Zb,[],{optional:!0,self:!0}).flat()),{routes:p.map(wA),injector:c,factory:x}})).apply(this,arguments)}function E4(e){return function hce(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}function C4(e){return SA.apply(this,arguments)}function SA(){return(SA=_e(function*(e){return e})).apply(this,arguments)}let IA=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:()=>Z(fce),providedIn:"root"})}return e})(),fce=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const D4=new Le(""),T4=new Le("");function pce(e,n,t){const r=e.get(T4),i=e.get(Un);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(_=>setTimeout(_));let o;const a=new Promise(_=>{o=_}),c=i.startViewTransition(()=>(o(),function mce(e){return new Promise(n=>{ru({read:()=>setTimeout(n)},{injector:e})})}(e)));c.updateCallbackDone.catch(_=>{}),c.ready.catch(_=>{}),c.finished.catch(_=>{});const{onViewTransitionCreated:p}=r;return p&&Vi(e,()=>p({transition:c,from:n,to:t})),a}const gce=()=>{},S4=new Le("");let kA=(()=>{class e{currentNavigation=cs(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=cs(null);events=new K;transitionAbortWithErrorSubject=new K;configLoader=Z(DA);environmentInjector=Z(Fr);destroyRef=Z(rr);urlSerializer=Z(Lb);rootContexts=Z(jb);location=Z(Q_);inputBindingEnabled=null!==Z(HC,{optional:!0});titleStrategy=Z(x4);options=Z(ly,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Z(IA);createViewTransition=Z(D4,{optional:!0});navigationErrorHandler=Z(S4,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>An(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=i=>this.events.next(new nle(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new tle(i)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;mr(()=>{this.transitions?.next({...t,extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r})})}setupNavigations(t){return this.transitions=new re(null),this.transitions.pipe(Ps(r=>null!==r),Wa(r=>{let i=!1;const o=new AbortController,a=()=>!i&&this.currentTransition?.id===r.id;return An(r).pipe(Wa(c=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Za.SupersededByNewNavigation),fa;this.currentTransition=r;const p=this.lastSuccessfulNavigation();this.currentNavigation.set({id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:"string"==typeof c.extras.browserUrl?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:p?{...p,previousNavigation:null}:null,abort:()=>o.abort()});const _=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!_&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation))return this.events.next(new iy(c.id,this.urlSerializer.serialize(c.rawUrl),"",VC.IgnoredSameUrlNavigation)),c.resolve(!1),fa;if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return An(c).pipe(Wa(D=>(this.events.next(new BC(D.id,this.urlSerializer.serialize(D.extractedUrl),D.source,D.restoredState)),D.id!==this.navigationId?fa:Promise.resolve(D))),function oce(e,n,t,r,i,o,a){return wc(function(){var c=_e(function*(p){const{state:_,tree:x}=yield function ece(e,n,t,r,i,o){return CA.apply(this,arguments)}(e,n,t,r,p.extractedUrl,i,o,a);return{...p,targetSnapshot:_,urlAfterRedirects:x}});return function(p){return c.apply(this,arguments)}}())}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Dh(D=>{r.targetSnapshot=D.targetSnapshot,r.urlAfterRedirects=D.urlAfterRedirects,this.currentNavigation.update(O=>(O.finalUrl=D.urlAfterRedirects,O));const A=new Xj(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(A)}));if(_&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:D,extractedUrl:A,source:O,restoredState:B,extras:Q}=c,oe=new BC(D,this.urlSerializer.serialize(A),O,B);this.events.next(oe);const be=t4(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r={...c,targetSnapshot:be,urlAfterRedirects:A,extras:{...Q,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.update(xe=>(xe.finalUrl=A,xe)),An(r)}return this.events.next(new iy(c.id,this.urlSerializer.serialize(c.extractedUrl),"",VC.IgnoredByUrlHandlingStrategy)),c.resolve(!1),fa}),cr(c=>{const p=new Xae(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);return this.events.next(p),this.currentTransition=r={...c,guards:_le(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},r}),function Ile(e){return wc(n=>{const{targetSnapshot:t,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:o}}=n;return 0===o.length&&0===i.length?An({...n,guardsResult:!0}):function kle(e,n,t){return fs(e).pipe(wc(r=>function Nle(e,n,t,r){const i=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return i&&0!==i.length?An(i.map(a=>{const c=n._environmentInjector,p=sy(a,c);return qm(function Dle(e){return e&&Gb(e.canDeactivate)}(p)?p.canDeactivate(e,n,t,r):Vi(c,()=>p(e,n,t,r))).pipe($m())})).pipe(ay()):An(!0)}(r.component,r.route,t,n)),$m(r=>!0!==r,!0))}(o,t,r).pipe(wc(a=>a&&function wle(e){return"boolean"==typeof e}(a)?function Ale(e,n,t){return fs(n).pipe(AC(r=>kC(function Mle(e,n){return null!==e&&n&&n(new rle(e)),An(!0)}(r.route.parent,t),function Rle(e,n){return null!==e&&n&&n(new ole(e)),An(!0)}(r.route,t),function Ole(e,n){const t=n[n.length-1],i=n.slice(0,n.length-1).reverse().map(o=>function yle(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(o)).filter(o=>null!==o).map(o=>Mb(()=>An(o.guards.map(c=>{const p=o.node._environmentInjector,_=sy(c,p);return qm(function Cle(e){return e&&Gb(e.canActivateChild)}(_)?_.canActivateChild(t,e):Vi(p,()=>_(t,e))).pipe($m())})).pipe(ay())));return An(i).pipe(ay())}(e,r.path),function Ple(e,n){const t=n.routeConfig?n.routeConfig.canActivate:null;if(!t||0===t.length)return An(!0);const r=t.map(i=>Mb(()=>{const o=n._environmentInjector,a=sy(i,o);return qm(function Ele(e){return e&&Gb(e.canActivate)}(a)?a.canActivate(n,e):Vi(o,()=>a(n,e))).pipe($m())}));return An(r).pipe(ay())}(e,r.route))),$m(r=>!0!==r,!0))}(t,i,e):An(a)),cr(a=>({...n,guardsResult:a})))})}(c=>this.events.next(c)),Wa(c=>{if(r.guardsResult=c.guardsResult,c.guardsResult&&"boolean"!=typeof c.guardsResult)throw $C(0,c.guardsResult);const p=new Qae(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);if(this.events.next(p),!a())return fa;if(!c.guardsResult)return this.cancelNavigationTransition(c,"",Za.GuardRejected),fa;if(0===c.guards.canActivateChecks.length)return An(c);const _=new Jae(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);if(this.events.next(_),!a())return fa;let x=!1;return An(c).pipe(function sce(e){return wc(n=>{const{targetSnapshot:t,guards:{canActivateChecks:r}}=n;if(!r.length)return An(n);const i=new Set(r.map(c=>c.route)),o=new Set;for(const c of i)if(!o.has(c))for(const p of b4(c))o.add(p);let a=0;return fs(o).pipe(AC(c=>i.has(c)?function ace(e,n,t){const r=e.routeConfig,i=e._resolve;return void 0!==r?.title&&!i4(r)&&(i[Ob]=r.title),Mb(()=>(e.data=UC(e,e.parent,t).resolve,function lce(e,n,t){const r=aA(e);if(0===r.length)return An({});const i={};return fs(r).pipe(wc(o=>function cce(e,n,t){const r=n._environmentInjector,i=sy(e,r);return qm(i.resolve?i.resolve(n,t):Vi(r,()=>i(n,t)))}(e[o],n,t).pipe($m(),Dh(a=>{if(a instanceof xA)throw $C(new Fb,a);i[o]=a}))),Sj(1),cr(()=>i),oA(o=>d4(o)?fa:function dae(e,n){const t=dr(e)?e:()=>e,r=i=>i.error(t());return new U(n?i=>n.schedule(r,0,i):r)}(o)))}(i,e,n).pipe(cr(o=>(e._resolvedData=o,e.data={...e.data,...o},null)))))}(c,t,e):(c.data=UC(c,c.parent,e).resolve,An(void 0))),Dh(()=>a++),Sj(1),wc(c=>a===o.size?An(n):fa))})}(this.paramsInheritanceStrategy),Dh({next:()=>{x=!0;const D=new ele(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(D)},complete:()=>{x||this.cancelNavigationTransition(c,"",Za.NoDataFromResolver)}}))}),w4(c=>{const p=x=>{const D=[];x.routeConfig?._loadedComponent?x.component=x.routeConfig?._loadedComponent:x.routeConfig?.loadComponent&&D.push(this.configLoader.loadComponent(x._environmentInjector,x.routeConfig).then(O=>{x.component=O}));for(const A of x.children)D.push(...p(A));return D},_=p(c.targetSnapshot.root);return 0===_.length?An(c):fs(Promise.all(_).then(()=>c))}),w4(()=>this.afterPreactivation()),Wa(()=>{const{currentSnapshot:c,targetSnapshot:p}=r,_=this.createViewTransition?.(this.environmentInjector,c.root,p.root);return _?fs(_).pipe(cr(()=>r)):An(r)}),Os(1),cr(c=>{const p=function hle(e,n,t){const r=Hb(e,n._root,t?t._root:void 0);return new e4(r,n)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);this.currentTransition=r=c={...c,targetRouterState:p},this.currentNavigation.update(_=>(_.targetRouterState=p,_)),this.events.next(new pA),a()&&(new gle(t.routeReuseStrategy,r.targetRouterState,r.currentRouterState,_=>this.events.next(_),this.inputBindingEnabled).activate(this.rootContexts),a()&&(i=!0,this.currentNavigation.update(_=>(_.abort=gce,_)),this.lastSuccessfulNavigation.set(mr(this.currentNavigation)),this.events.next(new Th(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)))}),ad(h4(o.signal).pipe(Ps(()=>!i&&!r.targetRouterState),Dh(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Za.Aborted)}))),Dh({complete:()=>{i=!0}}),ad(this.transitionAbortWithErrorSubject.pipe(Dh(c=>{throw c}))),Ij(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Za.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),oA(c=>{if(i=!0,this.destroyed)return r.resolve(!1),fa;if(c4(c))this.events.next(new tp(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode)),function mle(e){return c4(e)&&Wm(e.url)}(c)?this.events.next(new zC(c.url,c.navigationBehaviorOptions)):r.resolve(!1);else{const p=new fA(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);try{const _=Vi(this.environmentInjector,()=>this.navigationErrorHandler?.(p));if(!(_ instanceof xA))throw this.events.next(p),c;{const{message:x,cancellationCode:D}=$C(0,_);this.events.next(new tp(r.id,this.urlSerializer.serialize(r.extractedUrl),x,D)),this.events.next(new zC(_.redirectTo,_.navigationBehaviorOptions))}}catch(_){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(_)}}return fa}))}))}cancelNavigationTransition(t,r,i){const o=new tp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=mr(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function _ce(e){return e!==Ub}const yce=new Le("");let vce=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:()=>Z(wce),providedIn:"root"})}return e})();class bce{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}shouldDestroyInjector(n){return!0}}let wce=(()=>{class e extends bce{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(e)))(i||e)}})();static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),k4=(()=>{class e{urlSerializer=Z(Lb);options=Z(ly,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Z(Q_);urlHandlingStrategy=Z(IA);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new cd;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){const o=void 0!==t?this.urlHandlingStrategy.merge(t,r):r,a=i??o;return a instanceof cd?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=t4(null,Z(Fr));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:()=>Z(xce),providedIn:"root"})}return e})(),xce=(()=>{class e extends k4{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof BC?this.updateStateMemento():t instanceof iy?this.commitTransition(r):t instanceof Xj?"eager"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof pA?(this.commitTransition(r),"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof tp&&!function Yae(e){return e instanceof tp&&(e.code===Za.Redirect||e.code===Za.SupersededByNewNavigation)}(t)?this.restoreHistory(r):t instanceof fA?this.restoreHistory(r,!0):t instanceof Th&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){const{replaceUrl:o,state:a}=r;if(this.location.isCurrentPathEqualTo(t)||o){const c=this.browserPageId,p={...a,...this.generateNgRouterState(i,c)};this.location.replaceState(t,"",p)}else{const c={...a,...this.generateNgRouterState(i,this.browserPageId+1)};this.location.go(t,"",c)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&0===o&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(e)))(i||e)}})();static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function A4(e,n){e.events.pipe(Ps(t=>t instanceof Th||t instanceof tp||t instanceof fA||t instanceof iy),cr(t=>t instanceof Th||t instanceof iy?0:t instanceof tp&&(t.code===Za.Redirect||t.code===Za.SupersededByNewNavigation)?2:1),Ps(t=>2!==t),Os(1)).subscribe(()=>{n()})}const R4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},M4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ns=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Z(uB);stateManager=Z(k4);options=Z(ly,{optional:!0})||{};pendingTasks=Z(Fa);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Z(kA);urlSerializer=Z(Lb);location=Z(Q_);urlHandlingStrategy=Z(IA);injector=Z(Fr);_events=new K;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Z(vce);injectorCleanup=Z(yce,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Z(Zb,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Z(HC,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new Gn;subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=mr(this.navigationTransitions.currentNavigation);if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof tp&&r.code!==Za.Redirect&&r.code!==Za.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Th)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof zC){const a=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),p={scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||_ce(i.source),...a};this.scheduleNavigation(c,Ub,null,p,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function ale(e){return!(e instanceof pA||e instanceof zC)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ub,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){const p={...i};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(o.state=p)}const c=this.parseUrl(t);this.scheduleNavigation(c,r,a,o).catch(p=>{this.disposed||this.injector.get(pl)(p)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return mr(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(wA),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:p}=r,_=p?this.currentUrlTree.fragment:a;let D,x=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":x={...this.currentUrlTree.queryParams,...o};break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=o||null}null!==x&&(x=this.removeEmptyProps(x));try{D=Hj(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),D=this.currentUrlTree.root}return $j(D,t,x,_??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Wm(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ub,null,r)}navigate(t,r={skipLocationChange:!1}){return function Ece(e){for(let n=0;n<e.length;n++)if(null==e[n])throw new se(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Lt(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...R4}:!1===r?{...M4}:r,Wm(t))return lA(this.currentUrlTree,t,i);const o=this.parseUrl(t);return lA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let c,p,_;a?(c=a.resolve,p=a.reject,_=a.promise):_=new Promise((D,A)=>{c=D,p=A});const x=this.pendingTasks.add();return A4(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(x))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:c,reject:p,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(D=>Promise.reject(D))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),np=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=cs(null);get href(){return mr(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new K;applicationErrorHandler=Z(pl);options=Z(ly,{optional:!0});constructor(t,r,i,o,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this.locationStrategy=c,this.reactiveHref.set(Z(new ste("href"),{optional:!0}));const p=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===p||"area"===p||!("object"!=typeof customElements||!customElements.get(p)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){void 0===this.subscription&&(this.subscription=this.router.events.subscribe(t=>{t instanceof Th&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){null==t?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=Wm(t)||Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,a){const c=this.urlTree;if(null===c||this.isAnchorElement&&(0!==t||r||i||o||a||"string"==typeof this.target&&"_self"!=this.target))return!0;const p={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,p)?.catch(_=>{this.applicationErrorHandler(_)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.reactiveHref.set(null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.routerLinkInput?null:Wm(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||e)(Re(Ns),Re(Zm),kf("tabindex"),Re(ja),Re(Pr),Re(jm))};static \u0275dir=At({type:e,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){1&r&&Nt("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&r&&Ws("href",i.reactiveHref(),U2)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",hs],skipLocationChange:[2,"skipLocationChange","skipLocationChange",hs],replaceUrl:[2,"replaceUrl","replaceUrl",hs],routerLink:"routerLink"},features:[Mo]})}return e})(),RA=(()=>{class e{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new jn;link=Z(np,{optional:!0});constructor(t,r,i,o){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Th&&this.update()})}ngAfterContentInit(){An(this.links.changes,An(null)).pipe(ty()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=fs(t).pipe(ty()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Cce(e){return!!e.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact?{...R4}:{...M4};return i=>{const o=i.urlTree;return!!o&&mr(function Dae(e,n,t){const r=e instanceof cd?e:n.parseUrl(e);return vc(()=>lA(n.lastSuccessfulNavigation()?.finalUrl??new cd,r,t))}(o,t,r))}}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||e)(Re(Ns),Re(Pr),Re(ja),Re(vh))};static \u0275dir=At({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(1&r&&II(o,np,5),2&r){let a;Kf(a=Yf())&&(i.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Mo]})}return e})();class P4{}let Dce=(()=>{class e{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ps(t=>t instanceof Th),AC(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription?.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=mE(o.providers,t,""));const a=o._injector??t;o._loadedNgModuleFactory&&!o._loadedInjector&&(o._loadedInjector=o._loadedNgModuleFactory.create(a).injector);const c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(c,o.children??o._loadedRoutes))}return fs(i).pipe(ty())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{if(t.destroyed)return An(null);let i;i=r.loadChildren&&void 0===r.canLoad?fs(this.loader.loadChildren(t,r)):An(null);const o=i.pipe(wc(a=>null===a?An(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,r._loadedNgModuleFactory=a.factory,this.processRoutes(a.injector??t,a.routes))));return r.loadComponent&&!r._loadedComponent?fs([o,this.loader.loadComponent(t,r)]).pipe(ty()):o})}static \u0275fac=function(r){return new(r||e)(wt(Ns),wt(Fr),wt(P4),wt(DA))};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const MA=new Le("");let O4=(()=>{class e{options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Ub;restoredId=0;store={};urlSerializer=Z(Lb);zone=Z(Jt);viewportScroller=Z(PU);transitions=Z(kA);constructor(t){this.options=t,this.options.scrollPositionRestoration||="disabled",this.options.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof BC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Th?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof iy&&t.code===VC.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Qj)||"manual"===t.scrollBehavior)return;const r={behavior:"instant"};t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0],r):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){var i=this;const o=mr(this.transitions.currentNavigation)?.extras.scroll;this.zone.runOutsideAngular(_e(function*(){yield new Promise(a=>{setTimeout(a),typeof requestAnimationFrame<"u"&&requestAnimationFrame(a)}),i.zone.run(()=>{i.transitions.events.next(new Qj(t,"popstate"===i.lastSource?i.store[i.restoredId]:null,r,o))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){!function oF(){throw new Error("invalid")}()};static \u0275prov=Ue({token:e,factory:e.\u0275fac})}return e})();function N4(){return Z(Ns).routerState.root}function xc(e,n){return{\u0275kind:e,\u0275providers:n}}function L4(){const e=Z(Tn);return n=>{const t=e.get(Cl);if(n!==t.components[0])return;const r=e.get(Ns),i=e.get(F4);1===e.get(PA)&&r.initialNavigation(),e.get(B4,null,{optional:!0})?.setUpPreloading(),e.get(MA,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const F4=new Le("",{factory:()=>new K}),PA=new Le("",{factory:()=>1}),B4=new Le("");function Rce(e){return xc(0,[{provide:B4,useExisting:Dce},{provide:P4,useExisting:e}])}function Pce(e){return Wo("NgRouterViewTransitions"),xc(9,[{provide:D4,useValue:pce},{provide:T4,useValue:{skipNextTransition:!!e?.skipInitialTransition,...e}}])}const Oce=[Q_,{provide:Lb,useClass:Fb},Ns,jb,{provide:Zm,useFactory:N4},DA,[]];let Kb=(()=>{class e{constructor(){}static forRoot(t,r){return{ngModule:e,providers:[Oce,[],{provide:Zb,multi:!0,useValue:t},[],r?.errorHandler?{provide:S4,useValue:r.errorHandler}:[],{provide:ly,useValue:r||{}},r?.useHash?{provide:jm,useClass:uoe}:{provide:jm,useClass:F3},{provide:MA,useFactory:()=>{const e=Z(PU),n=Z(ly);return n.scrollOffset&&e.setOffset(n.scrollOffset),new O4(n)}},r?.preloadingStrategy?Rce(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Bce(r):[],r?.bindToComponentInputs?xc(8,[o4,{provide:HC,useExisting:o4}]).\u0275providers:[],r?.enableViewTransitions?Pce().\u0275providers:[],[{provide:V4,useFactory:L4},{provide:eI,multi:!0,useExisting:V4}]]}}static forChild(t){return{ngModule:e,providers:[{provide:Zb,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({})}return e})();function Bce(e){return["disabled"===e.initialNavigation?xc(3,[JS(()=>{Z(Ns).setUpLocationChangeListener()}),{provide:PA,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?xc(2,[{provide:cm,useValue:!0},{provide:PA,useValue:0},JS(()=>{const n=Z(Tn);return n.get(hne,Promise.resolve()).then(()=>new Promise(r=>{const i=n.get(Ns),o=n.get(F4);A4(i,()=>{r(!0)}),n.get(kA).afterPreactivation=()=>(r(!0),o.closed?An(void 0):o),i.initialNavigation()}))})]).\u0275providers:[]]}const V4=new Le("");class uu{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof uu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new uu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof uu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,t);const i=("a"===n.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=n.value;if(o){let a=this.headers.get(t);if(!a)return;a=a.filter(c=>-1===o.indexOf(c)),0===a.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}addHeaderEntry(n,t){const r=n.toLowerCase();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(n,t){const r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=n.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class zce{map=new Map;set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}class Uce{encodeKey(n){return z4(n)}encodeValue(n){return z4(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const Hce=/%(\d[a-f0-9])/gi,$ce={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function z4(e){return encodeURIComponent(e).replace(Hce,(n,t)=>$ce[t]??n)}function ZC(e){return`${e}`}class rp{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new Uce,n.fromString){if(n.fromObject)throw new se(2805,!1);this.map=function jce(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[a,c]=-1==o?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,o)),n.decodeValue(i.slice(o+1))],p=t.get(a)||[];p.push(c),t.set(a,p)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const r=n.fromObject[t],i=Array.isArray(r)?r.map(ZC):[ZC(r)];this.map.set(t,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(r=>{const i=n[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new rp({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(ZC(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const i=r.indexOf(ZC(n.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}function U4(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function j4(e){return typeof Blob<"u"&&e instanceof Blob}function H4(e){return typeof FormData<"u"&&e instanceof FormData}const Yb="Content-Type",$4="text/plain",q4="application/json",G4=`${q4}, ${$4}, */*`;class Xb{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(n,t,r,i){let o;if(this.url=t,this.method=n.toUpperCase(),function qce(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),"number"==typeof o.timeout){if(o.timeout<1||!Number.isInteger(o.timeout))throw new se(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),o.referrerPolicy&&(this.referrerPolicy=o.referrerPolicy),this.transferCache=o.transferCache}if(this.headers??=new uu,this.context??=new zce,this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=t;else{const c=t.indexOf("?");this.urlWithParams=t+(-1===c?"?":c<t.length-1?"&":"")+a}}else this.params=new rp,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||U4(this.body)||j4(this.body)||H4(this.body)||function Gce(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)?this.body:this.body instanceof rp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||H4(this.body)?null:j4(this.body)?this.body.type||null:U4(this.body)?null:"string"==typeof this.body?$4:this.body instanceof rp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?q4:null}clone(n={}){const t=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,o=n.keepalive??this.keepalive,a=n.priority||this.priority,c=n.cache||this.cache,p=n.mode||this.mode,_=n.redirect||this.redirect,x=n.credentials||this.credentials,D=n.referrer||this.referrer,A=n.integrity||this.integrity,O=n.referrerPolicy||this.referrerPolicy,B=n.transferCache??this.transferCache,Q=n.timeout??this.timeout,oe=void 0!==n.body?n.body:this.body,be=n.withCredentials??this.withCredentials,xe=n.reportProgress??this.reportProgress;let $e=n.headers||this.headers,De=n.params||this.params;const we=n.context??this.context;return void 0!==n.setHeaders&&($e=Object.keys(n.setHeaders).reduce((Fe,We)=>Fe.set(We,n.setHeaders[We]),$e)),n.setParams&&(De=Object.keys(n.setParams).reduce((Fe,We)=>Fe.set(We,n.setParams[We]),De)),new Xb(t,r,oe,{params:De,headers:$e,context:we,reportProgress:xe,responseType:i,withCredentials:be,transferCache:B,keepalive:o,cache:c,priority:a,timeout:Q,mode:p,redirect:_,credentials:x,referrer:D,integrity:A,referrerPolicy:O})}}var ip=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(ip||{});class OA{headers;status;statusText;url;ok;type;redirected;responseType;constructor(n,t=200,r="OK"){this.headers=n.headers||new uu,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.redirected=n.redirected,this.responseType=n.responseType,this.ok=this.status>=200&&this.status<300}}class YC extends OA{constructor(n={}){super(n)}type=ip.ResponseHeader;clone(n={}){return new YC({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Qb extends OA{body;constructor(n={}){super(n),this.body=void 0!==n.body?n.body:null}type=ip.Response;clone(n={}){return new Qb({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0,redirected:n.redirected??this.redirected,responseType:n.responseType??this.responseType})}}class Km extends OA{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}const Z4=new Le(""),Qce=/^\)\]\}',?\n/;let K4=(()=>{class e{xhrFactory;tracingService=Z(D_,{optional:!0});constructor(t){this.xhrFactory=t}maybePropagateTrace(t){return this.tracingService?.propagate?this.tracingService.propagate(t):t}handle(t){if("JSONP"===t.method)throw new se(-2800,!1);const r=this.xhrFactory;return An(null).pipe(Wa(()=>new U(o=>{const a=r.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((oe,be)=>a.setRequestHeader(oe,be.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept",G4),!t.headers.has(Yb)){const oe=t.detectContentTypeHeader();null!==oe&&a.setRequestHeader(Yb,oe)}if(t.timeout&&(a.timeout=t.timeout),t.responseType){const oe=t.responseType.toLowerCase();a.responseType="json"!==oe?oe:"text"}const c=t.serializeBody();let p=null;const _=()=>{if(null!==p)return p;const oe=a.statusText||"OK",be=new uu(a.getAllResponseHeaders());return p=new YC({headers:be,status:a.status,statusText:oe,url:a.responseURL||t.url}),p},x=this.maybePropagateTrace(()=>{let{headers:oe,status:be,statusText:xe,url:$e}=_(),De=null;204!==be&&(De=typeof a.response>"u"?a.responseText:a.response),0===be&&(be=De?200:0);let we=be>=200&&be<300;if("json"===t.responseType&&"string"==typeof De){const Fe=De;De=De.replace(Qce,"");try{De=""!==De?JSON.parse(De):null}catch(We){De=Fe,we&&(we=!1,De={error:We,text:De})}}we?(o.next(new Qb({body:De,headers:oe,status:be,statusText:xe,url:$e||void 0})),o.complete()):o.error(new Km({error:De,headers:oe,status:be,statusText:xe,url:$e||void 0}))}),D=this.maybePropagateTrace(oe=>{const{url:be}=_(),xe=new Km({error:oe,status:a.status||0,statusText:a.statusText||"Unknown Error",url:be||void 0});o.error(xe)});let A=D;t.timeout&&(A=this.maybePropagateTrace(oe=>{const{url:be}=_(),xe=new Km({error:new DOMException("Request timed out","TimeoutError"),status:a.status||0,statusText:a.statusText||"Request timeout",url:be||void 0});o.error(xe)}));let O=!1;const B=this.maybePropagateTrace(oe=>{O||(o.next(_()),O=!0);let be={type:ip.DownloadProgress,loaded:oe.loaded};oe.lengthComputable&&(be.total=oe.total),"text"===t.responseType&&a.responseText&&(be.partialText=a.responseText),o.next(be)}),Q=this.maybePropagateTrace(oe=>{let be={type:ip.UploadProgress,loaded:oe.loaded};oe.lengthComputable&&(be.total=oe.total),o.next(be)});return a.addEventListener("load",x),a.addEventListener("error",D),a.addEventListener("timeout",A),a.addEventListener("abort",D),t.reportProgress&&(a.addEventListener("progress",B),null!==c&&a.upload&&a.upload.addEventListener("progress",Q)),a.send(c),o.next({type:ip.Sent}),()=>{a.removeEventListener("error",D),a.removeEventListener("abort",D),a.removeEventListener("load",x),a.removeEventListener("timeout",A),t.reportProgress&&(a.removeEventListener("progress",B),null!==c&&a.upload&&a.upload.removeEventListener("progress",Q)),a.readyState!==a.DONE&&a.abort()}})))}static \u0275fac=function(r){return new(r||e)(wt(RU))};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Y4(e,n){return n(e)}const Jb=new Le("",{factory:()=>[]}),nue=new Le(""),X4=new Le("",{factory:()=>!0});let XC=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:function(r){let i=null;return i=r?new(r||e):wt(K4),i},providedIn:"root"})}return e})(),FA=(()=>{class e{backend;injector;chain=null;pendingTasks=Z(sv);contributeToStability=Z(X4);constructor(t,r){this.backend=t,this.injector=r}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Jb),...this.injector.get(nue,[])]));this.chain=r.reduceRight((i,o)=>function eue(e,n,t){return(r,i)=>Vi(t,()=>n(r,o=>e(o,i)))}(i,o,this.injector),Y4)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Ij(r))}return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||e)(wt(XC),wt(Fr))};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),BA=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:function(r){let i=null;return i=r?new(r||e):wt(FA),i},providedIn:"root"})}return e})();function VA(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,credentials:e.credentials,transferCache:e.transferCache,timeout:e.timeout,keepalive:e.keepalive,priority:e.priority,cache:e.cache,mode:e.mode,redirect:e.redirect,integrity:e.integrity,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}let iue=(()=>{class e{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Xb)o=t;else{let p,_;p=i.headers instanceof uu?i.headers:new uu(i.headers),i.params&&(_=i.params instanceof rp?i.params:new rp({fromObject:i.params})),o=new Xb(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:_,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,referrerPolicy:i.referrerPolicy,integrity:i.integrity,timeout:i.timeout})}const a=An(o).pipe(AC(p=>this.handler.handle(p)));if(t instanceof Xb||"events"===i.observe)return a;const c=a.pipe(Ps(p=>p instanceof Qb));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(cr(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new se(2806,!1);return p.body}));case"blob":return c.pipe(cr(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new se(2807,!1);return p.body}));case"text":return c.pipe(cr(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new se(2808,!1);return p.body}));default:return c.pipe(cr(p=>p.body))}case"response":return c;default:throw new se(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new rp).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,VA(i,r))}post(t,r,i={}){return this.request("POST",t,VA(i,r))}put(t,r,i={}){return this.request("PUT",t,VA(i,r))}static \u0275fac=function(r){return new(r||e)(wt(BA))};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const J4=new Le("",{factory:()=>!0}),e5=new Le("",{factory:()=>"XSRF-TOKEN"}),t5=new Le("",{factory:()=>"X-XSRF-TOKEN"});let uue=(()=>{class e{cookieName=Z(e5);doc=Z(Un);lastCookieString="";lastToken=null;parseCount=0;getToken(){const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=AU(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),due=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:function(r){let i=null;return i=r?new(r||e):wt(uue),i},providedIn:"root"})}return e})();function hue(e,n){if(!Z(J4)||"GET"===e.method||"HEAD"===e.method)return n(e);try{const i=Z(nC).href,{origin:o}=new URL(i),{origin:a}=new URL(e.url,o);if(o!==a)return n(e)}catch{return n(e)}const t=Z(due).getToken(),r=Z(t5);return null!=t&&!e.headers.has(r)&&(e=e.clone({headers:e.headers.set(r,t)})),n(e)}const Fo=void 0,zA=["fr",[["AM","PM"]],Fo,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],Fo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."],["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"]],Fo,[["av. J.-C.","ap. J.-C."],Fo,["avant J\xe9sus-Christ","apr\xe8s J\xe9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}",Fo,Fo],[",","\u202f",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"EUR","\u20ac","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[Fo,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[Fo,"\xa5"],COP:["$CO","$"],CYP:["\xa3CY"],EGP:[Fo,"\xa3E"],FJD:["$FJ","$"],FKP:["\xa3FK","\xa3"],FRF:["F"],GBP:["\xa3GB","\xa3"],GIP:["\xa3GI","\xa3"],HKD:[Fo,"$"],IEP:["\xa3IE"],ILP:["\xa3IL"],ITL:["\u20a4IT"],JPY:[Fo,"\xa5"],KMF:[Fo,"FC"],LBP:["\xa3LB","\xa3L"],MTP:["\xa3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[Fo,"$C"],NZD:["$NZ","$"],PHP:[Fo,"\u20b1"],RHD:["$RH"],RON:[Fo,"L"],RWF:[Fo,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[Fo,"$T"],TTD:["$TT","$"],TWD:[Fo,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[Fo,"$"],XPF:["FCFP"],ZMW:[Fo,"Kw"]},"ltr",function pue(e){const t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(e.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return 0===t||1===t?1:0===i&&0!==t&&t%1e6==0&&0===r||!(i>=0&&i<=5)?4:5}];function r5(e){return Ps((n,t)=>e<=t)}function gue(e,n){return e===n}function UA(e){return 0===e.buttons||0===e.detail}function jA(e){const n=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!n||-1!==n.identifier||null!=n.radiusX&&1!==n.radiusX||null!=n.radiusY&&1!==n.radiusY)}let HA,qA;function QC(e){if(function xue(){if(null==HA){const e=typeof document<"u"?document.head:null;HA=!(!e||!e.createShadowRoot&&!e.attachShadow)}return HA}()){const n=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}function $A(){let e=typeof document<"u"&&document?document.activeElement:null;for(;e&&e.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}function kl(e){return e.composedPath?e.composedPath()[0]:e.target}try{qA=typeof Intl<"u"&&Intl.v8BreakIterator}catch{qA=!1}let e0,Al=(()=>{class e{_platformId=Z(ds);isBrowser=this._platformId?function mne(e){return e===MU}(this._platformId):"object"==typeof document&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!(!window.chrome&&!qA)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function GA(e){return function Eue(){if(null==e0&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>e0=!0}))}finally{e0=e0||!1}return e0}()?e:!!e.capture}function JC(e,n=0){return function Cue(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):2===arguments.length?n:0}function Ka(e){return e instanceof Pr?e.nativeElement:e}const Due=new Le("cdk-input-modality-detector-options"),Tue={ignoreKeys:[18,17,224,91,16]},WA={passive:!0,capture:!0};let Sue=(()=>{class e{_platform=Z(Al);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new re(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(r=>r===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=kl(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<650||(this._modality.next(UA(t)?"keyboard":"mouse"),this._mostRecentTarget=kl(t))};_onTouchstart=t=>{jA(t)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=kl(t))};constructor(){const t=Z(Jt),r=Z(Un),i=Z(Due,{optional:!0});if(this._options={...Tue,...i},this.modalityDetected=this._modality.pipe(r5(1)),this.modalityChanged=this.modalityDetected.pipe(function mue(e,n=er){return e=e??gue,Ro((t,r)=>{let i,o=!0;t.subscribe(new ni(r,a=>{const c=n(a);(o||!e(i,c))&&(o=!1,i=c,r.next(a))}))})}()),this._platform.isBrowser){const o=Z(xl).createRenderer(null,null);this._listenerCleanups=t.runOutsideAngular(()=>[o.listen(r,"keydown",this._onKeydown,WA),o.listen(r,"mousedown",this._onMousedown,WA),o.listen(r,"touchstart",this._onTouchstart,WA)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(t=>t())}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var e1=function(e){return e[e.IMMEDIATE=0]="IMMEDIATE",e[e.EVENTUAL=1]="EVENTUAL",e}(e1||{});const Iue=new Le("cdk-focus-monitor-default-options"),t1=GA({passive:!0,capture:!0});let s5=(()=>{class e{_ngZone=Z(Jt);_platform=Z(Al);_inputModalityDetector=Z(Sue);_origin=null;_lastFocusOrigin=null;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=Z(Un);_stopInputModalityDetector=new K;constructor(){const t=Z(Iue,{optional:!0});this._detectionMode=t?.detectionMode||e1.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{for(let i=kl(t);i;i=i.parentElement)"focus"===t.type?this._onFocus(t,i):this._onBlur(t,i)};monitor(t,r=!1){const i=Ka(t);if(!this._platform.isBrowser||1!==i.nodeType)return An();const o=QC(i)||this._document,a=this._elementInfo.get(i);if(a)return r&&(a.checkChildren=!0),a.subject;const c={checkChildren:r,subject:new K,rootNode:o};return this._elementInfo.set(i,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(t){const r=Ka(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const o=Ka(t);o===this._document.activeElement?this._getClosestElementsInfo(o).forEach(([c,p])=>this._originChanged(c,r,p)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===e1.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,this._detectionMode===e1.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),o=kl(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,t1),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,t1)}),this._rootNodeFocusListenerCount.set(r,i+1),1===++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ad(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,t1),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,t1),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let a=0;a<o.length;a++)if(o[a].contains(r))return!0;return!1}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const n1=new WeakMap;let cy=(()=>{class e{_appRef;_injector=Z(Tn);_environmentInjector=Z(Fr);load(t){const r=this._appRef=this._appRef||this._injector.get(Cl);let i=n1.get(r);i||(i={loaders:new Set,refs:[]},n1.set(r,i),r.onDestroy(()=>{n1.get(r)?.refs.forEach(o=>o.destroy()),n1.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(IU(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class kue extends Gn{constructor(n,t){super()}schedule(n,t=0){return this}}const r1={setInterval(...e){const{delegate:n}=r1;return(n?.setInterval||setInterval)(...e)},clearInterval(e){const{delegate:n}=r1;return(n?.clearInterval||clearInterval)(e)},delegate:void 0};class ZA extends kue{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){if(this.closed)return this;this.state=n;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(n,t,r=0){return r1.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;r1.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(n,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let i,r=!1;try{this.work(n)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:n,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,sl(r,this),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}}const KA={now:()=>(KA.delegate||Date).now(),delegate:void 0};class t0{constructor(n,t=t0.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,r){return new this.schedulerActionCtor(this,n).schedule(r,t)}}t0.now=KA.now;class YA extends t0{constructor(n,t=t0.now){super(n,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:t}=this;if(this._active)return void t.push(n);let r;this._active=!0;do{if(r=n.execute(n.state,n.delay))break}while(n=t.shift());if(this._active=!1,r){for(;n=t.shift();)n.unsubscribe();throw r}}}const XA=new YA(ZA),a5=XA;function n0(e){return Array.isArray(e)?e:[e]}const l5=new Set;let Xm,c5=(()=>{class e{_platform=Z(Al);_nonce=Z(Nr,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Mue}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Rue(e,n){if(!l5.has(e))try{Xm||(Xm=document.createElement("style"),n&&Xm.setAttribute("nonce",n),Xm.setAttribute("type","text/css"),document.head.appendChild(Xm)),Xm.sheet&&(Xm.sheet.insertRule(`@media ${e} {body{ }}`,0),l5.add(e))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Mue(e){return{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{}}}let u5=(()=>{class e{_mediaMatcher=Z(c5);_zone=Z(Jt);_queries=new Map;_destroySubject=new K;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return d5(n0(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let o=rA(d5(n0(t)).map(a=>this._registerQuery(a).observable));return o=kC(o.pipe(Os(1)),o.pipe(r5(1),function Aue(e,n=XA){return Ro((t,r)=>{let i=null,o=null,a=null;const c=()=>{if(i){i.unsubscribe(),i=null;const _=o;o=null,r.next(_)}};function p(){const _=a+e,x=n.now();if(x<_)return i=this.schedule(void 0,_-x),void r.add(i);c()}t.subscribe(new ni(r,_=>{o=_,a=n.now(),i||(i=n.schedule(p,e),r.add(i))},()=>{c(),r.complete()},void 0,()=>{o=i=null}))})}(0))),o.pipe(cr(a=>{const c={matches:!1,breakpoints:{}};return a.forEach(({matches:p,query:_})=>{c.matches=c.matches||p,c.breakpoints[_]=p}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new U(a=>{const c=p=>this._zone.run(()=>a.next(p));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(ny(r),cr(({matches:a})=>({query:t,matches:a})),ad(this._destroySubject)),mql:r};return this._queries.set(t,o),o}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function d5(e){return e.map(n=>n.split(",")).reduce((n,t)=>n.concat(t)).map(n=>n.trim())}const Pue=new Le("MATERIAL_ANIMATIONS");let h5=null;function uy(){return"enabled"!==function Oue(){return Z(Pue,{optional:!0})?.animationsDisabled||"NoopAnimations"===Z(la,{optional:!0})?"di-disabled":(h5??=Z(c5).matchMedia("(prefers-reduced-motion)").matches,h5?"reduced-motion":"enabled")}()}var Ec=function(e){return e[e.FADING_IN=0]="FADING_IN",e[e.VISIBLE=1]="VISIBLE",e[e.FADING_OUT=2]="FADING_OUT",e[e.HIDDEN=3]="HIDDEN",e}(Ec||{});class Nue{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Ec.HIDDEN;constructor(n,t,r,i=!1){this._renderer=n,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i}fadeOut(){this._renderer.fadeOutRipple(this)}}const f5=GA({passive:!0,capture:!0});class Lue{_events=new Map;addHandler(n,t,r,i){const o=this._events.get(t);if(o){const a=o.get(r);a?a.add(i):o.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),n.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,f5)})}removeHandler(n,t,r){const i=this._events.get(n);if(!i)return;const o=i.get(t);o&&(o.delete(r),0===o.size&&i.delete(t),0===i.size&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,f5)))}_delegateEventHandler=n=>{const t=kl(n);t&&this._events.get(n.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(o=>o.handleEvent(n))})}}const i1={enterDuration:225,exitDuration:150},p5=GA({passive:!0,capture:!0}),m5=["mousedown","touchstart"],g5=["mouseup","mouseleave","touchend","touchcancel"];let Bue=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=vr({type:e,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(r,i){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}\n"],encapsulation:2,changeDetection:0})}return e})();class o1{_target;_ngZone;_platform;_containerElement;_triggerElement=null;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple=null;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect=null;static _eventManager=new Lue;constructor(n,t,r,i,o){this._target=n,this._ngZone=t,this._platform=i,i.isBrowser&&(this._containerElement=Ka(r)),o&&o.get(cy).load(Bue)}fadeInRipple(n,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...i1,...r.animation};r.centered&&(n=i.left+i.width/2,t=i.top+i.height/2);const a=r.radius||function Vue(e,n,t){const r=Math.max(Math.abs(e-t.left),Math.abs(e-t.right)),i=Math.max(Math.abs(n-t.top),Math.abs(n-t.bottom));return Math.sqrt(r*r+i*i)}(n,t,i),c=n-i.left,p=t-i.top,_=o.enterDuration,x=document.createElement("div");x.classList.add("mat-ripple-element"),x.style.left=c-a+"px",x.style.top=p-a+"px",x.style.height=2*a+"px",x.style.width=2*a+"px",null!=r.color&&(x.style.backgroundColor=r.color),x.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(x);const D=window.getComputedStyle(x),O=D.transitionDuration,B="none"===D.transitionProperty||"0s"===O||"0s, 0s"===O||0===i.width&&0===i.height,Q=new Nue(this,x,r,B);x.style.transform="scale3d(1, 1, 1)",Q.state=Ec.FADING_IN,r.persistent||(this._mostRecentTransientRipple=Q);let oe=null;return!B&&(_||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const be=()=>{oe&&(oe.fallbackTimer=null),clearTimeout($e),this._finishRippleTransition(Q)},xe=()=>this._destroyRipple(Q),$e=setTimeout(xe,_+100);x.addEventListener("transitionend",be),x.addEventListener("transitioncancel",xe),oe={onTransitionEnd:be,onTransitionCancel:xe,fallbackTimer:$e}}),this._activeRipples.set(Q,oe),(B||!_)&&this._finishRippleTransition(Q),Q}fadeOutRipple(n){if(n.state===Ec.FADING_OUT||n.state===Ec.HIDDEN)return;const t=n.element,r={...i1,...n.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",n.state=Ec.FADING_OUT,(n._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const t=Ka(n);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,m5.forEach(r=>{o1._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{g5.forEach(t=>{this._triggerElement.addEventListener(t,this,p5)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){n.state===Ec.FADING_IN?this._startFadeOutTransition(n):n.state===Ec.FADING_OUT&&this._destroyRipple(n)}_startFadeOutTransition(n){const t=n===this._mostRecentTransientRipple,{persistent:r}=n.config;n.state=Ec.VISIBLE,!r&&(!t||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){const t=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=Ec.HIDDEN,null!==t&&(n.element.removeEventListener("transitionend",t.onTransitionEnd),n.element.removeEventListener("transitioncancel",t.onTransitionCancel),null!==t.fallbackTimer&&clearTimeout(t.fallbackTimer)),n.element.remove()}_onMousedown(n){const t=UA(n),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!jA(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=n.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(n.state===Ec.VISIBLE||n.config.terminateOnPointerUp&&n.state===Ec.FADING_IN)&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const n=this._triggerElement;n&&(m5.forEach(t=>o1._eventManager.removeHandler(t,n,this)),this._pointerUpEventsRegistered&&(g5.forEach(t=>n.removeEventListener(t,this,p5)),this._pointerUpEventsRegistered=!1))}}const zue=new Le("mat-ripple-global-options"),Uue={capture:!0},jue=["focus","mousedown","mouseenter","touchstart"],QA="mat-ripple-loader-uninitialized",JA="mat-ripple-loader-class-name",_5="mat-ripple-loader-centered",s1="mat-ripple-loader-disabled";let Hue=(()=>{class e{_document=Z(Un);_animationsDisabled=uy();_globalRippleOptions=Z(zue,{optional:!0});_platform=Z(Al);_ngZone=Z(Jt);_injector=Z(Tn);_eventCleanups;_hosts=new Map;constructor(){const t=Z(xl).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>jue.map(r=>t.listen(this._document,r,this._onInteraction,Uue)))}ngOnDestroy(){const t=this._hosts.keys();for(const r of t)this.destroyRipple(r);this._eventCleanups.forEach(r=>r())}configureRipple(t,r){t.setAttribute(QA,this._globalRippleOptions?.namespace??""),(r.className||!t.hasAttribute(JA))&&t.setAttribute(JA,r.className||""),r.centered&&t.setAttribute(_5,""),r.disabled&&t.setAttribute(s1,"")}setDisabled(t,r){const i=this._hosts.get(t);i?(i.target.rippleDisabled=r,!r&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(t))):r?t.setAttribute(s1,""):t.removeAttribute(s1)}_onInteraction=t=>{const r=kl(t);if(r instanceof HTMLElement){const i=r.closest(`[${QA}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();const r=this._document.createElement("span");r.classList.add("mat-ripple",t.getAttribute(JA)),t.append(r);const i=this._globalRippleOptions,o=this._animationsDisabled?0:i?.animation?.enterDuration??i1.enterDuration,a=this._animationsDisabled?0:i?.animation?.exitDuration??i1.exitDuration,c={rippleDisabled:this._animationsDisabled||i?.disabled||t.hasAttribute(s1),rippleConfig:{centered:t.hasAttribute(_5),terminateOnPointerUp:i?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:a}}},p=new o1(c,this._ngZone,r,this._platform,this._injector),_=!c.rippleDisabled;_&&p.setupTriggerEvents(t),this._hosts.set(t,{target:c,renderer:p,hasSetUpEvents:_}),t.removeAttribute(QA)}destroyRipple(t){const r=this._hosts.get(t);r&&(r.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),$ue=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=vr({type:e,selectors:[["structural-styles"]],decls:0,vars:0,template:function(r,i){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus-visible::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}\n'],encapsulation:2,changeDetection:0})}return e})();const que=new Le("MAT_BUTTON_CONFIG");function y5(e){return null==e?void 0:CU(e)}let Gue=(()=>{class e{_elementRef=Z(Pr);_ngZone=Z(Jt);_animationsDisabled=uy();_config=Z(que,{optional:!0});_focusMonitor=Z(s5);_cleanupClick;_renderer=Z(ja);_rippleLoader=Z(Hue);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(t){this.tabIndex=t}constructor(){Z(cy).load($ue);const t=this._elementRef.nativeElement;this._isAnchor="A"===t.tagName,this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(t,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return null!=this.ariaDisabled?this.ariaDisabled:this._isAnchor?this.disabled||null:!(!this.disabled||!this.disabledInteractive)||null}_getDisabledAttribute(){return!(this.disabledInteractive||!this.disabled)||null}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor&&this.disabled&&!this.disabledInteractive?-1:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",t=>{this.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}))}static \u0275fac=function(r){return new(r||e)};static \u0275dir=At({type:e,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(r,i){2&r&&(Ws("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled())("tabindex",i._getTabIndex()),MI(i.color?"mat-"+i.color:""),Dl("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("mat-unthemed",!i.color)("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",hs],disabled:[2,"disabled","disabled",hs],ariaDisabled:[2,"aria-disabled","ariaDisabled",hs],disabledInteractive:[2,"disabledInteractive","disabledInteractive",hs],tabIndex:[2,"tabIndex","tabIndex",y5],_tabindex:[2,"tabindex","_tabindex",y5]}})}return e})(),Qm=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({})}return e})(),Wue=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({imports:[Qm]})}return e})();const Zue=["matButton",""],Kue=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Yue=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],v5=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]);let Xue=(()=>{class e extends Gue{get appearance(){return this._appearance}set appearance(t){this.setAppearance(t||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();const t=function Que(e){return e.hasAttribute("mat-raised-button")?"elevated":e.hasAttribute("mat-stroked-button")?"outlined":e.hasAttribute("mat-flat-button")?"filled":e.hasAttribute("mat-button")?"text":null}(this._elementRef.nativeElement);t&&this.setAppearance(t)}setAppearance(t){if(t===this._appearance)return;const r=this._elementRef.nativeElement.classList,i=this._appearance?v5.get(this._appearance):null,o=v5.get(t);i&&r.remove(...i),r.add(...o),this._appearance=t}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=vr({type:e,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[$n],attrs:Zue,ngContentSelectors:Yue,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){1&r&&(function AV(e){const n=Me()[15][5];if(!n.projection){const r=n.projection=function Vd(e,n){const t=[];for(let r=0;r<e;r++)t.push(n);return t}(e?e.length:1,null),i=r.slice();let o=n.child;for(;null!==o;){if(128!==o.type){const a=e?fJ(o,e):0;null!==a&&(i[a]?i[a].projectionNext=o:r[a]=o,i[a]=o)}o=o.next}}}(Kue),od(0,"span",0),UE(1),$t(2,"span",1),UE(3,1),zt(),UE(4,2),od(5,"span",2)(6,"span",3)),2&r&&Dl("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mat-mdc-button-base .mat-icon{min-height:fit-content;flex-shrink:0}@media(hover: none){.mat-mdc-button-base:hover>span.mat-mdc-button-persistent-ripple::before{opacity:0}}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-text-touch-target-size, 48px);display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-filled-touch-target-size, 48px);display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-protected-touch-target-size, 48px);display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}@media(hover: hover){.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-outlined-touch-target-size, 48px);display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-tonal-touch-target-size, 48px);display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus-visible>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus-visible>.mat-focus-indicator::before,.mat-mdc-raised-button:focus-visible>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus-visible>.mat-focus-indicator::before,.mat-tonal-button:focus-visible>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}\n',"@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}\n"],encapsulation:2,changeDetection:0})}return e})(),ede=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({imports:[Wue,Qm]})}return e})();const eR={};class du{_appId=Z(yr);static _infix=`a${Math.floor(1e5*Math.random()).toString()}`;getId(n,t=!1){return"ng"!==this._appId&&(n+=this._appId),eR.hasOwnProperty(n)||(eR[n]=0),`${n}${t?du._infix+"-":""}${eR[n]++}`}static \u0275fac=function(t){return new(t||du)};static \u0275prov=Ue({token:du,factory:du.\u0275fac,providedIn:"root"})}let a1,tde=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=vr({type:e,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(r,i){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}\n"],encapsulation:2,changeDetection:0})}return e})();let ode=(()=>{class e{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),sde=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({providers:[ode]})}return e})(),b5=(()=>{class e{_platform=Z(Al);constructor(){}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function lde(e){return!!(e.offsetWidth||e.offsetHeight||"function"==typeof e.getClientRects&&e.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function ade(e){try{return e.frameElement}catch{return null}}(function gde(e){return e.ownerDocument&&e.ownerDocument.defaultView||window}(t));if(r&&(-1===x5(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),o=x5(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function pde(e){let n=e.nodeName.toLowerCase(),t="input"===n&&e.type;return"text"===t||"password"===t||"select"===n||"textarea"===n}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==o:"video"===i?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function mde(e){return!function ude(e){return function hde(e){return"input"==e.nodeName.toLowerCase()}(e)&&"hidden"==e.type}(e)&&(function cde(e){let n=e.nodeName.toLowerCase();return"input"===n||"select"===n||"button"===n||"textarea"===n}(e)||function dde(e){return function fde(e){return"a"==e.nodeName.toLowerCase()}(e)&&e.hasAttribute("href")}(e)||e.hasAttribute("contenteditable")||w5(e))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function w5(e){if(!e.hasAttribute("tabindex")||void 0===e.tabIndex)return!1;let n=e.getAttribute("tabindex");return!(!n||isNaN(parseInt(n,10)))}function x5(e){if(!w5(e))return null;const n=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}class _de{_element;_checker;_ngZone;_document;_injector;_startAnchor=null;_endAnchor=null;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_enabled=!0;constructor(n,t,r,i,o=!1,a){this._element=n,this._checker=t,this._ngZone=r,this._document=i,this._injector=a,o||this.attachAnchors()}destroy(){const n=this._startAnchor,t=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){const t=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return"start"==n?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(n),!!r}return t.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){const t=this._getRegionBoundary("start");return t&&t.focus(n),!!t}focusLastTabbableElement(n){const t=this._getRegionBoundary("end");return t&&t.focus(n),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const t=n.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const t=n.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,t){n?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._injector?ru(n,{injector:this._injector}):setTimeout(n)}}let yde=(()=>{class e{_checker=Z(b5);_ngZone=Z(Jt);_document=Z(Un);_injector=Z(Tn);constructor(){Z(cy).load(tde)}create(t,r=!1){return new _de(t,this._checker,this._ngZone,this._document,r,this._injector)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const vde=new Le("liveAnnouncerElement",{providedIn:"root",factory:()=>null}),bde=new Le("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let wde=0,xde=(()=>{class e{_ngZone=Z(Jt);_defaultOptions=Z(bde,{optional:!0});_liveElement;_document=Z(Un);_sanitizer=Z(Rj);_previousTimeout;_currentPromise;_currentResolve;constructor(){const t=Z(vde,{optional:!0});this._liveElement=t||this._createLiveElement()}announce(t,...r){const i=this._defaultOptions;let o,a;return 1===r.length&&"number"==typeof r[0]?a=r[0]:[o,a]=r,this.clear(),clearTimeout(this._previousTimeout),o||(o=i&&i.politeness?i.politeness:"polite"),null==a&&i&&(a=i.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(c=>this._currentResolve=c)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{t&&"string"!=typeof t?function ide(e,n,t){const r=t.sanitize(vl.HTML,n);e.innerHTML=function rde(e){return function nde(){if(void 0===a1&&(a1=null,typeof window<"u")){const e=window;void 0!==e.trustedTypes&&(a1=e.trustedTypes.createPolicy("angular#components",{createHTML:n=>n}))}return a1}()?.createHTML(e)||e}(r||"")}(this._liveElement,t,this._sanitizer):this._liveElement.textContent=t,"number"==typeof a&&(this._previousTimeout=setTimeout(()=>this.clear(),a)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",r=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let o=0;o<r.length;o++)r[o].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),i.id="cdk-live-announcer-"+wde++,this._document.body.appendChild(i),i}_exposeAnnouncerToModals(t){const r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<r.length;i++){const o=r[i],a=o.getAttribute("aria-owns");a?-1===a.indexOf(t)&&o.setAttribute("aria-owns",a+" "+t):o.setAttribute("aria-owns",t)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Jm=function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e}(Jm||{});const E5="cdk-high-contrast-black-on-white",C5="cdk-high-contrast-white-on-black",tR="cdk-high-contrast-active";let Ede=(()=>{class e{_platform=Z(Al);_hasCheckedHighContrastMode=!1;_document=Z(Un);_breakpointSubscription;constructor(){this._breakpointSubscription=Z(u5).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Jm.NONE;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Jm.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Jm.BLACK_ON_WHITE}return Jm.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(tR,E5,C5),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();r===Jm.BLACK_ON_WHITE?t.add(tR,E5):r===Jm.WHITE_ON_BLACK&&t.add(tR,C5)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Cde=(()=>{class e{constructor(){Z(Ede)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({imports:[sde]})}return e})();class nR{_attachedHost=null;attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class r0 extends nR{component;viewContainerRef;injector;projectableNodes;constructor(n,t,r,i){super(),this.component=n,this.viewContainerRef=t,this.injector=r,this.projectableNodes=i}}class rR extends nR{templateRef;viewContainerRef;context;injector;constructor(n,t,r,i){super(),this.templateRef=n,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(n,t=this.context){return this.context=t,super.attach(n)}detach(){return this.context=void 0,super.detach()}}class Dde extends nR{element;constructor(n){super(),this.element=n instanceof Pr?n.nativeElement:n}}class l1{_attachedPortal=null;_disposeFn=null;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(n){return n instanceof r0?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof rR?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof Dde?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Tde extends l1{outletElement;_appRef;_defaultInjector;constructor(n,t,r){super(),this.outletElement=n,this._appRef=t,this._defaultInjector=r}attachComponentPortal(n){let t;if(n.viewContainerRef){const r=n.injector||n.viewContainerRef.injector,i=r.get(gh,null,{optional:!0})||void 0;t=n.viewContainerRef.createComponent(n.component,{index:n.viewContainerRef.length,injector:r,ngModuleRef:i,projectableNodes:n.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else{const r=this._appRef,i=n.injector||this._defaultInjector||Tn.NULL,o=i.get(Fr,r.injector);t=IU(n.component,{elementInjector:i,environmentInjector:o,projectableNodes:n.projectableNodes||void 0}),r.attachView(t.hostView),this.setDisposeFn(()=>{r.viewCount>0&&r.detachView(t.hostView),t.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=n,t}attachTemplatePortal(n){let t=n.viewContainerRef,r=t.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=n,r}attachDomPortal=n=>{const t=n.element,r=this.outletElement.ownerDocument.createComment("dom-portal");t.parentNode.insertBefore(r,t),this.outletElement.appendChild(t),this._attachedPortal=n,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(t,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let o0=(()=>{class e extends l1{_moduleRef=Z(gh,{optional:!0});_document=Z(Un);_viewContainerRef=Z(El);_isInitialized=!1;_attachedRef=null;constructor(){super()}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}attached=new jn;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,i=r.createComponent(t.component,{index:r.length,injector:t.injector||r.injector,projectableNodes:t.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=t=>{const r=t.element,i=this._document.createComment("dom-portal");t.setAttachedHost(this),r.parentNode.insertBefore(i,r),this._getRootNode().appendChild(r),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(r,i)})};_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static \u0275fac=function(r){return new(r||e)};static \u0275dir=At({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[$n]})}return e})(),s0=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({})}return e})();function D5(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Bo(e){return null==e?"":"string"==typeof e?e:`${e}px`}const a0={schedule(e){let n=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=a0;r&&(n=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=n(o=>{t=void 0,e(o)});return new Gn(()=>t?.(i))},requestAnimationFrame(...e){const{delegate:n}=a0;return(n?.requestAnimationFrame||requestAnimationFrame)(...e)},cancelAnimationFrame(...e){const{delegate:n}=a0;return(n?.cancelAnimationFrame||cancelAnimationFrame)(...e)},delegate:void 0},T5=new class kde extends YA{flush(n){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;n=n||t.shift();const o=t.length;do{if(r=n.execute(n.state,n.delay))break}while(++i<o&&(n=t.shift()));if(this._active=!1,r){for(;++i<o&&(n=t.shift());)n.unsubscribe();throw r}}}(class Ide extends ZA{constructor(n,t){super(n,t),this.scheduler=n,this.work=t}requestAsyncId(n,t,r=0){return null!==r&&r>0?super.requestAsyncId(n,t,r):(n.actions.push(this),n._scheduled||(n._scheduled=a0.requestAnimationFrame(()=>n.flush(void 0))))}recycleAsyncId(n,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(n,t,r);0===n.actions.length&&(a0.cancelAnimationFrame(t),n._scheduled=void 0)}});let iR,Ade=1;const c1={};function S5(e){return e in c1&&(delete c1[e],!0)}const Rde={setImmediate(e){const n=Ade++;return c1[n]=!0,iR||(iR=Promise.resolve()),iR.then(()=>S5(n)&&e()),n},clearImmediate(e){S5(e)}},{setImmediate:Mde,clearImmediate:Pde}=Rde,u1={setImmediate(...e){const{delegate:n}=u1;return(n?.setImmediate||Mde)(...e)},clearImmediate(e){const{delegate:n}=u1;return(n?.clearImmediate||Pde)(e)},delegate:void 0};new class Nde extends YA{flush(n){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;n=n||t.shift();const o=t.length;do{if(r=n.execute(n.state,n.delay))break}while(++i<o&&(n=t.shift()));if(this._active=!1,r){for(;++i<o&&(n=t.shift());)n.unsubscribe();throw r}}}(class Ode extends ZA{constructor(n,t){super(n,t),this.scheduler=n,this.work=t}requestAsyncId(n,t,r=0){return null!==r&&r>0?super.requestAsyncId(n,t,r):(n.actions.push(this),n._scheduled||(n._scheduled=u1.setImmediate(n.flush.bind(n,void 0))))}recycleAsyncId(n,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(n,t,r);0===n.actions.length&&(u1.clearImmediate(t),n._scheduled=void 0)}});function I5(e=0,n,t=a5){let r=-1;return null!=n&&(wj(n)?t=n:r=n),new U(i=>{let o=function Bde(e){return e instanceof Date&&!isNaN(e)}(e)?+e-t.now():e;o<0&&(o=0);let a=0;return t.schedule(function(){i.closed||(i.next(a++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function k5(e,n=a5){return function Fde(e){return Ro((n,t)=>{let r=!1,i=null,o=null,a=!1;const c=()=>{if(o?.unsubscribe(),o=null,r){r=!1;const _=i;i=null,t.next(_)}a&&t.complete()},p=()=>{o=null,a&&t.complete()};n.subscribe(new ni(t,_=>{r=!0,i=_,o||bc(e(_)).subscribe(o=new ni(t,c,p))},()=>{a=!0,(!r||!o||o.closed)&&t.complete()}))})}(()=>I5(e,n))}const Vde=new Le("cdk-dir-doc",{providedIn:"root",factory:()=>Z(Un)}),zde=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let eg,dy=(()=>{class e{get value(){return this.valueSignal()}valueSignal=cs("ltr");change=new jn;constructor(){const t=Z(Vde,{optional:!0});t&&this.valueSignal.set(function Ude(e){const n=e?.toLowerCase()||"";return"auto"===n&&typeof navigator<"u"&&navigator?.language?zde.test(navigator.language)?"rtl":"ltr":"rtl"===n?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function A5(){if(null==eg){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return eg=!1,eg;if(document.documentElement?.style&&"scrollBehavior"in document.documentElement.style)eg=!0;else{const e=Element.prototype.scrollTo;eg=!!e&&!/\{\s*\[native code\]\s*\}/.test(e.toString())}}return eg}let h1=(()=>{class e{_ngZone=Z(Jt);_platform=Z(Al);_renderer=Z(xl).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new K;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new U(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));const i=t>0?this._scrolled.pipe(k5(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):An()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Ps(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_scrollableContainsElement(t,r){let i=Ka(r),o=t.getElementRef().nativeElement;do{if(i==o)return!0}while(i=i.parentElement);return!1}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),hy=(()=>{class e{_platform=Z(Al);_listeners;_viewportSize=null;_change=new K;_document=Z(Un);constructor(){const t=Z(Jt),r=Z(xl).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){const i=o=>this._change.next(o);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect();return{top:-o.top||t.body?.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||t.body?.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(k5(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),oR=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({})}return e})(),R5=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({imports:[Qm,oR,Qm,oR]})}return e})();const M5=A5();function sR(e){return new qde(e.get(hy),e.get(Un))}class qde{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(n,t){this._viewportRuler=n,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=Bo(-this._previousScrollPosition.left),n.style.top=Bo(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const n=this._document.documentElement,r=n.style,i=this._document.body.style,o=r.scrollBehavior||"",a=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),M5&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),M5&&(r.scrollBehavior=o,i.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.documentElement,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class Wde{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(n,t,r,i){this._scrollDispatcher=n,this._ngZone=t,this._viewportRuler=r,this._config=i}attach(n){this._overlayRef=n}enable(){if(this._scrollSubscription)return;const n=this._scrollDispatcher.scrolled(0).pipe(Ps(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}class aR{enable(){}disable(){}attach(){}}function lR(e,n){return n.some(t=>e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}function P5(e,n){return n.some(t=>e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}class Zde{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(n,t,r,i){this._scrollDispatcher=n,this._viewportRuler=t,this._ngZone=r,this._config=i}attach(n){this._overlayRef=n}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();lR(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Kde=(()=>{class e{_injector=Z(Tn);constructor(){}noop=()=>new aR;close=t=>function Gde(e,n){return new Wde(e.get(h1),e.get(Jt),e.get(hy),n)}(this._injector,t);block=()=>sR(this._injector);reposition=t=>function O5(e,n){return new Zde(e.get(h1),e.get(hy),e.get(Jt),n)}(this._injector,t);static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class cR{positionStrategy;scrollStrategy=new aR;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;usePopover;constructor(n){if(n){const t=Object.keys(n);for(const r of t)void 0!==n[r]&&(this[r]=n[r])}}}class Yde{connectionPair;scrollableViewProperties;constructor(n,t){this.connectionPair=n,this.scrollableViewProperties=t}}let N5=(()=>{class e{_attachedOverlays=[];_document=Z(Un);_isAttached=!1;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Xde=(()=>{class e extends N5{_ngZone=Z(Jt);_renderer=Z(xl).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{const r=this._attachedOverlays;for(let i=r.length-1;i>-1;i--)if(r[i]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[i]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(e)))(i||e)}})();static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Qde=(()=>{class e extends N5{_platform=Z(Al);_ngZone=Z(Jt);_renderer=Z(xl).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget=null;_cleanups;add(t){if(super.add(t),!this._isAttached){const r=this._document.body,i={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(r,"pointerdown",this._pointerDownListener,i),o.listen(r,"click",this._clickListener,i),o.listen(r,"auxclick",this._clickListener,i),o.listen(r,"contextmenu",this._clickListener,i)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(t=>t()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=t=>{this._pointerDownEventTarget=kl(t)};_clickListener=t=>{const r=kl(t),i="click"===t.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;const o=this._attachedOverlays.slice();for(let a=o.length-1;a>-1;a--){const c=o[a];if(c._outsidePointerEvents.observers.length<1||!c.hasAttached())continue;if(L5(c.overlayElement,r)||L5(c.overlayElement,i))break;const p=c._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(t)):p.next(t)}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(e)))(i||e)}})();static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function L5(e,n){const t=typeof ShadowRoot<"u"&&ShadowRoot;let r=n;for(;r;){if(r===e)return!0;r=t&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}let F5=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=vr({type:e,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(r,i){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}.cdk-overlay-popover{background:none;border:none;padding:0;outline:0;overflow:visible;position:fixed;pointer-events:none;white-space:normal;color:inherit;text-decoration:none;width:100%;height:100%;inset:auto;top:0;left:0}.cdk-overlay-popover::backdrop{display:none}.cdk-overlay-popover .cdk-overlay-backdrop{position:fixed;z-index:auto}\n"],encapsulation:2,changeDetection:0})}return e})(),uR=(()=>{class e{_platform=Z(Al);_containerElement;_document=Z(Un);_styleLoader=Z(cy);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||D5()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}const r=this._document.createElement("div");r.classList.add(t),D5()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(F5)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class Jde{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(n,t,r,i){this._renderer=t,this._ngZone=r,this.element=n.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=t.listen(this.element,"click",i)}detach(){this._ngZone.runOutsideAngular(()=>{const n=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(n,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),n.style.pointerEvents="none",n.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}}function dR(e){return e&&1===e.nodeType}class B5{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new K;_attachments=new K;_detachments=new K;_positionStrategy;_scrollStrategy;_locationChanges=Gn.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_disposed=!1;_previousHostParent;_keydownEvents=new K;_outsidePointerEvents=new K;_afterNextRenderRef;constructor(n,t,r,i,o,a,c,p,_,x=!1,D,A){this._portalOutlet=n,this._host=t,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=a,this._document=c,this._location=p,this._outsideClickDispatcher=_,this._animationsDisabled=x,this._injector=D,this._renderer=A,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(n){if(this._disposed)return null;this._attachHost();const t=this._portalOutlet.attach(n);return this._positionStrategy?.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=ru(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const n=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){if(this._disposed)return;const n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,n&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent(),this._disposed=!0}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config={...this._config,...n},this._updateElementSize()}setDirection(n){this._config={...this._config,direction:n},this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){const n=this._config.direction;return n?"string"==typeof n?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const n=this._pane.style;n.width=Bo(this._config.width),n.height=Bo(this._config.height),n.minWidth=Bo(this._config.minWidth),n.minHeight=Bo(this._config.minHeight),n.maxWidth=Bo(this._config.maxWidth),n.maxHeight=Bo(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachHost(){if(!this._host.parentElement){const n=this._config.usePopover?this._positionStrategy?.getPopoverInsertionPoint?.():null;dR(n)?n.after(this._host):"parent"===n?.type?n.element.appendChild(this._host):this._previousHostParent?.appendChild(this._host)}if(this._config.usePopover)try{this._host.showPopover()}catch{}}_attachBackdrop(){const n="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new Jde(this._document,this._renderer,this._ngZone,t=>{this._backdropClick.next(t)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._config.usePopover?this._host.prepend(this._backdropRef.element):this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(n))}):this._backdropRef.element.classList.add(n)}_updateStackingOrder(){!this._config.usePopover&&this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(n,t,r){const i=n0(t||[]).filter(o=>!!o);i.length&&(r?n.classList.add(...i):n.classList.remove(...i))}_detachContentWhenEmpty(){let n=!1;try{this._detachContentAfterRenderRef=ru(()=>{n=!0,this._detachContent()},{injector:this._injector})}catch(t){if(n)throw t;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){const n=this._scrollStrategy;n?.disable(),n?.detach?.()}}const V5="cdk-overlay-connected-position-bounding-box",ehe=/([A-Za-z%]+)$/;class nhe{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender=!1;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed=!1;_boundingBox=null;_lastPosition=null;_lastScrollVisibility=null;_positionChanges=new K;_resizeSubscription=Gn.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount=null;_popoverLocation="global";positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(n,t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o,this.setOrigin(n)}attach(n){this._validatePositions(),n.hostElement.classList.add(V5),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._getContainerRect();const n=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[];let a;for(let c of this._preferredPositions){let p=this._getOriginPoint(n,i,c),_=this._getOverlayPoint(p,t,c),x=this._getOverlayFit(_,t,r,c);if(x.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(c,p);this._canFitWithFlexibleDimensions(x,_,r)?o.push({position:c,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,c)}):(!a||a.overlayFit.visibleArea<x.visibleArea)&&(a={overlayFit:x,overlayPoint:_,originPoint:p,position:c,overlayRect:t})}if(o.length){let c=null,p=-1;for(const _ of o){const x=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);x>p&&(p=x,c=_)}return this._isPushed=!1,void this._applyPosition(c.position,c.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&tg(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(V5),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const n=this._lastPosition;n?(this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._getContainerRect(),this._applyPosition(n,this._getOriginPoint(this._originRect,this._containerRect,n))):this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,-1===n.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}withPopoverLocation(n){return this._popoverLocation=n,this}getPopoverInsertionPoint(){return"global"===this._popoverLocation?null:"inline"!==this._popoverLocation?this._popoverLocation:this._origin instanceof Pr?this._origin.nativeElement:dR(this._origin)?this._origin:null}_getOriginPoint(n,t,r){let i,o;if("center"==r.originX)i=n.left+n.width/2;else{const a=this._isRtl()?n.right:n.left,c=this._isRtl()?n.left:n.right;i="start"==r.originX?a:c}return t.left<0&&(i-=t.left),o="center"==r.originY?n.top+n.height/2:"top"==r.originY?n.top:n.bottom,t.top<0&&(o-=t.top),{x:i,y:o}}_getOverlayPoint(n,t,r){let i,o;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:n.x+i,y:n.y+o}}_getOverlayFit(n,t,r,i){const o=U5(t);let{x:a,y:c}=n,p=this._getOffset(i,"x"),_=this._getOffset(i,"y");p&&(a+=p),_&&(c+=_);let A=0-c,O=c+o.height-r.height,B=this._subtractOverflows(o.width,0-a,a+o.width-r.width),Q=this._subtractOverflows(o.height,A,O),oe=B*Q;return{visibleArea:oe,isCompletelyWithinViewport:o.width*o.height===oe,fitsInViewportVertically:Q===o.height,fitsInViewportHorizontally:B==o.width}}_canFitWithFlexibleDimensions(n,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,o=r.right-t.x,a=z5(this._overlayRef.getConfig().minHeight),c=z5(this._overlayRef.getConfig().minWidth);return(n.fitsInViewportVertically||null!=a&&a<=i)&&(n.fitsInViewportHorizontally||null!=c&&c<=o)}return!1}_pushOverlayOnScreen(n,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};const i=U5(t),o=this._viewportRect,a=Math.max(n.x+i.width-o.width,0),c=Math.max(n.y+i.height-o.height,0),p=Math.max(o.top-r.top-n.y,0),_=Math.max(o.left-r.left-n.x,0);let x=0,D=0;return x=i.width<=o.width?_||-a:n.x<this._getViewportMarginStart()?o.left-r.left-n.x:0,D=i.height<=o.height?p||-c:n.y<this._getViewportMarginTop()?o.top-r.top-n.y:0,this._previousPushAmount={x,y:D},{x:n.x+x,y:n.y+D}}_applyPosition(n,t){if(this._setTransformOrigin(n),this._setOverlayElementStyles(t,n),this._setBoundingBoxStyles(t,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._positionChanges.observers.length){const r=this._getScrollVisibility();if(n!==this._lastPosition||!this._lastScrollVisibility||!function rhe(e,n){return e===n||e.isOriginClipped===n.isOriginClipped&&e.isOriginOutsideView===n.isOriginOutsideView&&e.isOverlayClipped===n.isOverlayClipped&&e.isOverlayOutsideView===n.isOverlayOutsideView}(this._lastScrollVisibility,r)){const i=new Yde(n,r);this._positionChanges.next(i)}this._lastScrollVisibility=r}this._lastPosition=n,this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=n.overlayY;r="center"===n.overlayX?"center":this._isRtl()?"start"===n.overlayX?"right":"left":"start"===n.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(n,t){const r=this._viewportRect,i=this._isRtl();let o,a,c;if("top"===t.overlayY)a=n.y,o=r.height-a+this._getViewportMarginBottom();else if("bottom"===t.overlayY)c=r.height-n.y+this._getViewportMarginTop()+this._getViewportMarginBottom(),o=r.height-c+this._getViewportMarginTop();else{const O=Math.min(r.bottom-n.y+r.top,n.y),B=this._lastBoundingBoxSize.height;o=2*O,a=n.y-O,o>B&&!this._isInitialRender&&!this._growAfterOpen&&(a=n.y-B/2)}const p="start"===t.overlayX&&!i||"end"===t.overlayX&&i;let x,D,A;if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)A=r.width-n.x+this._getViewportMarginStart()+this._getViewportMarginEnd(),x=n.x-this._getViewportMarginStart();else if(p)D=n.x,x=r.right-n.x-this._getViewportMarginEnd();else{const O=Math.min(r.right-n.x+r.left,n.x),B=this._lastBoundingBoxSize.width;x=2*O,D=n.x-O,x>B&&!this._isInitialRender&&!this._growAfterOpen&&(D=n.x-B/2)}return{top:a,left:D,bottom:c,right:A,width:x,height:o}}_setBoundingBoxStyles(n,t){const r=this._calculateBoundingBoxRect(n,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right="auto",i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;i.width=Bo(r.width),i.height=Bo(r.height),i.top=Bo(r.top)||"auto",i.bottom=Bo(r.bottom)||"auto",i.left=Bo(r.left)||"auto",i.right=Bo(r.right)||"auto",i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(i.maxHeight=Bo(o)),a&&(i.maxWidth=Bo(a))}this._lastBoundingBoxSize=r,tg(this._boundingBox.style,i)}_resetBoundingBoxStyles(){tg(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){tg(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,t){const r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(i){const x=this._viewportRuler.getViewportScrollPosition();tg(r,this._getExactOverlayY(t,n,x)),tg(r,this._getExactOverlayX(t,n,x))}else r.position="static";let c="",p=this._getOffset(t,"x"),_=this._getOffset(t,"y");p&&(c+=`translateX(${p}px) `),_&&(c+=`translateY(${_}px)`),r.transform=c.trim(),a.maxHeight&&(i?r.maxHeight=Bo(a.maxHeight):o&&(r.maxHeight="")),a.maxWidth&&(i?r.maxWidth=Bo(a.maxWidth):o&&(r.maxWidth="")),tg(this._pane.style,r)}_getExactOverlayY(n,t,r){let i={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,n);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),"bottom"===n.overlayY?i.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":i.top=Bo(o.y),i}_getExactOverlayX(n,t,r){let a,i={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,n);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),a=this._isRtl()?"end"===n.overlayX?"left":"right":"end"===n.overlayX?"right":"left","right"===a?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=Bo(o.x),i}_getScrollVisibility(){const n=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:P5(n,r),isOriginOutsideView:lR(n,r),isOverlayClipped:P5(t,r),isOverlayOutsideView:lR(t,r)}}_subtractOverflows(n,...t){return t.reduce((r,i)=>r-Math.max(i,0),n)}_getNarrowedViewportRect(){const n=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._getViewportMarginTop(),left:r.left+this._getViewportMarginStart(),right:r.left+n-this._getViewportMarginEnd(),bottom:r.top+t-this._getViewportMarginBottom(),width:n-this._getViewportMarginStart()-this._getViewportMarginEnd(),height:t-this._getViewportMarginTop()-this._getViewportMarginBottom()}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,t){return"x"===t?null==n.offsetX?this._offsetX:n.offsetX:null==n.offsetY?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&n0(n).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getViewportMarginStart(){return"number"==typeof this._viewportMargin?this._viewportMargin:this._viewportMargin?.start??0}_getViewportMarginEnd(){return"number"==typeof this._viewportMargin?this._viewportMargin:this._viewportMargin?.end??0}_getViewportMarginTop(){return"number"==typeof this._viewportMargin?this._viewportMargin:this._viewportMargin?.top??0}_getViewportMarginBottom(){return"number"==typeof this._viewportMargin?this._viewportMargin:this._viewportMargin?.bottom??0}_getOriginRect(){const n=this._origin;if(n instanceof Pr)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();const t=n.width||0,r=n.height||0;return{top:n.y,bottom:n.y+r,left:n.x,right:n.x+t,height:r,width:t}}_getContainerRect(){const n=this._overlayRef.getConfig().usePopover&&"global"!==this._popoverLocation,t=this._overlayContainer.getContainerElement();n&&(t.style.display="block");const r=t.getBoundingClientRect();return n&&(t.style.display=""),r}}function tg(e,n){for(let t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function z5(e){if("number"!=typeof e&&null!=e){const[n,t]=e.split(ehe);return t&&"px"!==t?null:parseFloat(n)}return e||null}function U5(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}const j5="cdk-global-overlay-wrapper";function f1(e){return new ihe}class ihe{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(n){const t=n.getConfig();this._overlayRef=n,this._width&&!t.width&&n.updateSize({width:this._width}),this._height&&!t.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(j5),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const n=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:a,maxHeight:c}=r,p=!("100%"!==i&&"100vw"!==i||a&&"100%"!==a&&"100vw"!==a),_=!("100%"!==o&&"100vh"!==o||c&&"100%"!==c&&"100vh"!==c),x=this._xPosition,D=this._xOffset,A="rtl"===this._overlayRef.getConfig().direction;let O="",B="",Q="";p?Q="flex-start":"center"===x?(Q="center",A?B=D:O=D):A?"left"===x||"end"===x?(Q="flex-end",O=D):("right"===x||"start"===x)&&(Q="flex-start",B=D):"left"===x||"start"===x?(Q="flex-start",O=D):("right"===x||"end"===x)&&(Q="flex-end",B=D),n.position=this._cssPosition,n.marginLeft=p?"0":O,n.marginTop=_?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=p?"0":B,t.justifyContent=Q,t.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const n=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(j5),r.justifyContent=r.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}}let ohe=(()=>{class e{_injector=Z(Tn);constructor(){}global(){return f1()}flexibleConnectedTo(t){return function the(e,n){return new nhe(n,e.get(hy),e.get(Un),e.get(Al),e.get(uR))}(this._injector,t)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const she=new Le("OVERLAY_DEFAULT_CONFIG");function hR(e,n){e.get(cy).load(F5);const t=e.get(uR),r=e.get(Un),i=e.get(du),o=e.get(Cl),a=e.get(dy),c=e.get(ja,null,{optional:!0})||e.get(xl).createRenderer(null,null),p=new cR(n),_=e.get(she,null,{optional:!0})?.usePopover??!0;p.direction=p.direction||a.value,p.usePopover="showPopover"in r.body&&(n?.usePopover??_);const x=r.createElement("div"),D=r.createElement("div");x.id=i.getId("cdk-overlay-"),x.classList.add("cdk-overlay-pane"),D.appendChild(x),p.usePopover&&(D.setAttribute("popover","manual"),D.classList.add("cdk-overlay-popover"));const A=p.usePopover?p.positionStrategy?.getPopoverInsertionPoint?.():null;return dR(A)?A.after(D):"parent"===A?.type?A.element.appendChild(D):t.getContainerElement().appendChild(D),new B5(new Tde(x,o,e),D,x,p,e.get(Jt),e.get(Xde),r,e.get(Q_),e.get(Qde),n?.disableAnimations??"NoopAnimations"===e.get(la,null,{optional:!0}),e.get(Fr),c)}let ahe=(()=>{class e{scrollStrategies=Z(Kde);_positionBuilder=Z(ohe);_injector=Z(Tn);constructor(){}create(t){return hR(this._injector,t)}position(){return this._positionBuilder}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),fR=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({providers:[ahe],imports:[Qm,s0,R5,R5]})}return e})();function lhe(e,n){if(1&e){const t=Hr();ce(0,"div",1)(1,"button",2),Nt("click",function(){return Bt(t),cn(Qe().action())}),fe(2),he()()}if(2&e){const t=Qe();Te(2),Ko(" ",t.data.action," ")}}const che=["label"];function uhe(e,n){}const dhe=Math.pow(2,31)-1;class pR{_overlayRef;instance;containerInstance;_afterDismissed=new K;_afterOpened=new K;_onAction=new K;_durationTimeoutId;_dismissedByAction=!1;constructor(n,t){this._overlayRef=t,this.containerInstance=n,n._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(n){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(n,dhe))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const H5=new Le("MatSnackBarData");class p1{politeness="polite";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"}let $5=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=At({type:e,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return e})(),q5=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=At({type:e,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return e})(),G5=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=At({type:e,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return e})(),W5=(()=>{class e{snackBarRef=Z(pR);data=Z(H5);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=vr({type:e,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["matButton","","matSnackBarAction","",3,"click"]],template:function(r,i){1&r&&(ce(0,"div",0),fe(1),he(),mn(2,lhe,3,1,"div",1)),2&r&&(Te(),Ko(" ",i.data.message,"\n"),Te(),gn(i.hasAction?2:-1))},dependencies:[Xue,$5,q5,G5],styles:[".mat-mdc-simple-snack-bar{display:flex}.mat-mdc-simple-snack-bar .mat-mdc-snack-bar-label{max-height:50vh;overflow:auto}\n"],encapsulation:2,changeDetection:0})}return e})();const mR="_mat-snack-bar-enter",gR="_mat-snack-bar-exit";let Z5=(()=>{class e extends l1{_ngZone=Z(Jt);_elementRef=Z(Pr);_changeDetectorRef=Z(vh);_platform=Z(Al);_animationsDisabled=uy();snackBarConfig=Z(p1);_document=Z(Un);_trackedModals=new Set;_enterFallback;_exitFallback;_injector=Z(Tn);_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new K;_onExit=new K;_onEnter=new K;_animationState="void";_live;_label;_role;_liveElementId=Z(du).getId("mat-snack-bar-container-live-");constructor(){super();const t=this.snackBarConfig;this._live="assertive"!==t.politeness||t.announcementMessage?"off"===t.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),r}attachTemplatePortal(t){this._assertNotAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),r}attachDomPortal=t=>{this._assertNotAttached();const r=this._portalOutlet.attachDomPortal(t);return this._afterPortalAttached(),r};onAnimationEnd(t){t===gR?this._completeExit():t===mR&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?ru(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(mR)))},{injector:this._injector}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(mR)},200)))}exit(){return this._destroyed?An(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?ru(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(gR)))},{injector:this._injector}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(gR),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){const t=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(a=>t.classList.add(a)):t.classList.add(r)),this._exposeToModals();const i=this._label.nativeElement,o="mdc-snackbar__label";i.classList.toggle(o,!i.querySelector(`.${o}`))}_exposeToModals(){const t=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<r.length;i++){const o=r[i],a=o.getAttribute("aria-owns");this._trackedModals.add(o),a?-1===a.indexOf(t)&&o.setAttribute("aria-owns",a+" "+t):o.setAttribute("aria-owns",t)}}_clearFromModals(){this._trackedModals.forEach(t=>{const r=t.getAttribute("aria-owns");if(r){const i=r.replace(this._liveElementId,"").trim();i.length>0?t.setAttribute("aria-owns",i):t.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;const t=this._elementRef.nativeElement,r=t.querySelector("[aria-hidden]"),i=t.querySelector("[aria-live]");if(r&&i){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&r.contains(document.activeElement)&&(o=document.activeElement),r.removeAttribute("aria-hidden"),i.appendChild(r),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=vr({type:e,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,i){if(1&r&&Mm(o0,7)(che,7),2&r){let o;Kf(o=Yf())&&(i._portalOutlet=o.first),Kf(o=Yf())&&(i._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(r,i){1&r&&Nt("animationend",function(a){return i.onAnimationEnd(a.animationName)})("animationcancel",function(a){return i.onAnimationEnd(a.animationName)}),2&r&&Dl("mat-snack-bar-container-enter","visible"===i._animationState)("mat-snack-bar-container-exit","hidden"===i._animationState)("mat-snack-bar-container-animations-enabled",!i._animationsDisabled)},features:[$n],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,i){1&r&&(ce(0,"div",1)(1,"div",2,0)(3,"div",3),Jv(4,uhe,0,0,"ng-template",4),he(),rn(5,"div"),he()()),2&r&&(Te(5),Ws("aria-live",i._live)("role",i._role)("id",i._liveElementId))},dependencies:[o0],styles:["@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mat-snack-bar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-snack-bar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-snack-bar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mat-snack-bar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-snack-bar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-snack-bar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mat-snack-bar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-button-text-state-layer-color: currentColor;--mat-button-text-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}\n"],encapsulation:2})}return e})();const hhe=new Le("mat-snack-bar-default-options",{providedIn:"root",factory:()=>new p1});let ng=(()=>{class e{_live=Z(xde);_injector=Z(Tn);_breakpointObserver=Z(u5);_parentSnackBar=Z(e,{optional:!0,skipSelf:!0});_defaultConfig=Z(hhe);_animationsDisabled=uy();_snackBarRefAtThisLevel=null;simpleSnackBarComponent=W5;snackBarContainerComponent=Z5;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}constructor(){}openFromComponent(t,r){return this._attach(t,r)}openFromTemplate(t,r){return this._attach(t,r)}open(t,r="",i){const o={...this._defaultConfig,...i};return o.data={message:t,action:r},o.announcementMessage===t&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,r){const o=Tn.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:p1,useValue:r}]}),a=new r0(this.snackBarContainerComponent,r.viewContainerRef,o),c=t.attach(a);return c.instance.snackBarConfig=r,c.instance}_attach(t,r){const i={...new p1,...this._defaultConfig,...r},o=this._createOverlay(i),a=this._attachSnackBarContainer(o,i),c=new pR(a,o);if(t instanceof wl){const p=new rR(t,null,{$implicit:i.data,snackBarRef:c});c.instance=a.attachTemplatePortal(p)}else{const p=this._createInjector(i,c),_=new r0(t,void 0,p),x=a.attachComponentPortal(_);c.instance=x.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(ad(o.detachments())).subscribe(p=>{o.overlayElement.classList.toggle(this.handsetCssClass,p.matches)}),i.announcementMessage&&a._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(c,i),this._openedSnackBarRef=c,this._openedSnackBarRef}_animateSnackBar(t,r){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),r.duration&&r.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(r.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter()}_createOverlay(t){const r=new cR;r.direction=t.direction;const i=f1(),o="rtl"===t.direction,a="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!o||"end"===t.horizontalPosition&&o,c=!a&&"center"!==t.horizontalPosition;return a?i.left("0"):c?i.right("0"):i.centerHorizontally(),"top"===t.verticalPosition?i.top("0"):i.bottom("0"),r.positionStrategy=i,r.disableAnimations=this._animationsDisabled,hR(this._injector,r)}_createInjector(t,r){return Tn.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:pR,useValue:r},{provide:H5,useValue:t.data}]})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),fhe=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({providers:[ng],imports:[fR,s0,ede,W5,Qm]})}return e})();function K5(e,...n){return n.length?n.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function phe(e,n){}class c0{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext}let Y5=(()=>{class e extends l1{_elementRef=Z(Pr);_focusTrapFactory=Z(yde);_config;_interactivityChecker=Z(b5);_ngZone=Z(Jt);_focusMonitor=Z(s5);_renderer=Z(ja);_changeDetectorRef=Z(vh);_injector=Z(Tn);_platform=Z(Al);_document=Z(Un);_portalOutlet;_focusTrapped=new K;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=Z(c0,{optional:!0})||new c0,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){const r=this._ariaLabelledByQueue.indexOf(t);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}attachDomPortal=t=>{this._portalOutlet.hasAttached();const r=this._portalOutlet.attachDomPortal(t);return this._contentAttached(),r};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{o(),a(),t.removeAttribute("tabindex")},o=this._renderer.listen(t,"blur",i),a=this._renderer.listen(t,"mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(t){this._isDestroyed||ru(()=>{const r=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||r.focus(t);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(t)||this._focusDialogContainer(t);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',t);break;default:this._focusByCssSelector(this._config.autoFocus,t)}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=$A(),o=this._elementRef.nativeElement;(!i||i===this._document.body||i===o||o.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(t){this._elementRef.nativeElement.focus?.(t)}_containsFocus(){const t=this._elementRef.nativeElement,r=$A();return t===r||t.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=$A()))}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=vr({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,i){if(1&r&&Mm(o0,7),2&r){let o;Kf(o=Yf())&&(i._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,i){2&r&&Ws("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[$n],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,i){1&r&&Jv(0,phe,0,0,"ng-template",0)},dependencies:[o0],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}\n"],encapsulation:2})}return e})();class _R{overlayRef;config;componentInstance=null;componentRef=null;containerInstance;disableClose;closed=new K;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(n,t){this.overlayRef=n,this.config=t,this.disableClose=t.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!K5(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=n.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(n,t){if(this._canClose(n)){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(n),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",t=""){return this.overlayRef.updateSize({width:n,height:t}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}_canClose(n){const t=this.config;return!!this.containerInstance&&(!t.closePredicate||t.closePredicate(n,t,this.componentInstance))}}const mhe=new Le("DialogScrollStrategy",{providedIn:"root",factory:()=>{const e=Z(Tn);return()=>sR(e)}}),ghe=new Le("DialogData"),_he=new Le("DefaultDialogConfig");function yhe(e){const n=cs(e),t=new jn;return{valueSignal:n,get value(){return n()},change:t,ngOnDestroy(){t.complete()}}}let X5=(()=>{class e{_injector=Z(Tn);_defaultOptions=Z(_he,{optional:!0});_parentDialog=Z(e,{optional:!0,skipSelf:!0});_overlayContainer=Z(uR);_idGenerator=Z(du);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new K;_afterOpenedAtThisLevel=new K;_ariaHiddenElements=new Map;_scrollStrategy=Z(mhe);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=Mb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ny(void 0)));constructor(){}open(t,r){(r={...this._defaultOptions||new c0,...r}).id=r.id||this._idGenerator.getId("cdk-dialog-"),r.id&&this.getDialogById(r.id);const o=this._getOverlayConfig(r),a=hR(this._injector,o),c=new _R(a,r),p=this._attachContainer(a,c,r);if(c.containerInstance=p,!this.openDialogs.length){const _=this._overlayContainer.getContainerElement();p._focusTrapped?p._focusTrapped.pipe(Os(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(_)}):this._hideNonDialogContentFromAssistiveTechnology(_)}return this._attachDialogContent(t,c,p,r),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){yR(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){yR(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),yR(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new cR({positionStrategy:t.positionStrategy||f1().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation,disableAnimations:t.disableAnimations});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const o=i.injector||i.viewContainerRef?.injector,a=[{provide:c0,useValue:i},{provide:_R,useValue:r},{provide:B5,useValue:t}];let c;i.container?"function"==typeof i.container?c=i.container:(c=i.container.type,a.push(...i.container.providers(i))):c=Y5;const p=new r0(c,i.viewContainerRef,Tn.create({parent:o||this._injector,providers:a}));return t.attach(p).instance}_attachDialogContent(t,r,i,o){if(t instanceof wl){const a=this._createInjector(o,r,i,void 0);let c={$implicit:o.data,dialogRef:r};o.templateContext&&(c={...c,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),i.attachTemplatePortal(new rR(t,null,c,a))}else{const a=this._createInjector(o,r,i,this._injector),c=i.attachComponentPortal(new r0(t,o.viewContainerRef,a));r.componentRef=c,r.componentInstance=c.instance}}_createInjector(t,r,i,o){const a=t.injector||t.viewContainerRef?.injector,c=[{provide:ghe,useValue:t.data},{provide:_R,useValue:r}];return t.providers&&("function"==typeof t.providers?c.push(...t.providers(r,t,i)):c.push(...t.providers)),t.direction&&(!a||!a.get(dy,null,{optional:!0}))&&c.push({provide:dy,useValue:yhe(t.direction)}),Tn.create({parent:a||o,providers:c})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(t){if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const o=r[i];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&!o.hasAttribute("popover")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function yR(e,n){let t=e.length;for(;t--;)n(e[t])}let vhe=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({providers:[X5],imports:[fR,s0,Cde,s0]})}return e})();class Q5 extends K{constructor(n=1/0,t=1/0,r=KA){super(),this._bufferSize=n,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,t)}next(n){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:a}=this;t||(r.push(n),!i&&r.push(o.now()+a)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(n),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let a=0;a<o.length&&!n.closed;a+=r?1:2)n.next(o[a]);return this._checkFinalizedStatuses(n),t}_trimBuffer(){const{_bufferSize:n,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*n;if(n<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const a=t.now();let c=0;for(let p=1;p<r.length&&r[p]<=a;p+=2)c=p;c&&r.splice(0,c+1)}}}function m1(...e){const n=Rb(e),t=function Jse(e,n){return"number"==typeof nA(e)?e.pop():n}(e,1/0),r=e;return r.length?1===r.length?bc(r[0]):ty(t)(fs(r,n)):fa}function bhe(e,n){}class J5{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;enterAnimationDuration;exitAnimationDuration}const vR="mdc-dialog--open",e6="mdc-dialog--opening",t6="mdc-dialog--closing";let n6=(()=>{class e extends Y5{_animationStateChanged=new jn;_animationsEnabled=!uy();_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?i6(this._config.enterAnimationDuration)??150:0;_exitAnimationDuration=this._animationsEnabled?i6(this._config.exitAnimationDuration)??75:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(r6,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(e6,vR)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(vR),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(vR),this._animationsEnabled?(this._hostElement.style.setProperty(r6,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(t6)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(e6,t6)}_waitForAnimationToComplete(t,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(t){const r=super.attachComponentPortal(t);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(e)))(i||e)}})();static \u0275cmp=vr({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,i){2&r&&(sb("id",i._config.id),Ws("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Dl("_mat-animation-noopable",!i._animationsEnabled)("mat-mdc-dialog-container-with-actions",i._actionSectionCount>0))},features:[$n],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,i){1&r&&(ce(0,"div",0)(1,"div",1),Jv(2,bhe,0,0,"ng-template",2),he()())},dependencies:[o0],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mat-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mat-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mat-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mat-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mat-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mat-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mat-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mat-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mat-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mat-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mat-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mat-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mat-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;box-sizing:border-box;min-height:52px;margin:0;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}\n'],encapsulation:2})}return e})();const r6="--mat-dialog-transition-duration";function i6(e){return null==e?null:"number"==typeof e?e:e.endsWith("ms")?JC(e.substring(0,e.length-2)):e.endsWith("s")?1e3*JC(e.substring(0,e.length-1)):"0"===e?0:null}var g1=function(e){return e[e.OPEN=0]="OPEN",e[e.CLOSING=1]="CLOSING",e[e.CLOSED=2]="CLOSED",e}(g1||{});class rg{_ref;_config;_containerInstance;componentInstance;componentRef=null;disableClose;id;_afterOpened=new Q5(1);_beforeClosed=new Q5(1);_result;_closeFallbackTimeout;_state=g1.OPEN;_closeInteractionType;constructor(n,t,r){this._ref=n,this._config=t,this._containerInstance=r,this.disableClose=t.disableClose,this.id=n.id,n.addPanelClass("mat-mdc-dialog-panel"),r._animationStateChanged.pipe(Ps(i=>"opened"===i.state),Os(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(Ps(i=>"closed"===i.state),Os(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),m1(this.backdropClick(),this.keydownEvents().pipe(Ps(i=>27===i.keyCode&&!this.disableClose&&!K5(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),function o6(e,n,t){return e._closeInteractionType=n,e.close(t)}(this,"keydown"===i.type?"keyboard":"mouse"))})}close(n){const t=this._config.closePredicate;t&&!t(n,this._config,this.componentInstance)||(this._result=n,this._containerInstance._animationStateChanged.pipe(Ps(r=>"closing"===r.state),Os(1)).subscribe(r=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),r.totalTime+100)}),this._state=g1.CLOSING,this._containerInstance._startExitAnimation())}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(n){let t=this._ref.config.positionStrategy;return n&&(n.left||n.right)?n.left?t.left(n.left):t.right(n.right):t.centerHorizontally(),n&&(n.top||n.bottom)?n.top?t.top(n.top):t.bottom(n.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(n="",t=""){return this._ref.updateSize(n,t),this}addPanelClass(n){return this._ref.addPanelClass(n),this}removePanelClass(n){return this._ref.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=g1.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const _1=new Le("MatMdcDialogData"),Ehe=new Le("mat-mdc-dialog-default-options"),Che=new Le("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const e=Z(Tn);return()=>sR(e)}});let sp=(()=>{class e{_defaultOptions=Z(Ehe,{optional:!0});_scrollStrategy=Z(Che);_parentDialog=Z(e,{optional:!0,skipSelf:!0});_idGenerator=Z(du);_injector=Z(Tn);_dialog=Z(X5);_animationsDisabled=uy();_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new K;_afterOpenedAtThisLevel=new K;dialogConfigClass=J5;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=Mb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ny(void 0)));constructor(){this._dialogRefConstructor=rg,this._dialogContainerType=n6,this._dialogDataToken=_1}open(t,r){let i;(r={...this._defaultOptions||new J5,...r}).id=r.id||this._idGenerator.getId("mat-mdc-dialog-"),r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(t,{...r,positionStrategy:f1().centerHorizontally().centerVertically(),disableClose:!0,closePredicate:void 0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,disableAnimations:this._animationsDisabled||"0"===r.enterAnimationDuration?.toLocaleString()||"0"===r.exitAnimationDuration?.toString(),container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:c0,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(a,c,p)=>(i=new this._dialogRefConstructor(a,r,p),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:p},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:i}])});return i.componentRef=o.componentRef,i.componentInstance=o.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{const a=this.openDialogs.indexOf(i);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),khe=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({providers:[sp],imports:[vhe,fR,s0,Qm]})}return e})();const ap=new U(Da),bR="Service workers are disabled or not supported by this browser";class y1{serviceWorker;worker;registration;events;constructor(n,t){if(this.serviceWorker=n,n){let r=null;const i=new K;this.worker=new U(_=>(null!==r&&_.next(r),i.subscribe(x=>_.next(x))));const o=()=>{const{controller:_}=n;null!==_&&(r=_,i.next(r))};n.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Wa(()=>n.getRegistration().then(_=>{if(!_)throw new se(5601,!1);return _})));const a=new K;this.events=a.asObservable();const c=_=>{const{data:x}=_;x?.type&&a.next(x)};n.addEventListener("message",c),t?.get(Cl,null,{optional:!0})?.onDestroy(()=>{n.removeEventListener("controllerchange",o),n.removeEventListener("message",c)})}else this.worker=this.events=this.registration=new U(r=>r.error(new se(5601,!1)))}postMessage(n,t){return new Promise(r=>{this.worker.pipe(Os(1)).subscribe(i=>{i.postMessage({action:n,...t}),r()})})}postMessageWithOperation(n,t,r){const i=this.waitForOperationCompleted(r),o=this.postMessage(n,t);return Promise.all([o,i]).then(([,a])=>a)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(n){let t;return t="string"==typeof n?r=>r.type===n:r=>n.includes(r.type),this.events.pipe(Ps(t))}nextEventOfType(n){return this.eventsOfType(n).pipe(Os(1))}waitForOperationCompleted(n){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(Ps(i=>i.nonce===n),Os(1),cr(i=>{if(void 0!==i.result)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}}let l6=(()=>{class e{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new K;constructor(t){if(this.sw=t,!t.isEnabled)return this.messages=ap,this.notificationClicks=ap,this.notificationCloses=ap,this.pushSubscriptionChanges=ap,void(this.subscription=ap);this.messages=this.sw.eventsOfType("PUSH").pipe(cr(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(cr(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(cr(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(cr(i=>i.data)),this.pushManager=this.sw.registration.pipe(cr(i=>i.pushManager));const r=this.pushManager.pipe(Wa(i=>i.getSubscription()));this.subscription=new U(i=>{const o=r.subscribe(i),a=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),a.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(bR));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return r.applicationServerKey=o,new Promise((a,c)=>{this.pushManager.pipe(Wa(p=>p.subscribe(r)),Os(1)).subscribe({next:p=>{this.subscriptionChanges.next(p),a(p)},error:c})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(bR));const t=r=>{if(null===r)throw new se(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new se(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(Os(1),Wa(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||e)(wt(y1))};static \u0275prov=Ue({token:e,factory:e.\u0275fac})}return e})(),c6=(()=>{class e{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=ap,void(this.unrecoverable=ap);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(bR));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;const t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new se(5601,!1));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||e)(wt(y1))};static \u0275prov=Ue({token:e,factory:e.\u0275fac})}return e})();const u6=new Le("");function Ahe(){const e=Z(wR);if(!("serviceWorker"in navigator)||!1===e.enabled)return;const n=Z(u6),t=Z(Jt),r=Z(Cl);t.runOutsideAngular(()=>{const i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),t.runOutsideAngular(()=>{let i;const{registrationStrategy:o}=e;if("function"==typeof o)i=new Promise(a=>o().subscribe(()=>a()));else{const[a,...c]=(o||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=d6(+c[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),d6(+c[0])]);break;default:throw new se(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(n,{scope:e.scope,updateViaCache:e.updateViaCache,type:e.type}).catch(a=>console.error(Lt(5604,!1)))})})}function d6(e){return new Promise(n=>setTimeout(n,e))}function Rhe(){const e=Z(wR),n=Z(Tn);return new y1(!1!==e.enabled?navigator.serviceWorker:void 0,n)}class wR{enabled;updateViaCache;type;scope;registrationStrategy}function Mhe(e,n={}){return Oa([l6,c6,{provide:u6,useValue:e},{provide:wR,useValue:n},{provide:y1,useFactory:Rhe},JS(Ahe)])}let Phe=(()=>{class e{static register(t,r={}){return{ngModule:e,providers:[Mhe(t,r)]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({providers:[l6,c6]})}return e})();const ot=function(e,n){if(!e)throw fy(n)},fy=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},h6=function(e){const n=[];let t=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?n[t++]=i:i<2048?(n[t++]=i>>6|192,n[t++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),n[t++]=i>>18|240,n[t++]=i>>12&63|128,n[t++]=i>>6&63|128,n[t++]=63&i|128):(n[t++]=i>>12|224,n[t++]=i>>6&63|128,n[t++]=63&i|128)}return n},ER={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,n){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const o=e[i],a=i+1<e.length,c=a?e[i+1]:0,p=i+2<e.length,_=p?e[i+2]:0;let A=(15&c)<<2|_>>6,O=63&_;p||(O=64,a||(A=64)),r.push(t[o>>2],t[(3&o)<<4|c>>4],t[A],t[O])}return r.join("")},encodeString(e,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(e):this.encodeByteArray(h6(e),n)},decodeString(e,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(e):function(e){const n=[];let t=0,r=0;for(;t<e.length;){const i=e[t++];if(i<128)n[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[t++];n[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const p=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536;n[r++]=String.fromCharCode(55296+(p>>10)),n[r++]=String.fromCharCode(56320+(1023&p))}else{const o=e[t++],a=e[t++];n[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return n.join("")}(this.decodeStringToByteArray(e,n))},decodeStringToByteArray(e,n){this.init_();const t=n?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const o=t[e.charAt(i++)],c=i<e.length?t[e.charAt(i)]:0;++i;const _=i<e.length?t[e.charAt(i)]:64;++i;const D=i<e.length?t[e.charAt(i)]:64;if(++i,null==o||null==c||null==_||null==D)throw new Nhe;r.push(o<<2|c>>4),64!==_&&(r.push(c<<4&240|_>>2),64!==D&&r.push(_<<6&192|D))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Nhe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f6=function(e){const n=h6(e);return ER.encodeByteArray(n,!0)},v1=function(e){return f6(e).replace(/\./g,"")},b1=function(e){try{return ER.decodeString(e,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};function Lhe(e){return p6(void 0,e)}function p6(e,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return n}for(const t in n)!n.hasOwnProperty(t)||!Fhe(t)||(e[t]=p6(e[t],n[t]));return e}function Fhe(e){return"__proto__"!==e}const w1=()=>{try{return function Bhe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const n=e&&b1(e[1]);return n&&JSON.parse(n)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},m6=e=>{var n,t;return null===(t=null===(n=w1())||void 0===n?void 0:n.emulatorHosts)||void 0===t?void 0:t[e]},g6=e=>{const n=m6(e);if(!n)return;const t=n.lastIndexOf(":");if(t<=0||t+1===n.length)throw new Error(`Invalid host ${n} with no separate hostname and port!`);const r=parseInt(n.substring(t+1),10);return"["===n[0]?[n.substring(1,t-1),r]:[n.substring(0,t),r]},_6=()=>{var e;return null===(e=w1())||void 0===e?void 0:e.config},y6=e=>{var n;return null===(n=w1())||void 0===n?void 0:n[`_${e}`]};class py{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,t)=>{this.resolve=n,this.reject=t})}wrapCallback(n){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof n&&(this.promise.catch(()=>{}),1===n.length?n(t):n(t,r))}}}function v6(e,n){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=n||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[v1(JSON.stringify({alg:"none",type:"JWT"})),v1(JSON.stringify(a)),""].join(".")}function Ls(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function CR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ls())}function b6(){return"object"==typeof navigator&&"ReactNative"===navigator.product}class kh extends Error{constructor(n,t,r){super(t),this.code=n,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,kh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,u0.prototype.create)}}class u0{constructor(n,t,r){this.service=n,this.serviceName=t,this.errors=r}create(n,...t){const r=t[0]||{},i=`${this.service}/${n}`,o=this.errors[n],a=o?function Yhe(e,n){return e.replace(Xhe,(t,r)=>{const i=n[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new kh(i,`${this.serviceName}: ${a} (${i}).`,r)}}const Xhe=/\{\$([^}]+)}/g;function d0(e){return JSON.parse(e)}function Yo(e){return JSON.stringify(e)}const x1=function(e){let n={},t={},r={},i="";try{const o=e.split(".");n=d0(b1(o[0])||""),t=d0(b1(o[1])||""),i=o[2],r=t.d||{},delete t.d}catch{}return{header:n,claims:t,data:r,signature:i}};function hd(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function my(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]}function DR(e){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n))return!1;return!0}function E1(e,n,t){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=n.call(t,e[i],i,e));return r}function C1(e,n){if(e===n)return!0;const t=Object.keys(e),r=Object.keys(n);for(const i of t){if(!r.includes(i))return!1;const o=e[i],a=n[i];if(w6(o)&&w6(a)){if(!C1(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function w6(e){return null!==e&&"object"==typeof e}function gy(e){const n=[];for(const[t,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{n.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):n.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return n.length?"&"+n.join("&"):""}class efe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let n=1;n<this.blockSize;++n)this.pad_[n]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(n,t){t||(t=0);const r=this.W_;if("string"==typeof n)for(let D=0;D<16;D++)r[D]=n.charCodeAt(t)<<24|n.charCodeAt(t+1)<<16|n.charCodeAt(t+2)<<8|n.charCodeAt(t+3),t+=4;else for(let D=0;D<16;D++)r[D]=n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3],t+=4;for(let D=16;D<80;D++){const A=r[D-3]^r[D-8]^r[D-14]^r[D-16];r[D]=4294967295&(A<<1|A>>>31)}let _,x,i=this.chain_[0],o=this.chain_[1],a=this.chain_[2],c=this.chain_[3],p=this.chain_[4];for(let D=0;D<80;D++){D<40?D<20?(_=c^o&(a^c),x=1518500249):(_=o^a^c,x=1859775393):D<60?(_=o&a|c&(o|a),x=2400959708):(_=o^a^c,x=3395469782);const A=(i<<5|i>>>27)+_+p+x+r[D]&4294967295;p=c,c=a,a=4294967295&(o<<30|o>>>2),o=i,i=A}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(n,t){if(null==n)return;void 0===t&&(t=n.length);const r=t-this.blockSize;let i=0;const o=this.buf_;let a=this.inbuf_;for(;i<t;){if(0===a)for(;i<=r;)this.compress_(n,i),i+=this.blockSize;if("string"==typeof n){for(;i<t;)if(o[a]=n.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(o),a=0;break}}else for(;i<t;)if(o[a]=n[i],++a,++i,a===this.blockSize){this.compress_(o),a=0;break}}this.inbuf_=a,this.total_+=t}digest(){const n=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)n[r]=this.chain_[i]>>o&255,++r;return n}}class nfe{constructor(n,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{n(this)}).catch(r=>{this.error(r)})}next(n){this.forEachObserver(t=>{t.next(n)})}error(n){this.forEachObserver(t=>{t.error(n)}),this.close(n)}complete(){this.forEachObserver(n=>{n.complete()}),this.close()}subscribe(n,t,r){let i;if(void 0===n&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function rfe(e,n){if("object"!=typeof e||null===e)return!1;for(const t of n)if(t in e&&"function"==typeof e[t])return!0;return!1}(n,["next","error","complete"])?n:{next:n,error:t,complete:r},void 0===i.next&&(i.next=TR),void 0===i.error&&(i.error=TR),void 0===i.complete&&(i.complete=TR);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(n){void 0===this.observers||void 0===this.observers[n]||(delete this.observers[n],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(n){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,n)}sendOne(n,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[n])try{t(this.observers[n])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(n){this.finalized||(this.finalized=!0,void 0!==n&&(this.finalError=n),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TR(){}function ig(e,n){return`${e} failed: ${n} argument `}const D1=function(e){let n=0;for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);r<128?n++:r<2048?n+=2:r>=55296&&r<=56319?(n+=4,t++):n+=3}return n};function Vo(e){return e&&e._delegate?e._delegate:e}class lp{constructor(n,t,r){this.name=n,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}}const og="[DEFAULT]";class ufe{constructor(n,t){this.name=n,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){const t=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(t)){const r=new py;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(n){var t;const r=this.normalizeInstanceIdentifier(n?.identifier),i=null!==(t=n?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,this.shouldAutoInitialize()){if(function hfe(e){return"EAGER"===e.instantiationMode}(n))try{this.getOrInitializeService({instanceIdentifier:og})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(n=og){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}delete(){var n=this;return _e(function*(){const t=Array.from(n.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(n=og){return this.instances.has(n)}getOptions(n=og){return this.instancesOptions.get(n)||{}}initialize(n={}){const{options:t={}}=n,r=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,a]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&a.resolve(i);return i}onInit(n,t){var r;const i=this.normalizeInstanceIdentifier(t),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(n),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&n(a,i),()=>{o.delete(n)}}invokeOnInitCallbacks(n,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(n,t)}catch{}}getOrInitializeService({instanceIdentifier:n,options:t={}}){let r=this.instances.get(n);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===og?void 0:e),options:t}),this.instances.set(n,r),this.instancesOptions.set(n,t),this.invokeOnInitCallbacks(r,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,r)}catch{}var e;return r||null}normalizeInstanceIdentifier(n=og){return this.component?this.component.multipleInstances?n:og:n}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ffe{constructor(n){this.name=n,this.providers=new Map}addComponent(n){const t=this.getProvider(n.name);if(t.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);t.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);const t=new ufe(n,this);return this.providers.set(n,t),t}getProviders(){return Array.from(this.providers.values())}}const SR=[];var Gr=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(Gr||{});const x6={debug:Gr.DEBUG,verbose:Gr.VERBOSE,info:Gr.INFO,warn:Gr.WARN,error:Gr.ERROR,silent:Gr.SILENT},pfe=Gr.INFO,mfe={[Gr.DEBUG]:"log",[Gr.VERBOSE]:"log",[Gr.INFO]:"info",[Gr.WARN]:"warn",[Gr.ERROR]:"error"},gfe=(e,n,...t)=>{if(n<e.logLevel)return;const r=(new Date).toISOString(),i=mfe[n];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`);console[i](`[${r}]  ${e.name}:`,...t)};class IR{constructor(n){this.name=n,this._logLevel=pfe,this._logHandler=gfe,this._userLogHandler=null,SR.push(this)}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in Gr))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel="string"==typeof n?x6[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if("function"!=typeof n)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,Gr.DEBUG,...n),this._logHandler(this,Gr.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,Gr.VERBOSE,...n),this._logHandler(this,Gr.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,Gr.INFO,...n),this._logHandler(this,Gr.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,Gr.WARN,...n),this._logHandler(this,Gr.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,Gr.ERROR,...n),this._logHandler(this,Gr.ERROR,...n)}}let E6,C6;const D6=new WeakMap,kR=new WeakMap,T6=new WeakMap,AR=new WeakMap,RR=new WeakMap;let MR={get(e,n,t){if(e instanceof IDBTransaction){if("done"===n)return kR.get(e);if("objectStoreNames"===n)return e.objectStoreNames||T6.get(e);if("store"===n)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return cp(e[n])},set:(e,n,t)=>(e[n]=t,!0),has:(e,n)=>e instanceof IDBTransaction&&("done"===n||"store"===n)||n in e};function Cfe(e){return"function"==typeof e?function Efe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function vfe(){return C6||(C6=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(e)?function(...n){return e.apply(PR(this),n),cp(D6.get(this))}:function(...n){return cp(e.apply(PR(this),n))}:function(n,...t){const r=e.call(PR(this),n,...t);return T6.set(r,n.sort?n.sort():[n]),cp(r)}}(e):(e instanceof IDBTransaction&&function wfe(e){if(kR.has(e))return;const n=new Promise((t,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",a),e.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",a),e.addEventListener("abort",a)});kR.set(e,n)}(e),((e,n)=>n.some(t=>e instanceof t))(e,function yfe(){return E6||(E6=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(e,MR):e)}function cp(e){if(e instanceof IDBRequest)return function bfe(e){const n=new Promise((t,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",a)},o=()=>{t(cp(e.result)),i()},a=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",a)});return n.then(t=>{t instanceof IDBCursor&&D6.set(t,e)}).catch(()=>{}),RR.set(n,e),n}(e);if(AR.has(e))return AR.get(e);const n=Cfe(e);return n!==e&&(AR.set(e,n),RR.set(n,e)),n}const PR=e=>RR.get(e),Tfe=["get","getKey","getAll","getAllKeys","count"],Sfe=["put","add","delete","clear"],OR=new Map;function S6(e,n){if(!(e instanceof IDBDatabase)||n in e||"string"!=typeof n)return;if(OR.get(n))return OR.get(n);const t=n.replace(/FromIndex$/,""),r=n!==t,i=Sfe.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Tfe.includes(t))return;const o=function(){var a=_e(function*(c,...p){const _=this.transaction(c,i?"readwrite":"readonly");let x=_.store;return r&&(x=x.index(p.shift())),(yield Promise.all([x[t](...p),i&&_.done]))[0]});return function(p){return a.apply(this,arguments)}}();return OR.set(n,o),o}!function xfe(e){MR=e(MR)}(e=>({...e,get:(n,t,r)=>S6(n,t)||e.get(n,t,r),has:(n,t)=>!!S6(n,t)||e.has(n,t)}));class Ife{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function kfe(e){const n=e.getComponent();return"VERSION"===n?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const T1="@firebase/app",NR="0.10.13",Ah=new IR("@firebase/app"),Afe="@firebase/app-compat",Rfe="@firebase/analytics-compat",Mfe="@firebase/analytics",Pfe="@firebase/app-check-compat",Ofe="@firebase/app-check",Nfe="@firebase/auth",Lfe="@firebase/auth-compat",Ffe="@firebase/database",Bfe="@firebase/data-connect",Vfe="@firebase/database-compat",zfe="@firebase/functions",Ufe="@firebase/functions-compat",jfe="@firebase/installations",Hfe="@firebase/installations-compat",$fe="@firebase/messaging",qfe="@firebase/messaging-compat",Gfe="@firebase/performance",Wfe="@firebase/performance-compat",Zfe="@firebase/remote-config",Kfe="@firebase/remote-config-compat",Yfe="@firebase/storage",Xfe="@firebase/storage-compat",Qfe="@firebase/firestore",Jfe="@firebase/vertexai-preview",epe="@firebase/firestore-compat",tpe="firebase",S1="[DEFAULT]",rpe={[T1]:"fire-core",[Afe]:"fire-core-compat",[Mfe]:"fire-analytics",[Rfe]:"fire-analytics-compat",[Ofe]:"fire-app-check",[Pfe]:"fire-app-check-compat",[Nfe]:"fire-auth",[Lfe]:"fire-auth-compat",[Ffe]:"fire-rtdb",[Bfe]:"fire-data-connect",[Vfe]:"fire-rtdb-compat",[zfe]:"fire-fn",[Ufe]:"fire-fn-compat",[jfe]:"fire-iid",[Hfe]:"fire-iid-compat",[$fe]:"fire-fcm",[qfe]:"fire-fcm-compat",[Gfe]:"fire-perf",[Wfe]:"fire-perf-compat",[Zfe]:"fire-rc",[Kfe]:"fire-rc-compat",[Yfe]:"fire-gcs",[Xfe]:"fire-gcs-compat",[Qfe]:"fire-fst",[epe]:"fire-fst-compat",[Jfe]:"fire-vertex","fire-js":"fire-js",[tpe]:"fire-js-all"},sg=new Map,h0=new Map,f0=new Map;function I6(e,n){try{e.container.addComponent(n)}catch(t){Ah.debug(`Component ${n.name} failed to register with FirebaseApp ${e.name}`,t)}}function ag(e){const n=e.name;if(f0.has(n))return Ah.debug(`There were multiple attempts to register component ${n}.`),!1;f0.set(n,e);for(const t of sg.values())I6(t,e);for(const t of h0.values())I6(t,e);return!0}function p0(e,n){const t=e.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),e.container.getProvider(n)}function Rh(e){return void 0!==e.settings}const Cc=new u0("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class k6{constructor(n,t,r){this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw Cc.create("app-deleted",{appName:this._name})}}const lg="10.14.1";function A6(e,n={}){let t=e;"object"!=typeof n&&(n={name:n});const r=Object.assign({name:S1,automaticDataCollectionEnabled:!1},n),i=r.name;if("string"!=typeof i||!i)throw Cc.create("bad-app-name",{appName:String(i)});if(t||(t=_6()),!t)throw Cc.create("no-options");const o=sg.get(i);if(o){if(C1(t,o.options)&&C1(r,o.config))return o;throw Cc.create("duplicate-app",{appName:i})}const a=new ffe(i);for(const p of f0.values())a.addComponent(p);const c=new k6(t,r,a);return sg.set(i,c),c}function LR(e=S1){const n=sg.get(e);if(!n&&e===S1&&_6())return A6();if(!n)throw Cc.create("no-app",{appName:e});return n}function hu(e,n,t){var r;let i=null!==(r=rpe[e])&&void 0!==r?r:e;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=n.match(/\s|\//);if(o||a){const c=[`Unable to register library "${i}" with version "${n}":`];return o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${n}" contains illegal characters (whitespace or "/")`),void Ah.warn(c.join(" "))}ag(new lp(`${i}-version`,()=>({library:i,version:n}),"VERSION"))}const m0="firebase-heartbeat-store";let BR=null;function R6(){return BR||(BR=function Dfe(e,n,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(e,n),c=cp(a);return r&&a.addEventListener("upgradeneeded",p=>{r(cp(a.result),p.oldVersion,p.newVersion,cp(a.transaction),p)}),t&&a.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),c.then(p=>{o&&p.addEventListener("close",()=>o()),i&&p.addEventListener("versionchange",_=>i(_.oldVersion,_.newVersion,_))}).catch(()=>{}),c}("firebase-heartbeat-database",1,{upgrade:(e,n)=>{if(0===n)try{e.createObjectStore(m0)}catch(t){console.warn(t)}}}).catch(e=>{throw Cc.create("idb-open",{originalErrorMessage:e.message})})),BR}function VR(){return(VR=_e(function*(e){try{const t=(yield R6()).transaction(m0),r=yield t.objectStore(m0).get(P6(e));return yield t.done,r}catch(n){if(n instanceof kh)Ah.warn(n.message);else{const t=Cc.create("idb-get",{originalErrorMessage:n?.message});Ah.warn(t.message)}}})).apply(this,arguments)}function M6(e,n){return zR.apply(this,arguments)}function zR(){return(zR=_e(function*(e,n){try{const r=(yield R6()).transaction(m0,"readwrite");yield r.objectStore(m0).put(n,P6(e)),yield r.done}catch(t){if(t instanceof kh)Ah.warn(t.message);else{const r=Cc.create("idb-set",{originalErrorMessage:t?.message});Ah.warn(r.message)}}})).apply(this,arguments)}function P6(e){return`${e.name}!${e.options.appId}`}class fpe{constructor(n){this.container=n,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mpe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var n=this;return _e(function*(){var t,r;try{const o=n.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=O6();return null==(null===(t=n._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(n._heartbeatsCache=yield n._heartbeatsCachePromise,null==(null===(r=n._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||n._heartbeatsCache.lastSentHeartbeatDate===a||n._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(n._heartbeatsCache.heartbeats.push({date:a,agent:o}),n._heartbeatsCache.heartbeats=n._heartbeatsCache.heartbeats.filter(c=>{const p=new Date(c.date).valueOf();return Date.now()-p<=2592e6}),n._storage.overwrite(n._heartbeatsCache))}catch(i){Ah.warn(i)}})()}getHeartbeatsHeader(){var n=this;return _e(function*(){var t;try{if(null===n._heartbeatsCache&&(yield n._heartbeatsCachePromise),null==(null===(t=n._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===n._heartbeatsCache.heartbeats.length)return"";const r=O6(),{heartbeatsToSend:i,unsentEntries:o}=function ppe(e,n=1024){const t=[];let r=e.slice();for(const i of e){const o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),N6(t)>n){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),N6(t)>n){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(n._heartbeatsCache.heartbeats),a=v1(JSON.stringify({version:2,heartbeats:i}));return n._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(n._heartbeatsCache.heartbeats=o,yield n._storage.overwrite(n._heartbeatsCache)):(n._heartbeatsCache.heartbeats=[],n._storage.overwrite(n._heartbeatsCache)),a}catch(r){return Ah.warn(r),""}})()}}function O6(){return(new Date).toISOString().substring(0,10)}class mpe{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _e(function*(){return!!function Whe(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function Zhe(){return new Promise((e,n)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;n((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(t){n(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var n=this;return _e(function*(){if(yield n._canUseIndexedDBPromise){const r=yield function upe(e){return VR.apply(this,arguments)}(n.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(n){var t=this;return _e(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return M6(t.app,{lastSentHeartbeatDate:null!==(r=n.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:n.heartbeats})}})()}add(n){var t=this;return _e(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return M6(t.app,{lastSentHeartbeatDate:null!==(r=n.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...n.heartbeats]})}})()}}function N6(e){return v1(JSON.stringify({version:2,heartbeats:e})).length}function I1(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}!function gpe(e){ag(new lp("platform-logger",n=>new Ife(n),"PRIVATE")),ag(new lp("heartbeat",n=>new fpe(n),"PRIVATE")),hu(T1,NR,e),hu(T1,NR,"esm2017"),hu("fire-js","")}(""),hu("firebase","10.14.1","app"),"function"==typeof SuppressedError&&SuppressedError;const Wpe=function F6(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},B6=new u0("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),k1=new IR("@firebase/auth");function A1(e,...n){k1.logLevel<=Gr.ERROR&&k1.error(`Auth (${lg}): ${e}`,...n)}function Ya(e,...n){throw WR(e,...n)}function pa(e,...n){return WR(e,...n)}function GR(e,n,t){const r=Object.assign(Object.assign({},Wpe()),{[n]:t});return new u0("auth","Firebase",r).create(n,{appName:e.name})}function ps(e){return GR(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function WR(e,...n){if("string"!=typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return B6.create(e,...n)}function ut(e,n,...t){if(!e)throw WR(n,...t)}function fd(e){const n="INTERNAL ASSERTION FAILED: "+e;throw A1(n),new Error(n)}function Mh(e,n){e||fd(n)}function _0(){var e;return typeof self<"u"&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function V6(){var e;return typeof self<"u"&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Kpe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function ZR(){return"http:"===V6()||"https:"===V6()}()||function qhe(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class y0{constructor(n,t){this.shortDelay=n,this.longDelay=t,Mh(t>n,"Short delay should be less than long delay!"),this.isMobile=CR()||b6()}get(){return Kpe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function KR(e,n){Mh(e.emulator,"Emulator should always be set here");const{url:t}=e.emulator;return n?`${t}${n.startsWith("/")?n.slice(1):n}`:t}class z6{static initialize(n,t,r){this.fetchImpl=n,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void fd("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void fd("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void fd("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xpe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Qpe=new y0(3e4,6e4);function _i(e,n){return e.tenantId&&!n.tenantId?Object.assign(Object.assign({},n),{tenantId:e.tenantId}):n}function yi(e,n,t,r){return YR.apply(this,arguments)}function YR(){return(YR=_e(function*(e,n,t,r,i={}){return U6(e,i,_e(function*(){let o={},a={};r&&("GET"===n?a=r:o={body:JSON.stringify(r)});const c=gy(Object.assign({key:e.config.apiKey},a)).slice(1),p=yield e._getAdditionalHeaders();p["Content-Type"]="application/json",e.languageCode&&(p["X-Firebase-Locale"]=e.languageCode);const _=Object.assign({method:n,headers:p},o);return function $he(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(_.referrerPolicy="no-referrer"),z6.fetch()(j6(e,e.config.apiHost,t,c),_)}))})).apply(this,arguments)}function U6(e,n,t){return XR.apply(this,arguments)}function XR(){return(XR=_e(function*(e,n,t){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Xpe),n);try{const i=new eme(e),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=yield o.json();if("needConfirmation"in a)throw v0(e,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const c=o.ok?a.errorMessage:a.error.message,[p,_]=c.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===p)throw v0(e,"credential-already-in-use",a);if("EMAIL_EXISTS"===p)throw v0(e,"email-already-in-use",a);if("USER_DISABLED"===p)throw v0(e,"user-disabled",a);const x=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw GR(e,x,_);Ya(e,x)}}catch(i){if(i instanceof kh)throw i;Ya(e,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function Ph(e,n,t,r){return QR.apply(this,arguments)}function QR(){return(QR=_e(function*(e,n,t,r,i={}){const o=yield yi(e,n,t,r,i);return"mfaPendingCredential"in o&&Ya(e,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function j6(e,n,t,r){const i=`${n}${t}?${r}`;return e.config.emulator?KR(e.config,i):`${e.config.apiScheme}://${i}`}class eme{constructor(n){this.auth=n,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(pa(this.auth,"network-request-failed")),Qpe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function v0(e,n,t){const r={appName:e.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=pa(e,n,r);return i.customData._tokenResponse=t,i}function tM(){return(tM=_e(function*(e,n){return yi(e,"POST","/v1/accounts:delete",n)})).apply(this,arguments)}function W6(e,n){return rM.apply(this,arguments)}function rM(){return(rM=_e(function*(e,n){return yi(e,"POST","/v1/accounts:lookup",n)})).apply(this,arguments)}function b0(e){if(e)try{const n=new Date(Number(e));if(!isNaN(n.getTime()))return n.toUTCString()}catch{}}function iM(){return(iM=_e(function*(e,n=!1){const t=Vo(e),r=yield t.getIdToken(n),i=R1(r);ut(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:b0(oM(i.auth_time)),issuedAtTime:b0(oM(i.iat)),expirationTime:b0(oM(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function oM(e){return 1e3*Number(e)}function R1(e){const[n,t,r]=e.split(".");if(void 0===n||void 0===t||void 0===r)return A1("JWT malformed, contained fewer than 3 sections"),null;try{const i=b1(t);return i?JSON.parse(i):(A1("Failed to decode base64 JWT payload"),null)}catch(i){return A1("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Z6(e){const n=R1(e);return ut(n,"internal-error"),ut(typeof n.exp<"u","internal-error"),ut(typeof n.iat<"u","internal-error"),Number(n.exp)-Number(n.iat)}function Oh(e,n){return sM.apply(this,arguments)}function sM(){return(sM=_e(function*(e,n,t=!1){if(t)return n;try{return yield n}catch(r){throw r instanceof kh&&function ome({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}class sme{constructor(n){this.user=n,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(n){var t;if(n){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(n=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(n);this.timerId=setTimeout(_e(function*(){yield t.iteration()}),r)}iteration(){var n=this;return _e(function*(){try{yield n.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&n.schedule(!0))}n.schedule()})()}}class aM{constructor(n,t){this.createdAt=n,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=b0(this.lastLoginAt),this.creationTime=b0(this.createdAt)}_copy(n){this.createdAt=n.createdAt,this.lastLoginAt=n.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function w0(e){return lM.apply(this,arguments)}function lM(){return(lM=_e(function*(e){var n;const t=e.auth,r=yield e.getIdToken(),i=yield Oh(e,W6(t,{idToken:r}));ut(i?.users.length,t,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=null!==(n=o.providerUserInfo)&&void 0!==n&&n.length?K6(o.providerUserInfo):[],c=function lme(e,n){return[...e.filter(r=>!n.some(i=>i.providerId===r.providerId)),...n]}(e.providerData,a),x=!!e.isAnonymous&&!(e.email&&o.passwordHash||c?.length),D={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new aM(o.createdAt,o.lastLoginAt),isAnonymous:x};Object.assign(e,D)})).apply(this,arguments)}function cM(){return(cM=_e(function*(e){const n=Vo(e);yield w0(n),yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)})).apply(this,arguments)}function K6(e){return e.map(n=>{var{providerId:t}=n,r=I1(n,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function uM(){return(uM=_e(function*(e,n){const t=yield U6(e,{},_e(function*(){const r=gy({grant_type:"refresh_token",refresh_token:n}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,a=j6(e,i,"/v1/token",`key=${o}`),c=yield e._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",z6.fetch()(a,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function dM(){return(dM=_e(function*(e,n){return yi(e,"POST","/v2/accounts:revokeToken",_i(e,n))})).apply(this,arguments)}class yy{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(n){ut(n.idToken,"internal-error"),ut(typeof n.idToken<"u","internal-error"),ut(typeof n.refreshToken<"u","internal-error");const t="expiresIn"in n&&typeof n.expiresIn<"u"?Number(n.expiresIn):Z6(n.idToken);this.updateTokensAndExpiration(n.idToken,n.refreshToken,t)}updateFromIdToken(n){ut(0!==n.length,"internal-error");const t=Z6(n);this.updateTokensAndExpiration(n,null,t)}getToken(n){var t=this;return _e(function*(r,i=!1){return i||!t.accessToken||t.isExpired?(ut(t.refreshToken,r,"user-token-expired"),t.refreshToken?(yield t.refresh(r,t.refreshToken),t.accessToken):null):t.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(n,t){var r=this;return _e(function*(){const{accessToken:i,refreshToken:o,expiresIn:a}=yield function cme(e,n){return uM.apply(this,arguments)}(n,t);r.updateTokensAndExpiration(i,o,Number(a))})()}updateTokensAndExpiration(n,t,r){this.refreshToken=t||null,this.accessToken=n||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(n,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,a=new yy;return r&&(ut("string"==typeof r,"internal-error",{appName:n}),a.refreshToken=r),i&&(ut("string"==typeof i,"internal-error",{appName:n}),a.accessToken=i),o&&(ut("number"==typeof o,"internal-error",{appName:n}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(n){this.accessToken=n.accessToken,this.refreshToken=n.refreshToken,this.expirationTime=n.expirationTime}_clone(){return Object.assign(new yy,this.toJSON())}_performRefresh(){return fd("not implemented")}}function up(e,n){ut("string"==typeof e||typeof e>"u","internal-error",{appName:n})}class Nh{constructor(n){var{uid:t,auth:r,stsTokenManager:i}=n,o=I1(n,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sme(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new aM(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(n){var t=this;return _e(function*(){const r=yield Oh(t,t.stsTokenManager.getToken(t.auth,n));return ut(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(n){return function ime(e){return iM.apply(this,arguments)}(this,n)}reload(){return function ame(e){return cM.apply(this,arguments)}(this)}_assign(n){this!==n&&(ut(this.uid===n.uid,this.auth,"internal-error"),this.displayName=n.displayName,this.photoURL=n.photoURL,this.email=n.email,this.emailVerified=n.emailVerified,this.phoneNumber=n.phoneNumber,this.isAnonymous=n.isAnonymous,this.tenantId=n.tenantId,this.providerData=n.providerData.map(t=>Object.assign({},t)),this.metadata._copy(n.metadata),this.stsTokenManager._assign(n.stsTokenManager))}_clone(n){const t=new Nh(Object.assign(Object.assign({},this),{auth:n,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(n){ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=n,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(n){this.reloadListener?this.reloadListener(n):this.reloadUserInfo=n}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(n){var t=this;return _e(function*(r,i=!1){let o=!1;r.idToken&&r.idToken!==t.stsTokenManager.accessToken&&(t.stsTokenManager.updateFromServerResponse(r),o=!0),i&&(yield w0(t)),yield t.auth._persistUserIfCurrent(t),o&&t.auth._notifyListenersIfCurrent(t)}).apply(this,arguments)}delete(){var n=this;return _e(function*(){if(Rh(n.auth.app))return Promise.reject(ps(n.auth));const t=yield n.getIdToken();return yield Oh(n,function nme(e,n){return tM.apply(this,arguments)}(n.auth,{idToken:t})),n.stsTokenManager.clearRefreshToken(),n.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(n=>Object.assign({},n)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(n,t){var r,i,o,a,c,p,_,x;const D=null!==(r=t.displayName)&&void 0!==r?r:void 0,A=null!==(i=t.email)&&void 0!==i?i:void 0,O=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,B=null!==(a=t.photoURL)&&void 0!==a?a:void 0,Q=null!==(c=t.tenantId)&&void 0!==c?c:void 0,oe=null!==(p=t._redirectEventId)&&void 0!==p?p:void 0,be=null!==(_=t.createdAt)&&void 0!==_?_:void 0,xe=null!==(x=t.lastLoginAt)&&void 0!==x?x:void 0,{uid:$e,emailVerified:De,isAnonymous:we,providerData:Fe,stsTokenManager:We}=t;ut($e&&We,n,"internal-error");const ht=yy.fromJSON(this.name,We);ut("string"==typeof $e,n,"internal-error"),up(D,n.name),up(A,n.name),ut("boolean"==typeof De,n,"internal-error"),ut("boolean"==typeof we,n,"internal-error"),up(O,n.name),up(B,n.name),up(Q,n.name),up(oe,n.name),up(be,n.name),up(xe,n.name);const en=new Nh({uid:$e,auth:n,email:A,emailVerified:De,displayName:D,isAnonymous:we,photoURL:B,phoneNumber:O,tenantId:Q,stsTokenManager:ht,createdAt:be,lastLoginAt:xe});return Fe&&Array.isArray(Fe)&&(en.providerData=Fe.map(sn=>Object.assign({},sn))),oe&&(en._redirectEventId=oe),en}static _fromIdTokenResponse(n,t){return _e(function*(r,i,o=!1){const a=new yy;a.updateFromServerResponse(i);const c=new Nh({uid:i.localId,auth:r,stsTokenManager:a,isAnonymous:o});return yield w0(c),c}).apply(this,arguments)}static _fromGetAccountInfoResponse(n,t,r){return _e(function*(){const i=t.users[0];ut(void 0!==i.localId,"internal-error");const o=void 0!==i.providerUserInfo?K6(i.providerUserInfo):[],a=!(i.email&&i.passwordHash||o?.length),c=new yy;c.updateFromIdToken(r);const p=new Nh({uid:i.localId,auth:n,stsTokenManager:c,isAnonymous:a}),_={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new aM(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||o?.length)};return Object.assign(p,_),p})()}}const Y6=new Map;function Lh(e){Mh(e instanceof Function,"Expected a class definition");let n=Y6.get(e);return n?(Mh(n instanceof e,"Instance stored in cache mismatched with class"),n):(n=new e,Y6.set(e,n),n)}const X6=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _e(function*(){return!0})()}_set(t,r){var i=this;return _e(function*(){i.storage[t]=r})()}_get(t){var r=this;return _e(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return _e(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return e.type="NONE",e})();function M1(e,n,t){return`firebase:${e}:${n}:${t}`}class vy{constructor(n,t,r){this.persistence=n,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=M1(this.userKey,i.apiKey,o),this.fullPersistenceKey=M1("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(n){return this.persistence._set(this.fullUserKey,n.toJSON())}getCurrentUser(){var n=this;return _e(function*(){const t=yield n.persistence._get(n.fullUserKey);return t?Nh._fromJSON(n.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(n){var t=this;return _e(function*(){if(t.persistence===n)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=n,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(n,t){return _e(function*(r,i,o="authUser"){if(!i.length)return new vy(Lh(X6),r,o);const a=(yield Promise.all(i.map(function(){var D=_e(function*(A){if(yield A._isAvailable())return A});return function(A){return D.apply(this,arguments)}}()))).filter(D=>D);let c=a[0]||Lh(X6);const p=M1(o,r.config.apiKey,r.name);let _=null;for(const D of i)try{const A=yield D._get(p);if(A){const O=Nh._fromJSON(r,A);D!==c&&(_=O),c=D;break}}catch{}const x=a.filter(D=>D._shouldAllowMigration);return c._shouldAllowMigration&&x.length?(c=x[0],_&&(yield c._set(p,_.toJSON())),yield Promise.all(i.map(function(){var D=_e(function*(A){if(A!==c)try{yield A._remove(p)}catch{}});return function(A){return D.apply(this,arguments)}}())),new vy(c,r,o)):new vy(c,r,o)}).apply(this,arguments)}}function Q6(e){const n=e.toLowerCase();if(n.includes("opera/")||n.includes("opr/")||n.includes("opios/"))return"Opera";if(nH(n))return"IEMobile";if(n.includes("msie")||n.includes("trident/"))return"IE";if(n.includes("edge/"))return"Edge";if(J6(n))return"Firefox";if(n.includes("silk/"))return"Silk";if(iH(n))return"Blackberry";if(oH(n))return"Webos";if(eH(n))return"Safari";if((n.includes("chrome/")||tH(n))&&!n.includes("edge/"))return"Chrome";if(rH(n))return"Android";{const r=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function J6(e=Ls()){return/firefox\//i.test(e)}function eH(e=Ls()){const n=e.toLowerCase();return n.includes("safari/")&&!n.includes("chrome/")&&!n.includes("crios/")&&!n.includes("android")}function tH(e=Ls()){return/crios\//i.test(e)}function nH(e=Ls()){return/iemobile/i.test(e)}function rH(e=Ls()){return/android/i.test(e)}function iH(e=Ls()){return/blackberry/i.test(e)}function oH(e=Ls()){return/webos/i.test(e)}function hM(e=Ls()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function sH(e=Ls()){return hM(e)||rH(e)||oH(e)||iH(e)||/windows phone/i.test(e)||nH(e)}function aH(e,n=[]){let t;switch(e){case"Browser":t=Q6(Ls());break;case"Worker":t=`${Q6(Ls())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${lg}/${r}`}class fme{constructor(n){this.auth=n,this.queue=[]}pushCallback(n,t){const r=o=>new Promise((a,c)=>{try{a(n(o))}catch(p){c(p)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(n){var t=this;return _e(function*(){if(t.auth.currentUser===n)return;const r=[];try{for(const i of t.queue)yield i(n),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function fM(){return(fM=_e(function*(e,n={}){return yi(e,"GET","/v2/passwordPolicy",_i(e,n))})).apply(this,arguments)}class gme{constructor(n){var t,r,i,o;const a=n.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=a.minPasswordLength)&&void 0!==t?t:6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),void 0!==a.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),void 0!==a.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),void 0!==a.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),void 0!==a.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=n.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=n.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=n.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=n.schemaVersion}validatePassword(n){var t,r,i,o,a,c;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(n,p),this.validatePasswordCharacterOptions(n,p),p.isValid&&(p.isValid=null===(t=p.meetsMinPasswordLength)||void 0===t||t),p.isValid&&(p.isValid=null===(r=p.meetsMaxPasswordLength)||void 0===r||r),p.isValid&&(p.isValid=null===(i=p.containsLowercaseLetter)||void 0===i||i),p.isValid&&(p.isValid=null===(o=p.containsUppercaseLetter)||void 0===o||o),p.isValid&&(p.isValid=null===(a=p.containsNumericCharacter)||void 0===a||a),p.isValid&&(p.isValid=null===(c=p.containsNonAlphanumericCharacter)||void 0===c||c),p}validatePasswordLengthOptions(n,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=n.length>=r),i&&(t.meetsMaxPasswordLength=n.length<=i)}validatePasswordCharacterOptions(n,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<n.length;i++)r=n.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(n,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(n.containsLowercaseLetter||(n.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(n.containsUppercaseLetter||(n.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(n.containsNumericCharacter||(n.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(n.containsNonAlphanumericCharacter||(n.containsNonAlphanumericCharacter=o))}}class _me{constructor(n,t,r,i){this.app=n,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lH(this),this.idTokenSubscription=new lH(this),this.beforeStateQueue=new fme(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=B6,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=n.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(n,t){var r=this;return t&&(this._popupRedirectResolver=Lh(t)),this._initializationPromise=this.queue(_e(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield vy.create(r,n),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var n=this;return _e(function*(){if(n._deleted)return;const t=yield n.assertedPersistence.getCurrentUser();if(n.currentUser||t){if(n.currentUser&&t&&n.currentUser.uid===t.uid)return n._currentUser._assign(t),void(yield n.currentUser.getIdToken());yield n._updateCurrentUser(t,!0)}})()}initializeCurrentUserFromIdToken(n){var t=this;return _e(function*(){try{const r=yield W6(t,{idToken:n}),i=yield Nh._fromGetAccountInfoResponse(t,r,n);yield t.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield t.directlySetCurrentUser(null)}})()}initializeCurrentUser(n){var t=this;return _e(function*(){var r;if(Rh(t.app)){const c=t.app.settings.authIdToken;return c?new Promise(p=>{setTimeout(()=>t.initializeCurrentUserFromIdToken(c).then(p,p))}):t.directlySetCurrentUser(null)}const i=yield t.assertedPersistence.getCurrentUser();let o=i,a=!1;if(n&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const c=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,p=o?._redirectEventId,_=yield t.tryRedirectSignIn(n);(!c||c===p)&&_?.user&&(o=_.user,a=!0)}if(!o)return t.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{yield t.beforeStateQueue.runMiddleware(o)}catch(c){o=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(c))}return o?t.reloadAndSetCurrentUserOrClear(o):t.directlySetCurrentUser(null)}return ut(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===o._redirectEventId?t.directlySetCurrentUser(o):t.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(n){var t=this;return _e(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,n,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(n){var t=this;return _e(function*(){try{yield w0(n)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(n)})()}useDeviceLanguage(){this.languageCode=function Ype(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var n=this;return _e(function*(){n._deleted=!0})()}updateCurrentUser(n){var t=this;return _e(function*(){if(Rh(t.app))return Promise.reject(ps(t));const r=n?Vo(n):null;return r&&ut(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(n){var t=this;return _e(function*(r,i=!1){if(!t._deleted)return r&&ut(t.tenantId===r.tenantId,t,"tenant-id-mismatch"),i||(yield t.beforeStateQueue.runMiddleware(r)),t.queue(_e(function*(){yield t.directlySetCurrentUser(r),t.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var n=this;return _e(function*(){return Rh(n.app)?Promise.reject(ps(n)):(yield n.beforeStateQueue.runMiddleware(null),(n.redirectPersistenceManager||n._popupRedirectResolver)&&(yield n._setRedirectUser(null)),n._updateCurrentUser(null,!0))})()}setPersistence(n){var t=this;return Rh(this.app)?Promise.reject(ps(this)):this.queue(_e(function*(){yield t.assertedPersistence.setPersistence(Lh(n))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(n){var t=this;return _e(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(n)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var n=this;return _e(function*(){const t=yield function pme(e){return fM.apply(this,arguments)}(n),r=new gme(t);null===n.tenantId?n._projectPasswordPolicy=r:n._tenantPasswordPolicies[n.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(n){this._errorFactory=new u0("auth","Firebase",n())}onAuthStateChanged(n,t,r){return this.registerStateListener(this.authStateSubscription,n,t,r)}beforeAuthStateChanged(n,t){return this.beforeStateQueue.pushCallback(n,t)}onIdTokenChanged(n,t,r){return this.registerStateListener(this.idTokenSubscription,n,t,r)}authStateReady(){return new Promise((n,t)=>{if(this.currentUser)n();else{const r=this.onAuthStateChanged(()=>{r(),n()},t)}})}revokeAccessToken(n){var t=this;return _e(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:n,idToken:r};null!=t.tenantId&&(i.tenantId=t.tenantId),yield function ume(e,n){return dM.apply(this,arguments)}(t,i)}})()}toJSON(){var n;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(n=this._currentUser)||void 0===n?void 0:n.toJSON()}}_setRedirectUser(n,t){var r=this;return _e(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===n?i.removeCurrentUser():i.setCurrentUser(n)})()}getOrInitRedirectPersistenceManager(n){var t=this;return _e(function*(){if(!t.redirectPersistenceManager){const r=n&&Lh(n)||t._popupRedirectResolver;ut(r,t,"argument-error"),t.redirectPersistenceManager=yield vy.create(t,[Lh(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(n){var t=this;return _e(function*(){var r,i;return t._isInitialized&&(yield t.queue(_e(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===n?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===n?t.redirectUser:null})()}_persistUserIfCurrent(n){var t=this;return _e(function*(){if(n===t.currentUser)return t.queue(_e(function*(){return t.directlySetCurrentUser(n)}))})()}_notifyListenersIfCurrent(n){n===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(n=this.currentUser)||void 0===n?void 0:n.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(n,t,r,i){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ut(c,this,"internal-error"),c.then(()=>{a||o(this.currentUser)}),"function"==typeof t){const p=n.addObserver(t,r,i);return()=>{a=!0,p()}}{const p=n.addObserver(t);return()=>{a=!0,p()}}}directlySetCurrentUser(n){var t=this;return _e(function*(){t.currentUser&&t.currentUser!==n&&t._currentUser._stopProactiveRefresh(),n&&t.isProactiveRefreshEnabled&&n._startProactiveRefresh(),t.currentUser=n,n?yield t.assertedPersistence.setCurrentUser(n):yield t.assertedPersistence.removeCurrentUser()})()}queue(n){return this.operations=this.operations.then(n,n),this.operations}get assertedPersistence(){return ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(n){!n||this.frameworks.includes(n)||(this.frameworks.push(n),this.frameworks.sort(),this.clientVersion=aH(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var n=this;return _e(function*(){var t;const r={"X-Client-Version":n.clientVersion};n.app.options.appId&&(r["X-Firebase-gmpid"]=n.app.options.appId);const i=yield null===(t=n.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield n._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var n=this;return _e(function*(){var t;const r=yield null===(t=n.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function Zpe(e,...n){k1.logLevel<=Gr.WARN&&k1.warn(`Auth (${lg}): ${e}`,...n)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Eo(e){return Vo(e)}class lH{constructor(n){this.auth=n,this.observer=null,this.addObserver=function tfe(e,n){const t=new nfe(e,n);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let x0={loadJS:()=>_e(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cH(e){return`__${e}${Math.floor(1e6*Math.random())}`}function hH(e){const n=e.indexOf(":");return n<0?"":e.substr(0,n+1)}function fH(e){if(!e)return null;const n=Number(e);return isNaN(n)?null:n}class C0{constructor(n,t){this.providerId=n,this.signInMethod=t}toJSON(){return fd("not implemented")}_getIdTokenResponse(n){return fd("not implemented")}_linkToIdToken(n,t){return fd("not implemented")}_getReauthenticationResolver(n){return fd("not implemented")}}function Fh(e,n){return RM.apply(this,arguments)}function RM(){return(RM=_e(function*(e,n){return Ph(e,"POST","/v1/accounts:signInWithIdp",_i(e,n))})).apply(this,arguments)}class by extends C0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(n){const t=new by(n.providerId,n.signInMethod);return n.idToken||n.accessToken?(n.idToken&&(t.idToken=n.idToken),n.accessToken&&(t.accessToken=n.accessToken),n.nonce&&!n.pendingToken&&(t.nonce=n.nonce),n.pendingToken&&(t.pendingToken=n.pendingToken)):n.oauthToken&&n.oauthTokenSecret?(t.accessToken=n.oauthToken,t.secret=n.oauthTokenSecret):Ya("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(n){const t="string"==typeof n?JSON.parse(n):n,{providerId:r,signInMethod:i}=t,o=I1(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new by(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(n){return Fh(n,this.buildRequest())}_linkToIdToken(n,t){const r=this.buildRequest();return r.idToken=t,Fh(n,r)}_getReauthenticationResolver(n){const t=this.buildRequest();return t.autoCreate=!1,Fh(n,t)}buildRequest(){const n={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)n.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),n.postBody=gy(t)}return n}}class Bh{constructor(n){this.providerId=n,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(n){this.defaultLanguageCode=n}setCustomParameters(n){return this.customParameters=n,this}getCustomParameters(){return this.customParameters}}class gH extends Bh{constructor(){super(...arguments),this.scopes=[]}addScope(n){return this.scopes.includes(n)||this.scopes.push(n),this}getScopes(){return[...this.scopes]}}let _H=(()=>{class e extends gH{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return by._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return e.credential(r,i)}catch{return null}}}return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e})();class Dc{constructor(n){this.user=n.user,this.providerId=n.providerId,this._tokenResponse=n._tokenResponse,this.operationType=n.operationType}static _fromIdTokenResponse(n,t,r){return _e(function*(i,o,a,c=!1){const p=yield Nh._fromIdTokenResponse(i,a,c),_=vH(a);return new Dc({user:p,providerId:_,_tokenResponse:a,operationType:o})}).apply(this,arguments)}static _forOperation(n,t,r){return _e(function*(){yield n._updateTokensIfNecessary(r,!0);const i=vH(r);return new Dc({user:n,providerId:i,_tokenResponse:r,operationType:t})})()}}function vH(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class L1 extends kh{constructor(n,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,L1.prototype),this.customData={appName:n.name,tenantId:null!==(o=n.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(n,t,r,i){return new L1(n,t,r,i)}}function bH(e,n,t,r){return("reauthenticate"===n?t._getReauthenticationResolver(e):t._getIdTokenResponse(e)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?L1._fromErrorAndOperation(e,o,n,r):o})}function zM(e,n){return UM.apply(this,arguments)}function UM(){return(UM=_e(function*(e,n,t=!1){const r=yield Oh(e,n._linkToIdToken(e.auth,yield e.getIdToken()),t);return Dc._forOperation(e,"link",r)})).apply(this,arguments)}function xH(e,n){return HM.apply(this,arguments)}function HM(){return(HM=_e(function*(e,n,t=!1){const{auth:r}=e;if(Rh(r.app))return Promise.reject(ps(r));const i="reauthenticate";try{const o=yield Oh(e,bH(r,i,n,e),t);ut(o.idToken,r,"internal-error");const a=R1(o.idToken);ut(a,r,"internal-error");const{sub:c}=a;return ut(e.uid===c,r,"user-mismatch"),Dc._forOperation(e,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&Ya(r,"user-mismatch"),o}})).apply(this,arguments)}function EH(e,n){return $M.apply(this,arguments)}function $M(){return($M=_e(function*(e,n,t=!1){if(Rh(e.app))return Promise.reject(ps(e));const r="signIn",i=yield bH(e,r,n),o=yield Dc._fromIdTokenResponse(e,r,i);return t||(yield e._updateCurrentUser(o.user)),o})).apply(this,arguments)}function V1(e,n,t,r){return Vo(e).onAuthStateChanged(n,t,r)}const z1="__sak";class TH{constructor(n,t){this.storageRetriever=n,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(z1,"1"),this.storage.removeItem(z1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(n,t){return this.storage.setItem(n,JSON.stringify(t)),Promise.resolve()}_get(n){const t=this.storage.getItem(n);return Promise.resolve(t?JSON.parse(t):null)}_remove(n){return this.storage.removeItem(n),Promise.resolve()}get storage(){return this.storageRetriever()}}const gge=(()=>{class e extends TH{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sH(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((c,p,_)=>{this.notifyListeners(c,_)});const i=t.key;r?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);!function hme(){return function Ghe(){const e=Ls();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}()||a===t.newValue||t.newValue===t.oldValue?o():setTimeout(o,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,o=this;return _e(function*(){yield i().call(o,t,r),o.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return _e(function*(){const o=yield r().call(i,t);return i.localCache[t]=JSON.stringify(o),o})()}_remove(t){var r=()=>super._remove,i=this;return _e(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return e.type="LOCAL",e})(),SH=(()=>{class e extends TH{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return e.type="SESSION",e})();let yge=(()=>{class e{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;const i=new e(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return _e(function*(){const i=t,{eventId:o,eventType:a,data:c}=i.data,p=r.handlersMap[a];if(!p?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:a});const _=Array.from(p).map(function(){var D=_e(function*(A){return A(i.origin,c)});return function(A){return D.apply(this,arguments)}}()),x=yield function _ge(e){return Promise.all(e.map(function(){var n=_e(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return n.apply(this,arguments)}}()))}(_);i.ports[0].postMessage({status:"done",eventId:o,eventType:a,response:x})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function U1(e="",n=10){let t="";for(let r=0;r<n;r++)t+=Math.floor(10*Math.random());return e+t}class vge{constructor(n){this.target=n,this.handlers=new Set}removeMessageHandler(n){n.messageChannel&&(n.messageChannel.port1.removeEventListener("message",n.onMessage),n.messageChannel.port1.close()),this.handlers.delete(n)}_send(n,t){var r=this;return _e(function*(i,o,a=50){const c=typeof MessageChannel<"u"?new MessageChannel:null;if(!c)throw new Error("connection_unavailable");let p,_;return new Promise((x,D)=>{const A=U1("",20);c.port1.start();const O=setTimeout(()=>{D(new Error("unsupported_event"))},a);_={messageChannel:c,onMessage(B){const Q=B;if(Q.data.eventId===A)switch(Q.data.status){case"ack":clearTimeout(O),p=setTimeout(()=>{D(new Error("timeout"))},3e3);break;case"done":clearTimeout(p),x(Q.data.response);break;default:clearTimeout(O),clearTimeout(p),D(new Error("invalid_response"))}}},r.handlers.add(_),c.port1.addEventListener("message",_.onMessage),r.target.postMessage({eventType:i,eventId:A,data:o},[c.port2])}).finally(()=>{_&&r.removeMessageHandler(_)})}).apply(this,arguments)}}function zo(){return window}function wP(){return typeof zo().WorkerGlobalScope<"u"&&"function"==typeof zo().importScripts}function xP(){return(xP=_e(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const IH="firebaseLocalStorageDb",j1="firebaseLocalStorage",kH="fbase_key";class I0{constructor(n){this.request=n}toPromise(){return new Promise((n,t)=>{this.request.addEventListener("success",()=>{n(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function H1(e,n){return e.transaction([j1],n?"readwrite":"readonly").objectStore(j1)}function EP(){const e=indexedDB.open(IH,1);return new Promise((n,t)=>{e.addEventListener("error",()=>{t(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(j1,{keyPath:kH})}catch(i){t(i)}}),e.addEventListener("success",_e(function*(){const r=e.result;r.objectStoreNames.contains(j1)?n(r):(r.close(),yield function Dge(){const e=indexedDB.deleteDatabase(IH);return new I0(e).toPromise()}(),n(yield EP()))}))})}function AH(e,n,t){return CP.apply(this,arguments)}function CP(){return(CP=_e(function*(e,n,t){const r=H1(e,!0).put({[kH]:n,value:t});return new I0(r).toPromise()})).apply(this,arguments)}function DP(){return(DP=_e(function*(e,n){const t=H1(e,!1).get(n),r=yield new I0(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function RH(e,n){const t=H1(e,!0).delete(n);return new I0(t).toPromise()}const kge=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return _e(function*(){return t.db||(t.db=yield EP()),t.db})()}_withRetries(t){var r=this;return _e(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield t(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return _e(function*(){return wP()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return _e(function*(){t.receiver=yge._getInstance(function Ege(){return wP()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=_e(function*(i,o){return{keyProcessed:(yield t._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=_e(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return _e(function*(){var r,i;if(t.activeServiceWorker=yield function wge(){return xP.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new vge(t.activeServiceWorker);const o=yield t.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return _e(function*(){if(r.sender&&r.activeServiceWorker&&function xge(){var e;return(null===(e=navigator?.serviceWorker)||void 0===e?void 0:e.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return _e(function*(){try{if(!indexedDB)return!1;const t=yield EP();return yield AH(t,z1,"1"),yield RH(t,z1),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return _e(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return _e(function*(){return i._withPendingWrite(_e(function*(){return yield i._withRetries(o=>AH(o,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return _e(function*(){const i=yield r._withRetries(o=>function Tge(e,n){return DP.apply(this,arguments)}(o,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return _e(function*(){return r._withPendingWrite(_e(function*(){return yield r._withRetries(i=>RH(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return _e(function*(){const r=yield t._withRetries(a=>{const c=H1(a,!1).getAll();return new I0(c).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],o=new Set;if(0!==r.length)for(const{fbase_key:a,value:c}of r)o.add(a),JSON.stringify(t.localCache[a])!==JSON.stringify(c)&&(t.notifyListeners(a,c),i.push(a));for(const a of Object.keys(t.localCache))t.localCache[a]&&!o.has(a)&&(t.notifyListeners(a,null),i.push(a));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(_e(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function ug(e,n){return n?Lh(n):(ut(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}cH("rcb"),new y0(3e4,6e4);class OP extends C0{constructor(n){super("custom","custom"),this.params=n}_getIdTokenResponse(n){return Fh(n,this._buildIdpRequest())}_linkToIdToken(n,t){return Fh(n,this._buildIdpRequest(t))}_getReauthenticationResolver(n){return Fh(n,this._buildIdpRequest())}_buildIdpRequest(n){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return n&&(t.idToken=n),t}}function $ge(e){return EH(e.auth,new OP(e),e.bypassAuthState)}function qge(e){const{auth:n,user:t}=e;return ut(t,n,"internal-error"),xH(t,new OP(e),e.bypassAuthState)}function Gge(e){return NP.apply(this,arguments)}function NP(){return(NP=_e(function*(e){const{auth:n,user:t}=e;return ut(t,n,"internal-error"),zM(t,new OP(e),e.bypassAuthState)})).apply(this,arguments)}class PH{constructor(n,t,r,i,o=!1){this.auth=n,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var n=this;return new Promise(function(){var t=_e(function*(r,i){n.pendingPromise={resolve:r,reject:i};try{n.eventManager=yield n.resolver._initialize(n.auth),yield n.onExecution(),n.eventManager.registerConsumer(n)}catch(o){n.reject(o)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(n){var t=this;return _e(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:a,error:c,type:p}=n;if(c)return void t.reject(c);const _={auth:t.auth,requestUri:r,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(p)(_))}catch(x){t.reject(x)}})()}onError(n){this.reject(n)}getIdpTask(n){switch(n){case"signInViaPopup":case"signInViaRedirect":return $ge;case"linkViaPopup":case"linkViaRedirect":return Gge;case"reauthViaPopup":case"reauthViaRedirect":return qge;default:Ya(this.auth,"internal-error")}}resolve(n){Mh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(n),this.unregisterAndCleanUp()}reject(n){Mh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(n),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Wge=new y0(2e3,1e4);function LP(){return(LP=_e(function*(e,n,t){if(Rh(e.app))return Promise.reject(pa(e,"operation-not-supported-in-this-environment"));const r=Eo(e);!function _y(e,n,t){if(!(n instanceof t))throw t.name!==n.constructor.name&&Ya(e,"argument-error"),GR(e,"argument-error",`Type of ${n.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,n,Bh);const i=ug(r,t);return new VP(r,"signInViaPopup",n,i).executeNotNull()})).apply(this,arguments)}let VP=(()=>{class e extends PH{constructor(t,r,i,o,a){super(t,r,o,a),this.provider=i,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var t=this;return _e(function*(){const r=yield t.execute();return ut(r,t.auth,"internal-error"),r})()}onExecution(){var t=this;return _e(function*(){Mh(1===t.filter.length,"Popup operations only handle one event");const r=U1();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],r),t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch(i=>{t.reject(i)}),t.resolver._isIframeWebStorageSupported(t.auth,i=>{i||t.reject(pa(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(pa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(pa(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(t,Wge.get())};t()}}return e.currentPopupAction=null,e})();const k0=new Map;class Yge extends PH{constructor(n,t,r=!1){super(n,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var n=()=>super.execute,t=this;return _e(function*(){let r=k0.get(t.auth._key());if(!r){try{const o=(yield function Xge(e,n){return zP.apply(this,arguments)}(t.resolver,t.auth))?yield n().call(t):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}k0.set(t.auth._key(),r)}return t.bypassAuthState||k0.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(n){var t=()=>super.onAuthEvent,r=this;return _e(function*(){if("signInViaRedirect"===n.type)return t().call(r,n);if("unknown"!==n.type){if(n.eventId){const i=yield r.auth._redirectUserForId(n.eventId);if(i)return r.user=i,t().call(r,n);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return _e(function*(){})()}cleanUp(){}}function zP(){return(zP=_e(function*(e,n){const t=function NH(e){return M1("pendingRedirect",e.config.apiKey,e.name)}(n),r=function OH(e){return Lh(e._redirectPersistence)}(e);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function Qge(e,n){k0.set(e._key(),n)}function LH(e,n){return WP.apply(this,arguments)}function WP(){return(WP=_e(function*(e,n,t=!1){if(Rh(e.app))return Promise.reject(ps(e));const r=Eo(e),i=ug(r,n),a=yield new Yge(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,n)),a})).apply(this,arguments)}class r_e{constructor(n){this.auth=n,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(n){this.consumers.add(n),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,n)&&(this.sendToConsumer(this.queuedRedirectEvent,n),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(n){this.consumers.delete(n)}onEvent(n){if(this.hasEventBeenHandled(n))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(n,r)&&(t=!0,this.sendToConsumer(n,r),this.saveEventToCache(n))}),this.hasHandledPotentialRedirect||!function i_e(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VH(e);default:return!1}}(n)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=n,t=!0)),t}sendToConsumer(n,t){var r;if(n.error&&!VH(n)){const i=(null===(r=n.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(pa(this.auth,i))}else t.onAuthEvent(n)}isEventForConsumer(n,t){const r=null===t.eventId||!!n.eventId&&n.eventId===t.eventId;return t.filter.includes(n.type)&&r}hasEventBeenHandled(n){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(BH(n))}saveEventToCache(n){this.cachedEventUids.add(BH(n)),this.lastProcessedEventTime=Date.now()}}function BH(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(n=>n).join("-")}function VH({type:e,error:n}){return"unknown"===e&&"auth/no-auth-event"===n?.code}function KP(){return(KP=_e(function*(e,n={}){return yi(e,"GET","/v1/projects",n)})).apply(this,arguments)}const s_e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a_e=/^https?/;function YP(){return YP=_e(function*(e){if(e.config.emulator)return;const{authorizedDomains:n}=yield function o_e(e){return KP.apply(this,arguments)}(e);for(const t of n)try{if(c_e(t))return}catch{}Ya(e,"unauthorized-domain")}),YP.apply(this,arguments)}function c_e(e){const n=_0(),{protocol:t,hostname:r}=new URL(n);if(e.startsWith("chrome-extension://")){const a=new URL(e);return""===a.hostname&&""===r?"chrome-extension:"===t&&e.replace("chrome-extension://","")===n.replace("chrome-extension://",""):"chrome-extension:"===t&&a.hostname===r}if(!a_e.test(t))return!1;if(s_e.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const u_e=new y0(3e4,6e4);function zH(){const e=zo().___jsl;if(e?.H)for(const n of Object.keys(e.H))if(e.H[n].r=e.H[n].r||[],e.H[n].L=e.H[n].L||[],e.H[n].r=[...e.H[n].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function d_e(e){return new Promise((n,t)=>{var r,i,o;function a(){zH(),gapi.load("gapi.iframes",{callback:()=>{n(gapi.iframes.getContext())},ontimeout:()=>{zH(),t(pa(e,"network-request-failed"))},timeout:u_e.get()})}if(null!==(i=null===(r=zo().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)n(gapi.iframes.getContext());else{if(null===(o=zo().gapi)||void 0===o||!o.load){const c=cH("iframefcb");return zo()[c]=()=>{gapi.load?a():t(pa(e,"network-request-failed"))},function pM(e){return x0.loadJS(e)}(`${function wme(){return x0.gapiScript}()}?onload=${c}`).catch(p=>t(p))}a()}}).catch(n=>{throw q1=null,n})}let q1=null;const f_e=new y0(5e3,15e3),g_e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},__e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function y_e(e){const n=e.config;ut(n.authDomain,e,"auth-domain-config-required");const t=n.emulator?KR(n,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:n.apiKey,appName:e.name,v:lg},i=__e.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${gy(r).slice(1)}`}function XP(){return XP=_e(function*(e){const n=yield function h_e(e){return q1=q1||d_e(e),q1}(e),t=zo().gapi;return ut(t,e,"internal-error"),n.open({where:document.body,url:y_e(e),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g_e,dontclear:!0},r=>new Promise(function(){var i=_e(function*(o,a){yield r.restyle({setHideOnLeave:!1});const c=pa(e,"network-request-failed"),p=zo().setTimeout(()=>{a(c)},f_e.get());function _(){zo().clearTimeout(p),o(r)}r.ping(_).then(_,()=>{a(c)})});return function(o,a){return i.apply(this,arguments)}}()))}),XP.apply(this,arguments)}const b_e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class UH{constructor(n){this.window=n,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const k_e=encodeURIComponent("fac");function jH(e,n,t,r,i,o){return QP.apply(this,arguments)}function QP(){return(QP=_e(function*(e,n,t,r,i,o){ut(e.config.authDomain,e,"auth-domain-config-required"),ut(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:t,redirectUrl:r,v:lg,eventId:i};if(n instanceof Bh){n.setDefaultLanguage(e.languageCode),a.providerId=n.providerId||"",DR(n.getCustomParameters())||(a.customParameters=JSON.stringify(n.getCustomParameters()));for(const[x,D]of Object.entries(o||{}))a[x]=D}if(n instanceof gH){const x=n.getScopes().filter(D=>""!==D);x.length>0&&(a.scopes=x.join(","))}e.tenantId&&(a.tid=e.tenantId);const c=a;for(const x of Object.keys(c))void 0===c[x]&&delete c[x];const p=yield e._getAppCheckToken(),_=p?`#${k_e}=${encodeURIComponent(p)}`:"";return`${function A_e({config:e}){return e.emulator?KR(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${gy(c).slice(1)}${_}`})).apply(this,arguments)}const JP="webStorageSupport",M_e=class R_e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SH,this._completeRedirectFn=LH,this._overrideRedirectResult=Qge}_openPopup(n,t,r,i){var o=this;return _e(function*(){var a;Mh(null===(a=o.eventManagers[n._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()");const c=yield jH(n,t,r,_0(),i);return function D_e(e,n,t,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const p=Object.assign(Object.assign({},b_e),{width:r.toString(),height:i.toString(),top:o,left:a}),_=Ls().toLowerCase();t&&(c=tH(_)?"_blank":t),J6(_)&&(n=n||"http://localhost",p.scrollbars="yes");const x=Object.entries(p).reduce((A,[O,B])=>`${A}${O}=${B},`,"");if(function dme(e=Ls()){var n;return hM(e)&&!(null===(n=window.navigator)||void 0===n||!n.standalone)}(_)&&"_self"!==c)return function T_e(e,n){const t=document.createElement("a");t.href=e,t.target=n;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(n||"",c),new UH(null);const D=window.open(n||"",c,x);ut(D,e,"popup-blocked");try{D.focus()}catch{}return new UH(D)}(n,c,U1())})()}_openRedirect(n,t,r,i){var o=this;return _e(function*(){return yield o._originValidation(n),function bge(e){zo().location.href=e}(yield jH(n,t,r,_0(),i)),new Promise(()=>{})})()}_initialize(n){const t=n._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Mh(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(n);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(n){var t=this;return _e(function*(){const r=yield function v_e(e){return XP.apply(this,arguments)}(n),i=new r_e(n);return r.register("authEvent",o=>(ut(o?.authEvent,n,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[n._key()]={manager:i},t.iframes[n._key()]=r,i})()}_isIframeWebStorageSupported(n,t){this.iframes[n._key()].send(JP,{type:JP},i=>{var o;const a=null===(o=i?.[0])||void 0===o?void 0:o[JP];void 0!==a&&t(!!a),Ya(n,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(n){const t=n._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function l_e(e){return YP.apply(this,arguments)}(n)),this.originValidationPromises[t]}get _shouldInitProactively(){return sH()||eH()||hM()}};var GH="@firebase/auth";class P_e{constructor(n){this.auth=n,this.internalListeners=new Map}getUid(){var n;return this.assertAuthConfigured(),(null===(n=this.auth.currentUser)||void 0===n?void 0:n.uid)||null}getToken(n){var t=this;return _e(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(n)}:null})()}addAuthTokenListener(n){if(this.assertAuthConfigured(),this.internalListeners.has(n))return;const t=this.auth.onIdTokenChanged(r=>{n(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(n,t),this.updateProactiveRefresh()}removeAuthTokenListener(n){this.assertAuthConfigured();const t=this.internalListeners.get(n);t&&(this.internalListeners.delete(n),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const L_e=y6("authIdTokenMaxAge")||300;let ZH=null;const F_e=e=>function(){var n=_e(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>L_e)return;const o=r?.token;ZH!==o&&(ZH=o,yield fetch(e,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(t){return n.apply(this,arguments)}}();(function yme(e){x0=e})({loadJS:e=>new Promise((n,t)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=n,r.onerror=i=>{const o=pa("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",function V_e(){var e,n;return null!==(n=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==n?n:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function N_e(e){ag(new lp("auth",(n,{options:t})=>{const r=n.getProvider("app").getImmediate(),i=n.getProvider("heartbeat"),o=n.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;ut(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:a,authDomain:c,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aH(e)},_=new _me(r,i,o,p);return function Tme(e,n){const t=n?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Lh);n?.errorMap&&e._updateErrorMap(n.errorMap),e._initializeWithPersistence(r,n?.popupRedirectResolver)}(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,r)=>{n.getProvider("auth-internal").initialize()})),ag(new lp("auth-internal",n=>{const t=Eo(n.getProvider("auth").getImmediate());return new P_e(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),hu(GH,"1.7.9",function O_e(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(e)),hu(GH,"1.7.9","esm2017")}("Browser");const KH="@firebase/database";let tO="";class z_e{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,t){null==t?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),Yo(t))}get(n){const t=this.domStorage_.getItem(this.prefixedName_(n));return null==t?null:d0(t)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}class U_e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,t){null==t?delete this.cache_[n]:this.cache_[n]=t}get(n){return hd(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}const QH=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const n=window[e];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new z_e(n)}}catch{}return new U_e},dg=QH("localStorage"),nO=QH("sessionStorage"),xy=new IR("@firebase/database"),JH=function(){let e=1;return function(){return e++}}(),e8=function(e){const n=function(e){const n=[];let t=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const o=i-55296;r++,ot(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?n[t++]=i:i<2048?(n[t++]=i>>6|192,n[t++]=63&i|128):i<65536?(n[t++]=i>>12|224,n[t++]=i>>6&63|128,n[t++]=63&i|128):(n[t++]=i>>18|240,n[t++]=i>>12&63|128,n[t++]=i>>6&63|128,n[t++]=63&i|128)}return n}(e),t=new efe;t.update(n);const r=t.digest();return ER.encodeByteArray(r)},A0=function(...e){let n="";for(let t=0;t<e.length;t++){const r=e[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?n+=A0.apply(null,r):n+="object"==typeof r?Yo(r):r,n+=" "}return n};let hg=null,t8=!0;const ms=function(...e){if(!0===t8&&(t8=!1,null===hg&&!0===nO.get("logging_enabled")&&function(e,n){ot(!n||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(xy.logLevel=Gr.VERBOSE,hg=xy.log.bind(xy),n&&nO.set("logging_enabled",!0)):"function"==typeof e?hg=e:(hg=null,nO.remove("logging_enabled"))}(!0)),hg){const n=A0.apply(null,e);hg(n)}},R0=function(e){return function(...n){ms(e,...n)}},rO=function(...e){const n="FIREBASE INTERNAL ERROR: "+A0(...e);xy.error(n)},pd=function(...e){const n=`FIREBASE FATAL ERROR: ${A0(...e)}`;throw xy.error(n),new Error(n)},Zs=function(...e){const n="FIREBASE WARNING: "+A0(...e);xy.warn(n)},W1=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},dp="[MIN_NAME]",Vh="[MAX_NAME]",fg=function(e,n){if(e===n)return 0;if(e===dp||n===Vh)return-1;if(n===dp||e===Vh)return 1;{const t=o8(e),r=o8(n);return null!==t?null!==r?t-r===0?e.length-n.length:t-r:-1:null!==r?1:e<n?-1:1}},$_e=function(e,n){return e===n?0:e<n?-1:1},M0=function(e,n){if(n&&e in n)return n[e];throw new Error("Missing required key ("+e+") in object: "+Yo(n))},iO=function(e){if("object"!=typeof e||null===e)return Yo(e);const n=[];for(const r in e)n.push(r);n.sort();let t="{";for(let r=0;r<n.length;r++)0!==r&&(t+=","),t+=Yo(n[r]),t+=":",t+=iO(e[n[r]]);return t+="}",t},r8=function(e,n){const t=e.length;if(t<=n)return[e];const r=[];for(let i=0;i<t;i+=n)r.push(e.substring(i,i+n>t?t:i+n));return r};function gs(e,n){for(const t in e)e.hasOwnProperty(t)&&n(t,e[t])}const i8=function(e){ot(!W1(e),"Invalid JSON number");const r=1023;let i,o,a,c,p;0===e?(o=0,a=0,i=1/e==-1/0?1:0):(i=e<0,(e=Math.abs(e))>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=c+r,a=Math.round(e*Math.pow(2,52-c)-Math.pow(2,52))):(o=0,a=Math.round(e/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(a%2?1:0),a=Math.floor(a/2);for(p=11;p;p-=1)_.push(o%2?1:0),o=Math.floor(o/2);_.push(i?1:0),_.reverse();const x=_.join("");let D="";for(p=0;p<64;p+=8){let A=parseInt(x.substr(p,8),2).toString(16);1===A.length&&(A="0"+A),D+=A}return D.toLowerCase()},Z_e=new RegExp("^-?(0*)\\d{1,10}$"),o8=function(e){if(Z_e.test(e)){const n=Number(e);if(n>=-2147483648&&n<=2147483647)return n}return null},Ey=function(e){try{e()}catch(n){setTimeout(()=>{throw Zs("Exception was thrown by user callback.",n.stack||""),n},Math.floor(0))}},P0=function(e,n){const t=setTimeout(e,n);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Q_e{constructor(n,t){this.appName_=n,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(t,r):t(null)},0)})}addTokenChangeListener(n){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(n))}notifyForInvalidToken(){Zs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class J_e{constructor(n,t,r){this.appName_=n,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(t=>t&&"auth/token-not-initialized"===t.code?(ms("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(t,r):t(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(t=>t.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(t=>t.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';n+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zs(n)}}let O0=(()=>{class e{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return e.OWNER="owner",e})();const u8=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,f8="websocket",p8="long_polling";class sO{constructor(n,t,r,i,o=!1,a="",c=!1,p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=p,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=dg.get("host:"+n)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&dg.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function m8(e,n,t){let r;if(ot("string"==typeof n,"typeof type must == string"),ot("object"==typeof t,"typeof params must == object"),n===f8)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(n!==p8)throw new Error("Unknown connection type: "+n);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function eye(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(t.ns=e.namespace);const i=[];return gs(t,(o,a)=>{i.push(o+"="+a)}),r+i.join("&")}class tye{constructor(){this.counters_={}}incrementCounter(n,t=1){hd(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=t}get(){return Lhe(this.counters_)}}const aO={},lO={};function cO(e){const n=e.toString();return aO[n]||(aO[n]=new tye),aO[n]}class rye{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,t){this.closeAfterResponse=n,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,t){for(this.pendingResponses[n]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ey(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class hp{constructor(n,t,r,i,o,a,c){this.connId=n,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=a,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=R0(n),this.stats_=cO(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),m8(t,p8,p))}open(n,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new rye(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let n=!1;const t=function(){document.body?n||(n=!0,e()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new uO((...o)=>{const[a,c,p,_,x]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===a)this.id=c,this.password=p;else{if("close"!==a)throw new Error("Unrecognized command received: "+a);c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[a,c]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(a,c)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&u8.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){hp.forceAllow_=!0}static forceDisallow(){hp.forceDisallow_=!0}static isAvailable(){return!(!hp.forceAllow_&&(hp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const t=Yo(n);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=f6(t),i=r8(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(n,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=n,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const t=Yo(n).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class uO{constructor(n,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=JH(),window["pLPCommand"+this.uniqueCallbackIdentifier]=n,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=uO.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(c){ms("frame writing exception"),c.stack&&ms(c.stack),ms(c)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(n);try{n.contentWindow.document||ms("No IE domain setting required")}catch{const r=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,t){for(this.myID=n,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n.id=this.myID,n.pw=this.myPW,n.ser=this.currentSerial;let t=this.urlFn(n),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const a=this.pendingSegs.shift();r=r+"&seg"+i+"="+a.seg+"&ts"+i+"="+a.ts+"&d"+i+"="+a.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(n,t,r){this.pendingSegs.push({seg:n,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(n,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(n,()=>{clearTimeout(i),r()})}addTag(n,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=n,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ms("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let K1=null;typeof MozWebSocket<"u"?K1=MozWebSocket:typeof WebSocket<"u"&&(K1=WebSocket);let Cy=(()=>{class e{constructor(t,r,i,o,a,c,p){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=R0(this.connId),this.stats_=cO(r),this.connURL=e.connectionURL_(r,c,p,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,a){const c={v:"5"};return typeof location<"u"&&location.hostname&&u8.test(location.hostname)&&(c.r="f"),r&&(c.s=r),i&&(c.ls=i),o&&(c.ac=o),a&&(c.p=a),m8(t,f8,c)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,dg.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new K1(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==K1&&!e.forceDisallow_}static previouslyFailed(){return dg.isInMemoryStorage||!0===dg.get("previous_websocket_failure")}markConnectionHealthy(){dg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=d0(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(ot(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=Yo(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=r8(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e})(),x8=(()=>{class e{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[hp,Cy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Cy&&Cy.isAvailable();let i=r&&!Cy.previouslyFailed();if(t.webSocketOnly&&(r||Zs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Cy];else{const o=this.transports_=[];for(const a of e.ALL_TRANSPORTS)a&&a.isAvailable()&&o.push(a);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return e.globalTransportInitialized_=!1,e})();class k8{constructor(n,t,r,i,o,a,c,p,_,x){this.id=n,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=a,this.onReady_=c,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=x,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=R0("c:"+this.id+":"),this.transportManager_=new x8(t),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=n.healthyTimeout||0;i>0&&(this.healthyTimeout_=P0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return t=>{n===this.conn_?this.onConnectionLost_(t):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return t=>{2!==this.state_&&(n===this.rx_?this.onPrimaryMessageReceived_(t):n===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(n){this.sendData_({t:"d",d:n})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if("t"in n){const t=n.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const t=M0("t",n),r=M0("d",n);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const t=M0("t",n),r=M0("d",n);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const t=M0("t",n);if("d"in n){const r=n.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?rO("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rO("Unknown control packet command: "+t)}}onHandshake_(n){const t=n.ts,r=n.v,i=n.h;this.sessionId=n.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Zs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),P0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,t){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):P0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,n||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(dg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(n)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class A8{put(n,t,r,i){}merge(n,t,r,i){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,t,r){}onDisconnectMerge(n,t,r){}onDisconnectCancel(n,t){}reportStats(n){}}class R8{constructor(n){this.allowedEvents_=n,this.listeners_={},ot(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...t){if(Array.isArray(this.listeners_[n])){const r=[...this.listeners_[n]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(n,t,r){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:t,context:r});const i=this.getInitialEvent(n);i&&t.apply(r,i)}off(n,t,r){this.validateEventType_(n);const i=this.listeners_[n]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(n){ot(this.allowedEvents_.find(t=>t===n),"Unknown event: "+n)}}class Y1 extends R8{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!CR()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Y1}getInitialEvent(n){return ot("online"===n,"Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}class Ar{constructor(n,t){if(void 0===t){this.pieces_=n.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=t}toString(){let n="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(n+="/"+this.pieces_[t]);return n||"/"}}function br(){return new Ar("")}function Vn(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function fp(e){return e.pieces_.length-e.pieceNum_}function Qr(e){let n=e.pieceNum_;return n<e.pieces_.length&&n++,new Ar(e.pieces_,n)}function hO(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function N0(e,n=0){return e.pieces_.slice(e.pieceNum_+n)}function O8(e){if(e.pieceNum_>=e.pieces_.length)return null;const n=[];for(let t=e.pieceNum_;t<e.pieces_.length-1;t++)n.push(e.pieces_[t]);return new Ar(n,0)}function Ri(e,n){const t=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);if(n instanceof Ar)for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);else{const r=n.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ar(t,0)}function zn(e){return e.pieceNum_>=e.pieces_.length}function ma(e,n){const t=Vn(e),r=Vn(n);if(null===t)return n;if(t===r)return ma(Qr(e),Qr(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")}function Dye(e,n){const t=N0(e,0),r=N0(n,0);for(let i=0;i<t.length&&i<r.length;i++){const o=fg(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function fO(e,n){if(fp(e)!==fp(n))return!1;for(let t=e.pieceNum_,r=n.pieceNum_;t<=e.pieces_.length;t++,r++)if(e.pieces_[t]!==n.pieces_[r])return!1;return!0}function Tc(e,n){let t=e.pieceNum_,r=n.pieceNum_;if(fp(e)>fp(n))return!1;for(;t<e.pieces_.length;){if(e.pieces_[t]!==n.pieces_[r])return!1;++t,++r}return!0}class Tye{constructor(n,t){this.errorPrefix_=t,this.parts_=N0(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=D1(this.parts_[r]);N8(this)}}function N8(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+pg(e))}function pg(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class pO extends R8{constructor(){let n,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[n];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new pO}getInitialEvent(n){return ot("visible"===n,"Unknown event type: "+n),[this.visible_]}}const L0=1e3;let Q1,mg=(()=>{class e extends A8{constructor(t,r,i,o,a,c,p,_){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=e.nextPersistentConnectionId_++,this.log_=R0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=L0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pO.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Y1.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,a={r:o,a:t,b:r};this.log_(Yo(a)),ot(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new py,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:c=>{const p=c.d;"ok"===c.s?r.resolve(p):r.reject(p)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const a=t._queryIdentifier,c=t._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),ot(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ot(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(c).set(a,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const a={p:i};t.tag&&(a.q=r._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,p=>{const _=p.d,x=p.s;e.warnOnListenWarnings_(_,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",p),"ok"!==x&&this.removeListen_(i,o),t.onComplete&&t.onComplete(x,_))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&hd(t,"w")){const i=my(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',a=r._path.toString();Zs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(e){const n=x1(e).claims;return"object"==typeof n&&!0===n.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(e){const t=x1(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const a=o.s,c=o.d||"error";this.authToken_===t&&("ok"===a?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),ot(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const a={p:t};o&&(a.q=i,a.t=o),this.sendRequest("n",a)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const a={p:r,d:i};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,c=>{o&&setTimeout(()=>{o(c.s,c.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,a){this.initConnection_();const c={p:r,d:i};void 0!==a&&(c.h=a),this.outstandingPuts_.push({action:t,request:c,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,a=>{this.log_(r+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(a.s,a.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Yo(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):rO("Unrecognized action received from server: "+Yo(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){ot(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=L0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=L0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=L0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return _e(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),a=t.id+":"+e.nextConnectionId_++,c=t.lastSessionId;let p=!1,_=null;const x=function(){_?_.close():(p=!0,o())};t.realtime_={close:x,sendRequest:function(O){ot(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(O)}};const A=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[O,B]=yield Promise.all([t.authTokenProvider_.getToken(A),t.appCheckTokenProvider_.getToken(A)]);p?ms("getToken() completed but was canceled"):(ms("getToken() completed. Creating connection."),t.authToken_=O&&O.accessToken,t.appCheckToken_=B&&B.token,_=new k8(a,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,Q=>{Zs(Q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},c))}catch(O){t.log_("Failed to get token: "+O),p||(t.repoInfo_.nodeAdmin&&Zs(O),x())}}})()}interrupt(t){ms("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ms("Resuming connection for reason: "+t),delete this.interruptReasons_[t],DR(this.interruptReasons_)&&(this.reconnectDelay_=L0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(a=>iO(a)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new Ar(t).toString();let o;if(this.listens.has(i)){const a=this.listens.get(i);o=a.get(r),a.delete(r),0===a.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){ms("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ms("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+tO.replace(/\./g,"-")]=1,CR()?t["framework.cordova"]=1:b6()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Y1.getInstance().currentlyOnline();return DR(this.interruptReasons_)&&t}}return e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e})();class qn{constructor(n,t){this.name=n,this.node=t}static Wrap(n,t){return new qn(n,t)}}class X1{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,t){const r=new qn(dp,n),i=new qn(dp,t);return 0!==this.compare(r,i)}minPost(){return qn.MIN}}class B8 extends X1{static get __EMPTY_NODE(){return Q1}static set __EMPTY_NODE(n){Q1=n}compare(n,t){return fg(n.name,t.name)}isDefinedOn(n){throw fy("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,t){return!1}minPost(){return qn.MIN}maxPost(){return new qn(Vh,Q1)}makePost(n,t){return ot("string"==typeof n,"KeyIndex indexValue must always be a string."),new qn(n,Q1)}toString(){return".key"}}const md=new B8;class J1{constructor(n,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let a=1;for(;!n.isEmpty();)if(a=t?r(n.key,t):1,i&&(a*=-1),a<0)n=this.isReverse_?n.left:n.right;else{if(0===a){this.nodeStack_.push(n);break}this.nodeStack_.push(n),n=this.isReverse_?n.right:n.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,n=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}let gO,fu=(()=>{class e{constructor(t,r,i,o,a){this.key=t,this.value=r,this.color=i??e.RED,this.left=o??Xa.EMPTY_NODE,this.right=a??Xa.EMPTY_NODE}copy(t,r,i,o,a){return new e(t??this.key,r??this.value,i??this.color,o??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const a=i(t,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===a?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xa.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Xa.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})();class Xa{constructor(n,t=Xa.EMPTY_NODE){this.comparator_=n,this.root_=t}insert(n,t){return new Xa(this.comparator_,this.root_.insert(n,t,this.comparator_).copy(null,null,fu.BLACK,null,null))}remove(n){return new Xa(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,fu.BLACK,null,null))}get(n){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(n,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(n){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(n,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new J1(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,t){return new J1(this.root_,n,this.comparator_,!1,t)}getReverseIteratorFrom(n,t){return new J1(this.root_,n,this.comparator_,!0,t)}getReverseIterator(n){return new J1(this.root_,null,this.comparator_,!0,n)}}function Oye(e,n){return fg(e.name,n.name)}function mO(e,n){return fg(e,n)}Xa.EMPTY_NODE=new class Pye{copy(n,t,r,i,o){return this}insert(n,t,r){return new fu(n,t,null)}remove(n,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const V8=function(e){return"number"==typeof e?"number:"+i8(e):"string:"+e},z8=function(e){if(e.isLeafNode()){const n=e.val();ot("string"==typeof n||"number"==typeof n||"object"==typeof n&&hd(n,".sv"),"Priority must be a string or number.")}else ot(e===gO||e.isEmpty(),"priority of unexpected type.");ot(e===gO||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let U8,j8,H8,Dy=(()=>{class e{constructor(t,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,ot(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),z8(this.priorityNode_)}static set __childrenNodeConstructor(t){U8=t}static get __childrenNodeConstructor(){return U8}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return zn(t)?this:".priority"===Vn(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Vn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(ot(".priority"!==i||1===fp(t),".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Qr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+V8(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?i8(this.value_):this.value_,this.lazyHash_=e8(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(ot(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),a=e.VALUE_TYPE_ORDER.indexOf(i);return ot(o>=0,"Unknown leaf type: "+r),ot(a>=0,"Unknown leaf type: "+i),o===a?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e})();const si=new class Bye extends X1{compare(n,t){const r=n.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?fg(n.name,t.name):o}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,t){return!n.getPriority().equals(t.getPriority())}minPost(){return qn.MIN}maxPost(){return new qn(Vh,new Dy("[PRIORITY-POST]",H8))}makePost(n,t){const r=j8(n);return new qn(t,new Dy("[PRIORITY-POST]",r))}toString(){return".priority"}},Vye=Math.log(2);class zye{constructor(n){this.count=parseInt(Math.log(n+1)/Vye,10),this.current_=this.count-1;const i=(()=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=n+1&i}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const eD=function(e,n,t,r){e.sort(n);const i=function(p,_){const x=_-p;let D,A;if(0===x)return null;if(1===x)return D=e[p],A=t?t(D):D,new fu(A,D.node,fu.BLACK,null,null);{const O=parseInt(x/2,10)+p,B=i(p,O),Q=i(O+1,_);return D=e[O],A=t?t(D):D,new fu(A,D.node,fu.BLACK,B,Q)}},c=function(p){let _=null,x=null,D=e.length;const A=function(B,Q){const oe=D-B,be=D;D-=B;const xe=i(oe+1,be),$e=e[oe],De=t?t($e):$e;O(new fu(De,$e.node,Q,null,xe))},O=function(B){_?(_.left=B,_=B):(x=B,_=B)};for(let B=0;B<p.count;++B){const Q=p.nextBitIsOne(),oe=Math.pow(2,p.count-(B+1));Q?A(oe,fu.BLACK):(A(oe,fu.BLACK),A(oe,fu.RED))}return x}(new zye(e.length));return new Xa(r||n,c)};let _O;const Ty={};class zh{constructor(n,t){this.indexes_=n,this.indexSet_=t}static get Default(){return ot(Ty&&si,"ChildrenNode.ts has not been loaded"),_O=_O||new zh({".priority":Ty},{".priority":si}),_O}get(n){const t=my(this.indexes_,n);if(!t)throw new Error("No index defined for "+n);return t instanceof Xa?t:null}hasIndex(n){return hd(this.indexSet_,n.toString())}addIndex(n,t){ot(n!==md,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(qn.Wrap);let c,a=o.getNext();for(;a;)i=i||n.isDefinedOn(a.node),r.push(a),a=o.getNext();c=i?eD(r,n.getCompare()):Ty;const p=n.toString(),_=Object.assign({},this.indexSet_);_[p]=n;const x=Object.assign({},this.indexes_);return x[p]=c,new zh(x,_)}addToIndexes(n,t){const r=E1(this.indexes_,(i,o)=>{const a=my(this.indexSet_,o);if(ot(a,"Missing index implementation for "+o),i===Ty){if(a.isDefinedOn(n.node)){const c=[],p=t.getIterator(qn.Wrap);let _=p.getNext();for(;_;)_.name!==n.name&&c.push(_),_=p.getNext();return c.push(n),eD(c,a.getCompare())}return Ty}{const c=t.get(n.name);let p=i;return c&&(p=p.remove(new qn(n.name,c))),p.insert(n,n.node)}});return new zh(r,this.indexSet_)}removeFromIndexes(n,t){const r=E1(this.indexes_,i=>{if(i===Ty)return i;{const o=t.get(n.name);return o?i.remove(new qn(n.name,o)):i}});return new zh(r,this.indexSet_)}}let F0,Mn=(()=>{class e{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&z8(this.priorityNode_),this.children_.isEmpty()&&ot(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return F0||(F0=new e(new Xa(mO),null,zh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||F0}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?F0:r}}getChild(t){const r=Vn(t);return null===r?this:this.getImmediateChild(r).getChild(Qr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(ot(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new qn(t,r);let o,a;r.isEmpty()?(o=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),a=this.indexMap_.addToIndexes(i,this.children_));const c=o.isEmpty()?F0:this.priorityNode_;return new e(o,c,a)}}updateChild(t,r){const i=Vn(t);if(null===i)return r;{ot(".priority"!==Vn(t)||1===fp(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Qr(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,a=!0;if(this.forEachChild(si,(c,p)=>{r[c]=p.val(t),i++,a&&e.INTEGER_REGEXP_.test(c)?o=Math.max(o,Number(c)):a=!1}),!t&&a&&o<2*i){const c=[];for(const p in r)c[p]=r[p];return c}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+V8(this.getPriority().val())+":"),this.forEachChild(si,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":e8(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const a=o.getPredecessorKey(new qn(t,r));return a?a.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new qn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new qn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,qn.Wrap);let a=o.peek();for(;null!=a&&r.compare(a,t)<0;)o.getNext(),a=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,qn.Wrap);let a=o.peek();for(;null!=a&&r.compare(a,t)>0;)o.getNext(),a=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===B0?-1:0}withIndex(t){if(t===md||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===md||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(si),o=r.getIterator(si);let a=i.getNext(),c=o.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=i.getNext(),c=o.getNext()}return null===a&&null===c}return!1}return!1}}resolveIndex_(t){return t===md?null:this.indexMap_.get(t.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})();const B0=new class Uye extends Mn{constructor(){super(new Xa(mO),Mn.EMPTY_NODE,zh.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return Mn.EMPTY_NODE}isEmpty(){return!1}};function Ki(e,n=null){if(null===e)return Mn.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(n=e[".priority"]),ot(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Dy(e,Ki(n));if(e instanceof Array){let t=Mn.EMPTY_NODE;return gs(e,(r,i)=>{if(hd(e,r)&&"."!==r.substring(0,1)){const o=Ki(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Ki(n))}{const t=[];let r=!1;if(gs(e,(a,c)=>{if("."!==a.substring(0,1)){const p=Ki(c);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new qn(a,p)))}}),0===t.length)return Mn.EMPTY_NODE;const o=eD(t,Oye,a=>a.name,mO);if(r){const a=eD(t,si.getCompare());return new Mn(o,Ki(n),new zh({".priority":a},{".priority":si}))}return new Mn(o,Ki(n),zh.Default)}}Object.defineProperties(qn,{MIN:{value:new qn(dp,Mn.EMPTY_NODE)},MAX:{value:new qn(Vh,B0)}}),B8.__EMPTY_NODE=Mn.EMPTY_NODE,Dy.__childrenNodeConstructor=Mn,function Nye(e){gO=e}(B0),function Fye(e){H8=e}(B0),function Lye(e){j8=e}(Ki);class yO extends X1{constructor(n){super(),this.indexPath_=n,ot(!zn(n)&&".priority"!==Vn(n),"Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,t){const r=this.extractChild(n.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?fg(n.name,t.name):o}makePost(n,t){const r=Ki(n),i=Mn.EMPTY_NODE.updateChild(this.indexPath_,r);return new qn(t,i)}maxPost(){const n=Mn.EMPTY_NODE.updateChild(this.indexPath_,B0);return new qn(Vh,n)}toString(){return N0(this.indexPath_,0).join("/")}}const vO=new class Hye extends X1{compare(n,t){const r=n.node.compareTo(t.node);return 0===r?fg(n.name,t.name):r}isDefinedOn(n){return!0}indexedValueChanged(n,t){return!n.equals(t)}minPost(){return qn.MIN}maxPost(){return qn.MAX}makePost(n,t){const r=Ki(n);return new qn(t,r)}toString(){return".value"}};function $8(e){return{type:"value",snapshotNode:e}}function Sy(e,n){return{type:"child_added",snapshotNode:n,childName:e}}function V0(e,n){return{type:"child_removed",snapshotNode:n,childName:e}}function z0(e,n,t){return{type:"child_changed",snapshotNode:n,childName:e,oldSnap:t}}class bO{constructor(n){this.index_=n}updateChild(n,t,r,i,o,a){ot(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=n.getImmediateChild(t);return c.getChild(i).equals(r.getChild(i))&&c.isEmpty()===r.isEmpty()||(null!=a&&(r.isEmpty()?n.hasChild(t)?a.trackChildChange(V0(t,c)):ot(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?a.trackChildChange(Sy(t,r)):a.trackChildChange(z0(t,r,c))),n.isLeafNode()&&r.isEmpty())?n:n.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(n,t,r){return null!=r&&(n.isLeafNode()||n.forEachChild(si,(i,o)=>{t.hasChild(i)||r.trackChildChange(V0(i,o))}),t.isLeafNode()||t.forEachChild(si,(i,o)=>{if(n.hasChild(i)){const a=n.getImmediateChild(i);a.equals(o)||r.trackChildChange(z0(i,o,a))}else r.trackChildChange(Sy(i,o))})),t.withIndex(this.index_)}updatePriority(n,t){return n.isEmpty()?Mn.EMPTY_NODE:n.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class U0{constructor(n){this.indexedFilter_=new bO(n.getIndex()),this.index_=n.getIndex(),this.startPost_=U0.getStartPost_(n),this.endPost_=U0.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,r=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return t&&r}updateChild(n,t,r,i,o,a){return this.matches(new qn(t,r))||(r=Mn.EMPTY_NODE),this.indexedFilter_.updateChild(n,t,r,i,o,a)}updateFullNode(n,t,r){t.isLeafNode()&&(t=Mn.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Mn.EMPTY_NODE);const o=this;return t.forEachChild(si,(a,c)=>{o.matches(new qn(a,c))||(i=i.updateImmediateChild(a,Mn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,i,r)}updatePriority(n,t){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const t=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),t)}return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const t=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),t)}return n.getIndex().maxPost()}}class qye{constructor(n){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new U0(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,t,r,i,o,a){return this.rangedFilter_.matches(new qn(t,r))||(r=Mn.EMPTY_NODE),n.getImmediateChild(t).equals(r)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,t,r,i,o,a):this.fullLimitUpdateChild_(n,t,r,o,a)}updateFullNode(n,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Mn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=Mn.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;o.hasNext()&&a<this.limit_;){const c=o.getNext();if(this.withinDirectionalStart(c)){if(!this.withinDirectionalEnd(c))break;i=i.updateImmediateChild(c.name,c.node),a++}}}else{let o;i=t.withIndex(this.index_),i=i.updatePriority(Mn.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let a=0;for(;o.hasNext();){const c=o.getNext();a<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?a++:i=i.updateImmediateChild(c.name,Mn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,i,r)}updatePriority(n,t){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,t,r,i,o){let a;if(this.reverse_){const D=this.index_.getCompare();a=(A,O)=>D(O,A)}else a=this.index_.getCompare();const c=n;ot(c.numChildren()===this.limit_,"");const p=new qn(t,r),_=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),x=this.rangedFilter_.matches(p);if(c.hasChild(t)){const D=c.getImmediateChild(t);let A=i.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=A&&(A.name===t||c.hasChild(A.name));)A=i.getChildAfterChild(this.index_,A,this.reverse_);const O=null==A?1:a(A,p);if(x&&!r.isEmpty()&&O>=0)return o?.trackChildChange(z0(t,r,D)),c.updateImmediateChild(t,r);{o?.trackChildChange(V0(t,D));const Q=c.updateImmediateChild(t,Mn.EMPTY_NODE);return null!=A&&this.rangedFilter_.matches(A)?(o?.trackChildChange(Sy(A.name,A.node)),Q.updateImmediateChild(A.name,A.node)):Q}}return r.isEmpty()?n:x&&a(_,p)>=0?(null!=o&&(o.trackChildChange(V0(_.name,_.node)),o.trackChildChange(Sy(t,r))),c.updateImmediateChild(t,r).updateImmediateChild(_.name,Mn.EMPTY_NODE)):n}}class wO{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=si}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return ot(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ot(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:dp}hasEnd(){return this.endSet_}getIndexEndValue(){return ot(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ot(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return ot(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===si}copy(){const n=new wO;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function q8(e){const n={};if(e.isDefault())return n;let t;if(e.index_===si?t="$priority":e.index_===vO?t="$value":e.index_===md?t="$key":(ot(e.index_ instanceof yO,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Yo(t),e.startSet_){const r=e.startAfterSet_?"startAfter":"startAt";n[r]=Yo(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+Yo(e.indexStartName_))}if(e.endSet_){const r=e.endBeforeSet_?"endBefore":"endAt";n[r]=Yo(e.indexEndValue_),e.endNameSet_&&(n[r]+=","+Yo(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function G8(e){const n={};if(e.startSet_&&(n.sp=e.indexStartValue_,e.startNameSet_&&(n.sn=e.indexStartName_),n.sin=!e.startAfterSet_),e.endSet_&&(n.ep=e.indexEndValue_,e.endNameSet_&&(n.en=e.indexEndName_),n.ein=!e.endBeforeSet_),e.limitSet_){n.l=e.limit_;let t=e.viewFrom_;""===t&&(t=e.isViewFromLeft()?"l":"r"),n.vf=t}return e.index_!==si&&(n.i=e.index_.toString()),n}class nD extends A8{constructor(n,t,r,i){super(),this.repoInfo_=n,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=R0("p:rest:"),this.listens_={}}reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,t){return void 0!==t?"tag$"+t:(ot(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}listen(n,t,r,i){const o=n._path.toString();this.log_("Listen called for "+o+" "+n._queryIdentifier);const a=nD.getListenId_(n,r),c={};this.listens_[a]=c;const p=q8(n._queryParams);this.restRequest_(o+".json",p,(_,x)=>{let D=x;if(404===_&&(D=null,_=null),null===_&&this.onDataUpdate_(o,D,!1,r),my(this.listens_,a)===c){let A;A=_?401===_?"permission_denied":"rest_error:"+_:"ok",i(A,null)}})}unlisten(n,t){const r=nD.getListenId_(n,t);delete this.listens_[r]}get(n){const t=q8(n._queryParams),r=n._path.toString(),i=new py;return this.restRequest_(r+".json",t,(o,a)=>{let c=a;404===o&&(c=null,o=null),null===o?(this.onDataUpdate_(r,c,!1,null),i.resolve(c)):i.reject(new Error(c))}),i.promise}refreshAuthToken(n){}restRequest_(n,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+gy(t);this.log_("Sending REST request for "+a);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&4===c.readyState){this.log_("REST Response for "+a+" received. status:",c.status,"response:",c.responseText);let p=null;if(c.status>=200&&c.status<300){try{p=d0(c.responseText)}catch{Zs("Failed to parse JSON response for "+a+": "+c.responseText)}r(null,p)}else 401!==c.status&&404!==c.status&&Zs("Got unsuccessful REST response for "+a+" Status: "+c.status),r(c.status);r=null}},c.open("GET",a,!0),c.send()})}}class Xye{constructor(){this.rootNode_=Mn.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,t){this.rootNode_=this.rootNode_.updateChild(n,t)}}function rD(){return{value:null,children:new Map}}function Iy(e,n,t){if(zn(n))e.value=t,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(n,t);else{const r=Vn(n);e.children.has(r)||e.children.set(r,rD()),Iy(e.children.get(r),n=Qr(n),t)}}function DO(e,n,t){null!==e.value?t(n,e.value):function Qye(e,n){e.children.forEach((t,r)=>{n(r,t)})}(e,(r,i)=>{DO(i,new Ar(n.toString()+"/"+r),t)})}class Jye{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),t=Object.assign({},n);return this.last_&&gs(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=n,t}}class nve{constructor(n,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Jye(n);const r=1e4+2e4*Math.random();P0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const n=this.statsListener_.get(),t={};let r=!1;gs(n,(i,o)=>{o>0&&hd(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),P0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var gd=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(gd||{});function IO(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}class iD{constructor(n,t,r){this.path=n,this.affectedTree=t,this.revert=r,this.type=gd.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(n){if(zn(this.path)){if(null!=this.affectedTree.value)return ot(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ar(n));return new iD(br(),t,this.revert)}}return ot(Vn(this.path)===n,"operationForChild called for unrelated child."),new iD(Qr(this.path),this.affectedTree,this.revert)}}class j0{constructor(n,t){this.source=n,this.path=t,this.type=gd.LISTEN_COMPLETE}operationForChild(n){return zn(this.path)?new j0(this.source,br()):new j0(this.source,Qr(this.path))}}class gg{constructor(n,t,r){this.source=n,this.path=t,this.snap=r,this.type=gd.OVERWRITE}operationForChild(n){return zn(this.path)?new gg(this.source,br(),this.snap.getImmediateChild(n)):new gg(this.source,Qr(this.path),this.snap)}}class ky{constructor(n,t,r){this.source=n,this.path=t,this.children=r,this.type=gd.MERGE}operationForChild(n){if(zn(this.path)){const t=this.children.subtree(new Ar(n));return t.isEmpty()?null:t.value?new gg(this.source,br(),t.value):new ky(this.source,br(),t)}return ot(Vn(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new ky(this.source,Qr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class pp{constructor(n,t,r){this.node_=n,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(zn(n))return this.isFullyInitialized()&&!this.filtered_;const t=Vn(n);return this.isCompleteForChild(t)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}class rve{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function H0(e,n,t,r,i,o){const a=r.filter(c=>c.type===t);a.sort((c,p)=>function sve(e,n,t){if(null==n.childName||null==t.childName)throw fy("Should only compare child_ events.");const r=new qn(n.childName,n.snapshotNode),i=new qn(t.childName,t.snapshotNode);return e.index_.compare(r,i)}(e,c,p)),a.forEach(c=>{const p=function ove(e,n,t){return"value"===n.type||"child_removed"===n.type||(n.prevName=t.getPredecessorChildName(n.childName,n.snapshotNode,e.index_)),n}(e,c,o);i.forEach(_=>{_.respondsTo(c.type)&&n.push(_.createEvent(p,e.query_))})})}function oD(e,n){return{eventCache:e,serverCache:n}}function $0(e,n,t,r){return oD(new pp(n,t,r),e.serverCache)}function Z8(e,n,t,r){return oD(e.eventCache,new pp(n,t,r))}function sD(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function _g(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let kO;class ai{constructor(n,t=(()=>(kO||(kO=new Xa($_e)),kO))()){this.value=n,this.children=t}static fromObject(n){let t=new ai(null);return gs(n,(r,i)=>{t=t.set(new Ar(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,t){if(null!=this.value&&t(this.value))return{path:br(),value:this.value};if(zn(n))return null;{const r=Vn(n),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Qr(n),t);return null!=o?{path:Ri(new Ar(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(zn(n))return this;{const t=Vn(n),r=this.children.get(t);return null!==r?r.subtree(Qr(n)):new ai(null)}}set(n,t){if(zn(n))return new ai(t,this.children);{const r=Vn(n),o=(this.children.get(r)||new ai(null)).set(Qr(n),t),a=this.children.insert(r,o);return new ai(this.value,a)}}remove(n){if(zn(n))return this.children.isEmpty()?new ai(null):new ai(null,this.children);{const t=Vn(n),r=this.children.get(t);if(r){const i=r.remove(Qr(n));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new ai(null):new ai(this.value,o)}return this}}get(n){if(zn(n))return this.value;{const t=Vn(n),r=this.children.get(t);return r?r.get(Qr(n)):null}}setTree(n,t){if(zn(n))return t;{const r=Vn(n),o=(this.children.get(r)||new ai(null)).setTree(Qr(n),t);let a;return a=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new ai(this.value,a)}}fold(n){return this.fold_(br(),n)}fold_(n,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Ri(n,i),t)}),t(n,this.value,r)}findOnPath(n,t){return this.findOnPath_(n,br(),t)}findOnPath_(n,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(zn(n))return null;{const o=Vn(n),a=this.children.get(o);return a?a.findOnPath_(Qr(n),Ri(t,o),r):null}}foreachOnPath(n,t){return this.foreachOnPath_(n,br(),t)}foreachOnPath_(n,t,r){if(zn(n))return this;{this.value&&r(t,this.value);const i=Vn(n),o=this.children.get(i);return o?o.foreachOnPath_(Qr(n),Ri(t,i),r):new ai(null)}}foreach(n){this.foreach_(br(),n)}foreach_(n,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ri(n,r),t)}),this.value&&t(n,this.value)}foreachChild(n){this.children.inorderTraversal((t,r)=>{r.value&&n(t,r.value)})}}class pu{constructor(n){this.writeTree_=n}static empty(){return new pu(new ai(null))}}function q0(e,n,t){if(zn(n))return new pu(new ai(t));{const r=e.writeTree_.findRootMostValueAndPath(n);if(null!=r){const i=r.path;let o=r.value;const a=ma(i,n);return o=o.updateChild(a,t),new pu(e.writeTree_.set(i,o))}{const i=new ai(t),o=e.writeTree_.setTree(n,i);return new pu(o)}}}function AO(e,n,t){let r=e;return gs(t,(i,o)=>{r=q0(r,Ri(n,i),o)}),r}function K8(e,n){if(zn(n))return pu.empty();{const t=e.writeTree_.setTree(n,new ai(null));return new pu(t)}}function RO(e,n){return null!=yg(e,n)}function yg(e,n){const t=e.writeTree_.findRootMostValueAndPath(n);return null!=t?e.writeTree_.get(t.path).getChild(ma(t.path,n)):null}function Y8(e){const n=[],t=e.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(si,(r,i)=>{n.push(new qn(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&n.push(new qn(r,i.value))}),n}function mp(e,n){if(zn(n))return e;{const t=yg(e,n);return new pu(null!=t?new ai(t):e.writeTree_.subtree(n))}}function MO(e){return e.writeTree_.isEmpty()}function Ay(e,n){return X8(br(),e.writeTree_,n)}function X8(e,n,t){if(null!=n.value)return t.updateChild(e,n.value);{let r=null;return n.children.inorderTraversal((i,o)=>{".priority"===i?(ot(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=X8(Ri(e,i),o,t)}),!t.getChild(e).isEmpty()&&null!==r&&(t=t.updateChild(Ri(e,".priority"),r)),t}}function aD(e,n){return n$(n,e)}function hve(e,n){if(e.snap)return Tc(e.path,n);for(const t in e.children)if(e.children.hasOwnProperty(t)&&Tc(Ri(e.path,t),n))return!0;return!1}function pve(e){return e.visible}function Q8(e,n,t){let r=pu.empty();for(let i=0;i<e.length;++i){const o=e[i];if(n(o)){const a=o.path;let c;if(o.snap)Tc(t,a)?(c=ma(t,a),r=q0(r,c,o.snap)):Tc(a,t)&&(c=ma(a,t),r=q0(r,br(),o.snap.getChild(c)));else{if(!o.children)throw fy("WriteRecord should have .snap or .children");if(Tc(t,a))c=ma(t,a),r=AO(r,c,o.children);else if(Tc(a,t))if(c=ma(a,t),zn(c))r=AO(r,br(),o.children);else{const p=my(o.children,Vn(c));if(p){const _=p.getChild(Qr(c));r=q0(r,br(),_)}}}}}return r}function J8(e,n,t,r,i){if(r||i){const o=mp(e.visibleWrites,n);return!i&&MO(o)?t:i||null!=t||RO(o,br())?Ay(Q8(e.allWrites,function(_){return(_.visible||i)&&(!r||!~r.indexOf(_.writeId))&&(Tc(_.path,n)||Tc(n,_.path))},n),t||Mn.EMPTY_NODE):null}{const o=yg(e.visibleWrites,n);if(null!=o)return o;{const a=mp(e.visibleWrites,n);return MO(a)?t:null!=t||RO(a,br())?Ay(a,t||Mn.EMPTY_NODE):null}}}function lD(e,n,t,r){return J8(e.writeTree,e.treePath,n,t,r)}function PO(e,n){return function mve(e,n,t){let r=Mn.EMPTY_NODE;const i=yg(e.visibleWrites,n);if(i)return i.isLeafNode()||i.forEachChild(si,(o,a)=>{r=r.updateImmediateChild(o,a)}),r;if(t){const o=mp(e.visibleWrites,n);return t.forEachChild(si,(a,c)=>{const p=Ay(mp(o,new Ar(a)),c);r=r.updateImmediateChild(a,p)}),Y8(o).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}return Y8(mp(e.visibleWrites,n)).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}(e.writeTree,e.treePath,n)}function e$(e,n,t,r){return function gve(e,n,t,r,i){ot(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Ri(n,t);if(RO(e.visibleWrites,o))return null;{const a=mp(e.visibleWrites,o);return MO(a)?i.getChild(t):Ay(a,i.getChild(t))}}(e.writeTree,e.treePath,n,t,r)}function cD(e,n){return function yve(e,n){return yg(e.visibleWrites,n)}(e.writeTree,Ri(e.treePath,n))}function OO(e,n,t){return function _ve(e,n,t,r){const i=Ri(n,t),o=yg(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?Ay(mp(e.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(e.writeTree,e.treePath,n,t)}function t$(e,n){return n$(Ri(e.treePath,n),e.writeTree)}function n$(e,n){return{treePath:e,writeTree:n}}class xve{constructor(){this.changeMap=new Map}trackChildChange(n){const t=n.type,r=n.childName;ot("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),ot(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,z0(r,n.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,V0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,Sy(r,n.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw fy("Illegal combination of changes: "+n+" occurred after "+i);this.changeMap.set(r,z0(r,n.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,n)}getChanges(){return Array.from(this.changeMap.values())}}const r$=new class Eve{getCompleteChild(n){return null}getChildAfterChild(n,t,r){return null}};class NO{constructor(n,t,r=null){this.writes_=n,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(n){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(n))return t.getNode().getImmediateChild(n);{const r=null!=this.optCompleteServerCache_?new pp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return OO(this.writes_,n,r)}}getChildAfterChild(n,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:_g(this.viewCache_),o=function wve(e,n,t,r,i,o){return function vve(e,n,t,r,i,o,a){let c;const p=mp(e.visibleWrites,n),_=yg(p,br());if(null!=_)c=_;else{if(null==t)return[];c=Ay(p,t)}if(c=c.withIndex(a),c.isEmpty()||c.isLeafNode())return[];{const x=[],D=a.getCompare(),A=o?c.getReverseIteratorFrom(r,a):c.getIteratorFrom(r,a);let O=A.getNext();for(;O&&x.length<i;)0!==D(O,r)&&x.push(O),O=A.getNext();return x}}(e.writeTree,e.treePath,n,t,r,i,o)}(this.writes_,i,t,1,r,n);return 0===o.length?null:o[0]}}function i$(e,n,t,r,i,o){const a=n.eventCache;if(null!=cD(r,t))return n;{let c,p;if(zn(t))if(ot(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const _=_g(n),D=PO(r,_ instanceof Mn?_:Mn.EMPTY_NODE);c=e.filter.updateFullNode(n.eventCache.getNode(),D,o)}else{const _=lD(r,_g(n));c=e.filter.updateFullNode(n.eventCache.getNode(),_,o)}else{const _=Vn(t);if(".priority"===_){ot(1===fp(t),"Can't have a priority with additional path components");const x=a.getNode();p=n.serverCache.getNode();const D=e$(r,t,x,p);c=null!=D?e.filter.updatePriority(x,D):a.getNode()}else{const x=Qr(t);let D;if(a.isCompleteForChild(_)){p=n.serverCache.getNode();const A=e$(r,t,a.getNode(),p);D=null!=A?a.getNode().getImmediateChild(_).updateChild(x,A):a.getNode().getImmediateChild(_)}else D=OO(r,_,n.serverCache);c=null!=D?e.filter.updateChild(a.getNode(),_,D,x,i,o):a.getNode()}}return $0(n,c,a.isFullyInitialized()||zn(t),e.filter.filtersNodes())}}function uD(e,n,t,r,i,o,a,c){const p=n.serverCache;let _;const x=a?e.filter:e.filter.getIndexedFilter();if(zn(t))_=x.updateFullNode(p.getNode(),r,null);else if(x.filtersNodes()&&!p.isFiltered()){const O=p.getNode().updateChild(t,r);_=x.updateFullNode(p.getNode(),O,null)}else{const O=Vn(t);if(!p.isCompleteForPath(t)&&fp(t)>1)return n;const B=Qr(t),oe=p.getNode().getImmediateChild(O).updateChild(B,r);_=".priority"===O?x.updatePriority(p.getNode(),oe):x.updateChild(p.getNode(),O,oe,B,r$,null)}const D=Z8(n,_,p.isFullyInitialized()||zn(t),x.filtersNodes());return i$(e,D,t,i,new NO(i,D,o),c)}function LO(e,n,t,r,i,o,a){const c=n.eventCache;let p,_;const x=new NO(i,n,o);if(zn(t))_=e.filter.updateFullNode(n.eventCache.getNode(),r,a),p=$0(n,_,!0,e.filter.filtersNodes());else{const D=Vn(t);if(".priority"===D)_=e.filter.updatePriority(n.eventCache.getNode(),r),p=$0(n,_,c.isFullyInitialized(),c.isFiltered());else{const A=Qr(t),O=c.getNode().getImmediateChild(D);let B;if(zn(A))B=r;else{const Q=x.getCompleteChild(D);B=null!=Q?".priority"===hO(A)&&Q.getChild(O8(A)).isEmpty()?Q:Q.updateChild(A,r):Mn.EMPTY_NODE}p=O.equals(B)?n:$0(n,e.filter.updateChild(c.getNode(),D,B,A,x,a),c.isFullyInitialized(),e.filter.filtersNodes())}}return p}function o$(e,n){return e.eventCache.isCompleteForChild(n)}function s$(e,n,t){return t.foreach((r,i)=>{n=n.updateChild(r,i)}),n}function FO(e,n,t,r,i,o,a,c){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let _,p=n;_=zn(t)?r:new ai(null).setTree(t,r);const x=n.serverCache.getNode();return _.children.inorderTraversal((D,A)=>{if(x.hasChild(D)){const B=s$(0,n.serverCache.getNode().getImmediateChild(D),A);p=uD(e,p,new Ar(D),B,i,o,a,c)}}),_.children.inorderTraversal((D,A)=>{const O=!n.serverCache.isCompleteForChild(D)&&null===A.value;if(!x.hasChild(D)&&!O){const Q=s$(0,n.serverCache.getNode().getImmediateChild(D),A);p=uD(e,p,new Ar(D),Q,i,o,a,c)}}),p}class Mve{constructor(n,t){this.query_=n,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new bO(r.getIndex()),o=function Gye(e){return e.loadsAllData()?new bO(e.getIndex()):e.hasLimit()?new qye(e):new U0(e)}(r);this.processor_=function Cve(e){return{filter:e}}(o);const a=t.serverCache,c=t.eventCache,p=i.updateFullNode(Mn.EMPTY_NODE,a.getNode(),null),_=o.updateFullNode(Mn.EMPTY_NODE,c.getNode(),null),x=new pp(p,a.isFullyInitialized(),i.filtersNodes()),D=new pp(_,c.isFullyInitialized(),o.filtersNodes());this.viewCache_=oD(D,x),this.eventGenerator_=new rve(this.query_)}get query(){return this.query_}}function Nve(e,n){const t=_g(e.viewCache_);return t&&(e.query._queryParams.loadsAllData()||!zn(n)&&!t.getImmediateChild(Vn(n)).isEmpty())?t.getChild(n):null}function a$(e){return 0===e.eventRegistrations_.length}function l$(e,n,t){const r=[];if(t){ot(null==n,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(o=>{const a=o.createCancelEvent(t,i);a&&r.push(a)})}if(n){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){const a=e.eventRegistrations_[o];if(a.matches(n)){if(n.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}else i.push(a)}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function c$(e,n,t,r){n.type===gd.MERGE&&null!==n.source.queryId&&(ot(_g(e.viewCache_),"We should always have a full cache before handling merges"),ot(sD(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=function Tve(e,n,t,r,i){const o=new xve;let a,c;if(t.type===gd.OVERWRITE){const _=t;_.source.fromUser?a=LO(e,n,_.path,_.snap,r,i,o):(ot(_.source.fromServer,"Unknown source."),c=_.source.tagged||n.serverCache.isFiltered()&&!zn(_.path),a=uD(e,n,_.path,_.snap,r,i,c,o))}else if(t.type===gd.MERGE){const _=t;_.source.fromUser?a=function Ive(e,n,t,r,i,o,a){let c=n;return r.foreach((p,_)=>{const x=Ri(t,p);o$(n,Vn(x))&&(c=LO(e,c,x,_,i,o,a))}),r.foreach((p,_)=>{const x=Ri(t,p);o$(n,Vn(x))||(c=LO(e,c,x,_,i,o,a))}),c}(e,n,_.path,_.children,r,i,o):(ot(_.source.fromServer,"Unknown source."),c=_.source.tagged||n.serverCache.isFiltered(),a=FO(e,n,_.path,_.children,r,i,c,o))}else if(t.type===gd.ACK_USER_WRITE){const _=t;a=_.revert?function Rve(e,n,t,r,i,o){let a;if(null!=cD(r,t))return n;{const c=new NO(r,n,i),p=n.eventCache.getNode();let _;if(zn(t)||".priority"===Vn(t)){let x;if(n.serverCache.isFullyInitialized())x=lD(r,_g(n));else{const D=n.serverCache.getNode();ot(D instanceof Mn,"serverChildren would be complete if leaf node"),x=PO(r,D)}_=e.filter.updateFullNode(p,x,o)}else{const x=Vn(t);let D=OO(r,x,n.serverCache);null==D&&n.serverCache.isCompleteForChild(x)&&(D=p.getImmediateChild(x)),_=null!=D?e.filter.updateChild(p,x,D,Qr(t),c,o):n.eventCache.getNode().hasChild(x)?e.filter.updateChild(p,x,Mn.EMPTY_NODE,Qr(t),c,o):p,_.isEmpty()&&n.serverCache.isFullyInitialized()&&(a=lD(r,_g(n)),a.isLeafNode()&&(_=e.filter.updateFullNode(_,a,o)))}return a=n.serverCache.isFullyInitialized()||null!=cD(r,br()),$0(n,_,a,e.filter.filtersNodes())}}(e,n,_.path,r,i,o):function kve(e,n,t,r,i,o,a){if(null!=cD(i,t))return n;const c=n.serverCache.isFiltered(),p=n.serverCache;if(null!=r.value){if(zn(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return uD(e,n,t,p.getNode().getChild(t),i,o,c,a);if(zn(t)){let _=new ai(null);return p.getNode().forEachChild(md,(x,D)=>{_=_.set(new Ar(x),D)}),FO(e,n,t,_,i,o,c,a)}return n}{let _=new ai(null);return r.foreach((x,D)=>{const A=Ri(t,x);p.isCompleteForPath(A)&&(_=_.set(x,p.getNode().getChild(A)))}),FO(e,n,t,_,i,o,c,a)}}(e,n,_.path,_.affectedTree,r,i,o)}else{if(t.type!==gd.LISTEN_COMPLETE)throw fy("Unknown operation type: "+t.type);a=function Ave(e,n,t,r,i){const o=n.serverCache;return i$(e,Z8(n,o.getNode(),o.isFullyInitialized()||zn(t),o.isFiltered()),t,r,r$,i)}(e,n,t.path,r,o)}const p=o.getChanges();return function Sve(e,n,t){const r=n.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=sD(e);(t.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push($8(sD(n)))}}(n,a,p),{viewCache:a,changes:p}}(e.processor_,i,n,t,r);return function Dve(e,n){ot(n.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),ot(n.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}(e.processor_,o.viewCache),ot(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,u$(e,o.changes,o.viewCache.eventCache.getNode(),null)}function u$(e,n,t,r){return function ive(e,n,t,r){const i=[],o=[];return n.forEach(a=>{"child_changed"===a.type&&e.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&o.push(function $ye(e,n){return{type:"child_moved",snapshotNode:n,childName:e}}(a.childName,a.snapshotNode))}),H0(e,i,"child_removed",n,r,t),H0(e,i,"child_added",n,r,t),H0(e,i,"child_moved",o,r,t),H0(e,i,"child_changed",n,r,t),H0(e,i,"value",n,r,t),i}(e.eventGenerator_,n,t,r?[r]:e.eventRegistrations_)}let dD,fD;class d${constructor(){this.views=new Map}}function BO(e,n,t,r){const i=n.source.queryId;if(null!==i){const o=e.views.get(i);return ot(null!=o,"SyncTree gave us an op for an invalid query."),c$(o,n,t,r)}{let o=[];for(const a of e.views.values())o=o.concat(c$(a,n,t,r));return o}}function h$(e,n,t,r,i){const a=e.views.get(n._queryIdentifier);if(!a){let c=lD(t,i?r:null),p=!1;c?p=!0:r instanceof Mn?(c=PO(t,r),p=!1):(c=Mn.EMPTY_NODE,p=!1);const _=oD(new pp(c,p,!1),new pp(r,i,!1));return new Mve(n,_)}return a}function f$(e){const n=[];for(const t of e.views.values())t.query._queryParams.loadsAllData()||n.push(t);return n}function gp(e,n){let t=null;for(const r of e.views.values())t=t||Nve(r,n);return t}function p$(e,n){return n._queryParams.loadsAllData()?hD(e):e.views.get(n._queryIdentifier)}function m$(e,n){return null!=p$(e,n)}function _p(e){return null!=hD(e)}function hD(e){for(const n of e.views.values())if(n.query._queryParams.loadsAllData())return n;return null}let qve=1;class g${constructor(n){this.listenProvider_=n,this.syncPointTree_=new ai(null),this.pendingWriteTree_=function bve(){return{visibleWrites:pu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function VO(e,n,t,r,i){return function lve(e,n,t,r,i){ot(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:n,snap:t,writeId:r,visible:i}),i&&(e.visibleWrites=q0(e.visibleWrites,n,t)),e.lastWriteId=r}(e.pendingWriteTree_,n,t,r,i),i?Ry(e,new gg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,t)):[]}function yp(e,n,t=!1){const r=function uve(e,n){for(let t=0;t<e.allWrites.length;t++){const r=e.allWrites[t];if(r.writeId===n)return r}return null}(e.pendingWriteTree_,n);if(function dve(e,n){const t=e.allWrites.findIndex(c=>c.writeId===n);ot(t>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[t];e.allWrites.splice(t,1);let i=r.visible,o=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const c=e.allWrites[a];c.visible&&(a>=t&&hve(c,r.path)?i=!1:Tc(r.path,c.path)&&(o=!0)),a--}return!!i&&(o?(function fve(e){e.visibleWrites=Q8(e.allWrites,pve,br()),e.lastWriteId=e.allWrites.length>0?e.allWrites[e.allWrites.length-1].writeId:-1}(e),!0):(r.snap?e.visibleWrites=K8(e.visibleWrites,r.path):gs(r.children,p=>{e.visibleWrites=K8(e.visibleWrites,Ri(r.path,p))}),!0))}(e.pendingWriteTree_,n)){let o=new ai(null);return null!=r.snap?o=o.set(br(),!0):gs(r.children,a=>{o=o.set(new Ar(a),!0)}),Ry(e,new iD(r.path,o,t))}return[]}function G0(e,n,t){return Ry(e,new gg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,t))}function pD(e,n,t,r,i=!1){const o=n._path,a=e.syncPointTree_.get(o);let c=[];if(a&&("default"===n._queryIdentifier||m$(a,n))){const p=function jve(e,n,t,r){const i=n._queryIdentifier,o=[];let a=[];const c=_p(e);if("default"===i)for(const[p,_]of e.views.entries())a=a.concat(l$(_,t,r)),a$(_)&&(e.views.delete(p),_.query._queryParams.loadsAllData()||o.push(_.query));else{const p=e.views.get(i);p&&(a=a.concat(l$(p,t,r)),a$(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||o.push(p.query)))}return c&&!_p(e)&&o.push(new(function Vve(){return ot(dD,"Reference.ts has not been loaded"),dD}())(n._repo,n._path)),{removed:o,events:a}}(a,n,t,r);(function zve(e){return 0===e.views.size})(a)&&(e.syncPointTree_=e.syncPointTree_.remove(o));const _=p.removed;if(c=p.events,!i){const x=-1!==_.findIndex(A=>A._queryParams.loadsAllData()),D=e.syncPointTree_.findOnPath(o,(A,O)=>_p(O));if(x&&!D){const A=e.syncPointTree_.subtree(o);if(!A.isEmpty()){const O=function Qve(e){return e.fold((n,t,r)=>{if(t&&_p(t))return[hD(t)];{let i=[];return t&&(i=f$(t)),gs(r,(o,a)=>{i=i.concat(a)}),i}})}(A);for(let B=0;B<O.length;++B){const Q=O[B],oe=Q.query,be=b$(e,Q);e.listenProvider_.startListening(Z0(oe),W0(e,oe),be.hashFn,be.onComplete)}}}!D&&_.length>0&&!r&&(x?e.listenProvider_.stopListening(Z0(n),null):_.forEach(A=>{const O=e.queryToTagMap.get(gD(A));e.listenProvider_.stopListening(Z0(A),O)}))}!function Jve(e,n){for(let t=0;t<n.length;++t){const r=n[t];if(!r._queryParams.loadsAllData()){const i=gD(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,_)}return c}function _$(e,n,t,r){const i=UO(e,r);if(null!=i){const o=jO(i),a=o.path,c=o.queryId,p=ma(a,n);return HO(e,a,new gg(IO(c),p,t))}return[]}function zO(e,n,t,r=!1){const i=n._path;let o=null,a=!1;e.syncPointTree_.foreachOnPath(i,(A,O)=>{const B=ma(A,i);o=o||gp(O,B),a=a||_p(O)});let p,c=e.syncPointTree_.get(i);c?(a=a||_p(c),o=o||gp(c,br())):(c=new d$,e.syncPointTree_=e.syncPointTree_.set(i,c)),null!=o?p=!0:(p=!1,o=Mn.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((O,B)=>{const Q=gp(B,br());Q&&(o=o.updateImmediateChild(O,Q))}));const _=m$(c,n);if(!_&&!n._queryParams.loadsAllData()){const A=gD(n);ot(!e.queryToTagMap.has(A),"View does not exist, but we have a tag");const O=function ebe(){return qve++}();e.queryToTagMap.set(A,O),e.tagToQueryMap.set(O,A)}let D=function Uve(e,n,t,r,i,o){const a=h$(e,n,r,i,o);return e.views.has(n._queryIdentifier)||e.views.set(n._queryIdentifier,a),function Lve(e,n){e.eventRegistrations_.push(n)}(a,t),function Fve(e,n){const t=e.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(si,(o,a)=>{r.push(Sy(o,a))}),t.isFullyInitialized()&&r.push($8(t.getNode())),u$(e,r,t.getNode(),n)}(a,t)}(c,n,t,aD(e.pendingWriteTree_,i),o,p);if(!_&&!a&&!r){const A=p$(c,n);D=D.concat(function tbe(e,n,t){const r=n._path,i=W0(e,n),o=b$(e,t),a=e.listenProvider_.startListening(Z0(n),i,o.hashFn,o.onComplete),c=e.syncPointTree_.subtree(r);if(i)ot(!_p(c.value),"If we're adding a query, it shouldn't be shadowed");else{const p=c.fold((_,x,D)=>{if(!zn(_)&&x&&_p(x))return[hD(x).query];{let A=[];return x&&(A=A.concat(f$(x).map(O=>O.query))),gs(D,(O,B)=>{A=A.concat(B)}),A}});for(let _=0;_<p.length;++_){const x=p[_];e.listenProvider_.stopListening(Z0(x),W0(e,x))}}return a}(e,n,A))}return D}function mD(e,n,t){const i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(n,(a,c)=>{const _=gp(c,ma(a,n));if(_)return _});return J8(i,n,o,t,!0)}function Ry(e,n){return y$(n,e.syncPointTree_,null,aD(e.pendingWriteTree_,br()))}function y$(e,n,t,r){if(zn(e.path))return v$(e,n,t,r);{const i=n.get(br());null==t&&null!=i&&(t=gp(i,br()));let o=[];const a=Vn(e.path),c=e.operationForChild(a),p=n.children.get(a);if(p&&c){const _=t?t.getImmediateChild(a):null,x=t$(r,a);o=o.concat(y$(c,p,_,x))}return i&&(o=o.concat(BO(i,e,r,t))),o}}function v$(e,n,t,r){const i=n.get(br());null==t&&null!=i&&(t=gp(i,br()));let o=[];return n.children.inorderTraversal((a,c)=>{const p=t?t.getImmediateChild(a):null,_=t$(r,a),x=e.operationForChild(a);x&&(o=o.concat(v$(x,c,p,_)))}),i&&(o=o.concat(BO(i,e,r,t))),o}function b$(e,n){const t=n.query,r=W0(e,t);return{hashFn:()=>(function Pve(e){return e.viewCache_.serverCache.getNode()}(n)||Mn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Kve(e,n,t){const r=UO(e,t);if(r){const i=jO(r),o=i.path,a=i.queryId,c=ma(o,n);return HO(e,o,new j0(IO(a),c))}return[]}(e,t._path,r):function Zve(e,n){return Ry(e,new j0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n))}(e,t._path);{const o=function W_e(e,n){let t="Unknown Error";"too_big"===e?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?t="Client doesn't have permission to access the desired data.":"unavailable"===e&&(t="The service is unavailable");const r=new Error(e+" at "+n._path.toString()+": "+t);return r.code=e.toUpperCase(),r}(i,t);return pD(e,t,null,o)}}}}function W0(e,n){const t=gD(n);return e.queryToTagMap.get(t)}function gD(e){return e._path.toString()+"$"+e._queryIdentifier}function UO(e,n){return e.tagToQueryMap.get(n)}function jO(e){const n=e.indexOf("$");return ot(-1!==n&&n<e.length-1,"Bad queryKey."),{queryId:e.substr(n+1),path:new Ar(e.substr(0,n))}}function HO(e,n,t){const r=e.syncPointTree_.get(n);return ot(r,"Missing sync point for query tag that we're tracking"),BO(r,t,aD(e.pendingWriteTree_,n),null)}function Z0(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(function $ve(){return ot(fD,"Reference.ts has not been loaded"),fD}())(e._repo,e._path):e}class $O{constructor(n){this.node_=n}getImmediateChild(n){const t=this.node_.getImmediateChild(n);return new $O(t)}node(){return this.node_}}class qO{constructor(n,t){this.syncTree_=n,this.path_=t}getImmediateChild(n){const t=Ri(this.path_,n);return new qO(this.syncTree_,t)}node(){return mD(this.syncTree_,this.path_)}}const w$=function(e,n,t){return e&&"object"==typeof e?(ot(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?rbe(e[".sv"],n,t):"object"==typeof e[".sv"]?ibe(e[".sv"],n):void ot(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},rbe=function(e,n,t){if("timestamp"===e)return t.timestamp;ot(!1,"Unexpected server value: "+e)},ibe=function(e,n,t){e.hasOwnProperty("increment")||ot(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&ot(!1,"Unexpected increment value: "+r);const i=n.node();if(ot(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const a=i.getValue();return"number"!=typeof a?r:a+r},x$=function(e,n,t,r){return WO(n,new qO(t,e),r)},GO=function(e,n,t){return WO(e,new $O(n),t)};function WO(e,n,t){const r=e.getPriority().val(),i=w$(r,n.getImmediateChild(".priority"),t);let o;if(e.isLeafNode()){const a=e,c=w$(a.getValue(),n,t);return c!==a.getValue()||i!==a.getPriority().val()?new Dy(c,Ki(i)):e}{const a=e;return o=a,i!==a.getPriority().val()&&(o=o.updatePriority(new Dy(i))),a.forEachChild(si,(c,p)=>{const _=WO(p,n.getImmediateChild(c),t);_!==p&&(o=o.updateImmediateChild(c,_))}),o}}class ZO{constructor(n="",t=null,r={children:{},childCount:0}){this.name=n,this.parent=t,this.node=r}}function _D(e,n){let t=n instanceof Ar?n:new Ar(n),r=e,i=Vn(t);for(;null!==i;){const o=my(r.node.children,i)||{children:{},childCount:0};r=new ZO(i,r,o),t=Qr(t),i=Vn(t)}return r}function vg(e){return e.node.value}function KO(e,n){e.node.value=n,YO(e)}function E$(e){return e.node.childCount>0}function yD(e,n){gs(e.node.children,(t,r)=>{n(new ZO(t,e,r))})}function C$(e,n,t,r){t&&!r&&n(e),yD(e,i=>{C$(i,n,!0,r)}),t&&r&&n(e)}function K0(e){return new Ar(null===e.parent?e.name:K0(e.parent)+"/"+e.name)}function YO(e){null!==e.parent&&function abe(e,n,t){const r=function obe(e){return void 0===vg(e)&&!E$(e)}(t),i=hd(e.node.children,n);r&&i?(delete e.node.children[n],e.node.childCount--,YO(e)):!r&&!i&&(e.node.children[n]=t.node,e.node.childCount++,YO(e))}(e.parent,e.name,e)}const lbe=/[\[\].#$\/\u0000-\u001F\u007F]/,cbe=/[\[\].#$\u0000-\u001F\u007F]/,XO=10485760,vD=function(e){return"string"==typeof e&&0!==e.length&&!lbe.test(e)},D$=function(e){return"string"==typeof e&&0!==e.length&&!cbe.test(e)},_d=function(e,n,t,r){r&&void 0===n||X0(ig(e,"value"),n,t)},X0=function(e,n,t){const r=t instanceof Ar?new Tye(t,e):t;if(void 0===n)throw new Error(e+"contains undefined "+pg(r));if("function"==typeof n)throw new Error(e+"contains a function "+pg(r)+" with contents = "+n.toString());if(W1(n))throw new Error(e+"contains "+n.toString()+" "+pg(r));if("string"==typeof n&&n.length>XO/3&&D1(n)>XO)throw new Error(e+"contains a string greater than "+XO+" utf8 bytes "+pg(r)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){let i=!1,o=!1;if(gs(n,(a,c)=>{if(".value"===a)i=!0;else if(".priority"!==a&&".sv"!==a&&(o=!0,!vD(a)))throw new Error(e+" contains an invalid key ("+a+") "+pg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Sye(e,n){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(n),e.byteLength_+=D1(n),N8(e)})(r,a),X0(e,c,r),function Iye(e){const n=e.parts_.pop();e.byteLength_-=D1(n),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),i&&o)throw new Error(e+' contains ".value" child '+pg(r)+" in addition to actual children.")}},T$=function(e,n,t,r){if(r&&void 0===n)return;const i=ig(e,"values");if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(i+" must be an object containing the children to replace.");const o=[];gs(n,(a,c)=>{const p=new Ar(a);if(X0(i,c,Ri(t,p)),".priority"===hO(p)&&!function(e){return null===e||"string"==typeof e||"number"==typeof e&&!W1(e)||e&&"object"==typeof e&&hd(e,".sv")}(c))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(p)}),function(e,n){let t,r;for(t=0;t<n.length;t++){r=n[t];const o=N0(r);for(let a=0;a<o.length;a++)if((".priority"!==o[a]||a!==o.length-1)&&!vD(o[a]))throw new Error(e+"contains an invalid key ("+o[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}n.sort(Dye);let i=null;for(t=0;t<n.length;t++){if(r=n[t],null!==i&&Tc(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},JO=function(e,n,t,r){if(!(r&&void 0===t||D$(t)))throw new Error(ig(e,n)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},yd=function(e,n){if(".info"===Vn(n))throw new Error(e+" failed = Can't modify data under /.info/")};class fbe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function bD(e,n){let t=null;for(let r=0;r<n.length;r++){const i=n[r],o=i.getPath();null!==t&&!fO(o,t.path)&&(e.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&e.eventLists_.push(t)}function I$(e,n,t){bD(e,t),k$(e,r=>fO(r,n))}function Rl(e,n,t){bD(e,t),k$(e,r=>Tc(r,n)||Tc(n,r))}function k$(e,n){e.recursionDepth_++;let t=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];i&&(n(i.path)?(pbe(e.eventLists_[r]),e.eventLists_[r]=null):t=!1)}t&&(e.eventLists_=[]),e.recursionDepth_--}function pbe(e){for(let n=0;n<e.events.length;n++){const t=e.events[n];if(null!==t){e.events[n]=null;const r=t.getEventRunner();hg&&ms("event: "+t.toString()),Ey(r)}}}class gbe{constructor(n,t,r,i){this.repoInfo_=n,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fbe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rD(),this.transactionQueueTree_=new ZO,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function R$(e){const t=e.infoData_.getNode(new Ar(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function J0(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:R$(e)})}function M$(e,n,t,r,i){e.dataUpdateCount++;const o=new Ar(n);t=e.interceptServerDataCallback_?e.interceptServerDataCallback_(n,t):t;let a=[];if(i)if(r){const p=E1(t,_=>Ki(_));a=function Yve(e,n,t,r){const i=UO(e,r);if(i){const o=jO(i),a=o.path,c=o.queryId,p=ma(a,n),_=ai.fromObject(t);return HO(e,a,new ky(IO(c),p,_))}return[]}(e.serverSyncTree_,o,p,i)}else{const p=Ki(t);a=_$(e.serverSyncTree_,o,p,i)}else if(r){const p=E1(t,_=>Ki(_));a=function Wve(e,n,t){const r=ai.fromObject(t);return Ry(e,new ky({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,r))}(e.serverSyncTree_,o,p)}else{const p=Ki(t);a=G0(e.serverSyncTree_,o,p)}let c=o;a.length>0&&(c=Py(e,o)),Rl(e.eventQueue_,c,a)}function P$(e,n){eN(e,"connected",n),!1===n&&function wbe(e){My(e,"onDisconnectEvents");const n=J0(e),t=rD();DO(e.onDisconnect_,br(),(i,o)=>{const a=x$(i,o,e.serverSyncTree_,n);Iy(t,i,a)});let r=[];DO(t,br(),(i,o)=>{r=r.concat(G0(e.serverSyncTree_,i,o));const a=iN(e,i);Py(e,a)}),e.onDisconnect_=rD(),Rl(e.eventQueue_,br(),r)}(e)}function eN(e,n,t){const r=new Ar("/.info/"+n),i=Ki(t);e.infoData_.updateSnapshot(r,i);const o=G0(e.infoSyncTree_,r,i);Rl(e.eventQueue_,r,o)}function wD(e){return e.nextWriteId_++}function nN(e,n,t){let r;r=".info"===Vn(n._path)?pD(e.infoSyncTree_,n,t):pD(e.serverSyncTree_,n,t),I$(e.eventQueue_,n._path,r)}function My(e,...n){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":"),ms(t,...n)}function vp(e,n,t,r){n&&Ey(()=>{if("ok"===t)n(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const a=new Error(o);a.code=i,n(a)}})}function rN(e,n,t){return mD(e.serverSyncTree_,n,t)||Mn.EMPTY_NODE}function xD(e,n=e.transactionQueueTree_){if(n||ED(e,n),vg(n)){const t=F$(e,n);ot(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Ibe(e,n,t){const r=t.map(_=>_.currentWriteId),i=rN(e,n,r);let o=i;const a=i.hash();for(let _=0;_<t.length;_++){const x=t[_];ot(0===x.status,"tryToSendTransactionQueue_: items in queue should all be run."),x.status=1,x.retryCount++;const D=ma(n,x.path);o=o.updateChild(D,x.currentOutputSnapshotRaw)}const c=o.val(!0),p=n;e.server_.put(p.toString(),c,_=>{My(e,"transaction put response",{path:p.toString(),status:_});let x=[];if("ok"===_){const D=[];for(let A=0;A<t.length;A++)t[A].status=2,x=x.concat(yp(e.serverSyncTree_,t[A].currentWriteId)),t[A].onComplete&&D.push(()=>t[A].onComplete(null,!0,t[A].currentOutputSnapshotResolved)),t[A].unwatcher();ED(e,_D(e.transactionQueueTree_,n)),xD(e,e.transactionQueueTree_),Rl(e.eventQueue_,n,x);for(let A=0;A<D.length;A++)Ey(D[A])}else{if("datastale"===_)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{Zs("transaction at "+p.toString()+" failed: "+_);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=_}Py(e,n)}},a)}(e,K0(n),t)}else E$(n)&&yD(n,t=>{xD(e,t)})}function Py(e,n){const t=L$(e,n),r=K0(t);return function kbe(e,n,t){if(0===n.length)return;const r=[];let i=[];const a=n.filter(c=>0===c.status).map(c=>c.currentWriteId);for(let c=0;c<n.length;c++){const p=n[c],_=ma(t,p.path);let D,x=!1;if(ot(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)x=!0,D=p.abortReason,i=i.concat(yp(e.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)x=!0,D="maxretry",i=i.concat(yp(e.serverSyncTree_,p.currentWriteId,!0));else{const A=rN(e,p.path,a);p.currentInputSnapshot=A;const O=n[c].update(A.val());if(void 0!==O){X0("transaction failed: Data returned ",O,p.path);let B=Ki(O);"object"==typeof O&&null!=O&&hd(O,".priority")||(B=B.updatePriority(A.getPriority()));const oe=p.currentWriteId,be=J0(e),xe=GO(B,A,be);p.currentOutputSnapshotRaw=B,p.currentOutputSnapshotResolved=xe,p.currentWriteId=wD(e),a.splice(a.indexOf(oe),1),i=i.concat(VO(e.serverSyncTree_,p.path,xe,p.currentWriteId,p.applyLocally)),i=i.concat(yp(e.serverSyncTree_,oe,!0))}else x=!0,D="nodata",i=i.concat(yp(e.serverSyncTree_,p.currentWriteId,!0))}Rl(e.eventQueue_,t,i),i=[],x&&(n[c].status=2,function(A){setTimeout(A,Math.floor(0))}(n[c].unwatcher),n[c].onComplete&&r.push("nodata"===D?()=>n[c].onComplete(null,!1,n[c].currentInputSnapshot):()=>n[c].onComplete(new Error(D),!1,null)))}ED(e,e.transactionQueueTree_);for(let c=0;c<r.length;c++)Ey(r[c]);xD(e,e.transactionQueueTree_)}(e,F$(e,t),r),r}function L$(e,n){let t,r=e.transactionQueueTree_;for(t=Vn(n);null!==t&&void 0===vg(r);)r=_D(r,t),t=Vn(n=Qr(n));return r}function F$(e,n){const t=[];return B$(e,n,t),t.sort((r,i)=>r.order-i.order),t}function B$(e,n,t){const r=vg(n);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);yD(n,i=>{B$(e,i,t)})}function ED(e,n){const t=vg(n);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,KO(n,t.length>0?t:void 0)}yD(n,r=>{ED(e,r)})}function iN(e,n){const t=K0(L$(e,n)),r=_D(e.transactionQueueTree_,n);return function sbe(e,n,t){let r=t?e:e.parent;for(;null!==r;){if(n(r))return!0;r=r.parent}}(r,i=>{oN(e,i)}),oN(e,r),C$(r,i=>{oN(e,i)}),t}function oN(e,n){const t=vg(n);if(t){const r=[];let i=[],o=-1;for(let a=0;a<t.length;a++)3===t[a].status||(1===t[a].status?(ot(o===a-1,"All SENT items should be at beginning of queue."),o=a,t[a].status=3,t[a].abortReason="set"):(ot(0===t[a].status,"Unexpected transaction status in abort"),t[a].unwatcher(),i=i.concat(yp(e.serverSyncTree_,t[a].currentWriteId,!0)),t[a].onComplete&&r.push(t[a].onComplete.bind(null,new Error("set"),!1,null))));-1===o?KO(n,void 0):t.length=o+1,Rl(e.eventQueue_,K0(n),i);for(let a=0;a<r.length;a++)Ey(r[a])}}const sN=function(e,n){const t=Mbe(e),r=t.namespace;return"firebase.com"===t.domain&&pd(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&pd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Zs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new sO(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,n,"",r!==t.subdomain),path:new Ar(t.pathString)}},Mbe=function(e){let n="",t="",r="",i="",o="",a=!0,c="https",p=443;if("string"==typeof e){let _=e.indexOf("//");_>=0&&(c=e.substring(0,_-1),e=e.substring(_+2));let x=e.indexOf("/");-1===x&&(x=e.length);let D=e.indexOf("?");-1===D&&(D=e.length),n=e.substring(0,Math.min(x,D)),x<D&&(i=function Abe(e){let n="";const t=e.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}n+="/"+i}return n}(e.substring(x,D)));const A=function Rbe(e){const n={};"?"===e.charAt(0)&&(e=e.substring(1));for(const t of e.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?n[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Zs(`Invalid query segment '${t}' in query '${e}'`)}return n}(e.substring(Math.min(e.length,D)));_=n.indexOf(":"),_>=0?(a="https"===c||"wss"===c,p=parseInt(n.substring(_+1),10)):_=n.length;const O=n.slice(0,_);if("localhost"===O.toLowerCase())t="localhost";else if(O.split(".").length<=2)t=O;else{const B=n.indexOf(".");r=n.substring(0,B).toLowerCase(),t=n.substring(B+1),o=r}"ns"in A&&(o=A.ns)}return{host:n,port:p,domain:t,subdomain:r,secure:a,scheme:c,pathString:i,namespace:o}},V$="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Pbe=function(){let e=0;const n=[];return function(t){const r=t===e;let i;e=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=V$.charAt(t%64),t=Math.floor(t/64);ot(0===t,"Cannot push at time == 0");let a=o.join("");if(r){for(i=11;i>=0&&63===n[i];i--)n[i]=0;n[i]++}else for(i=0;i<12;i++)n[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)a+=V$.charAt(n[i]);return ot(20===a.length,"nextPushId: Length should be 20."),a}}();class z${constructor(n,t,r,i){this.eventType=n,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const n=this.snapshot.ref;return"value"===this.eventType?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Yo(this.snapshot.exportVal())}}class U${constructor(n,t,r){this.eventRegistration=n,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class aN{constructor(n,t){this.snapshotCallback=n,this.cancelCallback=t}onValue(n,t){this.snapshotCallback.call(null,n,t)}onCancel(n){return ot(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}class Ml{constructor(n,t,r,i){this._repo=n,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return zn(this._path)?null:hO(this._path)}get ref(){return new mu(this._repo,this._path)}get _queryIdentifier(){const n=G8(this._queryParams),t=iO(n);return"{}"===t?"default":t}get _queryObject(){return G8(this._queryParams)}isEqual(n){if(!((n=Vo(n))instanceof Ml))return!1;const t=this._repo===n._repo,r=fO(this._path,n._path);return t&&r&&this._queryIdentifier===n._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Cye(e){let n="";for(let t=e.pieceNum_;t<e.pieces_.length;t++)""!==e.pieces_[t]&&(n+="/"+encodeURIComponent(String(e.pieces_[t])));return n||"/"}(this._path)}}class mu extends Ml{constructor(n,t){super(n,t,new wO,!1)}get parent(){const n=O8(this._path);return null===n?null:new mu(this._repo,n)}get root(){let n=this;for(;null!==n.parent;)n=n.parent;return n}}class bg{constructor(n,t,r){this._node=n,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const t=new Ar(n),r=Oy(this.ref,n);return new bg(this._node.getChild(t),r,si)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>n(new bg(i,Oy(this.ref,r),si)))}hasChild(n){const t=new Ar(n);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Jr(e,n){return(e=Vo(e))._checkNotDeleted("ref"),void 0!==n?Oy(e._root,n):e._root}function Oy(e,n){return null===Vn((e=Vo(e))._path)?((t=n)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),JO("child","path",t,!1)):JO("child","path",n,!1),new mu(e._repo,Ri(e._path,n));var t}function j$(e,n){e=Vo(e),yd("push",e._path),_d("push",n,e._path,!0);const t=R$(e._repo),r=Pbe(t),i=Oy(e,r),o=Oy(e,r);let a;return a=null!=n?wp(o,n).then(()=>o):Promise.resolve(o),i.then=a.then.bind(a),i.catch=a.then.bind(a,void 0),i}function lN(e){return yd("remove",e._path),wp(e,null)}function wp(e,n){e=Vo(e),yd("set",e._path),_d("set",n,e._path,!1);const t=new py;return function tN(e,n,t,r,i){My(e,"set",{path:n.toString(),value:t,priority:r});const o=J0(e),a=Ki(t,r),c=mD(e.serverSyncTree_,n),p=GO(a,c,o),_=wD(e),x=VO(e.serverSyncTree_,n,p,_,!0);bD(e.eventQueue_,x),e.server_.put(n.toString(),a.val(!0),(A,O)=>{const B="ok"===A;B||Zs("set at "+n+" failed: "+A);const Q=yp(e.serverSyncTree_,_,!B);Rl(e.eventQueue_,n,Q),vp(0,i,A,O)});const D=iN(e,n);Py(e,D),Rl(e.eventQueue_,D,[])}(e._repo,e._path,n,null,t.wrapCallback(()=>{})),t.promise}function TD(e,n){T$("update",n,e._path,!1);const t=new py;return function bbe(e,n,t,r){My(e,"update",{path:n.toString(),value:t});let i=!0;const o=J0(e),a={};if(gs(t,(c,p)=>{i=!1,a[c]=x$(Ri(n,c),Ki(p),e.serverSyncTree_,o)}),i)ms("update() called with empty data.  Don't do anything."),vp(0,r,"ok",void 0);else{const c=wD(e),p=function Gve(e,n,t,r){!function cve(e,n,t,r){ot(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:n,children:t,writeId:r,visible:!0}),e.visibleWrites=AO(e.visibleWrites,n,t),e.lastWriteId=r}(e.pendingWriteTree_,n,t,r);const i=ai.fromObject(t);return Ry(e,new ky({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,i))}(e.serverSyncTree_,n,a,c);bD(e.eventQueue_,p),e.server_.merge(n.toString(),t,(_,x)=>{const D="ok"===_;D||Zs("update at "+n+" failed: "+_);const A=yp(e.serverSyncTree_,c,!D),O=A.length>0?Py(e,n):n;Rl(e.eventQueue_,O,A),vp(0,r,_,x)}),gs(t,_=>{const x=iN(e,Ri(n,_));Py(e,x)}),Rl(e.eventQueue_,n,[])}}(e._repo,e._path,n,t.wrapCallback(()=>{})),t.promise}function vd(e){e=Vo(e);const n=new aN(()=>{}),t=new ew(n);return function vbe(e,n,t){const r=function Xve(e,n){const t=n._path;let r=null;e.syncPointTree_.foreachOnPath(t,(_,x)=>{const D=ma(_,t);r=r||gp(x,D)});let i=e.syncPointTree_.get(t);i?r=r||gp(i,br()):(i=new d$,e.syncPointTree_=e.syncPointTree_.set(t,i));const o=null!=r,a=o?new pp(r,!0,!1):null;return function Ove(e){return sD(e.viewCache_)}(h$(i,n,aD(e.pendingWriteTree_,n._path),o?a.getNode():Mn.EMPTY_NODE,o))}(e.serverSyncTree_,n);return null!=r?Promise.resolve(r):e.server_.get(n).then(i=>{const o=Ki(i).withIndex(n._queryParams.getIndex());let a;if(zO(e.serverSyncTree_,n,t,!0),n._queryParams.loadsAllData())a=G0(e.serverSyncTree_,n._path,o);else{const c=W0(e.serverSyncTree_,n);a=_$(e.serverSyncTree_,n._path,o,c)}return Rl(e.eventQueue_,n._path,a),pD(e.serverSyncTree_,n,t,null,!0),o},i=>(My(e,"get for query "+Yo(n)+" failed: "+i),Promise.reject(new Error(i))))}(e._repo,e,t).then(r=>new bg(r,new mu(e._repo,e._path),e._queryParams.getIndex()))}class ew{constructor(n){this.callbackContext=n}respondsTo(n){return"value"===n}createEvent(n,t){const r=t._queryParams.getIndex();return new z$("value",this,new bg(n.snapshotNode,new mu(t._repo,t._path),r))}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,t){return this.callbackContext.hasCancelCallback?new U$(this,n,t):null}matches(n){return n instanceof ew&&(!n.callbackContext||!this.callbackContext||n.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class SD{constructor(n,t){this.eventType=n,this.callbackContext=t}respondsTo(n){let t="children_added"===n?"child_added":n;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(n,t){return this.callbackContext.hasCancelCallback?new U$(this,n,t):null}createEvent(n,t){ot(null!=n.childName,"Child events should have a childName.");const r=Oy(new mu(t._repo,t._path),n.childName),i=t._queryParams.getIndex();return new z$(n.type,this,new bg(n.snapshotNode,r,i),n.prevName)}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,n.prevName)}matches(n){return n instanceof SD&&this.eventType===n.eventType&&(!this.callbackContext||!n.callbackContext||this.callbackContext.matches(n.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function nw(e,n,t,r){return function tw(e,n,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const p=t,_=(x,D)=>{nN(e._repo,e,c),p(x,D)};_.userCallback=t.userCallback,_.context=t.context,t=_}const a=new aN(t,o||void 0),c="value"===n?new ew(a):new SD(n,a);return function Dbe(e,n,t){let r;r=".info"===Vn(n._path)?zO(e.infoSyncTree_,n,t):zO(e.serverSyncTree_,n,t),I$(e.eventQueue_,n._path,r)}(e._repo,e,c),()=>nN(e._repo,e,c)}(e,"value",n,t,r)}(function Bve(e){ot(!dD,"__referenceConstructor has already been defined"),dD=e})(mu),function Hve(e){ot(!fD,"__referenceConstructor has already been defined"),fD=e}(mu);const cN={};function G$(e,n,t,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||pd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ms("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let p,_,a=sN(o,i),c=a.repoInfo;typeof process<"u"&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(p=!0,o=`http://${_}?ns=${c.namespace}`,a=sN(o,i),c=a.repoInfo):p=!a.repoInfo.secure;const x=i&&p?new O0(O0.OWNER):new J_e(e.name,e.options,n);(function(e,n){const t=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!vD(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==t.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),D$(e)}(t))throw new Error(ig(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",a),zn(a.path)||pd("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function Zbe(e,n,t,r){let i=cN[n.name];i||(i={},cN[n.name]=i);let o=i[e.toURLString()];return o&&pd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new gbe(e,false,t,r),i[e.toURLString()]=o,o}(c,e,x,new Q_e(e.name,t));return new Ybe(D,e)}class Ybe{constructor(n,t){this._repoInternal=n,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function _be(e,n,t){if(e.stats_=cO(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new nD(e.repoInfo_,(r,i,o,a)=>{M$(e,r,i,o,a)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>P$(e,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Yo(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new mg(e.repoInfo_,n,(r,i,o,a)=>{M$(e,r,i,o,a)},r=>{P$(e,r)},r=>{!function ybe(e,n){gs(n,(t,r)=>{eN(e,t,r)})}(e,r)},e.authTokenProvider_,e.appCheckProvider_,t),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=function nye(e,n){const t=e.toString();return lO[t]||(lO[t]=n()),lO[t]}(e.repoInfo_,()=>new nve(e.stats_,e.server_)),e.infoData_=new Xye,e.infoSyncTree_=new g$({startListening:(r,i,o,a)=>{let c=[];const p=e.infoData_.getNode(r._path);return p.isEmpty()||(c=G0(e.infoSyncTree_,r._path,p),setTimeout(()=>{a("ok")},0)),c},stopListening:()=>{}}),eN(e,"connected",!1),e.serverSyncTree_=new g$({startListening:(r,i,o,a)=>(e.server_.listen(r,o,i,(c,p)=>{const _=a(c,p);Rl(e.eventQueue_,r._path,_)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new mu(this._repo,br())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Wbe(e,n){const t=cN[n];(!t||t[e.key]!==e)&&pd(`Database ${n}(${e.repoInfo_}) has already been deleted.`),function N$(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete t[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){null===this._rootInternal&&pd("Cannot call "+n+" on a deleted database.")}}mg.prototype.simpleListen=function(e,n){this.sendRequest("q",{p:e},n)},mg.prototype.echo=function(e,n){this.sendRequest("echo",{d:e},n)},function Jbe(e){(function XH(e){tO=e})(lg),ag(new lp("database",(n,{instanceIdentifier:t})=>G$(n.getProvider("app").getImmediate(),n.getProvider("auth-internal"),n.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),hu(KH,"1.0.8",e),hu(KH,"1.0.8","esm2017")}();const Z$="firebasestorage.googleapis.com",K$="storageBucket";class Yi extends kh{constructor(n,t,r=0){super(uN(n),`Firebase Storage: ${t} (${uN(n)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yi.prototype)}get status(){return this.status_}set status(n){this.status_=n}_codeEquals(n){return uN(n)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(n){this.customData.serverResponse=n,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Mi=function(e){return e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment",e}(Mi||{});function uN(e){return"storage/"+e}function dN(){return new Yi(Mi.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function hN(e){return new Yi(Mi.INVALID_ARGUMENT,e)}function J$(){return new Yi(Mi.APP_DELETED,"The Firebase app was deleted.")}function rw(e,n){return new Yi(Mi.INVALID_FORMAT,"String does not match format '"+e+"': "+n)}function iw(e){throw new Yi(Mi.INTERNAL_ERROR,"Internal error: "+e)}class ga{constructor(n,t){this.bucket=n,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const n=encodeURIComponent;return"/b/"+n(this.bucket)+"/o/"+n(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(n,t){let r;try{r=ga.makeFromUrl(n,t)}catch{return new ga(n,"")}if(""===r.path)return r;throw function d0e(e){return new Yi(Mi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}(n)}static makeFromUrl(n,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",c=new RegExp("^gs://"+i+"(/(.*))?$","i");function _(De){De.path_=decodeURIComponent(De.path)}const D=t.replace(/[.]/g,"\\."),$e=[{regex:c,indices:{bucket:1,path:3},postModify:function o(De){"/"===De.path.charAt(De.path.length-1)&&(De.path_=De.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${t===Z$?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let De=0;De<$e.length;De++){const we=$e[De],Fe=we.regex.exec(n);if(Fe){let ht=Fe[we.indices.path];ht||(ht=""),r=new ga(Fe[we.indices.bucket],ht),we.postModify(r);break}}if(null==r)throw function u0e(e){return new Yi(Mi.INVALID_URL,"Invalid URL '"+e+"'.")}(n);return r}}class _0e{constructor(n){this.promise_=Promise.reject(n)}getPromise(){return this.promise_}cancel(n=!1){}}function ID(e){return"string"==typeof e||e instanceof String}function eq(e){return fN()&&e instanceof Blob}function fN(){return typeof Blob<"u"}function pN(e,n,t,r){if(r<n)throw hN(`Invalid value for '${e}'. Expected ${n} or greater.`);if(r>t)throw hN(`Invalid value for '${e}'. Expected ${t} or less.`)}function Uh(e,n,t){let r=n;return null==t&&(r=`https://${n}`),`${t}://${r}/v0${e}`}function tq(e){const n=encodeURIComponent;let t="?";for(const r in e)e.hasOwnProperty(r)&&(t=t+(n(r)+"=")+n(e[r])+"&");return t=t.slice(0,-1),t}var Ny=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}(Ny||{});class E0e{constructor(n,t,r,i,o,a,c,p,_,x,D,A=!0){this.url_=n,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=x,this.connectionFactory_=D,this.retry=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,B)=>{this.resolve_=O,this.reject_=B,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,a=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(c,c.getResponse());!function b0e(e){return void 0!==e}(p)?o():o(p)}catch(p){a(p)}else if(null!==c){const p=dN();p.serverResponse=c.getErrorText(),a(this.errorCallback_?this.errorCallback_(c,p):p)}else a(i.canceled?this.appDelete_?J$():function X$(){return new Yi(Mi.CANCELED,"User canceled the upload/download.")}():function Y$(){return new Yi(Mi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new kD(!1,null,!0)):this.backoffId_=function y0e(e,n,t){let r=1,i=null,o=null,a=!1,c=0;function p(){return 2===c}let _=!1;function x(...oe){_||(_=!0,n.apply(null,oe))}function D(oe){i=setTimeout(()=>{i=null,e(O,p())},oe)}function A(){o&&clearTimeout(o)}function O(oe,...be){if(_)return void A();if(oe)return A(),void x.call(null,oe,...be);if(p()||a)return A(),void x.call(null,oe,...be);let $e;r<64&&(r*=2),1===c?(c=2,$e=0):$e=1e3*(r+Math.random()),D($e)}let B=!1;function Q(oe){B||(B=!0,A(),!_&&(null!==i?(oe||(c=2),clearTimeout(i),D(0)):oe||(c=1)))}return D(0),o=setTimeout(()=>{a=!0,Q(!0)},t),Q}((r,i)=>{if(i)return void r(!1,new kD(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const a=c=>{null!==this.progressCallback_&&this.progressCallback_(c.loaded,c.lengthComputable?c.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const c=o.getErrorCode()===Ny.NO_ERROR,p=o.getStatus();if(!c||function nq(e,n){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),o=-1!==n.indexOf(e);return t||i||o}(p,this.additionalRetryCodes_)&&this.retry){const x=o.getErrorCode()===Ny.ABORT;return void r(!1,new kD(!1,null,x))}const _=-1!==this.successCodes_.indexOf(p);r(!0,new kD(_,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(n){this.canceled_=!0,this.appDelete_=n||!1,null!==this.backoffId_&&function v0e(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class kD{constructor(n,t,r){this.wasSuccessCode=n,this.connection=t,this.canceled=!!r}}function A0e(...e){const n=function k0e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==n){const t=new n;for(let r=0;r<e.length;r++)t.append(e[r]);return t.getBlob()}if(fN())return new Blob(e);throw new Yi(Mi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}class mN{constructor(n,t){this.data=n,this.contentType=t||null}}function iq(e){const n=[];for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);r<=127?n.push(r):r<=2047?n.push(192|r>>6,128|63&r):55296==(64512&r)?t<e.length-1&&56320==(64512&e.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++t),n.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):n.push(239,191,189):56320==(64512&r)?n.push(239,191,189):n.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(n)}function oq(e,n){switch(e){case"base64":{const i=-1!==n.indexOf("-"),o=-1!==n.indexOf("_");if(i||o)throw rw(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case"base64url":{const i=-1!==n.indexOf("+"),o=-1!==n.indexOf("/");if(i||o)throw rw(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");n=n.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function M0e(e){if(typeof atob>"u")throw function m0e(e){return new Yi(Mi.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(e)}(n)}catch(i){throw i.message.includes("polyfill")?i:rw(e,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class sq{constructor(n){this.base64=!1,this.contentType=null;const t=n.match(/^data:([^,]+)?,/);if(null===t)throw rw("data_url","Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function L0e(e,n){return e.length>=n.length&&e.substring(e.length-n.length)===n}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=n.substring(n.indexOf(",")+1)}}class jh{constructor(n,t){let r=0,i="";eq(n)?(this.data_=n,r=n.size,i=n.type):n instanceof ArrayBuffer?(t?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),r=this.data_.length):n instanceof Uint8Array&&(t?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),r=n.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(n,t){if(eq(this.data_)){const i=function R0e(e,n,t){return e.webkitSlice?e.webkitSlice(n,t):e.mozSlice?e.mozSlice(n,t):e.slice?e.slice(n,t):null}(this.data_,n,t);return null===i?null:new jh(i)}{const r=new Uint8Array(this.data_.buffer,n,t-n);return new jh(r,!0)}}static getBlob(...n){if(fN()){const t=n.map(r=>r instanceof jh?r.data_:r);return new jh(A0e.apply(null,t))}{const t=n.map(a=>ID(a)?function rq(e,n){switch(e){case"raw":return new mN(iq(n));case"base64":case"base64url":return new mN(oq(e,n));case"data_url":return new mN(function O0e(e){const n=new sq(e);return n.base64?oq("base64",n.rest):function P0e(e){let n;try{n=decodeURIComponent(e)}catch{throw rw("data_url","Malformed data URL.")}return iq(n)}(n.rest)}(n),function N0e(e){return new sq(e).contentType}(n))}throw dN()}("raw",a).data:a.data_);let r=0;t.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(a=>{for(let c=0;c<a.length;c++)i[o++]=a[c]}),new jh(i,!0)}}uploadData(){return this.data_}}function gN(e){let n;try{n=JSON.parse(e)}catch{return null}return function x0e(e){return"object"==typeof e&&!Array.isArray(e)}(n)?n:null}function aq(e){const n=e.lastIndexOf("/",e.length-2);return-1===n?e:e.slice(n+1)}function V0e(e,n){return n}class _a{constructor(n,t,r,i){this.server=n,this.local=t||n,this.writable=!!r,this.xform=i||V0e}}let AD=null;function ow(){if(AD)return AD;const e=[];e.push(new _a("bucket")),e.push(new _a("generation")),e.push(new _a("metageneration")),e.push(new _a("name","fullPath",!0));const t=new _a("name");t.xform=function n(o,a){return function z0e(e){return!ID(e)||e.length<2?e:aq(e)}(a)},e.push(t);const i=new _a("size");return i.xform=function r(o,a){return void 0!==a?Number(a):a},e.push(i),e.push(new _a("timeCreated")),e.push(new _a("updated")),e.push(new _a("md5Hash",null,!0)),e.push(new _a("cacheControl",null,!0)),e.push(new _a("contentDisposition",null,!0)),e.push(new _a("contentEncoding",null,!0)),e.push(new _a("contentLanguage",null,!0)),e.push(new _a("contentType",null,!0)),e.push(new _a("metadata","customMetadata",!0)),AD=e,AD}function lq(e,n,t){const r=gN(n);return null===r?null:function j0e(e,n,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const a=t[o];r[a.local]=a.xform(r,n[a.server])}return function U0e(e,n){Object.defineProperty(e,"ref",{get:function t(){const o=new ga(e.bucket,e.fullPath);return n._makeStorageReference(o)}})}(r,e),r}(e,r,t)}class bd{constructor(n,t,r,i){this.url=n,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function wd(e){if(!e)throw dN()}function Ly(e){return function n(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function l0e(){return new Yi(Mi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function a0e(){return new Yi(Mi.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function s0e(e){return new Yi(Mi.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(e.bucket):403===t.getStatus()?function c0e(e){return new Yi(Mi.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}(e.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function sw(e){const n=Ly(e);return function t(r,i){let o=n(r,i);return 404===r.getStatus()&&(o=function o0e(e){return new Yi(Mi.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}(e.path)),o.serverResponse=i.serverResponse,o}}function pq(e,n,t,r,i){const o=n.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},p=function c(){let $e="";for(let De=0;De<2;De++)$e+=Math.random().toString().slice(2);return $e}();a["Content-Type"]="multipart/related; boundary="+p;const _=function fq(e,n,t){const r=Object.assign({},t);return r.fullPath=e.path,r.size=n.size(),r.contentType||(r.contentType=function Q0e(e,n){return e&&e.contentType||n&&n.type()||"application/octet-stream"}(null,n)),r}(n,r,i),x=function _N(e,n){const t={},r=n.length;for(let i=0;i<r;i++){const o=n[i];o.writable&&(t[o.server]=e[o.local])}return JSON.stringify(t)}(_,t),O=jh.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+x+"\r\n--"+p+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===O)throw function Q$(){return new Yi(Mi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}();const B={name:_.fullPath},Q=Uh(o,e.host,e._protocol),be=e.maxUploadRetryTime,xe=new bd(Q,"POST",function RD(e,n){return function t(r,i){const o=lq(e,i,n);return wd(null!==o),o}}(e,t),be);return xe.urlParams=B,xe.headers=a,xe.body=O.uploadData(),xe.errorHandler=Ly(n),xe}class rwe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ny.NO_ERROR,this.sendPromise_=new Promise(n=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ny.ABORT,n()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ny.NETWORK_ERROR,n()}),this.xhr_.addEventListener("load",()=>{n()})})}send(n,t,r,i){if(this.sent_)throw iw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,n,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw iw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw iw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw iw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw iw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(n){return this.xhr_.getResponseHeader(n)}addUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",n)}removeUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",n)}}class iwe extends rwe{initXhr(){this.xhr_.responseType="text"}}function yu(){return new iwe}class wg{constructor(n,t){this._service=n,this._location=t instanceof ga?t:ga.makeFromUrl(t,n.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(n,t){return new wg(n,t)}get root(){const n=new ga(this._location.bucket,"");return this._newRef(this._service,n)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aq(this._location.path)}get storage(){return this._service}get parent(){const n=function F0e(e){if(0===e.length)return null;const n=e.lastIndexOf("/");return-1===n?"":e.slice(0,n)}(this._location.path);if(null===n)return null;const t=new ga(this._location.bucket,n);return new wg(this._service,t)}_throwIfRoot(n){if(""===this._location.path)throw function g0e(e){return new Yi(Mi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(n)}}function _we(e){e._throwIfRoot("getDownloadURL");const n=function K0e(e,n,t){const i=Uh(n.fullServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,c=new bd(i,"GET",function W0e(e,n){return function t(r,i){const o=lq(e,i,n);return wd(null!==o),function H0e(e,n,t,r){const i=gN(n);if(null===i||!ID(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const a=encodeURIComponent;return o.split(",").map(_=>{const D=e.fullPath;return Uh("/b/"+a(e.bucket)+"/o/"+a(D),t,r)+tq({alt:"media",token:_})})[0]}(o,i,e.host,e._protocol)}}(e,t),a);return c.errorHandler=sw(n),c}(e.storage,e._location,ow());return e.storage.makeRequestWithTokens(n,yu).then(t=>{if(null===t)throw function p0e(){return new Yi(Mi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function wq(e,n){if(e instanceof wN){const t=e;if(null==t._bucket)throw function h0e(){return new Yi(Mi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+K$+"' property when initializing the app?")}();const r=new wg(t,t._bucket);return null!=n?wq(r,n):r}return void 0!==n?function bq(e,n){const t=function B0e(e,n){const t=n.split("/").filter(r=>r.length>0).join("/");return 0===e.length?t:e+"/"+t}(e._location.path,n),r=new ga(e._location.bucket,t);return new wg(e.storage,r)}(e,n):e}function xq(e,n){const t=n?.[K$];return null==t?null:ga.makeFromBucketSpec(t,e)}class wN{constructor(n,t,r,i,o){this.app=n,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Z$,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ga.makeFromBucketSpec(i,this._host):xq(this._host,this.app.options)}get host(){return this._host}set host(n){this._host=n,this._bucket=null!=this._url?ga.makeFromBucketSpec(this._url,n):xq(n,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(n){pN("time",0,Number.POSITIVE_INFINITY,n),this._maxUploadRetryTime=n}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(n){pN("time",0,Number.POSITIVE_INFINITY,n),this._maxOperationRetryTime=n}_getAuthToken(){var n=this;return _e(function*(){if(n._overrideAuthToken)return n._overrideAuthToken;const t=n._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var n=this;return _e(function*(){const t=n._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(n=>n.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(n){return new wg(this,n)}_makeRequest(n,t,r,i,o=!0){if(this._deleted)return new _0e(J$());{const a=function I0e(e,n,t,r,i,o,a=!0){const c=tq(e.urlParams),p=e.url+c,_=Object.assign({},e.headers);return function T0e(e,n){n&&(e["X-Firebase-GMPID"]=n)}(_,n),function C0e(e,n){null!==n&&n.length>0&&(e.Authorization="Firebase "+n)}(_,t),function D0e(e,n){e["X-Firebase-Storage-Version"]="webjs/"+(n??"AppManager")}(_,o),function S0e(e,n){null!==n&&(e["X-Firebase-AppCheck"]=n)}(_,r),new E0e(p,e.method,_,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a)}(n,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(n,t){var r=this;return _e(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(n,t,i,o).getPromise()})()}}const Eq="@firebase/storage",Dq="storage";function Tq(e,n,t){return function _q(e,n,t){e._throwIfRoot("uploadBytes");const r=pq(e.storage,e._location,ow(),new jh(n,!0),t);return e.storage.makeRequestWithTokens(r,yu).then(i=>({metadata:i,ref:e}))}(e=Vo(e),n,t)}function Sq(e){return _we(e=Vo(e))}function Iq(e){return function ywe(e){e._throwIfRoot("deleteObject");const n=function X0e(e,n){const r=Uh(n.fullServerUrl(),e.host,e._protocol),c=new bd(r,"DELETE",function a(p,_){},e.maxOperationRetryTime);return c.successCodes=[200,204],c.errorHandler=sw(n),c}(e.storage,e._location);return e.storage.makeRequestWithTokens(n,yu)}(e=Vo(e))}function PD(e,n){return function wwe(e,n){if(n&&function vwe(e){return/^[A-Za-z]+:\/\//.test(e)}(n)){if(e instanceof wN)return function bwe(e,n){return new wg(e,n)}(e,n);throw hN("To use ref(service, url), the first argument must be a Storage instance.")}return wq(e,n)}(e=Vo(e),n)}function Dwe(e,{instanceIdentifier:n}){const t=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new wN(t,r,i,n,lg)}!function Twe(){ag(new lp(Dq,Dwe,"PUBLIC").setMultipleInstances(!0)),hu(Eq,"0.13.2",""),hu(Eq,"0.13.2","esm2017")}();const xN=A6({apiKey:"AIzaSyB4DkZu3SqYLJCrxFGS7DybGGKUBrlJqaI",authDomain:"familyapp-e83b7.firebaseapp.com",databaseURL:"https://familyapp-e83b7-default-rtdb.europe-west1.firebasedatabase.app",projectId:"familyapp-e83b7",storageBucket:"familyapp-e83b7.appspot.com",messagingSenderId:"728695329604",appId:"1:728695329604:web:c0a1ef7ebf32de4bcd7d11"}),_s=function B_e(e=LR()){const n=p0(e,"auth");if(n.isInitialized())return n.getImmediate();const t=function Dme(e,n){const t=p0(e,"auth");if(t.isInitialized()){const i=t.getImmediate();if(C1(t.getOptions(),n??{}))return i;Ya(i,"already-initialized")}return t.initialize({options:n})}(e,{popupRedirectResolver:M_e,persistence:[kge,gge,SH]}),r=y6("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const a=F_e(o.toString());(function lge(e,n,t){Vo(e).beforeAuthStateChanged(n,t)})(t,a,()=>a(t.currentUser)),function age(e,n,t,r){Vo(e).onIdTokenChanged(n,t,r)}(t,c=>a(c))}}const i=m6("auth");return i&&function Sme(e,n,t){const r=Eo(e);ut(r._canInitEmulator,r,"emulator-config-failed"),ut(/^https?:\/\//.test(n),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,o=hH(n),{host:a,port:c}=function Ime(e){const n=hH(e),t=/(\/\/)?([^?#/]+)/.exec(e.substr(n.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:fH(r.substr(o.length+1))}}{const[o,a]=r.split(":");return{host:o,port:fH(a)}}}(n);r.config.emulator={url:`${o}//${a}${null===c?"":`:${c}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function kme(){function e(){const n=document.createElement("p"),t=n.style;n.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",n.classList.add("firebase-emulator-warning"),document.body.appendChild(n)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(t,`http://${i}`),t}(xN),li=function Xbe(e=LR(),n){const t=p0(e,"database").getImmediate({identifier:n});if(!t._instanceStarted){const r=g6("database");r&&function Qbe(e,n,t,r={}){(e=Vo(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&pd("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&pd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new O0(O0.OWNER);else if(r.mockUserToken){const a="string"==typeof r.mockUserToken?r.mockUserToken:v6(r.mockUserToken,e.app.options.projectId);o=new O0(a)}!function Gbe(e,n,t,r){e.repoInfo_=new sO(`${n}:${t}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,n,t,o)}(t,...r)}return t}(xN),OD=function Ewe(e=LR(),n){const r=p0(e=Vo(e),Dq).getImmediate({identifier:n}),i=g6("storage");return i&&function Cwe(e,n,t,r={}){!function xwe(e,n,t,r={}){e.host=`${n}:${t}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"==typeof i?i:v6(i,e.app.options.projectId))}(e,n,t,r)}(r,...i),r}(xN);let ND=(()=>{class e{constructor(){}getUserData(){return new U(t=>V1(_s,i=>{i?vd(Jr(li,"/users/"+i.uid)).then(o=>{const a=o.val();t.next(a)}).catch(o=>{t.error(o)}):t.next(null)},i=>{t.error(i)},()=>{t.complete()}))}updateUserData(t,r){return TD(Jr(li,`/users/${t}`),r)}deleteOldAvatar(t){return t&&t.includes("firebasestorage.googleapis.com")?Iq(PD(OD,t)).catch(()=>{}):Promise.resolve()}compressImage(t,r=400,i=.7){return new Promise((o,a)=>{const c=new Image,p=new FileReader;p.onload=_=>{c.onload=()=>{const x=document.createElement("canvas");let D=c.width,A=c.height;D>r&&(A=Math.round(A*r/D),D=r),x.width=D,x.height=A,x.getContext("2d").drawImage(c,0,0,D,A),x.toBlob(B=>B?o(B):a("Compression echouee"),"image/jpeg",i)},c.onerror=a,c.src=_.target?.result},p.onerror=a,p.readAsDataURL(t)})}uploadFile(t){return this.compressImage(t).then(r=>{const i=Date.now().toString();return Tq(PD(OD,"/avatars/"+i+".jpg"),r,{contentType:"image/jpeg"}).then(a=>Sq(a.ref))})}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),xd=(()=>{class e{constructor(){this.googleToken$=new K,this.redirectReady=Promise.resolve(),this.allUsers=[]}signInWithGoogle(){const t=new _H;return t.addScope("https://www.googleapis.com/auth/calendar"),t.addScope("https://www.googleapis.com/auth/calendar.events"),t.addScope("https://www.googleapis.com/auth/drive.file"),function Zge(e,n,t){return LP.apply(this,arguments)}(_s,t).then(r=>{const i=_H.credentialFromResult(r);i?.accessToken&&this.googleToken$.next(i.accessToken);const o=r.user;return wp(Jr(li,"/users/"+o.uid),{email:o.email,uid:o.uid,displayName:o.displayName||"",photoURL:o.photoURL||""}).then(()=>{})})}signOutUser(){!function cge(e){Vo(e).signOut()}(_s)}getAllUsers(){return vd(Jr(li,"/users")).then(t=>{const r=t.val();return this.allUsers=r?Object.keys(r).map(i=>({id:i,...r[i]})):[],this.allUsers})}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Swe=(()=>{class e{constructor(t,r){this.editProfileService=t,this.authService=r,this.userName="",this.userPhoto=""}ngOnInit(){this.userSubscription=this.editProfileService.getUserData().subscribe(t=>{t&&(this.userName=t.displayName||"",this.userPhoto=t.photoURL||"https://i.pinimg.com/originals/2f/15/f2/2f15f2e8c688b3120d3d26467b06330c.jpg")})}onSignOut(){this.authService.signOutUser()}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)(Re(ND),Re(xd))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-sidebar"]],decls:22,vars:0,consts:[[1,"w-64","h-screen","bg-white/80","backdrop-blur-lg","border-r","border-warm-100","flex","flex-col","p-4","sticky","top-0"],[1,"flex","items-center","gap-3","px-3","py-4","mb-6"],[1,"font-display","font-extrabold","text-xl","text-gradient"],[1,"flex-1","space-y-1"],["routerLink","/home","routerLinkActive","bg-gradient-to-r from-family-pink/10 to-family-orange/10 text-family-pink",1,"flex","items-center","gap-3","px-4","py-3","rounded-xl","text-gray-600","hover:bg-warm-50","transition-all","font-medium"],["routerLink","/photo","routerLinkActive","bg-gradient-to-r from-family-coral/10 to-family-orange/10 text-family-coral",1,"flex","items-center","gap-3","px-4","py-3","rounded-xl","text-gray-600","hover:bg-warm-50","transition-all","font-medium"],["routerLink","/add-task","routerLinkActive","bg-gradient-to-r from-family-purple/10 to-family-lavender/10 text-family-purple",1,"flex","items-center","gap-3","px-4","py-3","rounded-xl","text-gray-600","hover:bg-warm-50","transition-all","font-medium"],["routerLink","/shopping","routerLinkActive","bg-gradient-to-r from-family-green/10 to-family-green/10 text-family-green",1,"flex","items-center","gap-3","px-4","py-3","rounded-xl","text-gray-600","hover:bg-warm-50","transition-all","font-medium"],["routerLink","/map","routerLinkActive","bg-gradient-to-r from-family-sky/10 to-family-sky/10 text-family-sky",1,"flex","items-center","gap-3","px-4","py-3","rounded-xl","text-gray-600","hover:bg-warm-50","transition-all","font-medium"],["routerLink","/calendar","routerLinkActive","bg-gradient-to-r from-family-yellow/10 to-family-orange/10 text-family-orange",1,"flex","items-center","gap-3","px-4","py-3","rounded-xl","text-gray-600","hover:bg-warm-50","transition-all","font-medium"],["routerLink","/documents","routerLinkActive","bg-gradient-to-r from-family-purple/10 to-family-lavender/10 text-family-purple",1,"flex","items-center","gap-3","px-4","py-3","rounded-xl","text-gray-600","hover:bg-warm-50","transition-all","font-medium"],[1,"border-t","border-warm-100","pt-4"],[1,"flex","items-center","gap-3","px-4","py-3","rounded-xl","text-gray-400","hover:bg-red-50","hover:text-red-400","transition-all","font-medium","w-full","text-left",3,"click"]],template:function(r,i){1&r&&(ce(0,"aside",0)(1,"div",1)(2,"h1",2),fe(3,"Family App"),he()(),ce(4,"nav",3)(5,"a",4),fe(6," Tableau de bord "),he(),ce(7,"a",5),fe(8," Photos "),he(),ce(9,"a",6),fe(10," Nouvelle tache "),he(),ce(11,"a",7),fe(12," Courses "),he(),ce(13,"a",8),fe(14," Carte "),he(),ce(15,"a",9),fe(16," Calendrier "),he(),ce(17,"a",10),fe(18," Documents "),he()(),ce(19,"div",11)(20,"button",12),Nt("click",function(){return i.onSignOut()}),fe(21," Deconnexion "),he()()())},dependencies:[Kb,np,RA],encapsulation:2})}}return e})();const Iwe=()=>({exact:!1});let kwe=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=vr({type:e,selectors:[["app-bottom-nav"]],decls:23,vars:2,consts:[[1,"fixed","bottom-0","left-0","right-0","bg-white/90","backdrop-blur-lg","border-t","border-warm-100","pb-safe","z-50"],[1,"flex","justify-around","items-center","h-16"],["routerLink","/home","routerLinkActive","text-family-pink",1,"flex","flex-col","items-center","gap-0.5","text-gray-400","transition-colors",3,"routerLinkActiveOptions"],[1,"text-[10px]","font-medium"],["routerLink","/photo","routerLinkActive","text-family-coral",1,"flex","flex-col","items-center","gap-0.5","text-gray-400","transition-colors"],["routerLink","/add-task","routerLinkActive","text-family-purple",1,"flex","flex-col","items-center","gap-0.5","text-gray-400","transition-colors"],["routerLink","/shopping","routerLinkActive","text-family-green",1,"flex","flex-col","items-center","gap-0.5","text-gray-400","transition-colors"],["routerLink","/map","routerLinkActive","text-family-sky",1,"flex","flex-col","items-center","gap-0.5","text-gray-400","transition-colors"],["routerLink","/calendar","routerLinkActive","text-family-orange",1,"flex","flex-col","items-center","gap-0.5","text-gray-400","transition-colors"],["routerLink","/documents","routerLinkActive","text-family-purple",1,"flex","flex-col","items-center","gap-0.5","text-gray-400","transition-colors"]],template:function(r,i){1&r&&(ce(0,"nav",0)(1,"div",1)(2,"a",2)(3,"span",3),fe(4,"Accueil"),he()(),ce(5,"a",4)(6,"span",3),fe(7,"Photos"),he()(),ce(8,"a",5)(9,"span",3),fe(10,"Taches"),he()(),ce(11,"a",6)(12,"span",3),fe(13,"Courses"),he()(),ce(14,"a",7)(15,"span",3),fe(16,"Carte"),he()(),ce(17,"a",8)(18,"span",3),fe(19,"Calendrier"),he()(),ce(20,"a",9)(21,"span",3),fe(22,"Docs"),he()()()()),2&r&&(Te(2),Bn("routerLinkActiveOptions",function _z(e,n){const t=Nn()+e,r=Me();return r[t]===kr?id(r,t,n()):function Yv(e,n){return e[n]}(r,t)}(1,Iwe)))},dependencies:[Kb,np,RA],encapsulation:2})}}return e})();function Awe(e,n){if(1&e&&(ce(0,"a",0),rn(1,"img",1),ce(2,"span",2),fe(3),he()()),2&e){const t=Qe();Te(),Bn("src",t.fileUrl,bl),Te(2),on(t.user.displayName)}}let Rwe=(()=>{class e{constructor(t){this.editProfileService=t,this.user=null}ngOnInit(){this.userSubscription=this.editProfileService.getUserData().subscribe(t=>{this.user=t,this.fileUrl=this.user?.photoURL||"https://i.pinimg.com/originals/2f/15/f2/2f15f2e8c688b3120d3d26467b06330c.jpg"},t=>{console.error(t)})}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)(Re(ND))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-user-avatar"]],decls:1,vars:1,consts:[["routerLink","/user-profile",1,"flex","items-center","gap-2","hover:opacity-80","transition-opacity"],["alt","Photo de profil",1,"w-9","h-9","rounded-full","object-cover","ring-2","ring-family-pink/30",3,"src"],[1,"font-medium","text-sm","text-gray-700","hidden","md:inline"]],template:function(r,i){1&r&&mn(0,Awe,4,2,"a",0),2&r&&gn(i.user?0:-1)},dependencies:[Kb,np],encapsulation:2})}}return e})(),Mwe=(()=>{class e{constructor(t){this.authService=t}onSignOut(){this.authService.signOutUser()}static{this.\u0275fac=function(r){return new(r||e)(Re(xd))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-top-bar"]],decls:9,vars:0,consts:[[1,"flex","items-center","justify-between","px-4","md:px-6","py-3","bg-white/60","backdrop-blur-sm","border-b","border-warm-100"],[1,"flex","items-center","gap-2","md:hidden"],[1,"font-display","font-bold","text-lg","text-gradient"],[1,"hidden","md:block"],[1,"flex","items-center","gap-3"],[1,"md:hidden","text-gray-400","hover:text-red-400","transition-colors","text-sm","font-medium",3,"click"]],template:function(r,i){1&r&&(ce(0,"header",0)(1,"div",1)(2,"span",2),fe(3,"Family App"),he()(),rn(4,"div",3),ce(5,"div",4),rn(6,"app-user-avatar"),ce(7,"button",5),Nt("click",function(){return i.onSignOut()}),fe(8," Deconnexion "),he()()())},dependencies:[Rwe],encapsulation:2})}}return e})();function Pwe(e,n){1&e&&(ce(0,"div",0),rn(1,"app-sidebar",1),ce(2,"div",2),rn(3,"app-top-bar"),ce(4,"main",3),rn(5,"router-outlet"),he(),rn(6,"app-bottom-nav",4),he()())}function Owe(e,n){1&e&&rn(0,"router-outlet")}let Nwe=(()=>{class e{constructor(){this.title="FamilyApp",this.isAuth=!1}ngOnInit(){V1(_s,t=>{this.isAuth=!!t})}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=vr({type:e,selectors:[["app-root"]],decls:2,vars:1,consts:[[1,"flex","h-screen"],[1,"hidden","md:flex","flex-shrink-0"],[1,"flex-1","flex","flex-col","min-h-screen","overflow-hidden"],[1,"flex-1","overflow-y-auto","p-4","md:p-6","pb-24","md:pb-6"],[1,"md:hidden"]],template:function(r,i){1&r&&mn(0,Pwe,7,0,"div",0)(1,Owe,1,0,"router-outlet"),2&r&&gn(i.isAuth?0:1)},dependencies:[bA,Swe,kwe,Mwe],encapsulation:2})}}return e})(),kq=(()=>{class e{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||e)(Re(ja),Re(Pr))};static \u0275dir=At({type:e})}return e})(),xg=(()=>{class e extends kq{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(e)))(i||e)}})();static \u0275dir=At({type:e,features:[$n]})}return e})();const Ed=new Le(""),Fwe={provide:Ed,useExisting:Wn(()=>EN),multi:!0};let EN=(()=>{class e extends xg{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(e)))(i||e)}})();static \u0275dir=At({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){1&r&&Nt("change",function(a){return i.onChange(a.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Cr([Fwe]),$n]})}return e})();const Bwe={provide:Ed,useExisting:Wn(()=>Cd),multi:!0},zwe=new Le("");let Cd=(()=>{class e extends kq{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,null==this._compositionMode&&(this._compositionMode=!function Vwe(){const e=Qf()?Qf().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||e)(Re(ja),Re(Pr),Re(zwe,8))};static \u0275dir=At({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Nt("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},standalone:!1,features:[Cr([Bwe]),$n]})}return e})();function CN(e){return null==e||0===DN(e)}function DN(e){return null==e?null:Array.isArray(e)||"string"==typeof e?e.length:e instanceof Set?e.size:null}const Ks=new Le(""),xp=new Le(""),Uwe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Sc{static min(n){return function Aq(e){return n=>{if(null==n.value||null==e)return null;const t=parseFloat(n.value);return!isNaN(t)&&t<e?{min:{min:e,actual:n.value}}:null}}(n)}static max(n){return function Rq(e){return n=>{if(null==n.value||null==e)return null;const t=parseFloat(n.value);return!isNaN(t)&&t>e?{max:{max:e,actual:n.value}}:null}}(n)}static required(n){return Mq(n)}static requiredTrue(n){return function Pq(e){return!0===e.value?null:{required:!0}}(n)}static email(n){return function Oq(e){return CN(e.value)||Uwe.test(e.value)?null:{email:!0}}(n)}static minLength(n){return function Nq(e){return n=>{const t=n.value?.length??DN(n.value);return null===t||0===t?null:t<e?{minlength:{requiredLength:e,actualLength:t}}:null}}(n)}static maxLength(n){return function Lq(e){return n=>{const t=n.value?.length??DN(n.value);return null!==t&&t>e?{maxlength:{requiredLength:e,actualLength:t}}:null}}(n)}static pattern(n){return function Fq(e){if(!e)return LD;let n,t;return"string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),n=new RegExp(t)):(t=e.toString(),n=e),r=>{if(CN(r.value))return null;const i=r.value;return n.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(n)}static nullValidator(n){return null}static compose(n){return Hq(n)}static composeAsync(n){return $q(n)}}function Mq(e){return CN(e.value)?{required:!0}:null}function LD(e){return null}function Bq(e){return null!=e}function Vq(e){return ib(e)?fs(e):e}function zq(e){let n={};return e.forEach(t=>{n=null!=t?{...n,...t}:n}),0===Object.keys(n).length?null:n}function Uq(e,n){return n.map(t=>t(e))}function jq(e){return e.map(n=>function jwe(e){return!e.validate}(n)?n:t=>n.validate(t))}function Hq(e){if(!e)return null;const n=e.filter(Bq);return 0==n.length?null:function(t){return zq(Uq(t,n))}}function TN(e){return null!=e?Hq(jq(e)):null}function $q(e){if(!e)return null;const n=e.filter(Bq);return 0==n.length?null:function(t){return function Lwe(...e){const n=xj(e),{args:t,keys:r}=Ej(e),i=new U(o=>{const{length:a}=t;if(!a)return void o.complete();const c=new Array(a);let p=a,_=a;for(let x=0;x<a;x++){let D=!1;bc(t[x]).subscribe(new ni(o,A=>{D||(D=!0,_--),c[x]=A},()=>p--,void 0,()=>{(!p||!D)&&(_||o.next(r?Dj(r,c):c),o.complete())}))}});return n?i.pipe(Cj(n)):i}(Uq(t,n).map(Vq)).pipe(cr(zq))}}function SN(e){return null!=e?$q(jq(e)):null}function qq(e,n){return null===e?[n]:Array.isArray(e)?[...e,n]:[e,n]}function Gq(e){return e._rawValidators}function Wq(e){return e._rawAsyncValidators}function IN(e){return e?Array.isArray(e)?e:[e]:[]}function FD(e,n){return Array.isArray(e)?e.includes(n):e===n}function Zq(e,n){const t=IN(n);return IN(e).forEach(i=>{FD(t,i)||t.push(i)}),t}function Kq(e,n){return IN(n).filter(t=>!FD(e,t))}class Yq{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=TN(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=SN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,t){return!!this.control&&this.control.hasError(n,t)}getError(n,t){return this.control?this.control.getError(n,t):null}}class Ys extends Yq{name;get formDirective(){return null}get path(){return null}}class Ep extends Yq{_parent=null;name=null;valueAccessor=null}class Xq{_cd;constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let Hh=(()=>{class e extends Xq{constructor(t){super(t)}static \u0275fac=function(r){return new(r||e)(Re(Ep,2))};static \u0275dir=At({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Dl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[$n]})}return e})(),By=(()=>{class e extends Xq{constructor(t){super(t)}static \u0275fac=function(r){return new(r||e)(Re(Ys,10))};static \u0275dir=At({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Dl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[$n]})}return e})();const aw="VALID",VD="INVALID",Vy="PENDING",lw="DISABLED";class zy{}class eG extends zy{value;source;constructor(n,t){super(),this.value=n,this.source=t}}class RN extends zy{pristine;source;constructor(n,t){super(),this.pristine=n,this.source=t}}class MN extends zy{touched;source;constructor(n,t){super(),this.touched=n,this.source=t}}class zD extends zy{status;source;constructor(n,t){super(),this.status=n,this.source=t}}class tG extends zy{source;constructor(n){super(),this.source=n}}class PN extends zy{source;constructor(n){super(),this.source=n}}function ON(e){return(UD(e)?e.validators:e)||null}function NN(e,n){return(UD(n)?n.asyncValidators:e)||null}function UD(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function nG(e,n,t){const r=e.controls;if(!(n?Object.keys(r):r).length)throw new se(1e3,"");if(!r[t])throw new se(1001,"")}function rG(e,n,t){e._forEachChild((r,i)=>{if(void 0===t[i])throw new se(1002,"")})}class jD{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(n,t){this._assignValidators(n),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return mr(this.statusReactive)}set status(n){mr(()=>this.statusReactive.set(n))}_status=vc(()=>this.statusReactive());statusReactive=cs(void 0);get valid(){return this.status===aw}get invalid(){return this.status===VD}get pending(){return this.status==Vy}get disabled(){return this.status===lw}get enabled(){return this.status!==lw}errors;get pristine(){return mr(this.pristineReactive)}set pristine(n){mr(()=>this.pristineReactive.set(n))}_pristine=vc(()=>this.pristineReactive());pristineReactive=cs(!0);get dirty(){return!this.pristine}get touched(){return mr(this.touchedReactive)}set touched(n){mr(()=>this.touchedReactive.set(n))}_touched=vc(()=>this.touchedReactive());touchedReactive=cs(!1);get untouched(){return!this.touched}_events=new K;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(Zq(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(Zq(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(Kq(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(Kq(n,this._rawAsyncValidators))}hasValidator(n){return FD(this._rawValidators,n)}hasAsyncValidator(n){return FD(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){const t=!1===this.touched;this.touched=!0;const r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched({...n,sourceControl:r}),t&&!1!==n.emitEvent&&this._events.next(new MN(!0,r))}markAllAsDirty(n={}){this.markAsDirty({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(n))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(n))}markAsUntouched(n={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=n.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:r})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,r),t&&!1!==n.emitEvent&&this._events.next(new MN(!1,r))}markAsDirty(n={}){const t=!0===this.pristine;this.pristine=!1;const r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty({...n,sourceControl:r}),t&&!1!==n.emitEvent&&this._events.next(new RN(!1,r))}markAsPristine(n={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=n.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,r),t&&!1!==n.emitEvent&&this._events.next(new RN(!0,r))}markAsPending(n={}){this.status=Vy;const t=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new zD(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending({...n,sourceControl:t})}disable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=lw,this.errors=null,this._forEachChild(i=>{i.disable({...n,onlySelf:!0})}),this._updateValue();const r=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new eG(this.value,r)),this._events.next(new zD(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=aw,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n,t){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===aw||this.status===Vy)&&this._runAsyncValidator(r,n.emitEvent)}const t=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new eG(this.value,t)),this._events.next(new zD(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity({...n,sourceControl:t})}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lw:aw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,t){if(this.asyncValidator){this.status=Vy,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t,shouldHaveEmitted:!1!==n};const r=Vq(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const n=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(n){let t=n;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(n,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,t,r){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||r)&&this._events.next(new zD(this.status,t)),this._parent&&this._parent._updateControlsErrors(n,t,r)}_initObservables(){this.valueChanges=new jn,this.statusChanges=new jn}_calculateStatus(){return this._allControlsDisabled()?lw:this.errors?VD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vy)?Vy:this._anyControlsHaveStatus(VD)?VD:aw}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,t){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,t),i&&this._events.next(new RN(this.pristine,t))}_updateTouched(n={},t){this.touched=this._anyControlsTouched(),this._events.next(new MN(this.touched,t)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,t)}_onDisabledChange=[];_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){UD(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function Kwe(e){return Array.isArray(e)?TN(e):e||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function Ywe(e){return Array.isArray(e)?SN(e):e||null}(this._rawAsyncValidators)}}class cw extends jD{constructor(n,t,r){super(ON(t),NN(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,r={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){rG(this,0,n),Object.keys(n).forEach(r=>{nG(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(Object.keys(n).forEach(r=>{const i=this.controls[r];i&&i.patchValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((r,i)=>{r.reset(n?n[i]:null,{...t,onlySelf:!0})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),!1!==t?.emitEvent&&this._events.next(new PN(this))}getRawValue(){return this._reduceChildren({},(n,t,r)=>(n[r]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&n(r,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(n,t){let r=n;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}class iG extends cw{}const Eg=new Le("",{factory:()=>uw}),uw="always";function HD(e,n){return[...n.path,e]}function dw(e,n,t=uw){LN(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||"always"===t)&&n.valueAccessor.setDisabledState?.(e.disabled),function Qwe(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&oG(e,n)})}(e,n),function exe(e,n){const t=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,n),function Jwe(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&oG(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),function Xwe(e,n){if(n.valueAccessor.setDisabledState){const t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,n)}function $D(e,n,t=!0){const r=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(r),n.valueAccessor.registerOnTouched(r)),GD(e,n),e&&(n._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function qD(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function LN(e,n){const t=Gq(e);null!==n.validator?e.setValidators(qq(t,n.validator)):"function"==typeof t&&e.setValidators([t]);const r=Wq(e);null!==n.asyncValidator?e.setAsyncValidators(qq(r,n.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();qD(n._rawValidators,i),qD(n._rawAsyncValidators,i)}function GD(e,n){let t=!1;if(null!==e){if(null!==n.validator){const i=Gq(e);if(Array.isArray(i)&&i.length>0){const o=i.filter(a=>a!==n.validator);o.length!==i.length&&(t=!0,e.setValidators(o))}}if(null!==n.asyncValidator){const i=Wq(e);if(Array.isArray(i)&&i.length>0){const o=i.filter(a=>a!==n.asyncValidator);o.length!==i.length&&(t=!0,e.setAsyncValidators(o))}}}const r=()=>{};return qD(n._rawValidators,r),qD(n._rawAsyncValidators,r),t}function oG(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function BN(e,n){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(n,t.currentValue)}function VN(e,n){if(!n)return null;let t,r,i;return Array.isArray(n),n.forEach(o=>{o.constructor===Cd?t=o:function rxe(e){return Object.getPrototypeOf(e.constructor)===xg}(o)?r=o:i=o}),i||r||t||null}function lG(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function cG(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}Promise.resolve();const fw=class extends jD{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(n=null,t,r){super(ON(t),NN(r,t)),this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),UD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=cG(n)?n.value:n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,!1!==t?.emitEvent&&this._events.next(new PN(this))}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){lG(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){lG(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){cG(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},uxe={provide:Ep,useExisting:Wn(()=>pw)},uG=Promise.resolve();let pw=(()=>{class e extends Ep{_changeDetectorRef;callSetDisabledState;control=new fw;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new jn;constructor(t,r,i,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=VN(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),BN(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){dw(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){uG.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&hs(r);uG.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?HD(t,this._parent):[t]}static \u0275fac=function(r){return new(r||e)(Re(Ys,9),Re(Ks,10),Re(xp,10),Re(Ed,10),Re(vh,8),Re(Eg,8))};static \u0275dir=At({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Cr([uxe]),$n,Mo]})}return e})(),Uy=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=At({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})();class pG extends jD{constructor(n,t,r){super(ON(t),NN(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(n){return this.controls[this._adjustIndex(n)]}push(n,t={}){Array.isArray(n)?n.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(n,t,r={}){this.controls.splice(n,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(n,t={}){let r=this._adjustIndex(n);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(n,t,r={}){let i=this._adjustIndex(n);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,t={}){rG(this,0,n),n.forEach((r,i)=>{nG(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(n.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n=[],t={}){this._forEachChild((r,i)=>{r.reset(n[i],{...t,onlySelf:!0})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),!1!==t?.emitEvent&&this._events.next(new PN(this))}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((t,r)=>{n(t,r)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(t=>t.enabled&&n(t))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}}let YD=(()=>{class e extends Ys{callSetDisabledState;get submitted(){return mr(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=vc(()=>this._submittedReactive());_submittedReactive=cs(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(GD(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){const r=this.form.get(t.path);return dw(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){$D(t.control||null,t,!1),function ixe(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,r){this.form.get(t.path).setValue(r)}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,function aG(e,n){e._syncPendingControls(),n.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new tG(this.control)),"dialog"===t?.target?.method}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&($D(r||null,t),(e=>e instanceof fw)(i)&&(dw(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function sG(e,n){LN(e,n)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function txe(e,n){return GD(e,n)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){LN(this.form,this),this._oldForm&&GD(this._oldForm,this)}_checkFormPresent(){}static \u0275fac=function(r){return new(r||e)(Re(Ks,10),Re(xp,10),Re(Eg,8))};static \u0275dir=At({type:e,features:[$n,Mo]})}return e})();const zN=new Le(""),vxe={provide:Ep,useExisting:Wn(()=>Cg)};let Cg=(()=>{class e extends Ep{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new jn;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,a){super(),this._ngModelWarningConfig=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=VN(0,o)}ngOnChanges(t){this._added||this._setUpControl(),BN(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return HD(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||e)(Re(Ys,13),Re(Ks,10),Re(xp,10),Re(Ed,10),Re(zN,8))};static \u0275dir=At({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Cr([vxe]),$n,Mo]})}return e})();const bxe={provide:Ys,useExisting:Wn(()=>Dg)};let Dg=(()=>{class e extends YD{form=null;ngSubmit=new jn;get control(){return this.form}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(e)))(i||e)}})();static \u0275dir=At({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Nt("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Cr([bxe]),$n]})}return e})();const wxe={provide:Ed,useExisting:Wn(()=>Cp),multi:!0};function yG(e,n){return null==e?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${e}: ${n}`.slice(0,50))}let Cp=(()=>{class e extends xg{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=Z(Cl).injector;destroyRef=Z(rr);cdr=Z(vh);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,ru({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;const i=yG(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function xxe(e){return e.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(e)))(i||e)}})();static \u0275dir=At({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&Nt("change",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Cr([wxe]),$n]})}return e})(),jy=(()=>{class e{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(yG(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||e)(Re(Pr),Re(ja),Re(Cp,9))};static \u0275dir=At({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();const Exe={provide:Ed,useExisting:Wn(()=>UN),multi:!0};function vG(e,n){return null==e?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${e}: ${n}`.slice(0,50))}let UN=(()=>{class e extends xg{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(i.indexOf(a.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const a=o;for(let c=0;c<a.length;c++){const _=this._getOptionValue(a[c].value);i.push(_)}}else{const a=r.options;for(let c=0;c<a.length;c++){const p=a[c];if(p.selected){const _=this._getOptionValue(p.value);i.push(_)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Cxe(e){return e.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(e)))(i||e)}})();static \u0275dir=At({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&Nt("change",function(a){return i.onChange(a.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Cr([Exe]),$n]})}return e})(),Hy=(()=>{class e{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(vG(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(vG(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(Re(Pr),Re(ja),Re(UN,9))};static \u0275dir=At({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),Tg=(()=>{class e{_validator=LD;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):LD,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static \u0275fac=function(r){return new(r||e)};static \u0275dir=At({type:e,features:[Mo]})}return e})();const Sxe={provide:Ks,useExisting:Wn(()=>$y),multi:!0};let $y=(()=>{class e extends Tg{required;inputName="required";normalizeInput=hs;createValidator=t=>Mq;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(e)))(i||e)}})();static \u0275dir=At({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Ws("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Cr([Sxe]),$n]})}return e})(),kG=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({})}return e})();function AG(e){return!!e&&(void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn)}let gw=(()=>{class e{useNonNullable=!1;get nonNullable(){const t=new e;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let o={};return AG(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new cw(i,o)}record(t,r=null){const i=this._reduceControls(t);return new iG(i,r)}control(t,r,i){let o={};return this.useNonNullable?(AG(r)?o=r:(o.validators=r,o.asyncValidators=i),new fw(t,{...o,nonNullable:!0})):new fw(t,r,i)}array(t,r,i){const o=t.map(a=>this._createControl(a));return new pG(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof fw||t instanceof jD?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),jN=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:Eg,useValue:t.callSetDisabledState??uw}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({imports:[kG]})}return e})(),_w=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:zN,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Eg,useValue:t.callSetDisabledState??uw}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({imports:[kG]})}return e})();class Pxe{constructor(n,t,r,i,o,a,c){this.id=n,this.name=t,this.urg=r,this.title=i,this.descriptif=o,this.statut=a,this.createdDate=c}}let qy=(()=>{class e{constructor(){this.tasks=[],this.tasksSubject=new K,this.getTasks()}emitTasks(){this.tasksSubject.next(this.tasks),console.log(this.tasks)}saveTasks(){wp(Jr(li,"/tasks"),this.tasks),console.log("T\xe2che sauvegarder",this.tasks)}getTasks(){nw(Jr(li,"/tasks"),t=>{this.tasks=t.val()?t.val():[],this.emitTasks(),console.log("T\xe2ches r\xe9cup\xe9rer",this.tasks)})}generateUniqueId(){return`${(new Date).getTime()}-${Math.random().toString(36).substring(2,15)}`}createNewTask(t){t.id=this.generateUniqueId(),this.tasks.push(t),this.saveTasks(),console.log("T\xe2che cr\xe9er",this.tasks)}removeTask(t){const r=this.tasks.findIndex(i=>i.id===t);-1!==r?(this.tasks.splice(r,1),this.saveTasks(),this.emitTasks(),console.log("T\xe2che supprim\xe9e avec l'ID:",t)):console.error("T\xe2che non trouv\xe9e avec l'ID:",t)}getTaskById(t){return this.tasks.find(i=>i.id===t)||null}updateTaskById(t,r){const i=this.tasks.findIndex(o=>o.id===t);-1!==i?(this.tasks[i]=r,this.saveTasks(),this.emitTasks()):console.error("ID de t\xe2che invalide:",t)}updateTaskStatus(t){const r=this.tasks.findIndex(i=>i.id===t.id);-1!==r&&(this.tasks[r]=t,this.saveTasks(),this.emitTasks())}ngOnDestroy(){this.tasksSubject.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Oxe(e,n){if(1&e&&(ce(0,"option",8),fe(1),he()),2&e){const t=n.$implicit;Bn("value",t.displayName||t.email),Te(),on(t.displayName||t.email)}}let Nxe=(()=>{class e{constructor(t,r,i,o,a){this.formBuilder=t,this.ts=r,this.router=i,this._snackBar=o,this.userService=a,this.allUsers=[]}ngOnInit(){this.userService.getAllUsers().then(t=>{this.allUsers=t}).catch(()=>{this._snackBar.open("Erreur lors du chargement des utilisateurs","",{duration:5e3})}),this.initForm()}initForm(){this.addTaskForm=this.formBuilder.group({name:["",[Sc.required]],urg:["",[Sc.required]],title:["",[Sc.required]],descriptif:[""]})}goBack(){this.router.navigate(["/home"])}onSubmit(){const t=this.addTaskForm.get("name")?.value,r=this.addTaskForm.get("urg")?.value,i=this.addTaskForm.get("title")?.value,o=this.addTaskForm.get("descriptif")?.value,c=(new Date).toISOString(),p=new Pxe("",t,r,i,o,"Nouveau",c);this.ts.createNewTask(p),this._snackBar.open("Tache ajout\xe9e","avec succ\xe8s !!",{duration:5e3}),this.router.navigate(["/home"])}static{this.\u0275fac=function(r){return new(r||e)(Re(gw),Re(qy),Re(Ns),Re(ng),Re(xd))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-add-task"]],decls:40,vars:2,consts:[[1,"flex","justify-center"],[1,"card-fun","p-6","w-full","max-w-lg"],[1,"font-display","text-lg","font-bold","text-gray-700","mb-4"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","name",1,"block","mb-1","text-sm","font-medium","text-gray-600"],["formControlName","name","id","name",1,"input-fun","w-full"],["value","","disabled",""],["value","Tout le monde"],[3,"value"],["for","urg",1,"block","mb-1","text-sm","font-medium","text-gray-600"],["formControlName","urg","id","urg","required","",1,"input-fun","w-full"],["value","Urgent"],["value","Relativement urgent"],["value","Pas urgent"],["for","title",1,"block","mb-1","text-sm","font-medium","text-gray-600"],["formControlName","title","id","title","placeholder","Ex. Mon titre...","required","",1,"input-fun","w-full"],[1,"block","mb-1","text-sm","font-medium","text-gray-600"],["formControlName","descriptif","rows","5","placeholder","D\xe9crivez la t\xe2che...",1,"input-fun","w-full","resize-y"],[1,"flex","justify-end","gap-3","pt-2"],["type","button",1,"px-4","py-2","rounded-xl","border","border-gray-200","text-gray-600","hover:bg-gray-50","transition-colors","font-medium","text-sm",3,"click"],["type","submit",1,"btn-gradient",3,"disabled"]],template:function(r,i){1&r&&(ce(0,"div",0)(1,"div",1)(2,"h3",2),fe(3,"\u270f\ufe0f Ajouter une Tache"),he(),ce(4,"form",3),Nt("ngSubmit",function(){return i.onSubmit()}),ce(5,"div")(6,"label",4),fe(7,"Tache pour"),he(),ce(8,"select",5)(9,"option",6),fe(10,"Choisir..."),he(),ce(11,"option",7),fe(12,"Tout le monde"),he(),ki(13,Oxe,2,2,"option",8,iu),he()(),ce(15,"div")(16,"label",9),fe(17,"Priorite"),he(),ce(18,"select",10)(19,"option",6),fe(20,"Choisir..."),he(),ce(21,"option",11),fe(22,"Urgent !"),he(),ce(23,"option",12),fe(24,"Relativement urgent"),he(),ce(25,"option",13),fe(26,"Pas Urgent"),he()()(),ce(27,"div")(28,"label",14),fe(29,"Titre"),he(),rn(30,"input",15),he(),ce(31,"div")(32,"label",16),fe(33,"Descriptif"),he(),rn(34,"textarea",17),he(),ce(35,"div",18)(36,"button",19),Nt("click",function(){return i.goBack()}),fe(37,"Retour"),he(),ce(38,"button",20),fe(39,"Ajouter"),he()()()()()),2&r&&(Te(4),Bn("formGroup",i.addTaskForm),Te(9),Ai(i.allUsers),Te(25),Bn("disabled",i.addTaskForm.invalid))},dependencies:[_w,Uy,jy,Hy,Cd,Cp,Hh,By,$y,Dg,Cg],styles:[".card[_ngcontent-%COMP%]{box-sizing:border-box;width:80%;margin:20px auto;padding:10px 30px}@media only screen and (min-width:1224px){.mat-card[_ngcontent-%COMP%]{width:80%}}"]})}}return e})();function Lxe(e,n){if(1&e&&($t(0,"p",14),fe(1),zt()),2&e){const t=Qe();Te(),on(t.errorMessage)}}let Fxe=(()=>{class e{constructor(t,r){this.authService=t,this.router=r,this.errorMessage=""}signInWithGoogle(){this.authService.signInWithGoogle().then(()=>{this.router.navigate(["/home"])},t=>{console.error("Google Sign-In error:",t);const r=t?.code||"";this.errorMessage="auth/popup-closed-by-user"===r||"auth/cancelled-popup-request"===r?"":`Erreur lors de la connexion Google (${r})`})}static{this.\u0275fac=function(r){return new(r||e)(Re(xd),Re(Ns))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-signin"]],decls:20,vars:1,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-family-pink","via-family-coral","to-family-orange","p-4"],[1,"w-full","max-w-md"],[1,"text-center","mb-8"],[1,"text-6xl","block","mb-2"],[1,"font-display","font-extrabold","text-3xl","text-white"],[1,"text-white/80","mt-1"],[1,"bg-white","rounded-3xl","shadow-fun","p-8"],[1,"font-display","font-bold","text-xl","text-center","text-gray-800","mb-6"],[1,"w-full","flex","items-center","justify-center","gap-3","px-6","py-3","rounded-2xl","border-2","border-gray-200","bg-white","hover:bg-gray-50","transition-all","hover:shadow-md","text-gray-700","font-semibold",3,"click"],["viewBox","0 0 24 24",1,"w-5","h-5"],["fill","#4285F4","d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z"],["fill","#34A853","d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"],["fill","#FBBC05","d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"],["fill","#EA4335","d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"],[1,"mt-4","text-red-400","text-center","text-sm"]],template:function(r,i){1&r&&($t(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),fe(4,"\u{1f468}\u200d\u{1f469}\u200d\u{1f467}\u200d\u{1f466}"),zt(),$t(5,"h1",4),fe(6,"Family App"),zt(),$t(7,"p",5),fe(8,"Votre espace famille"),zt()(),$t(9,"div",6)(10,"h2",7),fe(11,"Connexion \u{1f44b}"),zt(),$t(12,"button",8),da("click",function(){return i.signInWithGoogle()}),ls(),$t(13,"svg",9),od(14,"path",10)(15,"path",11)(16,"path",12)(17,"path",13),zt(),fe(18," Se connecter avec Google "),zt(),mn(19,Lxe,2,1,"p",14),zt()()()),2&r&&(Te(19),gn(i.errorMessage?19:-1))},styles:["mat-card[_ngcontent-%COMP%]{width:300px;margin-top:20px}"]})}}return e})();function HN(e){const n=e.cloneNode(!0),t=n.querySelectorAll("[id]"),r=e.nodeName.toLowerCase();n.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return"canvas"===r?PG(e,n):("input"===r||"select"===r||"textarea"===r)&&MG(e,n),RG("canvas",e,n,PG),RG("input, textarea, select",e,n,MG),n}function RG(e,n,t,r){const i=n.querySelectorAll(e);if(i.length){const o=t.querySelectorAll(e);for(let a=0;a<i.length;a++)r(i[a],o[a])}}let Vxe=0;function MG(e,n){"file"!==n.type&&(n.value=e.value),"radio"===n.type&&n.name&&(n.name=`mat-clone-${n.name}-${Vxe++}`)}function PG(e,n){const t=n.getContext("2d");if(t)try{t.drawImage(e,0,0)}catch{}}function $N(e){const n=e.getBoundingClientRect();return{top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.width,height:n.height,x:n.x,y:n.y}}function qN(e,n,t){const{top:r,bottom:i,left:o,right:a}=e;return t>=r&&t<=i&&n>=o&&n<=a}function yw(e,n,t){e.top+=n,e.bottom=e.top+e.height,e.left+=t,e.right=e.left+e.width}function OG(e,n,t,r){const{top:i,right:o,bottom:a,left:c,width:p,height:_}=e,x=p*n,D=_*n;return r>i-D&&r<a+D&&t>c-x&&t<o+x}class NG{_document;positions=new Map;constructor(n){this._document=n}clear(){this.positions.clear()}cache(n){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),n.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:$N(t)})})}handleScroll(n){const t=kl(n),r=this.positions.get(t);if(!r)return null;const i=r.scrollPosition;let o,a;if(t===this._document){const _=this.getViewportScrollPosition();o=_.top,a=_.left}else o=t.scrollTop,a=t.scrollLeft;const c=i.top-o,p=i.left-a;return this.positions.forEach((_,x)=>{_.clientRect&&t!==x&&t.contains(x)&&yw(_.clientRect,c,p)}),i.top=o,i.left=a,{top:c,left:p}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function LG(e,n){const t=e.rootNodes;if(1===t.length&&t[0].nodeType===n.ELEMENT_NODE)return t[0];const r=n.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function GN(e,n,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];i?e.setProperty(r,i,t?.has(r)?"important":""):e.removeProperty(r)}return e}function Gy(e,n){const t=n?"":"none";GN(e.style,{"touch-action":n?"":"none","-webkit-user-drag":n?"":"none","-webkit-tap-highlight-color":n?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function FG(e,n,t){GN(e.style,{position:n?"":"fixed",top:n?"":"0",opacity:n?"":"0",left:n?"":"-999em"},t)}function QD(e,n){return n&&"none"!=n?e+" "+n:e}function BG(e,n){e.style.width=`${n.width}px`,e.style.height=`${n.height}px`,e.style.transform=vw(n.left,n.top)}function vw(e,n){return`translate3d(${Math.round(e)}px, ${Math.round(n)}px, 0)`}const bw={capture:!0},WN={passive:!1,capture:!0};let Uxe=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=vr({type:e,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(r,i){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}\n"],encapsulation:2,changeDetection:0})}return e})(),JD=(()=>{class e{_ngZone=Z(Jt);_document=Z(Un);_styleLoader=Z(cy);_renderer=Z(xl).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new K;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=cs([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new K;pointerUp=new K;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,WN)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._cleanupDocumentTouchmove?.()}startDragging(t,r){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(Uxe),this._activeDragInstances.update(i=>[...i,t]),1===this._activeDragInstances().length)){const i=r.type.startsWith("touch"),o=c=>this.pointerUp.next(c),a=[["scroll",c=>this._scroll.next(c),bw],["selectstart",this._preventDefaultWhileDragging,WN]];i?a.push(["touchend",o,bw],["touchcancel",o,bw]):a.push(["mouseup",o,bw]),i||a.push(["mousemove",c=>this.pointerMove.next(c),WN]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=a.map(([c,p,_])=>this._renderer.listen(this._document,c,p,_))})}}stopDragging(t){this._activeDragInstances.update(r=>{const i=r.indexOf(t);return i>-1?(r.splice(i,1),[...r]):r}),0===this._activeDragInstances().length&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){const r=[this._scroll];return t&&t!==this._document&&r.push(new U(i=>this._ngZone.runOutsideAngular(()=>{const o=this._renderer.listen(t,"scroll",a=>{this._activeDragInstances().length&&i.next(a)},bw);return()=>{o()}}))),m1(...r)}registerDirectiveNode(t,r){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,r)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function VG(e){const n=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*n}function ZN(e,n){return e.getPropertyValue(n).split(",").map(r=>r.trim())}const Hxe=new Set(["position"]);class $xe{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView=null;_preview;get element(){return this._preview}constructor(n,t,r,i,o,a,c,p,_,x){this._document=n,this._rootElement=t,this._direction=r,this._initialDomRect=i,this._previewTemplate=o,this._previewClass=a,this._pickupPositionOnPage=c,this._initialTransform=p,this._zIndex=_,this._renderer=x}attach(n){this._preview=this._createPreview(),n.appendChild(this._preview),zG(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(n){this._preview.style.transform=n}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(n){this._preview.classList.add(n)}getTransitionDuration(){return function jxe(e){const n=getComputedStyle(e),t=ZN(n,"transition-property"),r=t.find(c=>"transform"===c||"all"===c);if(!r)return 0;const i=t.indexOf(r),o=ZN(n,"transition-duration"),a=ZN(n,"transition-delay");return VG(o[i])+VG(a[i])}(this._preview)}addEventListener(n,t){return this._renderer.listen(this._preview,n,t)}_createPreview(){const n=this._previewTemplate,t=this._previewClass,r=n?n.template:null;let i;if(r&&n){const o=n.matchSize?this._initialDomRect:null,a=n.viewContainer.createEmbeddedView(r,n.context);a.detectChanges(),i=LG(a,this._document),this._previewEmbeddedView=a,n.matchSize?BG(i,o):i.style.transform=vw(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=HN(this._rootElement),BG(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return GN(i.style,{"pointer-events":"none",margin:zG(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},Hxe),Gy(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(o=>i.classList.add(o)):i.classList.add(t)),i}}function zG(e){return"showPopover"in e}const qxe={passive:!0},UG={passive:!1},Gxe={passive:!1,capture:!0},jG="cdk-drag-placeholder",HG=new Set(["position"]);function $G(e,n,t={dragStartThreshold:5,pointerDirectionChangeThreshold:5}){const r=e.get(ja,null,{optional:!0})||e.get(xl).createRenderer(null,null);return new Zxe(n,t,e.get(Un),e.get(Jt),e.get(hy),e.get(JD),r)}class Zxe{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview=null;_previewContainer;_placeholderRef=null;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=cs(!1);_hasMoved=!1;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new K;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement=null;_rootElementTapHighlight;_pointerMoveSubscription=Gn.EMPTY;_pointerUpSubscription=Gn.EMPTY;_scrollSubscription=Gn.EMPTY;_resizeSubscription=Gn.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef=null;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(n){n!==this._disabled&&(this._disabled=n,this._toggleNativeDragInteractions(),this._handles.forEach(t=>Gy(t,n)))}_disabled=!1;beforeStarted=new K;started=new K;released=new K;ended=new K;entered=new K;exited=new K;dropped=new K;moved=this._moveEvents;data;constrainPosition;constructor(n,t,r,i,o,a,c){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=o,this._dragDropRegistry=a,this._renderer=c,this.withRootElement(n).withParent(t.parentDragRef||null),this._parentPositions=new NG(r),a.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(n){this._handles=n.map(r=>Ka(r)),this._handles.forEach(r=>Gy(r,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(n){return this._previewTemplate=n,this}withPlaceholderTemplate(n){return this._placeholderTemplate=n,this}withRootElement(n){const t=Ka(n);if(t!==this._rootElement){this._removeRootElementListeners();const r=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[r.listen(t,"mousedown",this._pointerDown,UG),r.listen(t,"touchstart",this._pointerDown,qxe),r.listen(t,"dragstart",this._nativeDragStart,UG)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(n){return this._boundaryElement=n?Ka(n):null,this._resizeSubscription.unsubscribe(),n&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(n){return this._parentDragRef=n,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&function zxe(e,n){return n.left<e.left||n.left+n.width>e.right||n.top<e.top||n.top+n.height>e.bottom}(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){const n=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect();let r=0,i=0;t.left<n.left?r=n.left-t.left:t.right>n.right&&(r=n.right-t.right),t.top<n.top?i=n.top-t.top:t.bottom>n.bottom&&(i=n.bottom-t.bottom);let c=this._activeTransform.x+r,p=this._activeTransform.y+i;this._rootElement.style.transform=vw(c,p),this._activeTransform={x:c,y:p},this._passiveTransform={x:c,y:p}}}disableHandle(n){!this._disabledHandles.has(n)&&this._handles.indexOf(n)>-1&&(this._disabledHandles.add(n),Gy(n,!0))}enableHandle(n){this._disabledHandles.has(n)&&(this._disabledHandles.delete(n),Gy(n,this.disabled))}withDirection(n){return this._direction=n,this}_withDropContainer(n){this._dropContainer=n}getFreeDragPosition(){const n=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:n.x,y:n.y}}setFreeDragPosition(n){return this._activeTransform={x:0,y:0},this._passiveTransform.x=n.x,this._passiveTransform.y=n.y,this._dropContainer||this._applyRootElementTransform(n.x,n.y),this}withPreviewContainer(n){return this._previewContainer=n,this}_sortFromLastPointerPosition(){const n=this._lastKnownPointerPosition;n&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(n),n)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=n=>{if(this.beforeStarted.next(),this._handles.length){const t=this._getTargetHandle(n);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,n)}else this.disabled||this._initializeDragSequence(this._rootElement,n)};_pointerMove=n=>{const t=this._getPointerPositionOnPage(n);if(!this._hasStartedDragging()){if(Math.abs(t.x-this._pickupPositionOnPage.x)+Math.abs(t.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const c=Date.now()>=this._dragStartTime+this._getDragStartDelay(n),p=this._dropContainer;if(!c)return void this._endDragSequence(n);(!p||!p.isDragging()&&!p.isReceiving())&&(n.cancelable&&n.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(n)))}return}n.cancelable&&n.preventDefault();const r=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(r),this._dropContainer)this._updateActiveDropContainer(r,t);else{const i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=r.x-i.x+this._passiveTransform.x,o.y=r.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:r,event:n,distance:this._getDragDistance(r),delta:this._pointerDirectionDelta})})};_pointerUp=n=>{this._endDragSequence(n)};_endDragSequence(n){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging()))if(this.released.next({source:this,event:n}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(n),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(n);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:n})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(n){ww(n)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._getShadowRoot(),r=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",Kxe,Gxe)}),r){const i=this._rootElement,o=i.parentNode,a=this._placeholder=this._createPlaceholderElement(),c=this._marker=this._marker||this._document.createComment("");o.insertBefore(c,i),this._initialTransform=i.style.transform||"",this._preview=new $xe(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,t)),FG(i,!1,HG),this._document.body.appendChild(o.replaceChild(a,i)),this.started.next({source:this,event:n}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:n}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(n,t){this._parentDragRef&&t.stopPropagation();const r=this.isDragging(),i=ww(t),o=!i&&0!==t.button,a=this._rootElement,c=kl(t),p=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),_=i?jA(t):UA(t);if(c&&c.draggable&&"mousedown"===t.type&&t.preventDefault(),r||o||p||_)return;if(this._handles.length){const A=a.style;this._rootElementTapHighlight=A.webkitTapHighlightColor||"",A.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(A=>this._updateOnScroll(A)),this._boundaryElement&&(this._boundaryRect=$N(this._boundaryElement));const x=this._previewTemplate;this._pickupPositionInElement=x&&x.template&&!x.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,n,t);const D=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:D.x,y:D.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(n){FG(this._rootElement,!0,HG),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(n),o=this._getDragDistance(i),a=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:o,dropPoint:i,event:n}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:o,dropPoint:i,event:n}),t.drop(this,r,this._initialIndex,this._initialContainer,a,o,i,n),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:n,y:t},{x:r,y:i}){let o=this._initialContainer._getSiblingContainerFromPosition(this,n,t);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(n,t)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{const a=this._dropContainer.getItemIndex(this),c=this._dropContainer.getItemAtIndex(a+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(o,this._dropContainer,c),this._dropContainer=o,this._dropContainer.enter(this,n,t,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,n,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(n,t):this._applyPreviewTransform(n-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const n=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(n.left,n.top);const t=this._preview.getTransitionDuration();return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const i=c=>{(!c||this._preview&&kl(c)===this._preview.element&&"transform"===c.propertyName)&&(a(),r(),clearTimeout(o))},o=setTimeout(i,1.5*t),a=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const n=this._placeholderTemplate,t=n?n.template:null;let r;return t?(this._placeholderRef=n.viewContainer.createEmbeddedView(t,n.context),this._placeholderRef.detectChanges(),r=LG(this._placeholderRef,this._document)):r=HN(this._rootElement),r.style.pointerEvents="none",r.classList.add(jG),r}_getPointerPositionInElement(n,t,r){const i=t===this._rootElement?null:t,o=i?i.getBoundingClientRect():n,a=ww(r)?r.targetTouches[0]:r,c=this._getViewportScrollPosition();return{x:o.left-n.left+(a.pageX-o.left-c.left),y:o.top-n.top+(a.pageY-o.top-c.top)}}_getPointerPositionOnPage(n){const t=this._getViewportScrollPosition(),r=ww(n)?n.touches[0]||n.changedTouches[0]||{pageX:0,pageY:0}:n,i=r.pageX-t.left,o=r.pageY-t.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const c=this._ownerSVGElement.createSVGPoint();return c.x=i,c.y=o,c.matrixTransform(a.inverse())}}return{x:i,y:o}}_getConstrainedPointerPosition(n){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:i}=this.constrainPosition?this.constrainPosition(n,this,this._initialDomRect,this._pickupPositionInElement):n;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===t)&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:o,y:a}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,c=this._boundaryRect,{width:p,height:_}=this._getPreviewRect(),x=c.top+a,D=c.bottom-(_-a);r=qG(r,c.left+o,c.right-(p-o)),i=qG(i,x,D)}return{x:r,y:i}}_updatePointerDirectionDelta(n){const{x:t,y:r}=n,i=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,a=Math.abs(t-o.x),c=Math.abs(r-o.y);return a>this._config.pointerDirectionChangeThreshold&&(i.x=t>o.x?1:-1,o.x=t),c>this._config.pointerDirectionChangeThreshold&&(i.y=r>o.y?1:-1,o.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const n=this._handles.length>0||!this.isDragging();n!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=n,Gy(this._rootElement,n))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(n=>n()),this._rootElementCleanups=void 0}_applyRootElementTransform(n,t){const r=1/this.scale,i=vw(n*r,t*r),o=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=o.transform&&"none"!=o.transform?o.transform:""),o.transform=QD(i,this._initialTransform)}_applyPreviewTransform(n,t){const r=this._previewTemplate?.template?void 0:this._initialTransform,i=vw(n,t);this._preview.setTransform(QD(i,r))}_getDragDistance(n){const t=this._pickupPositionOnPage;return t?{x:n.x-t.x,y:n.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:n,y:t}=this._passiveTransform;if(0===n&&0===t||this.isDragging()||!this._boundaryElement)return;const r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===r.width&&0===r.height)return;const o=i.left-r.left,a=r.right-i.right,c=i.top-r.top,p=r.bottom-i.bottom;i.width>r.width?(o>0&&(n+=o),a>0&&(n-=a)):n=0,i.height>r.height?(c>0&&(t+=c),p>0&&(t-=p)):t=0,(n!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:n})}_getDragStartDelay(n){const t=this.dragStartDelay;return"number"==typeof t?t:ww(n)?t.touch:t?t.mouse:0}_updateOnScroll(n){const t=this._parentPositions.handleScroll(n);if(t){const r=kl(n);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&yw(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=QC(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(n,t){const r=this._previewContainer||"global";if("parent"===r)return n;if("global"===r){const i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return Ka(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=n=>{if(this._handles.length){const t=this._getTargetHandle(n);t&&!this._disabledHandles.has(t)&&!this.disabled&&n.preventDefault()}else this.disabled||n.preventDefault()};_getTargetHandle(n){return this._handles.find(t=>n.target&&(n.target===t||t.contains(n.target)))}_conditionallyInsertAnchor(n,t,r){if(n===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(t===this._initialContainer&&t.hasAnchor){const i=this._anchor??=HN(this._placeholder);i.classList.remove(jG),i.classList.add("cdk-drag-anchor"),i.style.transform="",r?r.before(i):Ka(t.element).appendChild(i)}}}function qG(e,n,t){return Math.max(n,Math.min(t,e))}function ww(e){return"t"===e.type[0]}function Kxe(e){e.preventDefault()}function KN(e,n,t){const r=xw(n,e.length-1),i=xw(t,e.length-1);if(r===i)return;const o=e[r],a=i<r?-1:1;for(let c=r;c!==i;c+=a)e[c]=e[c+a];e[i]=o}function xw(e,n){return Math.max(0,Math.min(n,e))}class GG{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction="ltr";constructor(n){this._dragDropRegistry=n}_previousSwap={drag:null,delta:0,overlaps:!1};start(n){this.withItems(n)}sort(n,t,r,i){const o=this._itemPositions,a=this._getItemIndexFromPointerPosition(n,t,r,i);if(-1===a&&o.length>0)return null;const c="horizontal"===this.orientation,p=o.findIndex(oe=>oe.drag===n),_=o[a],D=_.clientRect,A=p>a?1:-1,O=this._getItemOffsetPx(o[p].clientRect,D,A),B=this._getSiblingOffsetPx(p,o,A),Q=o.slice();return KN(o,p,a),o.forEach((oe,be)=>{if(Q[be]===oe)return;const xe=oe.drag===n,$e=xe?O:B,De=xe?n.getPlaceholderElement():oe.drag.getRootElement();oe.offset+=$e;const we=Math.round(oe.offset*(1/oe.drag.scale));c?(De.style.transform=QD(`translate3d(${we}px, 0, 0)`,oe.initialTransform),yw(oe.clientRect,0,$e)):(De.style.transform=QD(`translate3d(0, ${we}px, 0)`,oe.initialTransform),yw(oe.clientRect,$e,0))}),this._previousSwap.overlaps=qN(D,t,r),this._previousSwap.drag=_.drag,this._previousSwap.delta=c?i.x:i.y,{previousIndex:p,currentIndex:a}}enter(n,t,r,i){const o=null==i||i<0?this._getItemIndexFromPointerPosition(n,t,r):i,a=this._activeDraggables,c=a.indexOf(n),p=n.getPlaceholderElement();let _=a[o];if(_===n&&(_=a[o+1]),!_&&(null==o||-1===o||o<a.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(_=a[0]),c>-1&&a.splice(c,1),_&&!this._dragDropRegistry.isDragging(_)){const x=_.getRootElement();x.parentElement.insertBefore(p,x),a.splice(o,0,n)}else this._element.appendChild(p),a.push(n);p.style.transform="",this._cacheItemPositions()}withItems(n){this._activeDraggables=n.slice(),this._cacheItemPositions()}withSortPredicate(n){this._sortPredicate=n}reset(){this._activeDraggables?.forEach(n=>{const t=n.getRootElement();if(t){const r=this._itemPositions.find(i=>i.drag===n)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(n){return this._getVisualItemPositions().findIndex(t=>t.drag===n)}getItemAtIndex(n){return this._getVisualItemPositions()[n]?.drag||null}updateOnScroll(n,t){this._itemPositions.forEach(({clientRect:r})=>{yw(r,n,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(n){this._element=n}_cacheItemPositions(){const n="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:$N(r)}}).sort((t,r)=>n?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getVisualItemPositions(){return"horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(n,t,r){const i="horizontal"===this.orientation;let o=i?t.left-n.left:t.top-n.top;return-1===r&&(o+=i?t.width-n.width:t.height-n.height),o}_getSiblingOffsetPx(n,t,r){const i="horizontal"===this.orientation,o=t[n].clientRect,a=t[n+-1*r];let c=o[i?"width":"height"]*r;if(a){const p=i?"left":"top",_=i?"right":"bottom";-1===r?c-=a.clientRect[p]-o[_]:c+=o[p]-a.clientRect[_]}return c}_shouldEnterAsFirstChild(n,t){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,i="horizontal"===this.orientation;if(r[0].drag!==this._activeDraggables[0]){const a=r[r.length-1].clientRect;return i?n>=a.right:t>=a.bottom}{const a=r[0].clientRect;return i?n<=a.left:t<=a.top}}_getItemIndexFromPointerPosition(n,t,r,i){const o="horizontal"===this.orientation,a=this._itemPositions.findIndex(({drag:c,clientRect:p})=>c!==n&&((!i||c!==this._previousSwap.drag||!this._previousSwap.overlaps||(o?i.x:i.y)!==this._previousSwap.delta)&&(o?t>=Math.floor(p.left)&&t<Math.floor(p.right):r>=Math.floor(p.top)&&r<Math.floor(p.bottom))));return-1!==a&&this._sortPredicate(a,n)?a:-1}}class Yxe{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(n,t){this._document=n,this._dragDropRegistry=t}start(n){const t=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<t.length;r++){const i=t[r];this._relatedNodes.push([i,i.nextSibling])}this.withItems(n)}sort(n,t,r,i){const o=this._getItemIndexFromPointerPosition(n,t,r),a=this._previousSwap;if(-1===o||this._activeItems[o]===n)return null;const c=this._activeItems[o];if(a.drag===c&&a.overlaps&&a.deltaX===i.x&&a.deltaY===i.y)return null;const p=this.getItemIndex(n),_=n.getPlaceholderElement(),x=c.getRootElement();o>p?x.after(_):x.before(_),KN(this._activeItems,p,o);const D=this._getRootNode().elementFromPoint(t,r);return a.deltaX=i.x,a.deltaY=i.y,a.drag=c,a.overlaps=x===D||x.contains(D),{previousIndex:p,currentIndex:o}}enter(n,t,r,i){const o=this._activeItems.indexOf(n);o>-1&&this._activeItems.splice(o,1);let a=null==i||i<0?this._getItemIndexFromPointerPosition(n,t,r):i;-1===a&&(a=this._getClosestItemIndexToPointer(n,t,r));const c=this._activeItems[a];c&&!this._dragDropRegistry.isDragging(c)?(this._activeItems.splice(a,0,n),c.getRootElement().before(n.getPlaceholderElement())):(this._activeItems.push(n),this._element.appendChild(n.getPlaceholderElement()))}withItems(n){this._activeItems=n.slice()}withSortPredicate(n){this._sortPredicate=n}reset(){const n=this._element,t=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){const[i,o]=this._relatedNodes[r];i.parentNode===n&&i.nextSibling!==o&&(null===o?n.appendChild(i):o.parentNode===n&&n.insertBefore(i,o))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(n){return this._activeItems.indexOf(n)}getItemAtIndex(n){return this._activeItems[n]||null}updateOnScroll(){this._activeItems.forEach(n=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}withElementContainer(n){n!==this._element&&(this._element=n,this._rootNode=void 0)}_getItemIndexFromPointerPosition(n,t,r){const i=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(r)),o=i?this._activeItems.findIndex(a=>{const c=a.getRootElement();return i===c||c.contains(i)}):-1;return-1!==o&&this._sortPredicate(o,n)?o:-1}_getRootNode(){return this._rootNode||(this._rootNode=QC(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(n,t,r){if(0===this._activeItems.length)return-1;if(1===this._activeItems.length)return 0;let i=1/0,o=-1;for(let a=0;a<this._activeItems.length;a++){const c=this._activeItems[a];if(c!==n){const{x:p,y:_}=c.getRootElement().getBoundingClientRect(),x=Math.hypot(t-p,r-_);x<i&&(i=x,o=a)}}return o}}var Ic=function(e){return e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e}(Ic||{}),ya=function(e){return e[e.NONE=0]="NONE",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e}(ya||{});function KG(e,n){return new Xxe(n,e.get(JD),e.get(Un),e.get(Jt),e.get(hy))}class Xxe{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new K;entered=new K;exited=new K;dropped=new K;sorted=new K;receivingStarted=new K;receivingStopped=new K;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=Gn.EMPTY;_verticalScrollDirection=Ic.NONE;_horizontalScrollDirection=ya.NONE;_scrollNode;_stopScrollTimers=new K;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(n,t,r,i,o){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=o;const a=this.element=Ka(n);this._document=r,this.withOrientation("vertical").withElementContainer(a),t.registerDropContainer(this),this._parentPositions=new NG(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(n,t,r,i){this._draggingStarted(),null==i&&this.sortingDisabled&&(i=this._draggables.indexOf(n)),this._sortStrategy.enter(n,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:n,container:this,currentIndex:this.getItemIndex(n)})}exit(n){this._reset(),this.exited.next({item:n,container:this})}drop(n,t,r,i,o,a,c,p={}){this._reset(),this.dropped.next({item:n,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:o,distance:a,dropPoint:c,event:p})}withItems(n){const t=this._draggables;return this._draggables=n,n.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>-1===n.indexOf(i))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(n){return this._direction=n,this._sortStrategy instanceof GG&&(this._sortStrategy.direction=n),this}connectedTo(n){return this._siblings=n.slice(),this}withOrientation(n){if("mixed"===n)this._sortStrategy=new Yxe(this._document,this._dragDropRegistry);else{const t=new GG(this._dragDropRegistry);t.direction=this._direction,t.orientation=n,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,r)=>this.sortPredicate(t,r,this)),this}withScrollableParents(n){const t=this._container;return this._scrollableElements=-1===n.indexOf(t)?[t,...n]:n.slice(),this}withElementContainer(n){if(n===this._container)return this;Ka(this.element);const r=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(n);return r>-1&&this._scrollableElements.splice(r,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(n),this._cachedShadowRoot=null,this._scrollableElements.unshift(n),this._container=n,this}getScrollableParents(){return this._scrollableElements}getItemIndex(n){return this._isDragging?this._sortStrategy.getItemIndex(n):this._draggables.indexOf(n)}getItemAtIndex(n){return this._isDragging?this._sortStrategy.getItemAtIndex(n):this._draggables[n]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(n,t,r,i){if(this.sortingDisabled||!this._domRect||!OG(this._domRect,.05,t,r))return;const o=this._sortStrategy.sort(n,t,r,i);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:n})}_startScrollingIfNecessary(n,t){if(this.autoScrollDisabled)return;let r,i=Ic.NONE,o=ya.NONE;if(this._parentPositions.positions.forEach((a,c)=>{c===this._document||!a.clientRect||r||OG(a.clientRect,.05,n,t)&&([i,o]=function Qxe(e,n,t,r,i){const o=YG(n,i),a=XG(n,r);let c=Ic.NONE,p=ya.NONE;if(o){const _=e.scrollTop;o===Ic.UP?_>0&&(c=Ic.UP):e.scrollHeight-_>e.clientHeight&&(c=Ic.DOWN)}if(a){const _=e.scrollLeft;"rtl"===t?a===ya.RIGHT?_<0&&(p=ya.RIGHT):e.scrollWidth+_>e.clientWidth&&(p=ya.LEFT):a===ya.LEFT?_>0&&(p=ya.LEFT):e.scrollWidth-_>e.clientWidth&&(p=ya.RIGHT)}return[c,p]}(c,a.clientRect,this._direction,n,t),(i||o)&&(r=c))}),!i&&!o){const{width:a,height:c}=this._viewportRuler.getViewportSize(),p={width:a,height:c,top:0,right:a,bottom:c,left:0};i=YG(p,t),o=XG(p,n),r=window}r&&(i!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=o,this._scrollNode=r,(i||o)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const n=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=n.msScrollSnapType||n.scrollSnapType||"",n.scrollSnapType=n.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;const n=this._container.style;n.scrollSnapType=n.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),function Bxe(e=0,n=XA){return e<0&&(e=0),I5(e,e,n)}(0,T5).pipe(ad(this._stopScrollTimers)).subscribe(()=>{const n=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===Ic.UP?n.scrollBy(0,-t):this._verticalScrollDirection===Ic.DOWN&&n.scrollBy(0,t),this._horizontalScrollDirection===ya.LEFT?n.scrollBy(-t,0):this._horizontalScrollDirection===ya.RIGHT&&n.scrollBy(t,0)})};_isOverContainer(n,t){return null!=this._domRect&&qN(this._domRect,n,t)}_getSiblingContainerFromPosition(n,t,r){return this._siblings.find(i=>i._canReceive(n,t,r))}_canReceive(n,t,r){if(!this._domRect||!qN(this._domRect,t,r)||!this.enterPredicate(n,this))return!1;const i=this._getShadowRoot().elementFromPoint(t,r);return!!i&&(i===this._container||this._container.contains(i))}_startReceiving(n,t){const r=this._activeSiblings;!r.has(n)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(n),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:n,receiver:this,items:t}))}_stopReceiving(n){this._activeSiblings.delete(n),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:n,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(n=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(n);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const n=QC(this._container);this._cachedShadowRoot=n||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const n=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,n))}}function YG(e,n){const{top:t,bottom:r,height:i}=e,o=.05*i;return n>=t-o&&n<=t+o?Ic.UP:n>=r-o&&n<=r+o?Ic.DOWN:Ic.NONE}function XG(e,n){const{left:t,right:r,width:i}=e,o=.05*i;return n>=t-o&&n<=t+o?ya.LEFT:n>=r-o&&n<=r+o?ya.RIGHT:ya.NONE}let Jxe=(()=>{class e{_injector=Z(Tn);constructor(){}createDrag(t,r){return $G(this._injector,t,r)}createDropList(t){return KG(this._injector,t)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Ew=new Le("CDK_DRAG_PARENT"),QG=new Le("CdkDragHandle"),JG=new Le("CDK_DRAG_CONFIG"),eW=new Le("CdkDropList");let tW=(()=>{class e{element=Z(Pr);dropContainer=Z(eW,{optional:!0,skipSelf:!0});_ngZone=Z(Jt);_viewContainerRef=Z(El);_dir=Z(dy,{optional:!0});_changeDetectorRef=Z(vh);_selfHandle=Z(QG,{optional:!0,self:!0});_parentDrag=Z(Ew,{optional:!0,skipSelf:!0});_dragDropRegistry=Z(JD);_destroyed=new K;_handles=new re([]);_previewTemplate=null;_placeholderTemplate=null;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!(!this.dropContainer||!this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled=!1;constrainPosition;previewClass;previewContainer;scale=1;started=new jn;released=new jn;ended=new jn;entered=new jn;exited=new jn;dropped=new jn;moved=new U(t=>{const r=this._dragRef.moved.pipe(cr(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(t);return()=>{r.unsubscribe()}});_injector=Z(Tn);constructor(){const t=this.dropContainer,r=Z(JG,{optional:!0});this._dragRef=$G(this._injector,this.element,{dragStartThreshold:r&&null!=r.dragStartThreshold?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&null!=r.pointerDirectionChangeThreshold?r.pointerDirectionChangeThreshold:5,zIndex:r?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),r&&this._assignDefaults(r),t&&(t.addItem(this),t._dropListRef.beforeStarted.pipe(ad(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){ru(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){const r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){const r=this._handles.getValue();r.push(t),this._handles.next(r)}_removeHandle(t){const r=this._handles.getValue(),i=r.indexOf(t);i>-1&&(r.splice(i,1),this._handles.next(r))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){const t=this.element.nativeElement;let r=t;this.rootElementSelector&&(r=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):Ka(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const r=this._dir,i=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay="object"==typeof i&&i?i:JC(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(Os(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let r=this.element.nativeElement.parentElement;for(;r;){const i=this._dragDropRegistry.getDragDirectiveForNode(r);if(i){t.withParent(i._dragRef);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){const{lockAxis:r,dragStartDelay:i,constrainPosition:o,previewClass:a,boundaryElement:c,draggingDisabled:p,rootElementSelector:_,previewContainer:x}=t;this.disabled=p??!1,this.dragStartDelay=i||0,this.lockAxis=r||null,o&&(this.constrainPosition=o),a&&(this.previewClass=a),c&&(this.boundaryElement=c),_&&(this.rootElementSelector=_),x&&(this.previewContainer=x)}_setupHandlesListener(){this._handles.pipe(Dh(t=>{const r=t.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),Wa(t=>m1(...t.map(r=>r._stateChanges.pipe(ny(r))))),ad(this._destroyed)).subscribe(t=>{const r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static \u0275fac=function(r){return new(r||e)};static \u0275dir=At({type:e,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){2&r&&Dl("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",hs],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",CU]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Cr([{provide:Ew,useExisting:e}]),Mo]})}return e})();const YN=new Le("CdkDropListGroup");let nW=(()=>{class e{_items=new Set;disabled=!1;ngOnDestroy(){this._items.clear()}static \u0275fac=function(r){return new(r||e)};static \u0275dir=At({type:e,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:[2,"cdkDropListGroupDisabled","disabled",hs]},exportAs:["cdkDropListGroup"],features:[Cr([{provide:YN,useExisting:e}])]})}return e})(),rW=(()=>{class e{element=Z(Pr);_changeDetectorRef=Z(vh);_scrollDispatcher=Z(h1);_dir=Z(dy,{optional:!0});_group=Z(YN,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new K;_scrollableParentsResolved=!1;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation="vertical";id=Z(du).getId("cdk-drop-list-");lockAxis=null;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=t}_disabled=!1;sortingDisabled=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled=!1;autoScrollStep;elementContainerSelector=null;hasAnchor=!1;dropped=new jn;entered=new jn;exited=new jn;sorted=new jn;_unsortedItems=new Set;constructor(){const t=Z(JG,{optional:!0}),r=Z(Tn);this._dropListRef=KG(r,this.element),this._dropListRef.data=this,t&&this._assignDefaults(t),this._dropListRef.enterPredicate=(i,o)=>this.enterPredicate(i.data,o.data),this._dropListRef.sortPredicate=(i,o,a)=>this.sortPredicate(i,o.data,a.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(t){this._unsortedItems.add(t),t._dragRef._withDropContainer(this._dropListRef),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef))}removeItem(t){if(this._unsortedItems.delete(t),this._latestSortedRefs){const r=this._latestSortedRefs.indexOf(t._dragRef);r>-1&&(this._latestSortedRefs.splice(r,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((t,r)=>t._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=e._dropLists.indexOf(this);t>-1&&e._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(ny(this._dir.value),ad(this._destroyed)).subscribe(r=>t.withDirection(r)),t.beforeStarted.subscribe(()=>{const r=n0(this.connectedTo).map(i=>"string"==typeof i?e._dropLists.find(a=>a.id===i):i);if(this._group&&this._group._items.forEach(i=>{-1===r.indexOf(i)&&r.push(i)}),!this._scrollableParentsResolved){const i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){const i=this.element.nativeElement.querySelector(this.elementContainerSelector);t.withElementContainer(i)}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=this.sortingDisabled,t.autoScrollDisabled=this.autoScrollDisabled,t.autoScrollStep=JC(this.autoScrollStep,2),t.hasAnchor=this.hasAnchor,t.connectedTo(r.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef)),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),m1(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){const{lockAxis:r,draggingDisabled:i,sortingDisabled:o,listAutoScrollDisabled:a,listOrientation:c}=t;this.disabled=i??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=a??!1,this.orientation=c||"vertical",this.lockAxis=r||null}_syncItemsWithRef(t){this._latestSortedRefs=t,this._dropListRef.withItems(t)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=At({type:e,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(r,i){2&r&&(Ws("id",i.id),Dl("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",hs],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",hs],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",hs],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"],hasAnchor:[2,"cdkDropListHasAnchor","hasAnchor",hs]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[Cr([{provide:YN,useValue:void 0},{provide:eW,useExisting:e}])]})}return e})(),iEe=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=wo({type:e});static \u0275inj=Lr({providers:[Jxe],imports:[oR]})}return e})(),oEe=(()=>{class e{constructor(t){this.tasksService=t}transferTask(t,r,i,o){const a={...r,statut:o};this.tasksService.updateTaskStatus(a),t.splice(t.indexOf(r),1),i.push(a)}static{this.\u0275fac=function(r){return new(r||e)(wt(qy))}}static{this.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function sEe(e,n){if(1&e&&rn(0,"img",23),2&e){const t=Qe().$implicit;Bn("src",Qe().userAvatars[t.name],bl)}}function aEe(e,n){if(1&e){const t=Hr();ce(0,"div",10)(1,"div",19),Nt("click",function(){const i=Bt(t).$implicit;return cn(Qe().onEdit(i.id))}),ce(2,"span",20),fe(3),he(),ce(4,"h4",21),fe(5),he(),ce(6,"div",22),mn(7,sEe,1,1,"img",23),ce(8,"span",24),fe(9),he()()()()}if(2&e){const t=n.$implicit,r=Qe();Te(2),Bn("ngClass",r.getUrgencyClass(t.urg)),Te(),on(t.urg),Te(2),on(t.title),Te(2),gn(r.userAvatars[t.name]?7:-1),Te(2),on(t.name)}}function lEe(e,n){if(1&e&&rn(0,"img",23),2&e){const t=Qe().$implicit;Bn("src",Qe().userAvatars[t.name],bl)}}function cEe(e,n){if(1&e){const t=Hr();ce(0,"div",10)(1,"div",25),Nt("click",function(){const i=Bt(t).$implicit;return cn(Qe().onEdit(i.id))}),ce(2,"span",20),fe(3),he(),ce(4,"h4",21),fe(5),he(),ce(6,"div",22),mn(7,lEe,1,1,"img",23),ce(8,"span",24),fe(9),he()()()()}if(2&e){const t=n.$implicit,r=Qe();Te(2),Bn("ngClass",r.getUrgencyClass(t.urg)),Te(),on(t.urg),Te(2),on(t.title),Te(2),gn(r.userAvatars[t.name]?7:-1),Te(2),on(t.name)}}function uEe(e,n){if(1&e&&rn(0,"img",23),2&e){const t=Qe().$implicit;Bn("src",Qe().userAvatars[t.name],bl)}}function dEe(e,n){if(1&e){const t=Hr();ce(0,"div",10)(1,"div",26),Nt("click",function(){const i=Bt(t).$implicit;return cn(Qe().onEdit(i.id))}),ce(2,"span",20),fe(3),he(),ce(4,"h4",21),fe(5),he(),ce(6,"div",22),mn(7,uEe,1,1,"img",23),ce(8,"span",24),fe(9),he()()()()}if(2&e){const t=n.$implicit,r=Qe();Te(2),Bn("ngClass",r.getUrgencyClass(t.urg)),Te(),on(t.urg),Te(2),on(t.title),Te(2),gn(r.userAvatars[t.name]?7:-1),Te(2),on(t.name)}}function hEe(e,n){if(1&e&&rn(0,"img",23),2&e){const t=Qe().$implicit;Bn("src",Qe().userAvatars[t.name],bl)}}function fEe(e,n){if(1&e){const t=Hr();ce(0,"div",10)(1,"div",27),Nt("click",function(){const i=Bt(t).$implicit;return cn(Qe().onEdit(i.id))}),ce(2,"span",20),fe(3),he(),ce(4,"h4",21),fe(5),he(),ce(6,"div",22),mn(7,hEe,1,1,"img",23),ce(8,"span",24),fe(9),he()()()()}if(2&e){const t=n.$implicit,r=Qe();Te(2),Bn("ngClass",r.getUrgencyClass(t.urg)),Te(),on(t.urg),Te(2),on(t.title),Te(2),gn(r.userAvatars[t.name]?7:-1),Te(2),on(t.name)}}function pEe(e,n){if(1&e&&rn(0,"img",23),2&e){const t=Qe().$implicit;Bn("src",Qe().userAvatars[t.name],bl)}}function mEe(e,n){if(1&e){const t=Hr();ce(0,"div",10)(1,"div",28),Nt("click",function(){const i=Bt(t).$implicit;return cn(Qe().onEdit(i.id))}),ce(2,"span",20),fe(3),he(),ce(4,"h4",21),fe(5),he(),ce(6,"div",22),mn(7,pEe,1,1,"img",23),ce(8,"span",24),fe(9),he()()()()}if(2&e){const t=n.$implicit,r=Qe();Te(2),Bn("ngClass",r.getUrgencyClass(t.urg)),Te(),on(t.urg),Te(2),on(t.title),Te(2),gn(r.userAvatars[t.name]?7:-1),Te(2),on(t.name)}}let gEe=(()=>{class e{constructor(t,r,i,o,a){this.ts=t,this.dialog=r,this.router=i,this.kanbanService=o,this.authService=a,this.tasks=[],this.userAvatars={},this.new=[],this.en_cours=[],this.fait=[],this.bloquer=[],this.archiver=[]}ngOnInit(){this.tasksSubsription=this.ts.tasksSubject.subscribe(t=>{this.tasks=t,this.new=t.filter(r=>"Nouveau"===r.statut),this.en_cours=t.filter(r=>"En cours"===r.statut),this.fait=t.filter(r=>"Fait"===r.statut),this.bloquer=t.filter(r=>"Bloque"===r.statut),this.archiver=t.filter(r=>"Archive"===r.statut)}),this.ts.getTasks(),this.ts.emitTasks(),this.authService.getAllUsers().then(t=>{t.forEach(r=>{r.displayName&&r.photoURL&&(this.userAvatars[r.displayName]=r.photoURL)})})}drop(t){if(t.previousContainer===t.container)KN(t.container.data,t.previousIndex,t.currentIndex);else{const r=t.previousContainer.data[t.previousIndex],i=this.getStatusFromContainer(t.container.id);this.kanbanService.transferTask(t.previousContainer.data,r,t.container.data,i)}}getStatusFromContainer(t){switch(t){case"newContainer":default:return"Nouveau";case"inProgressContainer":return"En cours";case"doneContainer":return"Fait";case"bloqueContainer":return"Bloque";case"archiveContainer":return"Archive"}}getUrgencyClass(t){switch(t){case"Urgent":return"flex h-6 items-center rounded-full bg-red-100 px-3 text-xs font-semibold text-red-600";case"Relativement urgent":return"flex h-6 items-center rounded-full bg-yellow-100 px-3 text-xs font-semibold text-yellow-600";case"Pas urgent":return"flex h-6 items-center rounded-full bg-green-100 px-3 text-xs font-semibold text-green-600";default:return"flex h-6 items-center rounded-full bg-gray-100 px-3 text-xs font-semibold text-gray-600"}}onEdit(t){this.router.navigate(["/task/edit",t])}ngOnDestroy(){this.tasksSubsription&&this.tasksSubsription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)(Re(qy),Re(sp),Re(Ns),Re(oEe),Re(xd))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-kanban"]],decls:50,vars:10,consts:[["cdkDropListGroup","",1,"flex","flex-col"],[1,"flex","flex-grow","space-x-4","overflow-x-auto","pb-4"],[1,"flex","w-64","flex-shrink-0","flex-col"],[1,"flex","items-center","px-2","mb-3"],[1,"font-display","font-bold","text-gray-700"],[1,"ml-2","flex","h-5","w-5","items-center","justify-center","rounded-full","bg-family-sky/20","text-xs","font-bold","text-family-sky"],["routerLink","/add-task",1,"ml-auto","text-family-pink","hover:text-family-coral","transition-colors"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v12m6-6H6"],["id","newContainer","cdkDropList","",1,"flex-1","space-y-3","min-h-[60px]",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag",""],[1,"ml-2","flex","h-5","w-5","items-center","justify-center","rounded-full","bg-family-orange/20","text-xs","font-bold","text-family-orange"],["id","inProgressContainer","cdkDropList","",1,"flex-1","space-y-3","min-h-[60px]",3,"cdkDropListDropped","cdkDropListData"],[1,"ml-2","flex","h-5","w-5","items-center","justify-center","rounded-full","bg-family-green/20","text-xs","font-bold","text-family-green"],["id","doneContainer","cdkDropList","",1,"flex-1","space-y-3","min-h-[60px]",3,"cdkDropListDropped","cdkDropListData"],[1,"ml-2","flex","h-5","w-5","items-center","justify-center","rounded-full","bg-red-100","text-xs","font-bold","text-red-500"],["id","bloqueContainer","cdkDropList","",1,"flex-1","space-y-3","min-h-[60px]",3,"cdkDropListDropped","cdkDropListData"],[1,"ml-2","flex","h-5","w-5","items-center","justify-center","rounded-full","bg-family-purple/20","text-xs","font-bold","text-family-purple"],["id","archiveContainer","cdkDropList","",1,"flex-1","space-y-3","min-h-[60px]",3,"cdkDropListDropped","cdkDropListData"],[1,"card-fun","p-4","cursor-pointer","border-l-4","border-family-sky","hover:shadow-card-hover","transition-shadow",3,"click"],[3,"ngClass"],[1,"mt-2","text-sm","font-semibold","text-gray-700"],[1,"flex","items-center","gap-1.5","mt-1"],[1,"w-5","h-5","rounded-full","object-cover",3,"src"],[1,"text-xs","text-gray-400"],[1,"card-fun","p-4","cursor-pointer","border-l-4","border-family-orange","hover:shadow-card-hover","transition-shadow",3,"click"],[1,"card-fun","p-4","cursor-pointer","border-l-4","border-family-green","hover:shadow-card-hover","transition-shadow",3,"click"],[1,"card-fun","p-4","cursor-pointer","border-l-4","border-red-400","hover:shadow-card-hover","transition-shadow",3,"click"],[1,"card-fun","p-4","cursor-pointer","border-l-4","border-family-purple","hover:shadow-card-hover","transition-shadow",3,"click"]],template:function(r,i){1&r&&(ce(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),fe(5,"\u{1f195} Nouveau"),he(),ce(6,"span",5),fe(7),he(),ce(8,"button",6),ls(),ce(9,"svg",7),rn(10,"path",8),he()()(),Hp(),ce(11,"div",9),Nt("cdkDropListDropped",function(a){return i.drop(a)}),ki(12,aEe,10,5,"div",10,iu),he()(),ce(14,"div",2)(15,"div",3)(16,"span",4),fe(17,"\u{1f504} En cours"),he(),ce(18,"span",11),fe(19),he()(),ce(20,"div",12),Nt("cdkDropListDropped",function(a){return i.drop(a)}),ki(21,cEe,10,5,"div",10,iu),he()(),ce(23,"div",2)(24,"div",3)(25,"span",4),fe(26,"\u2705 Fait"),he(),ce(27,"span",13),fe(28),he()(),ce(29,"div",14),Nt("cdkDropListDropped",function(a){return i.drop(a)}),ki(30,dEe,10,5,"div",10,iu),he()(),ce(32,"div",2)(33,"div",3)(34,"span",4),fe(35,"\u{1f6ab} Bloque"),he(),ce(36,"span",15),fe(37),he()(),ce(38,"div",16),Nt("cdkDropListDropped",function(a){return i.drop(a)}),ki(39,fEe,10,5,"div",10,iu),he()(),ce(41,"div",2)(42,"div",3)(43,"span",4),fe(44,"\u{1f4e6} Archive"),he(),ce(45,"span",17),fe(46),he()(),ce(47,"div",18),Nt("cdkDropListDropped",function(a){return i.drop(a)}),ki(48,mEe,10,5,"div",10,iu),he()()()()),2&r&&(Te(7),on(i.new.length||0),Te(4),Bn("cdkDropListData",i.new),Te(),Ai(i.new),Te(7),on(i.en_cours.length),Te(),Bn("cdkDropListData",i.en_cours),Te(),Ai(i.en_cours),Te(7),on(i.fait.length),Te(),Bn("cdkDropListData",i.fait),Te(),Ai(i.fait),Te(7),on(i.bloquer.length),Te(),Bn("cdkDropListData",i.bloquer),Te(),Ai(i.bloquer),Te(7),on(i.archiver.length),Te(),Bn("cdkDropListData",i.archiver),Te(),Ai(i.archiver))},dependencies:[ey,Z3,iEe,rW,nW,tW,Kb,np],styles:[".drop-container[_ngcontent-%COMP%]{min-height:100vh;border:1px dashed #ccc}"]})}}return e})(),_Ee=(()=>{class e{constructor(t,r,i){this.ts=t,this.dialog=r,this.router=i,this.tasks=[],this.listeUrgence=["aucune","urgent","relative","pas urgent"]}getCouleurUrgence(t){return"Pas urgent"===t?"green":"Urgent"===t?"red":"Relativement urgent"===t?"orange":"white"}ngOnInit(){this.tasksSubsription=this.ts.tasksSubject.subscribe(t=>{this.tasks=t,console.log(t)}),this.ts.getTasks(),this.ts.emitTasks()}ngOnDestroy(){this.tasksSubsription&&this.tasksSubsription.unsubscribe()}onEdit(t){this.router.navigate(["/task/edit",t])}static{this.\u0275fac=function(r){return new(r||e)(Re(qy),Re(sp),Re(Ns))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-home"]],decls:40,vars:0,consts:[[1,"card-fun","bg-gradient-to-r","from-family-pink","via-family-coral","to-family-orange","p-6","mb-6","text-white"],[1,"font-display","text-2xl","font-bold"],[1,"mt-1","opacity-90"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4","mb-6"],["routerLink","/photo",1,"card-fun","p-4","text-center","hover:shadow-card-hover","transition-shadow","cursor-pointer"],[1,"text-3xl","mb-2"],[1,"font-display","font-semibold","text-gray-700","text-sm"],["routerLink","/add-task",1,"card-fun","p-4","text-center","hover:shadow-card-hover","transition-shadow","cursor-pointer"],["routerLink","/shopping",1,"card-fun","p-4","text-center","hover:shadow-card-hover","transition-shadow","cursor-pointer"],["routerLink","/map",1,"card-fun","p-4","text-center","hover:shadow-card-hover","transition-shadow","cursor-pointer"],["routerLink","/calendar",1,"card-fun","p-4","text-center","hover:shadow-card-hover","transition-shadow","cursor-pointer"],["routerLink","/documents",1,"card-fun","p-4","text-center","hover:shadow-card-hover","transition-shadow","cursor-pointer"],[1,"card-fun","p-4"],[1,"font-display","text-lg","font-bold","text-gray-700","mb-4"]],template:function(r,i){1&r&&(ce(0,"div",0)(1,"h1",1),fe(2,"Bonjour la famille ! \u{1f44b}"),he(),ce(3,"p",2),fe(4,"Bienvenue sur votre espace famille"),he()(),ce(5,"div",3)(6,"a",4)(7,"div",5),fe(8,"\u{1f4f8}"),he(),ce(9,"div",6),fe(10,"Photos"),he()(),ce(11,"a",7)(12,"div",5),fe(13,"\u270f\ufe0f"),he(),ce(14,"div",6),fe(15,"Nouvelle tache"),he()(),ce(16,"a",8)(17,"div",5),fe(18,"\u{1f6d2}"),he(),ce(19,"div",6),fe(20,"Courses"),he()(),ce(21,"a",9)(22,"div",5),fe(23,"\u{1f5fa}\ufe0f"),he(),ce(24,"div",6),fe(25,"Carte"),he()(),ce(26,"a",10)(27,"div",5),fe(28,"\u{1f4c5}"),he(),ce(29,"div",6),fe(30,"Calendrier"),he()(),ce(31,"a",11)(32,"div",5),fe(33,"\u{1f4c1}"),he(),ce(34,"div",6),fe(35,"Documents"),he()()(),ce(36,"div",12)(37,"h2",13),fe(38,"\u{1f4cb} Tableau des taches"),he(),rn(39,"app-kanban"),he())},dependencies:[gEe,Kb,np],styles:[".card[_ngcontent-%COMP%]{box-sizing:border-box;width:300px;margin:20px auto;padding:10px 30px}h1[_ngcontent-%COMP%]{margin:10px}.close-button[_ngcontent-%COMP%], .edit-button[_ngcontent-%COMP%]{float:right;top:-14px;right:-30px}"]})}}return e})();var eT=Sd(197),XN=Sd.n(eT);function QN(e,n,t,r){return new(t||(t=Promise))(function(o,a){function c(x){try{_(r.next(x))}catch(D){a(D)}}function p(x){try{_(r.throw(x))}catch(D){a(D)}}function _(x){x.done?o(x.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(x.value).then(c,p)}_((r=r.apply(e,n||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;var JN,iW,tT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nT(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function oW(){if(iW)return JN;iW=1,JN=function n(){for(var t={},r=0;r<arguments.length;r++){var i=arguments[r];for(var o in i)e.call(i,o)&&(t[o]=i[o])}return t};var e=Object.prototype.hasOwnProperty;return JN}var sW,t2,aW,n2,lW,r2,cW,e2={exports:{}};var uW,i2,dW,hW,EEe=nT(function wEe(){if(cW)return r2;cW=1;var e=function bEe(){if(lW)return n2;lW=1;var e=oW(),n=function yEe(){return sW||(sW=1,e2.exports=t={},t.simpleFilter=function(r,i){return i.filter(function(o){return t.test(r,o)})},t.test=function(r,i){return null!==t.match(r,i)},t.match=function(r,i,o){var B,a=0,c=[],p=i.length,_=0,x=0,D=(o=o||{}).pre||"",A=o.post||"",O=o.caseSensitive&&i||i.toLowerCase();r=o.caseSensitive&&r||r.toLowerCase();for(var Q=0;Q<p;Q++)B=i[Q],O[Q]===r[a]?(B=D+B+A,a+=1,x+=1+x):x=0,_+=x,c[c.length]=B;return a===r.length?(_=O===r?1/0:_,{rendered:c.join(""),score:_}):null},t.filter=function(r,i,o){return i&&0!==i.length?"string"!=typeof r?i:(o=o||{},i.reduce(function(a,c,p,_){var x=c;o.extract&&(x=o.extract(c));var D=t.match(r,x,o);return null!=D&&(a[a.length]={string:D.rendered,score:D.score,index:p,original:c}),a},[]).sort(function(a,c){return c.score-a.score||a.index-c.index})):[]}),e2.exports;var t}(),t=function vEe(){if(aW)return t2;aW=1;var e=function(n){return this.component=n,this.items=[],this.active=n.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,n.el.parentNode.insertBefore(this.wrapper,n.el.nextSibling),this};return e.prototype.show=function(){this.element.style.display="block"},e.prototype.hide=function(){this.element.style.display="none"},e.prototype.add=function(n){this.items.push(n)},e.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},e.prototype.isEmpty=function(){return!this.items.length},e.prototype.isVisible=function(){return"block"===this.element.style.display},e.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var n=0;n<this.items.length;n++)this.drawItem(this.items[n],this.active===n);this.show()}else this.hide()},e.prototype.drawItem=function(n,t){var r=document.createElement("li"),i=document.createElement("a");t&&(r.className+=" active"),i.innerHTML=n.string,r.appendChild(i),this.element.appendChild(r),r.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),r.addEventListener("mouseup",function(){this.handleMouseUp.call(this,n)}.bind(this))},e.prototype.handleMouseUp=function(n){this.selectingListItem=!1,this.component.value(n.original),this.clear(),this.draw()},e.prototype.move=function(n){this.active=n,this.draw()},e.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},e.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},e.prototype.drawError=function(n){var t=document.createElement("li");t.innerHTML=n,this.element.appendChild(t),this.show()},t2=e}(),r=function(i,o,a){return this.options=e({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},a=a||{}),this.el=i,this.data=o||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(c){this.handleKeyUp(c.keyCode,c)}.bind(this),!1),this.el.addEventListener("keydown",function(c){this.handleKeyDown(c)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(c){this.handlePaste(c)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return r.prototype.handleKeyUp=function(i,o){if(40!==i&&38!==i&&27!==i&&9!==i){if(13===i)return void(this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),o.stopPropagation()));this.handleInputChange(this.el.value)}},r.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},r.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},r.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var o=this;setTimeout(function(){o.handleInputChange(i.target.value)},100)}},r.prototype.handleInputChange=function(i){this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(o){for(var a=0;a<o.length&&(this.list.add(o[a]),a!==this.options.limit-1);a++);this.list.draw()}.bind(this))},r.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},r.prototype.update=function(i){this.data=i,this.handleKeyUp()},r.prototype.clear=function(){this.data=[],this.list.clear()},r.prototype.normalize=function(i){return i.toLowerCase()},r.prototype.match=function(i,o){return i.indexOf(o)>-1},r.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i||{place_name:this.query}),document.createEvent){var o=document.createEvent("HTMLEvents");o.initEvent("change",!0,!1),this.el.dispatchEvent(o)}else this.el.fireEvent("onchange")},r.prototype.getCandidates=function(i){var o={pre:"<strong>",post:"</strong>",extract:function(c){return this.getItemValue(c)}.bind(this)};i(this.options.filter?n.filter(this.query,this.data,o).map(function(c){return{original:c.original,string:this.render(c.original,c.string)}}.bind(this)):this.data.map(function(c){return{original:c,string:this.render(c)}}.bind(this)))},r.prototype.getItemValue=function(i){return i},r.prototype.render=function(i,o){if(o)return o;for(var a=this.getItemValue(i.original?i.original:i),c=this.normalize(a),p=c.lastIndexOf(this.query);p>-1;){var _=p+this.query.length;a=a.slice(0,p)+"<strong>"+a.slice(p,_)+"</strong>"+a.slice(_),p=c.slice(0,p).lastIndexOf(this.query)}return a},r.prototype.renderError=function(i){this.list.drawError(i)},n2=r}();return r2=e,typeof window<"u"&&(window.Suggestions=e),r2}()),rT={exports:{}},CEe=rT.exports,SEe=nT(function DEe(){return uW||(uW=1,n=CEe,r=function(){var t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(p){return p.match(t)||[]}function o(p){return{language:(p=r(p))[1]||"",extlang:p[2]||"",script:p[3]||"",region:p[4]||""}}function a(p,_,x){Object.defineProperty(p,_,{value:x,enumerable:!0})}function c(p,_,x){function D(A){return r(A)[p]||""}a(D,"pattern",_),a(o,x,D)}return c(1,/^[a-zA-Z]{2,3}$/,"language"),c(2,/^[a-zA-Z]{3}$/,"extlang"),c(3,/^[a-zA-Z]{4}$/,"script"),c(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),a(o,"split",function i(p){return r(p).filter(function(_,x){return _&&x})}),o},(e=rT).exports?e.exports=r():n.subtag=r()),rT.exports;var e,n,r}()),kEe=function IEe(){if(dW)return i2;dW=1;var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,c=parseInt,_="object"==typeof self&&self&&self.Object===Object&&self,x="object"==typeof tT&&tT&&tT.Object===Object&&tT||_||Function("return this")(),A=Object.prototype.toString,O=Math.max,B=Math.min,Q=function(){return x.Date.now()};function be(we){var Fe=typeof we;return!!we&&("object"==Fe||"function"==Fe)}function De(we){if("number"==typeof we)return we;if(function $e(we){return"symbol"==typeof we||function xe(we){return!!we&&"object"==typeof we}(we)&&"[object Symbol]"==A.call(we)}(we))return NaN;if(be(we)){var Fe="function"==typeof we.valueOf?we.valueOf():we;we=be(Fe)?Fe+"":Fe}if("string"!=typeof we)return 0===we?we:+we;we=we.replace(r,"");var We=o.test(we);return We||a.test(we)?c(we.slice(2),We?2:8):i.test(we)?NaN:+we}return i2=function oe(we,Fe,We){var ht,en,sn,Pi,vi,Ja,Td=0,Dw=!1,St=!1,Wt=!0;if("function"!=typeof we)throw new TypeError("Expected a function");function an(Qn){var Xs=ht,vs=en;return ht=en=void 0,Td=Qn,Pi=we.apply(vs,Xs)}function Pl(Qn){var Xs=Qn-Ja;return void 0===Ja||Xs>=Fe||Xs<0||St&&Qn-Td>=sn}function ys(){var Qn=Q();if(Pl(Qn))return bu(Qn);vi=setTimeout(ys,function Uo(Qn){var Sg=Fe-(Qn-Ja);return St?B(Sg,sn-(Qn-Td)):Sg}(Qn))}function bu(Qn){return vi=void 0,Wt&&ht?an(Qn):(ht=en=void 0,Pi)}function Tw(){var Qn=Q(),Xs=Pl(Qn);if(ht=arguments,en=this,Ja=Qn,Xs){if(void 0===vi)return function sr(Qn){return Td=Qn,vi=setTimeout(ys,Fe),Dw?an(Qn):Pi}(Ja);if(St)return vi=setTimeout(ys,Fe),an(Ja)}return void 0===vi&&(vi=setTimeout(ys,Fe)),Pi}return Fe=De(Fe)||0,be(We)&&(Dw=!!We.leading,sn=(St="maxWait"in We)?O(De(We.maxWait)||0,Fe):sn,Wt="trailing"in We?!!We.trailing:Wt),Tw.cancel=function bi(){void 0!==vi&&clearTimeout(vi),Td=0,ht=Ja=en=vi=void 0},Tw.flush=function sT(){return void 0===vi?Pi:bu(Q())},Tw},i2}(),AEe=nT(kEe),vu=nT(oW()),iT={exports:{}},PEe=function MEe(){if(hW)return iT.exports;hW=1;var t,e="object"==typeof Reflect?Reflect:null,n=e&&"function"==typeof e.apply?e.apply:function(we,Fe,We){return Function.prototype.apply.call(we,Fe,We)};t=e&&"function"==typeof e.ownKeys?e.ownKeys:Object.getOwnPropertySymbols?function(we){return Object.getOwnPropertyNames(we).concat(Object.getOwnPropertySymbols(we))}:function(we){return Object.getOwnPropertyNames(we)};var i=Number.isNaN||function(we){return we!=we};function o(){o.init.call(this)}iT.exports=o,iT.exports.once=function be(De,we){return new Promise(function(Fe,We){function ht(sn){De.removeListener(we,en),We(sn)}function en(){"function"==typeof De.removeListener&&De.removeListener("error",ht),Fe([].slice.call(arguments))}$e(De,we,en,{once:!0}),"error"!==we&&function xe(De,we,Fe){"function"==typeof De.on&&$e(De,"error",we,Fe)}(De,ht,{once:!0})})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function c(De){if("function"!=typeof De)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof De)}function p(De){return void 0===De._maxListeners?o.defaultMaxListeners:De._maxListeners}function _(De,we,Fe,We){var ht,en,sn;if(c(Fe),void 0===(en=De._events)?(en=De._events=Object.create(null),De._eventsCount=0):(void 0!==en.newListener&&(De.emit("newListener",we,Fe.listener?Fe.listener:Fe),en=De._events),sn=en[we]),void 0===sn)sn=en[we]=Fe,++De._eventsCount;else if("function"==typeof sn?sn=en[we]=We?[Fe,sn]:[sn,Fe]:We?sn.unshift(Fe):sn.push(Fe),(ht=p(De))>0&&sn.length>ht&&!sn.warned){sn.warned=!0;var Pi=new Error("Possible EventEmitter memory leak detected. "+sn.length+" "+String(we)+" listeners added. Use emitter.setMaxListeners() to increase limit");Pi.name="MaxListenersExceededWarning",Pi.emitter=De,Pi.type=we,Pi.count=sn.length,function r(De){console&&console.warn&&console.warn(De)}(Pi)}return De}function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function D(De,we,Fe){var We={fired:!1,wrapFn:void 0,target:De,type:we,listener:Fe},ht=x.bind(We);return ht.listener=Fe,We.wrapFn=ht,ht}function A(De,we,Fe){var We=De._events;if(void 0===We)return[];var ht=We[we];return void 0===ht?[]:"function"==typeof ht?Fe?[ht.listener||ht]:[ht]:Fe?function oe(De){for(var we=new Array(De.length),Fe=0;Fe<we.length;++Fe)we[Fe]=De[Fe].listener||De[Fe];return we}(ht):B(ht,ht.length)}function O(De){var we=this._events;if(void 0!==we){var Fe=we[De];if("function"==typeof Fe)return 1;if(void 0!==Fe)return Fe.length}return 0}function B(De,we){for(var Fe=new Array(we),We=0;We<we;++We)Fe[We]=De[We];return Fe}function $e(De,we,Fe,We){if("function"==typeof De.on)We.once?De.once(we,Fe):De.on(we,Fe);else{if("function"!=typeof De.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof De);De.addEventListener(we,function ht(en){We.once&&De.removeEventListener(we,ht),Fe(en)})}}return Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(De){if("number"!=typeof De||De<0||i(De))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+De+".");a=De}}),o.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(we){if("number"!=typeof we||we<0||i(we))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+we+".");return this._maxListeners=we,this},o.prototype.getMaxListeners=function(){return p(this)},o.prototype.emit=function(we){for(var Fe=[],We=1;We<arguments.length;We++)Fe.push(arguments[We]);var ht="error"===we,en=this._events;if(void 0!==en)ht=ht&&void 0===en.error;else if(!ht)return!1;if(ht){var sn;if(Fe.length>0&&(sn=Fe[0]),sn instanceof Error)throw sn;var Pi=new Error("Unhandled error."+(sn?" ("+sn.message+")":""));throw Pi.context=sn,Pi}var vi=en[we];if(void 0===vi)return!1;if("function"==typeof vi)n(vi,this,Fe);else{var Ja=vi.length,Td=B(vi,Ja);for(We=0;We<Ja;++We)n(Td[We],this,Fe)}return!0},o.prototype.on=o.prototype.addListener=function(we,Fe){return _(this,we,Fe,!1)},o.prototype.prependListener=function(we,Fe){return _(this,we,Fe,!0)},o.prototype.once=function(we,Fe){return c(Fe),this.on(we,D(this,we,Fe)),this},o.prototype.prependOnceListener=function(we,Fe){return c(Fe),this.prependListener(we,D(this,we,Fe)),this},o.prototype.off=o.prototype.removeListener=function(we,Fe){var We,ht,en,sn,Pi;if(c(Fe),void 0===(ht=this._events))return this;if(void 0===(We=ht[we]))return this;if(We===Fe||We.listener===Fe)0===--this._eventsCount?this._events=Object.create(null):(delete ht[we],ht.removeListener&&this.emit("removeListener",we,We.listener||Fe));else if("function"!=typeof We){for(en=-1,sn=We.length-1;sn>=0;sn--)if(We[sn]===Fe||We[sn].listener===Fe){Pi=We[sn].listener,en=sn;break}if(en<0)return this;0===en?We.shift():function Q(De,we){for(;we+1<De.length;we++)De[we]=De[we+1];De.pop()}(We,en),1===We.length&&(ht[we]=We[0]),void 0!==ht.removeListener&&this.emit("removeListener",we,Pi||Fe)}return this},o.prototype.removeAllListeners=function(we){var Fe,We,ht;if(void 0===(We=this._events))return this;if(void 0===We.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==We[we]&&(0===--this._eventsCount?this._events=Object.create(null):delete We[we]),this;if(0===arguments.length){var sn,en=Object.keys(We);for(ht=0;ht<en.length;++ht)"removeListener"!==(sn=en[ht])&&this.removeAllListeners(sn);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Fe=We[we]))this.removeListener(we,Fe);else if(void 0!==Fe)for(ht=Fe.length-1;ht>=0;ht--)this.removeListener(we,Fe[ht]);return this},o.prototype.listeners=function(we){return A(this,we,!0)},o.prototype.rawListeners=function(we){return A(this,we,!1)},o.listenerCount=function(De,we){return"function"==typeof De.listenerCount?De.listenerCount(we):O.call(De,we)},o.prototype.listenerCount=O,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]},iT.exports}();const fW={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};var Cw={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05dc\u05d7\u05e4\u05e9",ja:"\u30b5\u30fc\u30c1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041f\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641c\u7d22",cs:"Vyhled\xe1v\xe1n\xed",hu:"Keres\xe9s",ka:"\u10eb\u10d8\u10d4\u10d1\u10d0",nb:"S\xf8ke",sk:"Vyh\u013ead\xe1vanie",th:"\u0e04\u0e49\u0e19\u0e2b\u0e32",fi:"Hae",is:"Leita",ko:"\uc218\uc0c9",pl:"Szukaj",sl:"Iskanje",fa:"\u062c\u0633\u062a\u062c\u0648",ru:"\u041f\u043e\u0438\u0441\u043a",es:"Buscar"},errorNoResults:{en:"No results found",de:"Keine Ergebnisse gefunden",es:"No hay resultados",fr:"Aucun r\xe9sultat trouv\xe9"},errorConnectionFailed:{en:"There was an error reaching the server",de:"Verbindung fehlgeschlagen",es:"Error al conectarse al servidor",fr:"Une erreur est survenue lors de la connexion au serveur"}};const OEe=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class NEe{constructor(n,t,r=(i,o,a)=>new EEe(i,o,a)){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:i=>null!=i.text?i.text:i.place_name,render:i=>{if(!("geometry"in i)){const a=i.text,c=a.toLowerCase().indexOf(this._typeahead.query.toLowerCase()),p=this._typeahead.query.length;return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+a.substring(0,c)+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+a.substring(c,c+p)+"</span>"+a.substring(c+p)+"</div></div></div>"}const o=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+o[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+o.splice(1,o.length).join(",")+"</div></div></div>"},popupRender:i=>{const o=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+o[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+o.splice(1,o.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new PEe.EventEmitter,this.options=vu({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=n,this.typeaheadFactory=r}addTo(n){function t(r,i){if(!document.body.contains(i))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const o=r.onAdd();i.appendChild(o)}if(n instanceof HTMLElement)t(this,n);else if("string"==typeof n){const r=document.querySelectorAll(n);if(0===r.length)throw new Error("Element "+n+"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,r[0])}else{if(!("addControl"in n))throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element");n.addControl(this)}}onAdd(n){if(n&&"string"!=typeof n&&(this._map=n),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="search",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",AEe(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const i=document.createElement("div");i.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),i.appendChild(this._clearEl),i.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(i),this._typeahead=this.typeaheadFactory(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.container.addEventListener("click",()=>{this._typeahead.update(this._typeahead.data)}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(n,t){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+n),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width","18"),r.setAttribute("height","18"),"innerHTML"in r)r.innerHTML=t;else{const i=document.createElement("div");i.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",r.appendChild(i.firstChild.firstChild)}return r}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(n){const t=(n.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(n){if("Escape"===n.key&&this.options.clearAndBlurOnEsc)return this._clear(n),void this._inputEl.blur();const t=this._inputEl.value;if(!t)return this.fresh=!0,"Tab"!==n.key&&this.clear(n),void(this._clearEl.style.display="none");if(!n.metaKey&&"Tab"!==n.key&&"Escape"!==n.key&&"ArrowLeft"!==n.key&&"ArrowRight"!==n.key&&"ArrowUp"!==n.key&&"ArrowDown"!==n.key){if("Enter"===n.key){if(this.options.showResultsWhileTyping)return void(null==this._typeahead.selected&&this.geocoderApi.getSuggestions?this._geocode(t,!0):null==this._typeahead.selected&&this.options.showResultMarkers&&this._fitBoundsForMarkers());this._typeahead.selected||this._geocode(t)}t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(n){this.options.clearOnBlur&&this._clearOnBlur(n),this.options.collapsed&&this._collapse()}_onChange(){var n;const t=this._typeahead.selected;if(t){if(!("geometry"in t))return void(t.placeId?this._geocode(t.placeId,!0,!0):this._geocode(t.text,!0));if(JSON.stringify(t)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let r;if(this._removeResultMarkers(),t.properties&&fW[t.properties.short_code])r=vu({},this.options.flyTo),this._map&&this._map.fitBounds(fW[t.properties.short_code].bbox,r);else if(t.bbox){const i=t.bbox;r=vu({},this.options.flyTo),this._map&&this._map.fitBounds([[i[0],i[1]],[i[2],i[3]]],r)}else r=vu({},{zoom:this.options.zoom},this.options.flyTo),t.center?r.center=t.center:"Point"===(null===(n=t.geometry)||void 0===n?void 0:n.type)&&t.geometry.coordinates&&(r.center=t.geometry.coordinates),this._map&&this._map.flyTo(r)}this.options.marker&&this._maplibregl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:t})}}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((r,i)=>(this.options[i]&&(r[i]=["countries","types","language"].indexOf(i)>-1?this.options[i].split(/[\s,]+/):this.options[i],"proximity"===i&&this.options[i]&&"number"==typeof this.options[i].longitude&&"number"==typeof this.options[i].latitude&&(r[i]=[this.options[i].longitude,this.options[i].latitude])),r),{})}_geocode(n){return QN(this,arguments,void 0,function*(t,r=!1,i=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const o=this._getConfigForRequest(),a=this._createGeocodeRequest(o,t,r,i),c=this.options.localGeocoder&&this.options.localGeocoder(t)||[];try{const p=yield a;yield this._handleGeocodeResponse(p,o,t,r,c)}catch(p){this._handleGeocodeErrorResponse(p,c)}return a})}_createGeocodeRequest(n,t,r,i){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&OEe.test(t)?this._createReverseGeocodeRequest(t,n):(n.query=t,this.geocoderApi.getSuggestions?r?this.geocoderApi.searchByPlaceId&&i?this.geocoderApi.searchByPlaceId(n):this.geocoderApi.forwardGeocode(n):this.geocoderApi.getSuggestions(n):this.geocoderApi.forwardGeocode(n))}_createReverseGeocodeRequest(n,t){const r=n.split(/[\s(,)?]+/).map(i=>parseFloat(i)).reverse();return t.query=r,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(n,t,r,i,o){return QN(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let a={};a=n||{type:"FeatureCollection",features:[]},a.config=t,this.fresh&&(this.fresh=!1),a.features=a.features?o.concat(a.features):o;const c=this.options.externalGeocoder&&this.options.externalGeocoder(r,a.features,t)||Promise.resolve([]);try{const _=yield c;a.features=a.features?_.concat(a.features):_}catch{}this.options.filter&&a.features.length&&(a.features=a.features.filter(this.options.filter));let p=[];p="suggestions"in a?a.suggestions:"place"in a?Array.isArray(a.place)?a.place:[a.place]:a.features,p.length?(this._clearEl.style.display="block",this._typeahead.update(p),(!this.options.showResultsWhileTyping||i)&&this.options.showResultMarkers&&(a.features.length>0||"place"in a)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",a)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",a))})}_handleGeocodeErrorResponse(n,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:n})}_clear(n){n&&n.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(n){this._clear(n),this._inputEl.focus()}_clearOnBlur(n){n.relatedTarget&&this._clear(n)}_onQueryResult(n){if(!("features"in n)||!n.features.length)return;const t=n.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const n=this._map.getCenter().wrap();this.setProximity({longitude:n.lng,latitude:n.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(n){return QN(this,void 0,void 0,function*(){const t=yield this._geocode(n);this._onQueryResult(t)})}_renderError(){const n=`<div class='maplibre-gl-geocoder--error'>${this._localize("errorConnectionFailed")}</div>`;this._renderMessage(n)}_renderNoResults(){const n=`<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>\n        ${this._localize("errorNoResults")}</div>`;this._renderMessage(n)}_renderMessage(n){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(n)}_localize(n){const t=SEe.language(this.options.language.split(",")[0]);return this.options.language&&Cw?.[n][t]?Cw[n][t]:Cw[n].en}_fitBoundsForMarkers(){var n;if(this._typeahead.data.length<1)return;const t=this._typeahead.data.filter(r=>"string"!=typeof r).slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const i=vu({},{padding:100},this.options.flyTo),o=new this._maplibregl.LngLatBounds;for(const a of t)"geometry"in a&&"Point"===(null===(n=a.geometry)||void 0===n?void 0:n.type)&&o.extend(a.geometry.coordinates);this._map.fitBounds(o,i)}return t.length>0&&this._maplibregl&&this._handleResultMarkers(t),this}setInput(n){return this._inputEl.value=n,this._typeahead.selected=null,this._typeahead.clear(),n.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(n),this}setProximity(n){return this.options.proximity=n,this}getProximity(){return this.options.proximity}setRenderFunction(n){return n&&"function"==typeof n&&(this._typeahead.render=n),this}getRenderFunction(){return this._typeahead.render}setLanguage(n){return this.options.language=n||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(n){return this.options.zoom=n,this}getFlyTo(){return this.options.flyTo}setFlyTo(n){return this.options.flyTo=n,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(n){return this.options.placeholder=n||this.options.placeholder||this._localize("placeholder"),this._inputEl.placeholder=this.options.placeholder,this._inputEl.setAttribute("aria-label",this.options.placeholder),this}getBbox(){return this.options.bbox}setBbox(n){return this.options.bbox=n,this}getCountries(){return this.options.countries}setCountries(n){return this.options.countries=n,this}getTypes(){return this.options.types}setTypes(n){return this.options.types=n,this}getMinLength(){return this.options.minLength}setMinLength(n){return this.options.minLength=n,this._typeahead&&(this._typeahead.options.minLength=n),this}getLimit(){return this.options.limit}setLimit(n){return this.options.limit=n,this._typeahead&&(this._typeahead.options.limit=n),this}getFilter(){return this.options.filter}setFilter(n){return this.options.filter=n,this}setGeocoderApi(n){return this.geocoderApi=n,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(n){var t;if(!this._map)return;this._removeMarker();const i=vu({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(i);let o=null;if(this.options.popup){const c=vu({},{},this.options.popup);o=new this._maplibregl.Popup(c).setHTML(this.options.popupRender(n))}return n.center?(this.mapMarker.setLngLat(n.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(o)):"Point"===(null===(t=n.geometry)||void 0===t?void 0:t.type)&&n.geometry.coordinates&&(this.mapMarker.setLngLat(n.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(o)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(n){if(!this._map)return;this._removeResultMarkers();let r=vu({},{color:"#4668F2"},this.options.showResultMarkers);for(const i of n){let o;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(o=this.options.showResultMarkers.element.cloneNode(!0),r=vu(r,{element:o}));const a=new this._maplibregl.Marker(vu({},r,{element:o}));let c;if(this.options.popup){const _=vu({},{},this.options.popup);c=new this._maplibregl.Popup(_).setHTML(this.options.popupRender(i))}i.center?(a.setLngLat(i.center).addTo(this._map),this.options.popup&&a.setPopup(c)):i.geometry&&i.geometry.type&&"Point"===i.geometry.type&&i.geometry.coordinates&&(a.setLngLat(i.geometry.coordinates).addTo(this._map),this.options.popup&&a.setPopup(c)),this.resultMarkers.push(a)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(n){n.remove()}),this.resultMarkers=[])}on(n,t){return this._eventEmitter.on(n,t),this}once(n){return new Promise(t=>{this._eventEmitter.once(n,t)})}off(n,t){return this._eventEmitter.removeListener(n,t),this}}let LEe=(()=>{class e{constructor(){this.watchId=null}startTracking(){if(!navigator.geolocation)return;const t=_s.currentUser;t&&(this.watchId=navigator.geolocation.watchPosition(r=>{wp(Jr(li,`/locations/${t.uid}`),{lat:r.coords.latitude,lng:r.coords.longitude,timestamp:Date.now(),displayName:t.displayName||"",photoURL:t.photoURL||""})},()=>{},{enableHighAccuracy:!0,maximumAge:3e4,timeout:1e4}))}stopTracking(){null!==this.watchId&&(navigator.geolocation.clearWatch(this.watchId),this.watchId=null)}listenAllLocations(t){const r=Jr(li,"/locations");return nw(r,o=>{t(o.val()||{})}),()=>function Nbe(e,n,t){let r=null;const i=t?new aN(t):null;"value"===n?r=new ew(i):n&&(r=new SD(n,i)),nN(e._repo,e,r)}(r)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const FEe=["map"];let BEe=(()=>{class e{constructor(t){var r;this.locationService=t,this.markers={},this.unsubscribeLocations=null,this.centeredOnSelf=!1,this.geocoderApi={forwardGeocode:(r=_e(function*(i){const o=[];try{const a=`https://nominatim.openstreetmap.org/search?q=${i.query}&format=geojson&polygon_geojson=1&addressdetails=1`,p=yield(yield fetch(a)).json();for(const _ of p.features){const x=[_.bbox[0]+(_.bbox[2]-_.bbox[0])/2,_.bbox[1]+(_.bbox[3]-_.bbox[1])/2];o.push({type:"Feature",geometry:{type:"Point",coordinates:x},place_name:_.properties.display_name,properties:_.properties,text:_.properties.display_name,place_type:["place"],center:x})}}catch(a){console.error(`Failed to forwardGeocode with error: ${a}`)}return{type:"FeatureCollection",features:o}}),function(o){return r.apply(this,arguments)})}}ngAfterViewInit(){this.map=new eT.Map({container:this.mapContainer.nativeElement,style:"https://maps.geoapify.com/v1/styles/maptiler-3d/style.json?apiKey=793f93202015411eaa6fceaeadaad99c",center:[2.213749,46.227638],zoom:5}),this.map.addControl(new(XN().NavigationControl)({visualizePitch:!0,showZoom:!0,showCompass:!0})),this.map.addControl(new(XN().FullscreenControl)),this.map.addControl(new NEe(this.geocoderApi,{maplibregl:XN()}),"top-left"),this.locationService.startTracking(),this.map.on("load",()=>{this.unsubscribeLocations=this.locationService.listenAllLocations(o=>{this.updateFamilyMarkers(o);const a=_s.currentUser?.uid;a&&o[a]&&!this.centeredOnSelf&&(this.map.flyTo({center:[o[a].lng,o[a].lat],zoom:14}),this.centeredOnSelf=!0)})})}updateFamilyMarkers(t){const r=_s.currentUser?.uid,i=new Set;for(const[o,a]of Object.entries(t)){i.add(o);const c=o===r;if(this.markers[o])this.markers[o].setLngLat([a.lng,a.lat]),this.markers[o].getPopup()?.setHTML(this.buildPopupHtml(a));else{const p=document.createElement("div");if(p.className="family-marker",p.style.cssText=`width:40px;height:40px;border-radius:50%;border:3px solid ${c?"#3b82f6":"#ec4899"};overflow:hidden;background:#fff;cursor:pointer;box-shadow:0 2px 6px rgba(0,0,0,0.3);`,a.photoURL){const D=document.createElement("img");D.src=a.photoURL,D.style.cssText="width:100%;height:100%;object-fit:cover;",D.referrerPolicy="no-referrer",p.appendChild(D)}else p.style.display="flex",p.style.alignItems="center",p.style.justifyContent="center",p.style.fontSize="14px",p.style.fontWeight="bold",p.style.color="#ec4899",p.textContent=(a.displayName||"?")[0].toUpperCase();const x=new eT.Popup({offset:25}).setHTML(this.buildPopupHtml(a));this.markers[o]=new eT.Marker({element:p}).setLngLat([a.lng,a.lat]).setPopup(x).addTo(this.map)}}for(const o of Object.keys(this.markers))i.has(o)||(this.markers[o].remove(),delete this.markers[o])}buildPopupHtml(t){const i=new Date(t.timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return`<div style="font-family:sans-serif;text-align:center;">\n      <strong>${t.displayName||"Membre"}</strong><br>\n      <span style="color:#888;font-size:12px;">${i}</span>\n    </div>`}ngOnDestroy(){this.locationService.stopTracking(),this.unsubscribeLocations&&this.unsubscribeLocations(),Object.values(this.markers).forEach(t=>t.remove())}static{this.\u0275fac=function(r){return new(r||e)(Re(LEe))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-map"]],viewQuery:function(r,i){if(1&r&&Mm(FEe,5),2&r){let o;Kf(o=Yf())&&(i.mapContainer=o.first)}},decls:5,vars:0,consts:[["map",""],[1,"card-fun","p-4","h-[calc(100vh-12rem)]"],[1,"font-display","text-lg","font-bold","text-gray-700","mb-3"],[1,"map-container","rounded-xl","overflow-hidden","h-[calc(100%-3rem)]"]],template:function(r,i){1&r&&($t(0,"div",1)(1,"h2",2),fe(2,"\u{1f5fa}\ufe0f Carte"),zt(),od(3,"div",3,0),zt())},styles:[".map-container[_ngcontent-%COMP%]{height:100%}"]})}}return e})();class VEe{constructor(n,t){this.title=n,this.createdDate=t}}let o2=(()=>{class e{constructor(t){this._snackBar=t,this.photos=[],this.photosSubject=new K,this.durationInSeconds=5,this.getPhotos()}emitPhotos(){this.photosSubject.next(this.photos)}savePhotos(){wp(Jr(li,"/photos"),this.photos)}getPhotos(){nw(Jr(li,"/photos"),t=>{this.photos=t.val()?t.val():[],this.emitPhotos()})}createNewPhoto(t){this.photos.push(t),this.savePhotos(),this._snackBar.open("Photo ajout\xe9e","avec succ\xe8s !!",{duration:1e3*this.durationInSeconds})}compressImage(t,r=1200,i=.7){return new Promise((o,a)=>{const c=new Image,p=new FileReader;p.onload=_=>{c.onload=()=>{const x=document.createElement("canvas");let D=c.width,A=c.height;D>r&&(A=Math.round(A*r/D),D=r),x.width=D,x.height=A,x.getContext("2d").drawImage(c,0,0,D,A),x.toBlob(B=>B?o(B):a("Compression echouee"),"image/jpeg",i)},c.onerror=a,c.src=_.target?.result},p.onerror=a,p.readAsDataURL(t)})}uploadFile(t){return this.compressImage(t).then(r=>{const i=Date.now().toString();return Tq(PD(OD,"photos/"+i+".jpg"),r,{contentType:"image/jpeg"}).then(a=>Sq(a.ref))})}removePhoto(t){t?.image&&Iq(PD(OD,t.image)).catch(o=>{console.log("Fichier non trouv\xe9 : "+o)});const r=this.photos.findIndex(i=>i===t);this.photos.splice(r,1),this.savePhotos(),this.emitPhotos(),this._snackBar.open("Photo supprim\xe9e","avec succ\xe8s !!",{duration:1e3*this.durationInSeconds})}static{this.\u0275fac=function(r){return new(r||e)(wt(ng))}}static{this.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function zEe(e,n){1&e&&(ce(0,"p",7),fe(1,"Fichier charge !"),he())}let UEe=(()=>{class e{constructor(t,r,i){this.ps=t,this.formBuilder=r,this.dialogRef=i,this.fileIsUploading=!1,this.fileUploaded=!1}ngOnInit(){this.initForm()}initForm(){this.photoForm=this.formBuilder.group({title:[""]})}onSavePhoto(){const t=this.photoForm.get("title").value,i=(new Date).toString(),o=new VEe(t,i);o.image=this.fileUrl;const a=_s.currentUser;a?(o.authorUid=a.uid,vd(Jr(li,`/users/${a.uid}`)).then(c=>{const p=c.val()||{};o.authorName=p.displayName||a.displayName||"",o.authorPhoto=p.photoURL||a.photoURL||"",this.ps.createNewPhoto(o),this.dialogRef.close()})):(this.ps.createNewPhoto(o),this.dialogRef.close())}onUploadFile(t){this.fileIsUploading=!0,this.ps.uploadFile(t).then(r=>{this.fileUrl=r,this.fileIsUploading=!1,this.fileUploaded=!0})}detectFiles(t){const r=t.target;r.files?.[0]&&this.onUploadFile(r.files[0])}static{this.\u0275fac=function(r){return new(r||e)(Re(o2),Re(gw),Re(rg))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-dialog-photo"]],decls:19,vars:3,consts:[[1,"p-6"],[1,"font-display","text-xl","font-bold","text-gradient","mb-4"],[3,"formGroup"],[1,"mb-4"],[1,"block"],[1,"sr-only"],["type","file","accept","image/*","required","",1,"block","w-full","text-sm","text-gray-500","file:mr-3","file:py-2","file:px-4","file:rounded-full","file:border-0","file:text-sm","file:font-semibold","file:bg-family-pink/10","file:text-family-pink","hover:file:bg-family-pink/20","transition-colors",3,"change"],[1,"text-family-green","text-sm","font-medium","mt-2"],[1,"block","mb-1","text-sm","font-medium","text-gray-600"],["type","text","formControlName","title","placeholder","Titre de la photo...",1,"input-fun","w-full"],[1,"flex","justify-end","gap-3","mt-4"],["type","button",1,"px-4","py-2","rounded-xl","border","border-gray-200","text-gray-600","hover:bg-gray-50","transition-colors","font-medium","text-sm",3,"click"],["type","button",1,"btn-gradient",3,"click","disabled"]],template:function(r,i){1&r&&(ce(0,"div",0)(1,"h2",1),fe(2,"\u{1f4f8} Ajouter une photo"),he(),ce(3,"form",2)(4,"div",3)(5,"label",4)(6,"span",5),fe(7,"Choisir un fichier"),he(),ce(8,"input",6),Nt("change",function(a){return i.detectFiles(a)}),he()(),mn(9,zEe,2,0,"p",7),he(),ce(10,"div")(11,"label",8),fe(12,"Titre"),he(),rn(13,"input",9),he(),ce(14,"div",10)(15,"button",11),Nt("click",function(){return i.dialogRef.close()}),fe(16,"Retour"),he(),ce(17,"button",12),Nt("click",function(){return i.onSavePhoto()}),fe(18,"Enregistrer"),he()()()()),2&r&&(Te(3),Bn("formGroup",i.photoForm),Te(6),gn(i.fileUploaded?9:-1),Te(8),Bn("disabled",!i.fileUploaded))},dependencies:[_w,Uy,Cd,Hh,By,Dg,Cg],encapsulation:2})}}return e})(),s2=(()=>{class e{constructor(t,r){this.dialogRef=t,this.data=r,this.customMessage=r.customMessage}static{this.\u0275fac=function(r){return new(r||e)(Re(rg),Re(_1))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-confirm-dialog"]],decls:8,vars:1,consts:[[1,"p-6","max-w-sm"],[1,"font-display","text-lg","font-semibold","text-gray-700"],[1,"flex","justify-end","gap-3","mt-6"],[1,"px-4","py-2","rounded-xl","border","border-gray-200","text-gray-600","hover:bg-gray-50","transition-colors","font-medium","text-sm",3,"click"],[1,"btn-gradient","px-6","py-2",3,"click"]],template:function(r,i){1&r&&($t(0,"div",0)(1,"h2",1),fe(2),zt(),$t(3,"div",2)(4,"button",3),da("click",function(){return i.dialogRef.close()}),fe(5,"Non"),zt(),$t(6,"button",4),da("click",function(){return i.dialogRef.close(!0)}),fe(7,"Oui"),zt()()()),2&r&&(Te(2),on(i.customMessage))},encapsulation:2})}}return e})(),jEe=(()=>{class e{constructor(){}getComments(t){return vd(Jr(li,`/photo-interactions/${t}/comments`)).then(r=>{const i=r.val();return i?Object.keys(i).map(o=>({...i[o],id:o})):[]})}addComment(t,r){const i=j$(Jr(li,`/photo-interactions/${t}/comments`));return wp(i,{...r,id:i.key})}deleteComment(t,r){return lN(Jr(li,`/photo-interactions/${t}/comments/${r}`))}toggleLike(t,r){const i=Jr(li,`/photo-interactions/${t}/likes/${r}`);return vd(i).then(o=>o.val()?lN(i).then(()=>!1):wp(i,!0).then(()=>!0))}getLikeCount(t){return vd(Jr(li,`/photo-interactions/${t}/likes`)).then(r=>{const i=r.val();return i?Object.keys(i).length:0})}isLiked(t,r){return vd(Jr(li,`/photo-interactions/${t}/likes/${r}`)).then(i=>!!i.val())}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const HEe=["photoContainer"];function $Ee(e,n){1&e&&rn(0,"img",13),2&e&&Bn("src",Qe().$implicit.authorPhoto,bl)}function qEe(e,n){if(1&e&&(ce(0,"span",14),fe(1),he()),2&e){const t=Qe().$implicit;Te(),on(t.authorName)}}function GEe(e,n){if(1&e){const t=Hr();ce(0,"button",35),Nt("click",function(){Bt(t);const i=Qe().$implicit,o=Qe(2).$index;return cn(Qe().deleteComment(o,i.id))}),ls(),ce(1,"svg",36),rn(2,"path",37),he()()}}function WEe(e,n){if(1&e&&(ce(0,"div",25),rn(1,"img",29),ce(2,"div",30)(3,"div",31)(4,"span",32),fe(5),he(),mn(6,GEe,3,0,"button",33),he(),ce(7,"p",34),fe(8),he()()()),2&e){const t=n.$implicit,r=Qe(3);Te(),Bn("src",(null==r.usersCache[t.userId]?null:r.usersCache[t.userId].photoURL)||t.userPhoto||"https://i.pinimg.com/originals/2f/15/f2/2f15f2e8c688b3120d3d26467b06330c.jpg",bl),Te(4),on((null==r.usersCache[t.userId]?null:r.usersCache[t.userId].displayName)||t.userName||"Anonyme"),Te(),gn(t.userId===r.currentUid?6:-1),Te(2),on(t.text)}}function ZEe(e,n){if(1&e){const t=Hr();ce(0,"div",24),ki(1,WEe,9,4,"div",25,iu),ce(3,"div",26)(4,"input",27),Nm("ngModelChange",function(i){Bt(t);const o=Qe().$implicit;return W_(o._newCommentText,i)||(o._newCommentText=i),cn(i)}),Nt("keyup.enter",function(){Bt(t);const i=Qe().$index;return cn(Qe().addComment(i))}),he(),ce(5,"button",28),Nt("click",function(){Bt(t);const i=Qe().$index;return cn(Qe().addComment(i))}),fe(6,"Envoyer"),he()()()}if(2&e){const t=Qe().$implicit;Te(),Ai(t._comments),Te(3),Om("ngModel",t._newCommentText)}}function KEe(e,n){if(1&e){const t=Hr();ce(0,"div",5),rn(1,"img",10),ce(2,"div",11)(3,"div",12),mn(4,$Ee,1,1,"img",13),mn(5,qEe,2,1,"span",14),he(),ce(6,"h3",15),fe(7),he(),ce(8,"p",16),fe(9),Lm(10,"date"),he(),ce(11,"div",17)(12,"button",18),Nt("click",function(){const i=Bt(t).$index;return cn(Qe().toggleLike(i))}),ce(13,"span"),fe(14),he(),ce(15,"span",19),fe(16),he()(),ce(17,"button",20),Nt("click",function(){const i=Bt(t).$index;return cn(Qe().toggleComments(i))}),ce(18,"span"),fe(19,"\u{1f4ac}"),he(),ce(20,"span",19),fe(21),he()(),ce(22,"button",21),Nt("click",function(){const i=Bt(t).$implicit;return cn(Qe().onDelete(i))}),ls(),ce(23,"svg",22),rn(24,"path",23),he()()(),mn(25,ZEe,7,1,"div",24),he()()}if(2&e){const t=n.$implicit;Te(),Bn("alt",function hz(e){return ii(Me(),Gi(),e)?Yt(e):kr}(t.title))("src",t.image,bl),Te(3),gn(t.authorPhoto?4:-1),Te(),gn(t.authorName?5:-1),Te(2),on(t.title),Te(2),on(Fm(10,13,t.createdDate,"d MMMM yyyy '\xe0' HH:mm","","fr")),Te(3),MI(t._liked?"text-family-pink":"text-gray-400 hover:text-family-pink"),Te(2),on(t._liked?"\u2764\ufe0f":"\u{1f90d}"),Te(2),on(t._likeCount||0),Te(5),on((null==t._comments?null:t._comments.length)||0),Te(4),gn(t._showComments?25:-1)}}function YEe(e,n){if(1&e){const t=Hr();ce(0,"button",38),Nt("click",function(){return Bt(t),cn(Qe().scrollToTop())}),ls(),ce(1,"svg",39),rn(2,"path",40),he()()}}YI(zA);let XEe=(()=>{class e{constructor(t,r,i){this.dialog=t,this.ps=r,this.commentsService=i,this.photos=[],this.hideButton=!1,this.currentUid=_s.currentUser?.uid||"",this.usersCache={}}ngOnInit(){vd(Jr(li,"/users")).then(t=>{const r=t.val()||{};Object.keys(r).forEach(i=>{this.usersCache[i]={displayName:r[i].displayName||"",photoURL:r[i].photoURL||""}})}),this.photosSubscription=this.ps.photosSubject.subscribe(t=>{this.photos=t.sort((r,i)=>{const o=new Date(r.createdDate);return new Date(i.createdDate).getTime()-o.getTime()}),this.loadInteractions()}),this.ps.emitPhotos(),this.ps.getPhotos()}loadInteractions(){const t=_s.currentUser?.uid;this.photos.forEach((r,i)=>{this.commentsService.getComments(i).then(o=>r._comments=o),this.commentsService.getLikeCount(i).then(o=>r._likeCount=o),t&&this.commentsService.isLiked(i,t).then(o=>r._liked=o)})}toggleLike(t){const r=_s.currentUser?.uid;r&&this.commentsService.toggleLike(t,r).then(i=>(this.photos[t]._liked=i,this.commentsService.getLikeCount(t))).then(i=>{this.photos[t]._likeCount=i})}toggleComments(t){this.photos[t]._showComments=!this.photos[t]._showComments,this.photos[t]._showComments&&!this.photos[t]._comments?.length&&this.commentsService.getComments(t).then(r=>this.photos[t]._comments=r)}addComment(t){const r=this.photos[t]._newCommentText?.trim();if(!r)return;const i=_s.currentUser;i&&vd(Jr(li,`/users/${i.uid}`)).then(o=>{const a=o.val()||{},c={photoIndex:t,userId:i.uid,userName:a.displayName||i.displayName||i.email||"Anonyme",userPhoto:a.photoURL||i.photoURL||"",text:r,createdDate:(new Date).toISOString()};return this.commentsService.addComment(t,c)}).then(()=>{this.photos[t]._newCommentText="",this.commentsService.getComments(t).then(o=>this.photos[t]._comments=o)})}deleteComment(t,r){this.commentsService.deleteComment(t,r).then(()=>{this.commentsService.getComments(t).then(i=>this.photos[t]._comments=i)})}openDialog(){this.dialog.open(UEe,{disableClose:!0})}onDelete(t){this.dialog.open(s2,{data:{customMessage:"Etes-vous sur(e) de vouloir supprimer la photo ?"}}).afterClosed().subscribe(i=>{!0===i&&this.ps.removePhoto(t)})}onScroll(t){const r=t.target;r&&(this.hideButton=!0,0===r.scrollTop&&(this.hideButton=!1))}scrollToTop(){this.photoContainer&&(this.photoContainer.nativeElement.scrollTop=0)}ngOnDestroy(){this.photosSubscription&&this.photosSubscription.unsubscribe(),this.scrollSubscription&&this.scrollSubscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)(Re(sp),Re(o2),Re(jEe))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-photo"]],viewQuery:function(r,i){if(1&r&&Mm(HEe,5),2&r){let o;Kf(o=Yf())&&(i.photoContainer=o.first)}},decls:12,vars:1,consts:[["photoContainer",""],[1,"max-w-2xl","mx-auto","px-4",3,"scroll"],[1,"text-center","mb-6"],[1,"font-display","text-2xl","font-bold","text-gradient"],[1,"space-y-6"],[1,"card-fun","overflow-hidden"],["title","ajouter une photo",1,"fixed","bottom-24","md:bottom-8","right-6","w-14","h-14","rounded-full","btn-gradient","flex","items-center","justify-center","shadow-lg","hover:shadow-xl","transition-shadow","z-50",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4v16m8-8H4"],["title","Vers le haut",1,"fixed","bottom-24","md:bottom-8","right-24","w-14","h-14","rounded-full","bg-white","shadow-lg","flex","items-center","justify-center","hover:shadow-xl","transition-shadow","z-50","text-family-pink"],[1,"w-full","object-contain",3,"src","alt"],[1,"p-4"],[1,"flex","items-center","gap-2","mb-1"],[1,"w-6","h-6","rounded-full","object-cover",3,"src"],[1,"text-xs","font-semibold","text-gray-500"],[1,"font-display","font-bold","text-gray-700"],[1,"text-xs","text-gray-400","mt-1"],[1,"flex","items-center","gap-4","mt-3","pt-3","border-t","border-gray-100"],[1,"flex","items-center","gap-1","text-sm","transition-colors",3,"click"],[1,"font-medium"],[1,"flex","items-center","gap-1","text-sm","text-gray-400","hover:text-family-sky","transition-colors",3,"click"],["title","supprimer",1,"ml-auto","text-gray-300","hover:text-red-400","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"mt-3","pt-3","border-t","border-gray-100"],[1,"flex","gap-2","mb-3"],[1,"flex","gap-2","mt-2"],["placeholder","Ecrire un commentaire...",1,"input-fun","flex-1","text-sm","py-2",3,"ngModelChange","keyup.enter","ngModel"],[1,"btn-gradient","text-sm","px-3","py-2",3,"click"],[1,"w-7","h-7","rounded-full","object-cover","flex-shrink-0",3,"src"],[1,"bg-gray-50","rounded-xl","px-3","py-2","flex-1"],[1,"flex","items-center","justify-between"],[1,"text-xs","font-semibold","text-gray-600"],[1,"text-gray-300","hover:text-red-400","transition-colors","ml-2"],[1,"text-sm","text-gray-700"],[1,"text-gray-300","hover:text-red-400","transition-colors","ml-2",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-3.5","h-3.5"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],["title","Vers le haut",1,"fixed","bottom-24","md:bottom-8","right-24","w-14","h-14","rounded-full","bg-white","shadow-lg","flex","items-center","justify-center","hover:shadow-xl","transition-shadow","z-50","text-family-pink",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M5 15l7-7 7 7"]],template:function(r,i){if(1&r){const o=Hr();ce(0,"div",1,0),Nt("scroll",function(c){return Bt(o),cn(i.onScroll(c))}),ce(2,"div",2)(3,"h1",3),fe(4,"\u{1f4f8} Photos de famille"),he()(),ce(5,"div",4),ki(6,KEe,26,18,"div",5,iu),he()(),ce(8,"button",6),Nt("click",function(){return Bt(o),cn(i.openDialog())}),ls(),ce(9,"svg",7),rn(10,"path",8),he()(),mn(11,YEe,3,0,"button",9)}2&r&&(Te(6),Ai(i.photos),Te(5),gn(i.hideButton?11:-1))},dependencies:[ey,jN,Cd,Hh,pw,Ab],styles:[".card[_ngcontent-%COMP%]{margin:20px auto;padding:10px 30px;width:80%}.bg-gradient-to-tr[_ngcontent-%COMP%]{height:calc(100vh - 64px);overflow-y:auto}@media only screen and (min-width:860px){.card[_ngcontent-%COMP%]{box-sizing:border-box;width:50%;margin:20px auto;padding:10px 30px}}#add-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:1000}#scroll-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:20px;z-index:1000}.container[_ngcontent-%COMP%]{position:relative;overflow:hidden}h2[_ngcontent-%COMP%]{margin:10px}.photo-list-container[_ngcontent-%COMP%]{max-height:calc(100vh - 100px);overflow-y:auto}"]})}}return e})(),Dd=(()=>{class e{constructor(t,r){this.router=t,this.authService=r}canActivate(){return this.authService.redirectReady.then(()=>new Promise(t=>{V1(_s,r=>{r?t(!0):(this.router.navigate(["/auth","signin"]),t(!1))})}))}static{this.\u0275fac=function(r){return new(r||e)(wt(Ns),wt(xd))}}static{this.\u0275prov=Ue({token:e,factory:e.\u0275fac})}}return e})();const QEe=[{key:"fruits_legumes",label:"Fruits & L\xe9gumes",icon:"\u{1f966}"},{key:"produits_laitiers",label:"Produits laitiers",icon:"\u{1f9c0}"},{key:"viandes",label:"Viandes & Poissons",icon:"\u{1f969}"},{key:"epicerie",label:"\xc9picerie",icon:"\u{1f35d}"},{key:"boissons",label:"Boissons",icon:"\u{1f964}"},{key:"surgeles",label:"Surgel\xe9s",icon:"\u{1f9ca}"},{key:"hygiene",label:"Hygi\xe8ne & Maison",icon:"\u{1f9f4}"},{key:"autre",label:"Autre",icon:"\u{1f4e6}"}];let JEe=(()=>{class e{constructor(){this.items=[],this.itemSubject=new K,this.getItems()}emitItems(){this.itemSubject.next(this.items)}getItems(){nw(Jr(li,"/shopping"),t=>{const r=t.val();this.items=r?Object.keys(r).map(i=>({...r[i],id:i})):[],this.emitItems()})}addItem(t){j$(Jr(li,"/shopping"),t)}removeItem(t){lN(Jr(li,"/shopping/"+t))}toggleChecked(t,r){TD(Jr(li,"/shopping/"+t),{checked:r})}clearChecked(){const t=this.items.filter(i=>i.checked),r={};t.forEach(i=>r["/shopping/"+i.id]=null),TD(Jr(li),r)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const pW=(e,n)=>n.key,mW=(e,n)=>n.id;function eCe(e,n){if(1&e){const t=Hr();ce(0,"button",8),Nt("click",function(){return Bt(t),cn(Qe().showAddForm=!0)}),ls(),ce(1,"svg",9),rn(2,"path",10),he(),Hp(),ce(3,"span",11),fe(4,"Ajouter un article"),he()()}}function tCe(e,n){if(1&e&&(ce(0,"option",17),fe(1),he()),2&e){const t=n.$implicit;Bn("value",t.key),Te(),pb("",t.icon," ",t.label)}}function nCe(e,n){if(1&e){const t=Hr();ce(0,"div",5)(1,"div",12)(2,"input",13),Nm("ngModelChange",function(i){Bt(t);const o=Qe();return W_(o.newItemName,i)||(o.newItemName=i),cn(i)}),Nt("keyup.enter",function(){return Bt(t),cn(Qe().addItem())}),he(),ce(3,"div",14)(4,"input",15),Nm("ngModelChange",function(i){Bt(t);const o=Qe();return W_(o.newItemQuantity,i)||(o.newItemQuantity=i),cn(i)}),he(),ce(5,"select",16),Nm("ngModelChange",function(i){Bt(t);const o=Qe();return W_(o.newItemCategory,i)||(o.newItemCategory=i),cn(i)}),ki(6,tCe,2,3,"option",17,pW),he()(),ce(8,"div",18)(9,"button",19),Nt("click",function(){return Bt(t),cn(Qe().showAddForm=!1)}),fe(10,"Annuler"),he(),ce(11,"button",20),Nt("click",function(){return Bt(t),cn(Qe().addItem())}),fe(12,"Ajouter"),he()()()()}if(2&e){const t=Qe();Te(2),Om("ngModel",t.newItemName),Te(2),Om("ngModel",t.newItemQuantity),Te(),Om("ngModel",t.newItemCategory),Te(),Ai(t.categories),Te(5),Bn("disabled",!t.newItemName.trim())}}function rCe(e,n){if(1&e&&(ce(0,"span",27),fe(1),he()),2&e){const t=Qe().$implicit;Te(),Ko("x",t.quantity)}}function iCe(e,n){if(1&e&&(ce(0,"p",28),fe(1),he()),2&e){const t=Qe().$implicit;Te(),Ko("ajout\xe9 par ",t.addedByName)}}function oCe(e,n){if(1&e){const t=Hr();ce(0,"div",23)(1,"button",24),Nt("click",function(){const i=Bt(t).$implicit;return cn(Qe(2).toggleChecked(i))}),he(),ce(2,"div",25)(3,"span",26),fe(4),he(),mn(5,rCe,2,1,"span",27),mn(6,iCe,2,1,"p",28),he(),ce(7,"button",29),Nt("click",function(){const i=Bt(t).$implicit;return cn(Qe(2).removeItem(i))}),ls(),ce(8,"svg",30),rn(9,"path",31),he()()()}if(2&e){const t=n.$implicit;Te(4),on(t.nom),Te(),gn(t.quantity&&"1"!==t.quantity?5:-1),Te(),gn(t.addedByName?6:-1)}}function sCe(e,n){if(1&e&&(ce(0,"div",6)(1,"h3",21)(2,"span"),fe(3),he(),fe(4),he(),ce(5,"div",22),ki(6,oCe,10,3,"div",23,mW),he()()),2&e){const t=n.$implicit;Te(3),on(t.icon),Te(),Ko(" ",t.label," "),Te(2),Ai(t.items)}}function aCe(e,n){if(1&e){const t=Hr();ce(0,"div",36)(1,"button",37),Nt("click",function(){const i=Bt(t).$implicit;return cn(Qe(2).toggleChecked(i))}),ls(),ce(2,"svg",38),rn(3,"path",39),he()(),Hp(),ce(4,"span",40),fe(5),he()()}if(2&e){const t=n.$implicit;Te(5),on(t.nom)}}function lCe(e,n){if(1&e){const t=Hr();ce(0,"div",7)(1,"div",32)(2,"h3",33)(3,"span"),fe(4,"\u2705"),he(),fe(5),he(),ce(6,"button",34),Nt("click",function(){return Bt(t),cn(Qe().clearChecked())}),fe(7," Vider le panier "),he()(),ce(8,"div",35),ki(9,aCe,6,1,"div",36,mW),he()()}if(2&e){const t=Qe();Te(5),Ko(" Dans le panier (",t.checkedItems.length,") "),Te(4),Ai(t.checkedItems)}}let cCe=(()=>{class e{constructor(t){this.itemService=t,this.items=[],this.categories=QEe,this.newItemName="",this.newItemCategory="autre",this.newItemQuantity="",this.showAddForm=!1}ngOnInit(){this.sub=this.itemService.itemSubject.subscribe(t=>this.items=t),this.itemService.emitItems()}get uncheckedByCategory(){return this.categories.map(t=>({...t,items:this.items.filter(r=>!r.checked&&r.category===t.key)})).filter(t=>t.items.length>0)}get checkedItems(){return this.items.filter(t=>t.checked)}get totalItems(){return this.items.filter(t=>!t.checked).length}addItem(){var t=this;return _e(function*(){const r=t.newItemName.trim();if(!r)return;const i=_s.currentUser;let o="";i&&(o=((yield vd(Jr(li,`/users/${i.uid}`))).val()||{}).displayName||i.displayName||""),t.itemService.addItem({nom:r,category:t.newItemCategory,quantity:t.newItemQuantity.trim()||"1",checked:!1,addedBy:i?.uid||"",addedByName:o,addedAt:(new Date).toISOString()}),t.newItemName="",t.newItemQuantity="",t.newItemCategory="autre",t.showAddForm=!1})()}toggleChecked(t){this.itemService.toggleChecked(t.id,!t.checked)}removeItem(t){this.itemService.removeItem(t.id)}clearChecked(){this.itemService.clearChecked()}getCategoryIcon(t){return this.categories.find(r=>r.key===t)?.icon||"\u{1f4e6}"}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)(Re(JEe))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-shopping"]],decls:11,vars:6,consts:[[1,"max-w-2xl","mx-auto","px-4"],[1,"text-center","mb-6"],[1,"font-display","text-2xl","font-bold","text-gradient"],[1,"text-sm","text-gray-400","mt-1"],[1,"w-full","card-fun","p-4","mb-6","flex","items-center","justify-center","gap-2","text-gray-500","hover:text-family-green","transition-colors"],[1,"card-fun","p-4","mb-6"],[1,"mb-4"],[1,"mt-6"],[1,"w-full","card-fun","p-4","mb-6","flex","items-center","justify-center","gap-2","text-gray-500","hover:text-family-green","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4v16m8-8H4"],[1,"font-medium"],[1,"space-y-3"],["placeholder","Nom de l'article...","autofocus","",1,"input-fun","w-full",3,"ngModelChange","keyup.enter","ngModel"],[1,"flex","gap-3"],["placeholder","Qt\xe9 (ex: 2, 500g...)",1,"input-fun","flex-1",3,"ngModelChange","ngModel"],[1,"input-fun","flex-1",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex","justify-end","gap-2"],[1,"px-4","py-2","rounded-xl","border","border-gray-200","text-gray-600","hover:bg-gray-50","transition-colors","text-sm","font-medium",3,"click"],[1,"btn-gradient","text-sm","px-6","py-2",3,"click","disabled"],[1,"font-display","font-bold","text-sm","text-gray-500","mb-2","flex","items-center","gap-1.5"],[1,"card-fun","overflow-hidden","divide-y","divide-gray-100"],[1,"flex","items-center","gap-3","px-4","py-3","hover:bg-gray-50","transition-colors"],[1,"w-6","h-6","rounded-full","border-2","border-gray-300","flex-shrink-0","hover:border-family-green","transition-colors",3,"click"],[1,"flex-1","min-w-0"],[1,"font-medium","text-gray-700"],[1,"text-xs","text-gray-400","ml-2"],[1,"text-xs","text-gray-400","truncate"],[1,"text-gray-300","hover:text-red-400","transition-colors","flex-shrink-0",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-display","font-bold","text-sm","text-gray-400","flex","items-center","gap-1.5"],[1,"text-xs","text-red-400","hover:text-red-500","transition-colors","font-medium",3,"click"],[1,"card-fun","overflow-hidden","divide-y","divide-gray-100","opacity-60"],[1,"flex","items-center","gap-3","px-4","py-3"],[1,"w-6","h-6","rounded-full","bg-family-green","flex-shrink-0","flex","items-center","justify-center",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","3",1,"w-3.5","h-3.5","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M5 13l4 4L19 7"],[1,"flex-1","line-through","text-gray-400"]],template:function(r,i){1&r&&(ce(0,"div",0)(1,"div",1)(2,"h1",2),fe(3,"\u{1f6d2} Liste de courses"),he(),ce(4,"p",3),fe(5),he()(),mn(6,eCe,5,0,"button",4),mn(7,nCe,13,4,"div",5),ki(8,sCe,8,2,"div",6,pW),mn(10,lCe,11,1,"div",7),he()),2&r&&(Te(5),OI("",i.totalItems," article",i.totalItems>1?"s":""," restant",i.totalItems>1?"s":""),Te(),gn(i.showAddForm?-1:6),Te(),gn(i.showAddForm?7:-1),Te(),Ai(i.uncheckedByCategory),Te(2),gn(i.checkedItems.length>0?10:-1))},dependencies:[ey,jN,jy,Hy,Cd,Cp,Hh,pw],styles:["select.input-fun[_ngcontent-%COMP%]{appearance:none;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E\");background-repeat:no-repeat;background-position:right 12px center;padding-right:32px}"]})}}return e})();function uCe(e,n){if(1&e&&(ce(0,"option",8),fe(1),he()),2&e){const t=n.$implicit;Bn("value",t.displayName||t.email),Te(),on(t.displayName||t.email)}}let dCe=(()=>{class e{constructor(t,r,i,o,a,c,p){this.route=t,this.tasksService=r,this.formBuilder=i,this._snackBar=o,this.router=a,this.dialog=c,this.userService=p,this.taskToEdit=null,this.allUsers=[]}onDelete(t){this.dialog.open(s2,{data:{customMessage:"Etes-vous s\xfbr(e) de vouloir supprimer la t\xe2che"}}).afterClosed().subscribe(i=>{!0===i&&(this.tasksService.removeTask(t.id),this.router.navigate(["/home"]))})}ngOnInit(){this.userService.getAllUsers().then(r=>this.allUsers=r).catch(()=>this._snackBar.open("Erreur lors du chargement des utilisateurs","",{duration:5e3}));const t=this.route.snapshot.params.id;this.tasksSubscription=this.tasksService.tasksSubject.subscribe(r=>{if(this.taskToEdit)return;const i=r.find(o=>o.id===t);i&&(this.taskToEdit=i,this.editTaskForm=this.formBuilder.group({id:[i.id,[Sc.required]],name:[i.name,[Sc.required]],urg:[i.urg,[Sc.required]],title:[i.title,[Sc.required]],descriptif:[i.descriptif],createdDate:[i.createdDate||""],statut:[i.statut||""]}))}),this.tasksService.getTasks(),this.tasksService.emitTasks()}editTask(){this.dialog.open(s2,{data:{customMessage:"Etes-vous s\xfbr(e) de vouloir modifier la t\xe2che"}}).afterClosed().subscribe(r=>{!0===r&&(this.tasksService.updateTaskById(this.route.snapshot.params.id,this.editTaskForm.value),this.router.navigate(["/home"]),this._snackBar.open("T\xe2che modifi\xe9e","avec succ\xe8s !!",{duration:5e3}))})}goBack(){this.router.navigate(["/home"])}ngOnDestroy(){this.tasksSubscription&&this.tasksSubscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)(Re(Zm),Re(qy),Re(gw),Re(ng),Re(Ns),Re(sp),Re(xd))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-edit-task"]],decls:54,vars:1,consts:[[1,"flex","justify-center"],[1,"card-fun","p-6","w-full","max-w-lg"],[1,"font-display","text-lg","font-bold","text-gray-700","mb-4"],[1,"space-y-4",3,"formGroup"],["for","name",1,"block","mb-1","text-sm","font-medium","text-gray-600"],["formControlName","name","id","name",1,"input-fun","w-full"],["value","","disabled",""],["value","Tout le monde"],[3,"value"],["for","statut",1,"block","mb-1","text-sm","font-medium","text-gray-600"],["formControlName","statut","id","statut","required","",1,"input-fun","w-full"],["value","Nouveau"],["value","En cours"],["value","Fait"],["value","Bloque"],["value","Archive"],["for","urg",1,"block","mb-1","text-sm","font-medium","text-gray-600"],["formControlName","urg","id","urg","required","",1,"input-fun","w-full"],["value","Urgent"],["value","Relativement urgent"],["value","Pas urgent"],["for","title",1,"block","mb-1","text-sm","font-medium","text-gray-600"],["formControlName","title","id","title","placeholder","Ex. Mon titre...","required","",1,"input-fun","w-full"],[1,"block","mb-1","text-sm","font-medium","text-gray-600"],["formControlName","descriptif","rows","5","placeholder","D\xe9crivez la t\xe2che...",1,"input-fun","w-full","resize-y"],[1,"flex","justify-end","gap-3","pt-2"],["type","button",1,"px-4","py-2","rounded-xl","border","border-gray-200","text-gray-600","hover:bg-gray-50","transition-colors","font-medium","text-sm",3,"click"],["type","button",1,"px-4","py-2","rounded-xl","bg-red-50","text-red-500","hover:bg-red-100","transition-colors","font-medium","text-sm",3,"click"],["type","submit",1,"btn-gradient","px-6","py-2",3,"click"]],template:function(r,i){1&r&&(ce(0,"div",0)(1,"div",1)(2,"h3",2),fe(3,"\u{1f4dd} Editer la Tache"),he(),ce(4,"form",3)(5,"div")(6,"label",4),fe(7,"Tache pour"),he(),ce(8,"select",5)(9,"option",6),fe(10,"Choisir..."),he(),ce(11,"option",7),fe(12,"Tout le monde"),he(),ki(13,uCe,2,2,"option",8,iu),he()(),ce(15,"div")(16,"label",9),fe(17,"Statut"),he(),ce(18,"select",10)(19,"option",11),fe(20,"Nouveau"),he(),ce(21,"option",12),fe(22,"En cours"),he(),ce(23,"option",13),fe(24,"Fait"),he(),ce(25,"option",14),fe(26,"Bloque"),he(),ce(27,"option",15),fe(28,"Archive"),he()()(),ce(29,"div")(30,"label",16),fe(31,"Priorite"),he(),ce(32,"select",17)(33,"option",18),fe(34,"Urgent !"),he(),ce(35,"option",19),fe(36,"Relativement urgent"),he(),ce(37,"option",20),fe(38,"Pas Urgent"),he()()(),ce(39,"div")(40,"label",21),fe(41,"Titre"),he(),rn(42,"input",22),he(),ce(43,"div")(44,"label",23),fe(45,"Descriptif"),he(),rn(46,"textarea",24),he(),ce(47,"div",25)(48,"button",26),Nt("click",function(){return i.goBack()}),fe(49,"Retour"),he(),ce(50,"button",27),Nt("click",function(){return i.onDelete(i.taskToEdit)}),fe(51,"Supprimer"),he(),ce(52,"button",28),Nt("click",function(){return i.editTask()}),fe(53,"Modifier"),he()()()()()),2&r&&(Te(4),Bn("formGroup",i.editTaskForm),Te(9),Ai(i.allUsers))},dependencies:[_w,Uy,jy,Hy,Cd,Cp,Hh,By,$y,Dg,Cg],encapsulation:2})}}return e})();const hCe=["previewImg"];function fCe(e,n){1&e&&(ce(0,"span",15),fe(1,"Charge !"),he())}function pCe(e,n){if(1&e){const t=Hr();ce(0,"div",7)(1,"h3",8),fe(2,"\u270f\ufe0f Modifier le profil"),he(),ce(3,"form",9),Nt("ngSubmit",function(){return Bt(t),cn(Qe().onSubmitProfileForm())}),ce(4,"div",10),rn(5,"img",11),ce(6,"label",12)(7,"span",13),fe(8,"Choisir une photo"),he(),ce(9,"input",14),Nt("change",function(i){return Bt(t),cn(Qe().detectFiles(i))}),he()(),mn(10,fCe,2,0,"span",15),he(),ce(11,"div")(12,"label",16),fe(13,"Prenom"),he(),rn(14,"input",17),he(),ce(15,"div")(16,"label",18),fe(17,"Telephone"),he(),rn(18,"input",19),he(),ce(19,"div")(20,"label",20),fe(21,"Email"),he(),rn(22,"input",21),he(),ce(23,"div")(24,"label",22),fe(25,"Anniversaire"),he(),rn(26,"input",23),he(),ce(27,"button",24),fe(28,"Enregistrer"),he()()(),ce(29,"div",25)(30,"h3",8),fe(31,"\u{1f4c5} Google Calendar"),he(),ce(32,"div",26),rn(33,"div",27),ce(34,"span",28),fe(35,"Connecte automatiquement via votre compte Google"),he()()()}if(2&e){const t=Qe();Te(3),Bn("formGroup",t.profileForm),Te(2),Bn("src",t.fileUrl,bl),Te(5),gn(t.fileUploaded?10:-1),Te(17),Bn("disabled",t.profileForm.invalid)}}let mCe=(()=>{class e{constructor(t,r,i){this.editProfileService=t,this._snackBar=r,this.formBuilder=i,this.user=null,this.fileIsUploading=!1,this.fileUploaded=!1}ngOnInit(){this.userSubscription=this.editProfileService.getUserData().subscribe(t=>{this.user=t,this.user&&this.initForm(this.user)},()=>{this._snackBar.open("Erreur lors du chargement du profil","",{duration:5e3})})}initForm(t){this.profileForm=this.formBuilder.group({emailControl:[{value:t?.email||"",disabled:!0},[Sc.required,Sc.email]],displayNameControl:[t?.displayName||""],phoneNumberControl:[t?.phoneNumber||""],photoURLControl:[""],dateBirthControl:[t?.dateBirth?t.dateBirth.substring(0,10):""]}),this.fileUrl=this.user?.photoURL||"https://i.pinimg.com/originals/2f/15/f2/2f15f2e8c688b3120d3d26467b06330c.jpg"}loadFile(t){this.fileIsUploading=!0,this.editProfileService.deleteOldAvatar(this.user?.photoURL||"").then(()=>this.editProfileService.uploadFile(t)).then(i=>{this.fileUrl=i,this.profileForm.get("photoURLControl")?.setValue(""),this.fileIsUploading=!1,this.fileUploaded=!0})}detectFiles(t){const r=t.target;r.files?.[0]&&this.loadFile(r.files[0])}onSubmitProfileForm(){const t=this.user?.uid;if(!t)return;const r=this.profileForm.value;this.editProfileService.updateUserData(t,{displayName:r.displayNameControl,phoneNumber:r.phoneNumberControl,photoURL:this.fileUrl,dateBirth:r.dateBirthControl}).then(()=>this._snackBar.open("Profil mis a jour","avec succes !!",{duration:5e3})).catch(()=>this._snackBar.open("Erreur lors de la mise a jour","",{duration:5e3}))}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)(Re(ND),Re(ng),Re(gw))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-user-profile"]],viewQuery:function(r,i){if(1&r&&Mm(hCe,5),2&r){let o;Kf(o=Yf())&&(i.previewImg=o.first)}},decls:10,vars:4,consts:[[1,"card-fun","overflow-hidden","mb-6"],[1,"h-24","bg-gradient-to-r","from-family-pink","via-family-coral","to-family-orange"],[1,"px-6","pb-6","-mt-10","flex","items-end","gap-4"],["alt","Photo de profil",1,"h-20","w-20","rounded-full","object-cover","ring-4","ring-white","shadow-lg",3,"src"],[1,"pb-1"],[1,"font-display","text-xl","font-bold","text-gray-700"],[1,"text-sm","text-gray-400"],[1,"card-fun","p-6","max-w-lg","mx-auto"],[1,"font-display","text-lg","font-bold","text-gray-700","mb-4"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"flex","items-center","gap-4"],["alt","Avatar",1,"h-14","w-14","rounded-full","object-cover","ring-2","ring-family-pink/30",3,"src"],[1,"block"],[1,"sr-only"],["formControlName","photoURLControl","type","file","accept","image/*",1,"block","w-full","text-sm","text-gray-500","file:mr-3","file:py-2","file:px-4","file:rounded-full","file:border-0","file:text-sm","file:font-semibold","file:bg-family-pink/10","file:text-family-pink","hover:file:bg-family-pink/20","transition-colors",3,"change"],[1,"text-family-green","text-sm","font-medium"],["for","prenom",1,"block","mb-1","text-sm","font-medium","text-gray-600"],["type","text","id","prenom","formControlName","displayNameControl","placeholder","Prenom",1,"input-fun","w-full"],["for","phone",1,"block","mb-1","text-sm","font-medium","text-gray-600"],["type","tel","id","phone","formControlName","phoneNumberControl","placeholder","Votre numero",1,"input-fun","w-full"],["for","email",1,"block","mb-1","text-sm","font-medium","text-gray-600"],["type","email","id","email","formControlName","emailControl","placeholder","Votre email",1,"input-fun","w-full"],["for","dateBirth",1,"block","mb-1","text-sm","font-medium","text-gray-600"],["type","date","id","dateBirth","formControlName","dateBirthControl",1,"input-fun","w-full"],["type","submit",1,"btn-gradient","w-full",3,"disabled"],[1,"card-fun","p-6","max-w-lg","mx-auto","mt-6"],[1,"flex","items-center","gap-3"],[1,"w-3","h-3","rounded-full","bg-family-green"],[1,"text-sm","text-gray-600"]],template:function(r,i){1&r&&(ce(0,"div",0),rn(1,"div",1),ce(2,"div",2),rn(3,"img",3),ce(4,"div",4)(5,"h2",5),fe(6),he(),ce(7,"p",6),fe(8),he()()()(),mn(9,pCe,36,4)),2&r&&(Te(3),Bn("src",i.fileUrl,bl),Te(3),on((null==i.user?null:i.user.displayName)||"Mon Profil"),Te(2),on(null==i.user?null:i.user.email),Te(),gn(i.profileForm?9:-1))},dependencies:[_w,Uy,Cd,Hh,By,Dg,Cg],encapsulation:2})}}return e})();const Dp={production:!0,googleCalendar:{apiKey:"AIzaSyB4DkZu3SqYLJCrxFGS7DybGGKUBrlJqaI",clientId:"728695329604-70417p57psoofhqlsio6qjv705a0ieqf.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest","https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scopes:"https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/drive.file",familyCalendarId:"family12498967542838679084@group.calendar.google.com"}},gCe=(e,n)=>n.id;function _Ce(e,n){if(1&e&&(ce(0,"option",16),fe(1),he()),2&e){const t=n.$implicit;Bn("value",t.id),Te(),on(t.summary)}}function yCe(e,n){if(1&e&&(ce(0,"div")(1,"label",3),fe(2,"Agenda"),he(),ce(3,"select",15),ki(4,_Ce,2,2,"option",16,gCe),he()()),2&e){const t=Qe();Te(4),Ai(t.data.calendars)}}function vCe(e,n){1&e&&(ce(0,"div",9)(1,"div")(2,"label",3),fe(3,"Heure debut"),he(),rn(4,"input",17),he(),ce(5,"div")(6,"label",3),fe(7,"Heure fin"),he(),rn(8,"input",18),he()())}let bCe=(()=>{class e{constructor(t,r,i){this.fb=t,this.dialogRef=r,this.data=i;const o=i.date.toISOString().substring(0,10),a=Dp.googleCalendar.familyCalendarId,c=i.calendars?.find(p=>p.id===a)?.id||i.calendars?.find(p=>p.primary)?.id||"primary";this.eventForm=this.fb.group({title:["",Sc.required],description:[""],calendarId:[c],allDay:[!0],startDate:[o,Sc.required],endDate:[o,Sc.required],startTime:["09:00"],endTime:["10:00"]})}onCancel(){this.dialogRef.close()}onSubmit(){if(this.eventForm.invalid)return;const t=this.eventForm.value;this.dialogRef.close({id:"",title:t.title,description:t.description,allDay:t.allDay,calendarId:t.calendarId||"primary",startDate:t.allDay?t.startDate:`${t.startDate}T${t.startTime}:00`,endDate:t.allDay?t.endDate:`${t.endDate}T${t.endTime}:00`})}static{this.\u0275fac=function(r){return new(r||e)(Re(gw),Re(rg),Re(_1))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-add-event-dialog"]],decls:32,vars:4,consts:[[1,"p-6"],[1,"font-display","text-lg","font-bold","text-gray-700","mb-4"],[1,"space-y-4",3,"formGroup"],[1,"block","mb-1","text-sm","font-medium","text-gray-600"],["formControlName","title","placeholder","Ex. Reunion famille...","required","",1,"input-fun","w-full"],["formControlName","description","rows","3","placeholder","Details...",1,"input-fun","w-full","resize-y"],[1,"flex","items-center","gap-2","mb-2"],["type","checkbox","formControlName","allDay","id","allDay",1,"rounded"],["for","allDay",1,"text-sm","text-gray-600"],[1,"grid","grid-cols-2","gap-3"],["formControlName","startDate","type","date",1,"input-fun","w-full"],["formControlName","endDate","type","date",1,"input-fun","w-full"],[1,"flex","justify-end","gap-3","pt-2"],["type","button",1,"px-4","py-2","rounded-xl","border","border-gray-200","text-gray-600","hover:bg-gray-50","transition-colors","font-medium","text-sm",3,"click"],["type","button",1,"btn-gradient","px-6","py-2",3,"click","disabled"],["formControlName","calendarId",1,"input-fun","w-full"],[3,"value"],["formControlName","startTime","type","time",1,"input-fun","w-full"],["formControlName","endTime","type","time",1,"input-fun","w-full"]],template:function(r,i){if(1&r&&(ce(0,"div",0)(1,"h2",1),fe(2,"Nouvel evenement"),he(),ce(3,"form",2)(4,"div")(5,"label",3),fe(6,"Titre"),he(),rn(7,"input",4),he(),mn(8,yCe,6,0,"div"),ce(9,"div")(10,"label",3),fe(11,"Description"),he(),rn(12,"textarea",5),he(),ce(13,"div",6),rn(14,"input",7),ce(15,"label",8),fe(16,"Toute la journee"),he()(),ce(17,"div",9)(18,"div")(19,"label",3),fe(20,"Debut"),he(),rn(21,"input",10),he(),ce(22,"div")(23,"label",3),fe(24,"Fin"),he(),rn(25,"input",11),he()(),mn(26,vCe,9,0,"div",9),ce(27,"div",12)(28,"button",13),Nt("click",function(){return i.onCancel()}),fe(29," Annuler "),he(),ce(30,"button",14),Nt("click",function(){return i.onSubmit()}),fe(31," Creer "),he()()()()),2&r){let o;Te(3),Bn("formGroup",i.eventForm),Te(5),gn(i.data.calendars&&i.data.calendars.length>1?8:-1),Te(18),gn(null!=(o=i.eventForm.get("allDay"))&&o.value?-1:26),Te(4),Bn("disabled",i.eventForm.invalid)}},dependencies:[_w,Uy,jy,Hy,Cd,EN,Cp,Hh,By,$y,Dg,Cg],encapsulation:2})}}return e})();function wCe(e,n){if(1&e&&($t(0,"div",5)(1,"span",6),fe(2,"\u{1f4c5}"),zt(),$t(3,"span"),fe(4),zt()()),2&e){const t=Qe();Te(4),on(t.data.event.calendarName)}}function xCe(e,n){if(1&e&&($t(0,"span"),fe(1),Lm(2,"date"),zt()),2&e){const t=Qe();Te(),Ko("Toute la journee \xb7 ",Fm(2,1,t.data.event.startDate,"EEEE d MMMM yyyy","","fr"))}}function ECe(e,n){if(1&e&&($t(0,"span"),fe(1),Lm(2,"date"),Lm(3,"date"),zt()),2&e){const t=Qe();Te(),pb("",Fm(2,2,t.data.event.startDate,"EEEE d MMMM yyyy, HH:mm","","fr")," \u2014 ",Fm(3,7,t.data.event.endDate,"HH:mm","","fr"))}}function CCe(e,n){if(1&e&&($t(0,"div",7)(1,"span",11),fe(2,"\u{1f4cd}"),zt(),$t(3,"span"),fe(4),zt()()),2&e){const t=Qe();Te(4),on(t.data.event.location)}}function DCe(e,n){if(1&e&&($t(0,"div",5)(1,"span",6),fe(2,"\u{1f464}"),zt(),$t(3,"span"),fe(4,"Cree par : "),$t(5,"span",12),fe(6),zt()()()),2&e){const t=Qe();Te(6),on(t.data.event.creatorName)}}function TCe(e,n){if(1&e&&($t(0,"div",8),fe(1),zt()),2&e){const t=Qe();Te(),on(t.data.event.description)}}let SCe=(()=>{class e{constructor(t,r){this.dialogRef=t,this.data=r}close(){this.dialogRef.close()}static{this.\u0275fac=function(r){return new(r||e)(Re(rg),Re(_1))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-event-detail-dialog"]],decls:18,vars:8,consts:[[1,"p-6"],[1,"flex","items-center","gap-3","mb-4"],[1,"w-3","h-3","rounded-full","shrink-0"],[1,"font-display","text-lg","font-bold","text-gray-700"],[1,"space-y-3","text-sm"],[1,"flex","items-center","gap-2","text-gray-500"],[1,"w-5","text-center"],[1,"flex","items-start","gap-2","text-gray-500"],[1,"mt-3","p-3","bg-gray-50","rounded-xl","text-gray-600","text-sm","whitespace-pre-wrap"],[1,"flex","justify-end","pt-4"],[1,"px-4","py-2","rounded-xl","border","border-gray-200","text-gray-600","hover:bg-gray-50","transition-colors","font-medium","text-sm",3,"click"],[1,"w-5","text-center","shrink-0"],[1,"font-medium","text-gray-600"]],template:function(r,i){1&r&&($t(0,"div",0)(1,"div",1),od(2,"div",2),$t(3,"h2",3),fe(4),zt()(),$t(5,"div",4),mn(6,wCe,5,1,"div",5),$t(7,"div",5)(8,"span",6),fe(9,"\u{1f550}"),zt(),mn(10,xCe,3,6,"span")(11,ECe,4,12,"span"),zt(),mn(12,CCe,5,1,"div",7),mn(13,DCe,7,1,"div",5),mn(14,TCe,2,1,"div",8),zt(),$t(15,"div",9)(16,"button",10),da("click",function(){return i.close()}),fe(17," Fermer "),zt()()()),2&r&&(Te(2),G_("background-color",i.data.event.color||"#4285f4"),Te(2),on(i.data.event.title),Te(2),gn(i.data.event.calendarName?6:-1),Te(4),gn(i.data.event.allDay?10:11),Te(2),gn(i.data.event.location?12:-1),Te(),gn(i.data.event.creatorName?13:-1),Te(),gn(i.data.event.description?14:-1))},dependencies:[ey,Ab],encapsulation:2})}}return e})(),oT=(()=>{class e{constructor(t){this.authService=t,this.gapiLoaded=!1,this.tokenClient=null,this.accessToken=null,this.googleEmail=null,this.signInResolve=null,this.connectionChanged=new K,this.authService.googleToken$.subscribe(r=>{this.setToken(r)}),V1(_s,r=>{r&&!this.accessToken&&setTimeout(()=>{this.accessToken||this.requestTokenSilently()},1500)})}requestTokenSilently(){var t=this;return _e(function*(){try{yield t.loadGapi(),yield t.initTokenClient(),t.tokenClient&&t.tokenClient.requestAccessToken({prompt:""})}catch{}})()}setToken(t){this.accessToken=t,this.loadGapi().then(()=>{gapi.client.setToken({access_token:t})}).catch(()=>{}),this.fetchGoogleEmail(),this.saveConnectionStatus(!0),this.connectionChanged.next(!0)}loadGapi(){var t=this;return this.gapiLoaded?Promise.resolve():new Promise((r,i)=>{const o=()=>{typeof gapi>"u"?setTimeout(o,200):gapi.load("client",_e(function*(){try{yield gapi.client.init({discoveryDocs:Dp.googleCalendar.discoveryDocs}),t.gapiLoaded=!0,r()}catch(a){i(a)}}))};o()})}initTokenClient(){return new Promise(t=>{const r=()=>{typeof google>"u"||!google.accounts?.oauth2?setTimeout(r,200):(this.tokenClient=google.accounts.oauth2.initTokenClient({client_id:Dp.googleCalendar.clientId,scope:Dp.googleCalendar.scopes,callback:i=>{i.error?this.signInResolve&&(this.signInResolve(!1),this.signInResolve=null):(this.accessToken=i.access_token||null,this.accessToken&&(gapi.client.setToken({access_token:this.accessToken}),this.fetchGoogleEmail()),this.saveConnectionStatus(!!this.accessToken),this.connectionChanged.next(!!this.accessToken),this.signInResolve&&(this.signInResolve(!!this.accessToken),this.signInResolve=null))}}),t())};r()})}signIn(){return new Promise(t=>{this.tokenClient?(this.signInResolve=t,this.tokenClient.requestAccessToken({prompt:"consent"})):t(!1)})}signOut(){if(this.accessToken){try{google.accounts.oauth2.revoke(this.accessToken)}catch{}try{gapi.client.setToken(null)}catch{}this.accessToken=null,this.googleEmail=null,this.saveConnectionStatus(!1),this.connectionChanged.next(!1)}}isConnected(){return!!this.accessToken}getAccessToken(){return this.accessToken}getGoogleEmail(){return this.googleEmail}fetchGoogleEmail(){var t=this;return _e(function*(){try{const i=yield(yield fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${t.accessToken}`}})).json();t.googleEmail=i.email||null}catch{t.googleEmail=null}})()}saveConnectionStatus(t){const r=_s.currentUser?.uid;r&&TD(Jr(li,`/users/${r}`),{googleCalendar:{connected:t,calendarId:"primary"}})}static{this.\u0275fac=function(r){return new(r||e)(wt(xd))}}static{this.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),ICe=(()=>{class e{constructor(t,r){this.googleAuth=t,this.authService=r,this.events=[],this.eventsSubject=new K,this.calendars=[],this.calendarsSubject=new K}emitEvents(){this.eventsSubject.next(this.events)}ensureToken(){const t=this.googleAuth.getAccessToken();t&&gapi.client.setToken({access_token:t})}getCalendars(){var t=this;return _e(function*(){if(!t.googleAuth.isConnected())return[];try{yield t.googleAuth.loadGapi(),t.ensureToken();const r=yield gapi.client.calendar.calendarList.list();console.log("Calendar list response:",r.result.items?.length,"calendars");const i=(r.result.items||[]).filter(a=>{const c=a.id||"";return!(c.includes("#weeknum")||c.includes("#contacts")||c.includes("#holiday")||c.includes("addressbook")||c.endsWith("#birthday@group.v.calendar.google.com"))});t.calendars=i.map(a=>({id:a.id,summary:a.summary||a.id,backgroundColor:a.backgroundColor||"#4285f4",primary:!!a.primary}));const o=Dp.googleCalendar.familyCalendarId;return o&&!t.calendars.find(a=>a.id===o)&&t.calendars.push({id:o,summary:"Famille",backgroundColor:"#e67c73"}),t.calendarsSubject.next(t.calendars),t.calendars}catch{return[]}})()}getEvents(t,r){var i=this;return _e(function*(){if(!i.googleAuth.isConnected())return[];try{yield i.googleAuth.loadGapi(),i.ensureToken(),0===i.calendars.length&&(yield i.getCalendars());const o=_s.currentUser,a=i.calendars.map(function(){var _=_e(function*(x){try{return((yield gapi.client.calendar.events.list({calendarId:x.id,timeMin:t.toISOString(),timeMax:r.toISOString(),showDeleted:!1,singleEvents:!0,orderBy:"startTime"})).result.items||[]).map(A=>({id:A.id,title:A.summary||"(Sans titre)",description:A.description||"",startDate:A.start?.dateTime||A.start?.date||"",endDate:A.end?.dateTime||A.end?.date||"",allDay:!!A.start?.date,color:x.backgroundColor,calendarId:x.id,calendarName:x.summary,location:A.location||"",creatorUid:o?.uid||"",creatorName:A.creator?.displayName||A.creator?.email||""}))}catch(D){return console.error("Error fetching events from",x.id,D),[]}});return function(x){return _.apply(this,arguments)}}()),c=yield Promise.all(a),p=[];return c.forEach(_=>p.push(..._)),console.log("Total events fetched:",p.length,"from",i.calendars.length,"calendars"),p.sort((_,x)=>_.startDate.localeCompare(x.startDate)),i.events=p,i.emitEvents(),i.events}catch{return[]}})()}createEvent(t){var r=this;return _e(function*(){if(!r.googleAuth.isConnected())return null;try{yield r.googleAuth.loadGapi(),r.ensureToken();const i=t.calendarId||Dp.googleCalendar.familyCalendarId||"primary",o={summary:t.title,description:t.description||""};t.allDay?(o.start={date:t.startDate.substring(0,10)},o.end={date:t.endDate.substring(0,10)}):(o.start={dateTime:t.startDate},o.end={dateTime:t.endDate});const a=yield gapi.client.calendar.events.insert({calendarId:i,resource:o}),c=r.calendars.find(_=>_.id===i);return{id:a.result.id,title:a.result.summary,description:a.result.description||"",startDate:a.result.start?.dateTime||a.result.start?.date||"",endDate:a.result.end?.dateTime||a.result.end?.date||"",allDay:!!a.result.start?.date,calendarId:i,calendarName:c?.summary||i,color:c?.backgroundColor}}catch{return null}})()}deleteEvent(t){var r=this;return _e(function*(i,o="primary"){if(r.googleAuth.isConnected())try{yield r.googleAuth.loadGapi(),r.ensureToken(),yield gapi.client.calendar.events.delete({calendarId:o,eventId:i})}catch{}}).apply(this,arguments)}static{this.\u0275fac=function(r){return new(r||e)(wt(oT),wt(xd))}}static{this.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const a2=(e,n)=>n.id;function kCe(e,n){if(1&e){const t=Hr();$t(0,"div",4)(1,"div",5),fe(2,"\u{1f4c5}"),zt(),$t(3,"h2",6),fe(4,"Chargement du calendrier..."),zt(),$t(5,"p",7),fe(6,"Connexion a Google Calendar en cours"),zt(),$t(7,"button",8),da("click",function(){return Bt(t),cn(Qe().connectGoogle())}),fe(8," Reconnecter Google Calendar "),zt()()}}function ACe(e,n){if(1&e&&($t(0,"div",24),od(1,"div",25),$t(2,"span",26),fe(3),zt()()),2&e){const t=n.$implicit;Te(),G_("background-color",t.backgroundColor),Te(2),on(t.summary)}}function RCe(e,n){if(1&e&&($t(0,"div",17)(1,"div",23),ki(2,ACe,4,3,"div",24,a2),zt()()),2&e){const t=Qe(2);Te(2),Ai(t.calendars)}}function MCe(e,n){if(1&e&&($t(0,"div",20),fe(1),zt()),2&e){const t=n.$implicit;Te(),on(t)}}function PCe(e,n){if(1&e&&($t(0,"span",32),fe(1),zt()),2&e){const t=Qe(2).$implicit,r=Qe(3);Te(),Ko("S",r.getWeekNumber(t))}}function OCe(e,n){if(1&e){const t=Hr();$t(0,"div",34),da("click",function(i){const o=Bt(t).$implicit;return Qe(5).viewEvent(o),cn(i.stopPropagation())}),fe(1),zt()}if(2&e){const t=n.$implicit;G_("background-color",t.color||"#4285f4"),sb("title",t.calendarName?t.calendarName+" \u2014 "+t.title:t.title),Te(),Ko(" ",t.title," ")}}function NCe(e,n){if(1&e){const t=Hr();$t(0,"div",29),da("click",function(){Bt(t);const i=Qe().$implicit;return cn(Qe(3).openAddEvent(i))}),$t(1,"div",30)(2,"span",31),fe(3),zt(),mn(4,PCe,2,1,"span",32),zt(),ki(5,OCe,2,4,"div",33,a2),zt()}if(2&e){const t=Qe().$implicit,r=Qe(3);Dl("bg-gradient-to-br",r.isToday(t))("from-family-pink/10",r.isToday(t))("to-family-orange/10",r.isToday(t))("border-family-pink",r.isToday(t))("border-gray-100",!r.isToday(t)),Te(2),Dl("text-family-pink",r.isToday(t))("text-gray-600",!r.isToday(t)),Te(),Ko(" ",t.getDate()," "),Te(),gn(r.isMonday(t)?4:-1),Te(),Ai(r.getEventsForDay(t))}}function LCe(e,n){1&e&&od(0,"div",28)}function FCe(e,n){1&e&&mn(0,NCe,7,16,"div",27)(1,LCe,1,0,"div",28),2&e&&gn(n.$implicit?0:1)}function BCe(e,n){if(1&e&&($t(0,"div",21),ki(1,FCe,2,1,null,null,yI),zt()),2&e){const t=n.$implicit;Te(),Ai(t)}}function VCe(e,n){if(1&e&&($t(0,"span",43),fe(1),zt(),fe(2," \xb7 ")),2&e){const t=Qe().$implicit;Te(),on(t.calendarName)}}function zCe(e,n){1&e&&fe(0),2&e&&Ko(" ",Qe().$implicit.creatorName," \xb7 ")}function UCe(e,n){1&e&&fe(0," Toute la journee ")}function jCe(e,n){1&e&&(fe(0),Lm(1,"date")),2&e&&Ko(" ",Fm(1,1,Qe().$implicit.startDate,"d MMM, HH:mm","","fr")," ")}function HCe(e,n){if(1&e){const t=Hr();$t(0,"button",44),da("click",function(i){Bt(t);const o=Qe().$implicit;return Qe(3).deleteEvent(o),cn(i.stopPropagation())}),fe(1," Supprimer "),zt()}}function $Ce(e,n){if(1&e){const t=Hr();$t(0,"div",37),da("click",function(){const i=Bt(t).$implicit;return cn(Qe(3).viewEvent(i))}),$t(1,"div",38),od(2,"div",39),$t(3,"div")(4,"div",40),fe(5),zt(),$t(6,"div",41),mn(7,VCe,3,1),mn(8,zCe,1,1),mn(9,UCe,1,0)(10,jCe,2,6),zt()()(),mn(11,HCe,2,0,"button",42),zt()}if(2&e){const t=n.$implicit,r=Qe(3);Te(2),G_("background-color",t.color||"#4285f4"),Te(3),on(t.title),Te(2),gn(t.calendarName?7:-1),Te(),gn(t.creatorName?8:-1),Te(),gn(t.allDay?9:10),Te(2),gn(r.canDelete(t)?11:-1)}}function qCe(e,n){if(1&e&&($t(0,"div",22)(1,"h3",35),fe(2,"Prochains evenements"),zt(),ki(3,$Ce,12,7,"div",36,a2),zt()),2&e){const t=Qe(2);Te(3),Ai(t.events)}}function GCe(e,n){if(1&e){const t=Hr();$t(0,"div",9)(1,"div",10)(2,"div",11)(3,"button",12),da("click",function(){return Bt(t),cn(Qe().previousMonth())}),fe(4," < "),zt(),$t(5,"h2",13),fe(6),zt(),$t(7,"button",12),da("click",function(){return Bt(t),cn(Qe().nextMonth())}),fe(8," > "),zt(),$t(9,"button",14),da("click",function(){return Bt(t),cn(Qe().goToday())}),fe(10," Aujourd'hui "),zt()(),$t(11,"div",15)(12,"button",16),da("click",function(){return Bt(t),cn(Qe().openAddEvent())}),fe(13," + Nouvel evenement "),zt()()()(),mn(14,RCe,4,0,"div",17),$t(15,"div",18)(16,"div",19),ki(17,MCe,2,1,"div",20,iu),zt(),ki(19,BCe,3,0,"div",21,yI),zt(),mn(21,qCe,5,0,"div",22)}if(2&e){const t=Qe();Te(6),Ko(" ",t.monthLabel," "),Te(8),gn(t.calendars.length>1?14:-1),Te(3),Ai(t.weekDays),Te(2),Ai(t.daysInMonth),Te(2),gn(t.events.length>0?21:-1)}}let WCe=(()=>{class e{constructor(t,r,i,o){this.googleAuth=t,this.calendarService=r,this.dialog=i,this.snackBar=o,this.isConnected=!1,this.currentDate=new Date,this.viewMode="month",this.events=[],this.calendars=[],this.daysInMonth=[],this.weekDays=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"]}ngOnInit(){this.eventsSubscription=this.calendarService.eventsSubject.subscribe(t=>this.events=t.filter(r=>!this.isWeekNumberEvent(r))),this.calendarsSubscription=this.calendarService.calendarsSubject.subscribe(t=>this.calendars=t),this.connectionSubscription=this.googleAuth.connectionChanged.subscribe(t=>{this.isConnected=t,t&&this.loadEvents()}),this.initGoogle(),this.buildCalendarGrid()}initGoogle(){var t=this;return _e(function*(){try{yield t.googleAuth.loadGapi(),yield t.googleAuth.initTokenClient();const r=t.googleAuth.getAccessToken();r&&window.gapi.client.setToken({access_token:r}),t.isConnected=t.googleAuth.isConnected(),t.isConnected&&t.loadEvents()}catch{}})()}connectGoogle(){this.googleAuth.signIn().then(t=>{this.isConnected=t,t&&(this.loadEvents(),this.snackBar.open("Google Calendar connecte !","",{duration:3e3}))})}disconnectGoogle(){this.googleAuth.signOut(),this.isConnected=!1,this.events=[],this.snackBar.open("Google Calendar deconnecte","",{duration:3e3})}loadEvents(){const{start:t,end:r}=this.getMonthRange();this.calendarService.getEvents(t,r)}getMonthRange(){const t=this.currentDate.getFullYear(),r=this.currentDate.getMonth();return{start:new Date(t,r,1),end:new Date(t,r+1,0,23,59,59)}}buildCalendarGrid(){const t=this.currentDate.getFullYear(),r=this.currentDate.getMonth(),i=new Date(t,r,1),o=new Date(t,r+1,0);let a=i.getDay()-1;a<0&&(a=6);const c=[];for(let p=0;p<a;p++)c.push(null);for(let p=1;p<=o.getDate();p++)c.push(new Date(t,r,p));for(;c.length%7!=0;)c.push(null);this.daysInMonth=[];for(let p=0;p<c.length;p+=7)this.daysInMonth.push(c.slice(p,p+7))}isWeekNumberEvent(t){const r=t.title.trim();return/^(S|W|Wk|Semaine|Week)\s?\d{1,2}$/.test(r)||(t.calendarId?.includes("#weeknum")??!1)}getEventsForDay(t){if(!t)return[];const r=t.toISOString().substring(0,10);return this.events.filter(i=>i.startDate.substring(0,10)===r&&!this.isWeekNumberEvent(i))}getWeekNumber(t){if(!t)return 0;const r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));r.setUTCDate(r.getUTCDate()+4-(r.getUTCDay()||7));const i=new Date(Date.UTC(r.getUTCFullYear(),0,1));return Math.ceil(((r.getTime()-i.getTime())/864e5+1)/7)}isMonday(t){return!!t&&1===t.getDay()}isToday(t){if(!t)return!1;const r=new Date;return t.getDate()===r.getDate()&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()}previousMonth(){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()-1,1),this.buildCalendarGrid(),this.isConnected&&this.loadEvents()}nextMonth(){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+1,1),this.buildCalendarGrid(),this.isConnected&&this.loadEvents()}goToday(){this.currentDate=new Date,this.buildCalendarGrid(),this.isConnected&&this.loadEvents()}get monthLabel(){return this.currentDate.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}openAddEvent(t){this.dialog.open(bCe,{data:{date:t||new Date,calendars:this.calendars},width:"400px"}).afterClosed().subscribe(i=>{i&&this.calendarService.createEvent(i).then(o=>{o&&(this.loadEvents(),this.snackBar.open("Evenement cree !","",{duration:3e3}))})})}viewEvent(t){this.dialog.open(SCe,{data:{event:t},width:"400px"})}canDelete(t){const r=this.googleAuth.getGoogleEmail();return!!r&&t.creatorName===r}deleteEvent(t){this.calendarService.deleteEvent(t.id,t.calendarId||"primary").then(()=>{this.loadEvents(),this.snackBar.open("Evenement supprime","",{duration:3e3})})}ngOnDestroy(){this.eventsSubscription&&this.eventsSubscription.unsubscribe(),this.calendarsSubscription&&this.calendarsSubscription.unsubscribe(),this.connectionSubscription&&this.connectionSubscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)(Re(oT),Re(ICe),Re(sp),Re(ng))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-calendar"]],decls:8,vars:2,consts:[[1,"max-w-4xl","mx-auto"],[1,"card-fun","bg-gradient-to-r","from-family-sky","via-family-purple","to-family-pink","p-6","mb-6","text-white"],[1,"font-display","text-2xl","font-bold"],[1,"mt-1","opacity-90"],[1,"card-fun","p-8","text-center"],[1,"text-5xl","mb-4"],[1,"font-display","text-lg","font-bold","text-gray-700","mb-2"],[1,"text-gray-500","mb-6"],[1,"btn-gradient","px-6","py-3","text-lg",3,"click"],[1,"card-fun","p-4","mb-4"],[1,"flex","items-center","justify-between","flex-wrap","gap-3"],[1,"flex","items-center","gap-2"],[1,"p-2","rounded-xl","hover:bg-warm-50","transition-colors","text-gray-600",3,"click"],[1,"font-display","font-bold","text-gray-700","text-lg","capitalize","min-w-[180px]","text-center"],[1,"ml-2","px-3","py-1","rounded-xl","border","border-gray-200","text-sm","text-gray-600","hover:bg-warm-50","transition-colors",3,"click"],[1,"flex","gap-2"],[1,"btn-gradient","px-4","py-2","text-sm",3,"click"],[1,"card-fun","p-3","mb-4"],[1,"card-fun","p-4"],[1,"grid","grid-cols-7","gap-1","mb-2"],[1,"text-center","text-xs","font-semibold","text-gray-500","py-2"],[1,"grid","grid-cols-7","gap-1","mb-1"],[1,"card-fun","p-4","mt-4"],[1,"flex","flex-wrap","gap-3"],[1,"flex","items-center","gap-1.5"],[1,"w-3","h-3","rounded-full"],[1,"text-xs","text-gray-600","font-medium"],[1,"min-h-20","p-1","rounded-xl","border","cursor-pointer","transition-all","hover:shadow-md",3,"bg-gradient-to-br","from-family-pink/10","to-family-orange/10","border-family-pink","border-gray-100"],[1,"min-h-20","p-1","rounded-xl","bg-gray-50/50"],[1,"min-h-20","p-1","rounded-xl","border","cursor-pointer","transition-all","hover:shadow-md",3,"click"],[1,"flex","items-center","justify-between","mb-1"],[1,"text-xs","font-semibold"],[1,"text-[9px]","text-gray-300","font-medium"],[1,"text-[10px]","rounded","px-1","py-0.5","mb-0.5","truncate","text-white","cursor-pointer","hover:opacity-80","transition-opacity",3,"background-color","title"],[1,"text-[10px]","rounded","px-1","py-0.5","mb-0.5","truncate","text-white","cursor-pointer","hover:opacity-80","transition-opacity",3,"click","title"],[1,"font-display","font-bold","text-gray-700","mb-3"],[1,"flex","items-center","justify-between","p-3","rounded-xl","hover:bg-warm-50","transition-colors","mb-1","cursor-pointer"],[1,"flex","items-center","justify-between","p-3","rounded-xl","hover:bg-warm-50","transition-colors","mb-1","cursor-pointer",3,"click"],[1,"flex","items-center","gap-3"],[1,"w-2","h-2","rounded-full"],[1,"font-medium","text-gray-700","text-sm"],[1,"text-xs","text-gray-400"],[1,"text-red-300","hover:text-red-500","text-sm","transition-colors"],[1,"font-medium"],[1,"text-red-300","hover:text-red-500","text-sm","transition-colors",3,"click"]],template:function(r,i){1&r&&($t(0,"div",0)(1,"div",1)(2,"h1",2),fe(3,"Calendrier"),zt(),$t(4,"p",3),fe(5,"Vos evenements Google Calendar"),zt()(),mn(6,kCe,9,0,"div",4),mn(7,GCe,22,3),zt()),2&r&&(Te(6),gn(i.isConnected?-1:6),Te(),gn(i.isConnected?7:-1))},dependencies:[ey,Ab],encapsulation:2})}}return e})();const ZCe=[{key:"sante",label:"Sant\xe9",icon:"\u{1f3e5}"},{key:"ecole",label:"\xc9cole",icon:"\u{1f392}"},{key:"administratif",label:"Administratif",icon:"\u{1f4cb}"},{key:"recettes",label:"Recettes",icon:"\u{1f373}"},{key:"autre",label:"Autre",icon:"\u{1f4e6}"}];let KCe=(()=>{class e{constructor(t){this.googleAuth=t,this.files=[],this.filesSubject=new K,this.folderId=null}ensureToken(){const t=this.googleAuth.getAccessToken();t&&gapi.client.setToken({access_token:t})}ensureFolder(){var t=this;return _e(function*(){if(t.folderId)return t.folderId;if(!t.googleAuth.isConnected())throw new Error("Not connected");yield t.googleAuth.loadGapi(),t.ensureToken();const i=(yield gapi.client.drive.files.list({q:"name='FamilyApp' and mimeType='application/vnd.google-apps.folder' and trashed=false",fields:"files(id,name)",spaces:"drive"})).result.files||[];if(i.length>0)return t.folderId=i[0].id,t.folderId;const o=yield gapi.client.drive.files.create({resource:{name:"FamilyApp",mimeType:"application/vnd.google-apps.folder"},fields:"id"});return t.folderId=o.result.id,t.folderId})()}listFiles(){var t=this;return _e(function*(){if(!t.googleAuth.isConnected())return[];try{yield t.googleAuth.loadGapi(),t.ensureToken();const r=yield t.ensureFolder(),i=yield gapi.client.drive.files.list({q:`'${r}' in parents and trashed=false`,fields:"files(id,name,mimeType,webViewLink,iconLink,thumbnailLink,createdTime,properties)",orderBy:"createdTime desc",pageSize:100});return t.files=(i.result.files||[]).map(o=>({id:o.id,name:o.name,mimeType:o.mimeType,webViewLink:o.webViewLink||"",iconLink:o.iconLink||"",thumbnailLink:o.thumbnailLink||"",createdTime:o.createdTime||"",category:o.properties?.category||"autre",uploadedBy:o.properties?.uploadedBy||"",uploadedByName:o.properties?.uploadedByName||""})),t.filesSubject.next(t.files),t.files}catch{return[]}})()}uploadFile(t,r){var i=this;return _e(function*(){if(!i.googleAuth.isConnected())return null;try{yield i.googleAuth.loadGapi(),i.ensureToken();const o=yield i.ensureFolder(),a=_s.currentUser,c={name:t.name,parents:[o],properties:{category:r,uploadedBy:a?.uid||"",uploadedByName:a?.displayName||""}},p=i.googleAuth.getAccessToken(),_=new FormData;_.append("metadata",new Blob([JSON.stringify(c)],{type:"application/json"})),_.append("file",t);const D=yield(yield fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,mimeType,webViewLink,iconLink,thumbnailLink,createdTime,properties",{method:"POST",headers:{Authorization:`Bearer ${p}`},body:_})).json();return{id:D.id,name:D.name,mimeType:D.mimeType,webViewLink:D.webViewLink||"",iconLink:D.iconLink||"",thumbnailLink:D.thumbnailLink||"",createdTime:D.createdTime||"",category:r,uploadedBy:a?.uid||"",uploadedByName:a?.displayName||""}}catch{return null}})()}deleteFile(t){var r=this;return _e(function*(){if(r.googleAuth.isConnected())try{yield r.googleAuth.loadGapi(),r.ensureToken(),yield gapi.client.drive.files.delete({fileId:t})}catch{}})()}static{this.\u0275fac=function(r){return new(r||e)(wt(oT))}}static{this.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const gW=(e,n)=>n.key,YCe=(e,n)=>n.id;function XCe(e,n){if(1&e){const t=Hr();ce(0,"div",3)(1,"div",4),fe(2,"\u{1f4c1}"),he(),ce(3,"h2",5),fe(4,"Google Drive"),he(),ce(5,"p",6),fe(6,"Connecte ton compte Google pour partager des documents avec la famille"),he(),ce(7,"button",7),Nt("click",function(){return Bt(t),cn(Qe().connectGoogle())}),fe(8,"Connecter Google Drive"),he()()}}function QCe(e,n){if(1&e){const t=Hr();ce(0,"button",13),Nt("click",function(){return Bt(t),cn(Qe(2).showUploadForm=!0)}),ls(),ce(1,"svg",14),rn(2,"path",15),he(),Hp(),ce(3,"span",16),fe(4,"Ajouter un document"),he()()}}function JCe(e,n){if(1&e&&(ce(0,"option",19),fe(1),he()),2&e){const t=n.$implicit;Bn("value",t.key),Te(),pb("",t.icon," ",t.label)}}function e1e(e,n){1&e&&(ce(0,"div",22),rn(1,"div",25),fe(2," Upload en cours... "),he())}function t1e(e,n){if(1&e){const t=Hr();ce(0,"div",9)(1,"div",17)(2,"select",18),Nm("ngModelChange",function(i){Bt(t);const o=Qe(2);return W_(o.selectedCategory,i)||(o.selectedCategory=i),cn(i)}),ki(3,JCe,2,3,"option",19,gW),he(),ce(5,"label",20)(6,"input",21),Nt("change",function(i){return Bt(t),cn(Qe(2).onFileSelected(i))}),he()(),mn(7,e1e,3,0,"div",22),ce(8,"div",23)(9,"button",24),Nt("click",function(){return Bt(t),cn(Qe(2).showUploadForm=!1)}),fe(10,"Annuler"),he()()()()}if(2&e){const t=Qe(2);Te(2),Om("ngModel",t.selectedCategory),Te(),Ai(t.categories),Te(4),gn(t.uploading?7:-1)}}function n1e(e,n){1&e&&(ce(0,"div",10),rn(1,"div",26),fe(2," Chargement... "),he())}function r1e(e,n){if(1&e&&(ce(0,"span"),fe(1),he()),2&e){const t=Qe().$implicit;Te(),Ko("",t.uploadedByName," \xb7 ")}}function i1e(e,n){if(1&e){const t=Hr();ce(0,"div",29)(1,"span",30),fe(2),he(),ce(3,"div",31),Nt("click",function(){const i=Bt(t).$implicit;return cn(Qe(3).openFile(i))}),ce(4,"p",32),fe(5),he(),ce(6,"p",33),mn(7,r1e,2,1,"span"),fe(8),Lm(9,"date"),he()(),ce(10,"button",34),Nt("click",function(){const i=Bt(t).$implicit;return cn(Qe(3).deleteFile(i))}),ls(),ce(11,"svg",35),rn(12,"path",36),he()()()}if(2&e){const t=n.$implicit,r=Qe(3);Te(2),on(r.getFileIcon(t.mimeType)),Te(3),on(t.name),Te(2),gn(t.uploadedByName?7:-1),Te(),Ko(" ",Fm(9,4,t.createdTime,"d MMM yyyy","","fr")," ")}}function o1e(e,n){if(1&e&&(ce(0,"div",11)(1,"h3",27)(2,"span"),fe(3),he(),fe(4),he(),ce(5,"div",28),ki(6,i1e,13,9,"div",29,YCe),he()()),2&e){const t=n.$implicit;Te(3),on(t.icon),Te(),Ko(" ",t.label," "),Te(2),Ai(t.files)}}function s1e(e,n){1&e&&(ce(0,"div",12)(1,"div",37),fe(2,"\u{1f4ed}"),he(),ce(3,"p",16),fe(4,"Aucun document"),he(),ce(5,"p",38),fe(6,"Ajoute ton premier document !"),he()())}function a1e(e,n){if(1&e&&(mn(0,QCe,5,0,"button",8),mn(1,t1e,11,2,"div",9),mn(2,n1e,3,0,"div",10),ki(3,o1e,8,2,"div",11,gW),mn(5,s1e,7,0,"div",12)),2&e){const t=Qe();gn(t.showUploadForm?-1:0),Te(),gn(t.showUploadForm?1:-1),Te(),gn(t.loading?2:-1),Te(),Ai(t.filesByCategory),Te(2),gn(t.loading||0!==t.files.length?-1:5)}}YI(zA);const l1e=[{path:"auth/signin",component:Fxe},{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",canActivate:[Dd],component:_Ee},{path:"user-profile",canActivate:[Dd],component:mCe},{path:"add-task",canActivate:[Dd],component:Nxe},{path:"photo",canActivate:[Dd],component:XEe},{path:"shopping",canActivate:[Dd],component:cCe},{path:"map",canActivate:[Dd],component:BEe},{path:"calendar",canActivate:[Dd],component:WCe},{path:"documents",canActivate:[Dd],component:(()=>{class e{constructor(t,r,i){this.googleAuth=t,this.driveService=r,this.snackBar=i,this.isConnected=!1,this.files=[],this.categories=ZCe,this.loading=!1,this.uploading=!1,this.showUploadForm=!1,this.selectedCategory="autre"}ngOnInit(){this.filesSub=this.driveService.filesSubject.subscribe(t=>this.files=t),this.connSub=this.googleAuth.connectionChanged.subscribe(t=>{this.isConnected=t,t&&this.loadFiles()}),this.isConnected=this.googleAuth.isConnected(),this.isConnected&&this.loadFiles()}loadFiles(){var t=this;return _e(function*(){t.loading=!0,yield t.driveService.listFiles(),t.loading=!1})()}get filesByCategory(){return this.categories.map(t=>({...t,files:this.files.filter(r=>r.category===t.key)})).filter(t=>t.files.length>0)}connectGoogle(){this.googleAuth.signIn().then(t=>{this.isConnected=t,t&&this.loadFiles()})}onFileSelected(t){const r=t.target;r.files?.length&&(this.uploadFile(r.files[0]),r.value="")}uploadFile(t){var r=this;return _e(function*(){r.uploading=!0;const i=yield r.driveService.uploadFile(t,r.selectedCategory);r.uploading=!1,r.showUploadForm=!1,i&&(yield r.loadFiles(),r.snackBar.open("Document ajoute !","",{duration:3e3}))})()}openFile(t){window.open(t.webViewLink,"_blank")}deleteFile(t){var r=this;return _e(function*(){yield r.driveService.deleteFile(t.id),yield r.loadFiles(),r.snackBar.open("Document supprime","",{duration:3e3})})()}getFileIcon(t){return t.includes("pdf")?"\u{1f4c4}":t.includes("image")?"\u{1f5bc}\ufe0f":t.includes("spreadsheet")||t.includes("excel")?"\u{1f4ca}":t.includes("document")||t.includes("word")?"\u{1f4dd}":t.includes("presentation")||t.includes("powerpoint")?"\u{1f4fd}\ufe0f":"\u{1f4ce}"}ngOnDestroy(){this.filesSub&&this.filesSub.unsubscribe(),this.connSub&&this.connSub.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)(Re(oT),Re(KCe),Re(ng))}}static{this.\u0275cmp=vr({type:e,selectors:[["app-documents"]],decls:6,vars:2,consts:[[1,"max-w-2xl","mx-auto","px-4"],[1,"text-center","mb-6"],[1,"font-display","text-2xl","font-bold","text-gradient"],[1,"card-fun","p-8","text-center"],[1,"text-4xl","mb-4"],[1,"font-display","font-bold","text-gray-700","mb-2"],[1,"text-sm","text-gray-500","mb-4"],[1,"btn-gradient",3,"click"],[1,"w-full","card-fun","p-4","mb-6","flex","items-center","justify-center","gap-2","text-gray-500","hover:text-family-purple","transition-colors"],[1,"card-fun","p-4","mb-6"],[1,"text-center","py-8","text-gray-400"],[1,"mb-4"],[1,"text-center","py-12","text-gray-400"],[1,"w-full","card-fun","p-4","mb-6","flex","items-center","justify-center","gap-2","text-gray-500","hover:text-family-purple","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4v16m8-8H4"],[1,"font-medium"],[1,"space-y-3"],[1,"input-fun","w-full",3,"ngModelChange","ngModel"],[3,"value"],[1,"block"],["type","file",1,"block","w-full","text-sm","text-gray-500","file:mr-3","file:py-2","file:px-4","file:rounded-full","file:border-0","file:text-sm","file:font-semibold","file:bg-family-purple/10","file:text-family-purple","hover:file:bg-family-purple/20","transition-colors",3,"change"],[1,"flex","items-center","gap-2","text-sm","text-gray-500"],[1,"flex","justify-end"],[1,"px-4","py-2","rounded-xl","border","border-gray-200","text-gray-600","hover:bg-gray-50","transition-colors","text-sm","font-medium",3,"click"],[1,"w-4","h-4","border-2","border-family-purple","border-t-transparent","rounded-full","animate-spin"],[1,"w-6","h-6","border-2","border-family-purple","border-t-transparent","rounded-full","animate-spin","mx-auto","mb-2"],[1,"font-display","font-bold","text-sm","text-gray-500","mb-2","flex","items-center","gap-1.5"],[1,"card-fun","overflow-hidden","divide-y","divide-gray-100"],[1,"flex","items-center","gap-3","px-4","py-3","hover:bg-gray-50","transition-colors"],[1,"text-xl","flex-shrink-0"],[1,"flex-1","min-w-0","cursor-pointer",3,"click"],[1,"font-medium","text-gray-700","truncate","hover:text-family-purple","transition-colors"],[1,"text-xs","text-gray-400","truncate"],[1,"text-gray-300","hover:text-red-400","transition-colors","flex-shrink-0",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"text-4xl","mb-3"],[1,"text-sm"]],template:function(r,i){1&r&&(ce(0,"div",0)(1,"div",1)(2,"h1",2),fe(3,"\u{1f5c2}\ufe0f Documents famille"),he()(),mn(4,XCe,9,0,"div",3),mn(5,a1e,6,4),he()),2&r&&(Te(4),gn(i.isConnected?-1:4),Te(),gn(i.isConnected?5:-1))},dependencies:[ey,jN,jy,Hy,Cp,Hh,pw,Ab],styles:["select.input-fun[_ngcontent-%COMP%]{appearance:none;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E\");background-repeat:no-repeat;background-position:right 12px center;padding-right:32px}"]})}}return e})()},{path:"task/edit/:id",canActivate:[Dd],component:dCe}];YI(zA),function lre(){return uk.apply(this,arguments)}(Nwe,{providers:[function fte(e){const n=e?.scheduleInRootZone,t=function hte({ngZoneFactory:e,scheduleInRootZone:n}){return e??=()=>new Jt({...Xz(),scheduleInRootZone:n}),[{provide:Gu,useValue:!1},{provide:Jt,useFactory:e},{provide:js,multi:!0,useFactory:()=>{const t=Z(ute,{optional:!0});return()=>t.initialize()}},{provide:js,multi:!0,useFactory:()=>{const t=Z(pte);return()=>{t.initialize()}}},{provide:$w,useValue:n??Gp}]}({ngZoneFactory:()=>{const r=Xz(e);return r.scheduleInRootZone=n,r.shouldCoalesceEventChangeDetection&&Wo("NgZone_CoalesceEvent"),new Jt(r)},scheduleInRootZone:n});return Oa([{provide:dte,useValue:!0},t])}(),function Sce(e,...n){return Oa([{provide:Zb,multi:!0,useValue:e},[],{provide:Zm,useFactory:N4},{provide:eI,multi:!0,useFactory:L4},n.map(t=>t.\u0275providers)])}(l1e),function soe(){return Wo("NgEagerAnimations"),[...ooe]}(),function fue(...e){const n=[iue,FA,{provide:BA,useExisting:FA},{provide:XC,useFactory:()=>Z(Z4,{optional:!0})??Z(K4)},{provide:Jb,useValue:hue,multi:!0}];for(const t of e)n.push(...t.\u0275providers);return Oa(n)}(),df(fhe,khe,Phe.register("ngsw-worker.js",{enabled:Dp.production,registrationStrategy:"registerWhenStable:30000"})),xd,Dd,qy,o2,ND,{provide:yh,useValue:"fr-FR"}]}).catch(e=>console.error(e))}},Wy=>{Wy(Wy.s=680)}]);